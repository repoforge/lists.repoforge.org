<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r9063 - in /trunk/rpms: clamav/ gdisk/ livecd-tools/ perl-Email-MIME-Creator/ u3-tool/ wine/
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r9063%20-%20in%20/trunk/rpms%3A%20clamav/%20gdisk/%20livecd-tools/%0A%20perl-Email-MIME-Creator/%20u3-tool/%20wine/&In-Reply-To=%3C201008170922.o7H9M2uL021997%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007855.html">
   <LINK REL="Next"  HREF="007857.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r9063 - in /trunk/rpms: clamav/ gdisk/ livecd-tools/ perl-Email-MIME-Creator/ u3-tool/ wine/</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r9063%20-%20in%20/trunk/rpms%3A%20clamav/%20gdisk/%20livecd-tools/%0A%20perl-Email-MIME-Creator/%20u3-tool/%20wine/&In-Reply-To=%3C201008170922.o7H9M2uL021997%40surya.karan.org%3E"
       TITLE="[svn] r9063 - in /trunk/rpms: clamav/ gdisk/ livecd-tools/ perl-Email-MIME-Creator/ u3-tool/ wine/">dag at wieers.com
       </A><BR>
    <I>Tue Aug 17 11:22:02 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007855.html">[svn] r9062 - in /trunk/tools/mrepo: ./ config/ config/dists/
</A></li>
        <LI>Next message: <A HREF="007857.html">[svn] r9064 - in /trunk/rpms: perl-Directory-Scratch-Structured/ perl-Directory-Scratch-Structured/perl-Directory-Scratch-Structured.spec perl-Directory-Scratch/ perl-Directory-Scratch/perl-Directory-Scratch.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7856">[ date ]</a>
              <a href="thread.html#7856">[ thread ]</a>
              <a href="subject.html#7856">[ subject ]</a>
              <a href="author.html#7856">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: Tue Aug 17 10:22:01 2010
New Revision: 9063

URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge?rev=9063&amp;view=rev">http://svn.rpmforge.net/viewvc/rpmforge?rev=9063&amp;view=rev</A>
Log:
Updates

Added:
    trunk/rpms/gdisk/
    trunk/rpms/gdisk/gdisk.spec   (with props)
    trunk/rpms/perl-Email-MIME-Creator/
    trunk/rpms/u3-tool/
    trunk/rpms/u3-tool/u3-tool.spec   (with props)
Modified:
    trunk/rpms/clamav/clamav.spec
    trunk/rpms/livecd-tools/livecd-creator.python24.patch
    trunk/rpms/livecd-tools/livecd-iso-to-pxeboot.sh
    trunk/rpms/livecd-tools/livecd-mayflower.cdbus.patch
    trunk/rpms/livecd-tools/livecd-tools.libata.support.patch
    trunk/rpms/livecd-tools/livecd-tools.spec
    trunk/rpms/wine/wine-test.spec

Modified: trunk/rpms/clamav/clamav.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/clamav/clamav.spec?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/clamav/clamav.spec?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff</A>
==============================================================================
--- trunk/rpms/clamav/clamav.spec (original)
+++ trunk/rpms/clamav/clamav.spec Tue Aug 17 10:22:01 2010
@@ -14,7 +14,7 @@
 Summary: Anti-virus software
 Name: clamav
 Version: 0.96.2
-Release: 1%{?dist}
+Release: 2%{?dist}
 License: GPL
 Group: Applications/System
 URL: <A HREF="http://www.clamav.net/">http://www.clamav.net/</A>
@@ -24,6 +24,7 @@
 Source: <A HREF="http://downloads.sourceforge.net/project/clamav/clamav/%{version">http://downloads.sourceforge.net/project/clamav/clamav/%{version</A>}/clamav-%{version}.tar.gz
 Source1: clamav.init
 Source2: clamav-milter.init
+Patch0: clamav-0.96.2-selinux.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildRequires: bzip2-devel
@@ -106,6 +107,7 @@
 
 %prep
 %setup
+%patch0 -p1
 
 %{__perl} -pi.orig -e 's|/lib\b|/%{_lib}|g;' libtool configure
 
@@ -395,6 +397,9 @@
 %exclude %{_libdir}/libclamunrar_iface.la
 
 %changelog
+* Tue Aug 17 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.96.2-2
+- Added patch that fixes segfault when using SELinux. (Beat Siegenthaler)
+
 * Thu Aug 12 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.96.2-1
 - Updated to release 0.96.2.
 

Added: trunk/rpms/gdisk/gdisk.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/gdisk/gdisk.spec?rev=9063&amp;view=markup">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/gdisk/gdisk.spec?rev=9063&amp;view=markup</A>
==============================================================================
--- trunk/rpms/gdisk/gdisk.spec (added)
+++ trunk/rpms/gdisk/gdisk.spec Tue Aug 17 10:22:01 2010
@@ -1,0 +1,50 @@
+# $Id$
+# Authority: dag
+
+Summary: Fdisk-like partitioning tool for GPT disks
+Name: gdisk
+Version: 0.6.8
+Release: 1%{?dist}
+License: GPLv2
+Group: System Environment/Base
+URL: <A HREF="http://www.rodsbooks.com/gdisk/">http://www.rodsbooks.com/gdisk/</A>
+
+Source: <A HREF="http://dl.sf.net/gptfdisk/gdisk-%{version">http://dl.sf.net/gptfdisk/gdisk-%{version</A>}.tgz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+#BuildRequires: libuuid-devel
+#BuildRequires: popt-devel
+
+%description
+An fdisk-like partitioning tool for GPT disks. GPT fdisk features a
+command-line interface, fairly direct manipulation of partition table
+structures, recovery tools to help you deal with corrupt partition
+tables, and the ability to convert MBR disks to GPT format.
+
+%prep
+%setup
+
+%build
+%{__make} CXXFLAGS=&quot;%{optflags} -D_FILE_OFFSET_BITS=64&quot;
+
+%install
+%{__rm} -rf %{buildroot}
+%{__install} -Dp -m0644 gdisk.8 %{buildroot}%{_mandir}/man8/gdisk.8
+%{__install} -p -m0644 sgdisk.8 %{buildroot}/%{_mandir}/man8/sgdisk.8
+%{__install} -Dp -m0755 gdisk %{buildroot}%{_sbindir}/gdisk
+%{__install} -p -m0755 sgdisk %{buildroot}%{_sbindir}/sgdisk
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files
+%defattr(-, root, root, 0755)
+%doc COPYING README
+%doc %{_mandir}/man8/gdisk.8*
+%doc %{_mandir}/man8/sgdisk.8*
+%{_sbindir}/gdisk
+%{_sbindir}/sgdisk
+
+%changelog
+* Mon Aug 16 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.6.8-1
+- Initial package. (using DAR)

Propchange: trunk/rpms/gdisk/gdisk.spec
------------------------------------------------------------------------------
    svn:eol-style = native

Propchange: trunk/rpms/gdisk/gdisk.spec
------------------------------------------------------------------------------
    svn:keywords = Id Revision

Modified: trunk/rpms/livecd-tools/livecd-creator.python24.patch
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-creator.python24.patch?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-creator.python24.patch?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff</A>
==============================================================================
--- trunk/rpms/livecd-tools/livecd-creator.python24.patch (original)
+++ trunk/rpms/livecd-tools/livecd-creator.python24.patch Tue Aug 17 10:22:01 2010
@@ -1,71 +1,99 @@
-diff -Nur livecd-tools-013.orig/creator/livecd-creator livecd-tools-013/creator/livecd-creator
---- livecd-tools-013.orig/creator/livecd-creator	2007-11-30 12:06:23.000000000 -0500
-+++ livecd-tools-013/creator/livecd-creator	2007-11-30 12:06:44.000000000 -0500
-@@ -563,36 +563,37 @@
-             rpm.addMacro(&quot;_excludedocs&quot;,&quot;1&quot;)
+diff -Nur livecd.orig/imgcreate/creator.py livecd/imgcreate/creator.py
+--- livecd.orig/imgcreate/creator.py	2009-08-18 09:54:35.000000000 -0400
++++ livecd/imgcreate/creator.py	2009-08-18 12:09:28.000000000 -0400
+@@ -553,14 +553,15 @@
+             rpm.addMacro(&quot;_excludedocs&quot;, &quot;1&quot;)
  
          try:
--            for pkg in (self.ksparser.handler.packages.packageList + 
--                        self._getRequiredPackages()):
--                try:
--                    self.ayum.selectPackage(pkg)
--                except yum.Errors.InstallError, e:
--                    if self.ksparser.handler.packages.handleMissing != \
--                           pykickstart.constants.KS_MISSING_IGNORE:
--                        raise InstallationError(&quot;Failed to find package '%s' : %s&quot; % (pkg, e))
--                    else:
--                        print &gt;&gt; sys.stderr, &quot;Unable to find package '%s'; skipping&quot; %(pkg,)
--
--            for group in self.ksparser.handler.packages.groupList:
--                try:
--                    self.ayum.selectGroup(group.name, group.include)
--                except (yum.Errors.InstallError, yum.Errors.GroupsError), e:
--                    if self.ksparser.handler.packages.handleMissing != \
--                           pykickstart.constants.KS_MISSING_IGNORE:
--                        raise InstallationError(&quot;Failed to find group '%s' : %s&quot; % (group.name, e))
--                    else:
--                        print &gt;&gt; sys.stderr, &quot;Unable to find group '%s'; skipping&quot; %(group.name,)
--
--            map(lambda pkg: self.ayum.deselectPackage(pkg),
--                self.ksparser.handler.packages.excludedList +
--                self._getRequiredExcludePackages())
--
--            self.ayum.runInstall()
+-            self.__select_packages(ayum)
+-            self.__select_groups(ayum)
+-            self.__deselect_packages(ayum)
+-            ayum.runInstall()
 -        except yum.Errors.RepoError, e:
--            raise InstallationError(&quot;Unable to download from repo : %s&quot; %(e,))
+-            raise CreatorError(&quot;Unable to download from repo : %s&quot; % (e,))
 -        except yum.Errors.YumBaseError, e:
--            raise InstallationError(&quot;Unable to install: %s&quot; %(e,))
+-            raise CreatorError(&quot;Unable to install: %s&quot; % (e,))
 +            try:
-+                for pkg in (self.ksparser.handler.packages.packageList + 
-+                            self._getRequiredPackages()):
-+                    try:
-+                        self.ayum.selectPackage(pkg)
-+                    except yum.Errors.InstallError, e:
-+                        if self.ksparser.handler.packages.handleMissing != \
-+                               pykickstart.constants.KS_MISSING_IGNORE:
-+                            raise InstallationError(&quot;Failed to find package '%s' : %s&quot; % (pkg, e))
-+                        else:
-+                            print &gt;&gt; sys.stderr, &quot;Unable to find package '%s'; skipping&quot; %(pkg,)
-+
-+                for group in self.ksparser.handler.packages.groupList:
-+                    try:
-+                        self.ayum.selectGroup(group.name, group.include)
-+                    except (yum.Errors.InstallError, yum.Errors.GroupsError), e:
-+                        if self.ksparser.handler.packages.handleMissing != \
-+                               pykickstart.constants.KS_MISSING_IGNORE:
-+                            raise InstallationError(&quot;Failed to find group '%s' : %s&quot; % (group.name, e))
-+                        else:
-+                            print &gt;&gt; sys.stderr, &quot;Unable to find group '%s'; skipping&quot; %(group.name,)
-+                            
-+                map(lambda pkg: self.ayum.deselectPackage(pkg),
-+                    self.ksparser.handler.packages.excludedList +
-+                    self._getRequiredExcludePackages())
-+
-+                self.ayum.runInstall()
++                self.__select_packages(ayum)
++                self.__select_groups(ayum)
++                self.__deselect_packages(ayum)
++                ayum.runInstall()
 +            except yum.Errors.RepoError, e:
-+                raise InstallationError(&quot;Unable to download from repo : %s&quot; %(e,))
++                raise CreatorError(&quot;Unable to download from repo : %s&quot; % (e,))
 +            except yum.Errors.YumBaseError, e:
-+                raise InstallationError(&quot;Unable to install: %s&quot; %(e,))
++                raise CreatorError(&quot;Unable to install: %s&quot; % (e,))
          finally:
-             self.ayum.closeRpmDB()
+             ayum.closeRpmDB()
+             ayum.close()
+@@ -595,11 +596,12 @@
+                 script = &quot;/tmp/&quot; + os.path.basename(path)
  
+             try:
+-                subprocess.call([s.interp, script],
+-                                preexec_fn = preexec, env = env)
+-            except OSError, (err, msg):
+-                raise CreatorError(&quot;Failed to execute %%post script &quot;
+-                                   &quot;with '%s' : %s&quot; % (s.interp, msg))
++                try:
++                    subprocess.call([s.interp, script],
++                                    preexec_fn = preexec, env = env)
++                except OSError, (err, msg):
++                    raise CreatorError(&quot;Failed to execute %%post script &quot;
++                                       &quot;with '%s' : %s&quot; % (s.interp, msg))
+             finally:
+                 os.unlink(path)
+ 
+diff -Nur livecd.orig/tools/image-creator livecd/tools/image-creator
+--- livecd.orig/tools/image-creator	2009-08-18 09:54:35.000000000 -0400
++++ livecd/tools/image-creator	2009-08-18 12:10:15.000000000 -0400
+@@ -59,10 +59,11 @@
+     creator = imgcreate.LoopImageCreator(ks, name)
+ 
+     try:
+-        creator.create()
+-    except imgcreate.CreatorError, e:
+-        print &gt;&gt; sys.stderr, &quot;Error creating image : %s&quot; % e
+-        return 1
++        try:
++            creator.create()
++        except imgcreate.CreatorError, e:
++            print &gt;&gt; sys.stderr, &quot;Error creating image : %s&quot; % e
++            return 1
+     finally:
+         creator.cleanup()
+ 
+diff -Nur livecd.orig/tools/livecd-creator livecd/tools/livecd-creator
+--- livecd.orig/tools/livecd-creator	2009-08-18 09:54:35.000000000 -0400
++++ livecd/tools/livecd-creator	2009-08-18 12:09:28.000000000 -0400
+@@ -111,18 +111,19 @@
+     creator.skip_minimize = options.skip_minimize
+ 
+     try:
+-        creator.mount(options.base_on, options.cachedir)
+-        creator.install()
+-        creator.configure()
+-        if options.give_shell:
+-            print &quot;Launching shell. Exit to continue.&quot;
+-            print &quot;----------------------------------&quot;
+-            creator.launch_shell()
+-        creator.unmount()
+-        creator.package()
+-    except imgcreate.CreatorError, e:
+-        print &gt;&gt; sys.stderr, &quot;Error creating Live CD : %s&quot; % e
+-        return 1
++        try:
++            creator.mount(options.base_on, options.cachedir)
++            creator.install()
++            creator.configure()
++            if options.give_shell:
++                print &quot;Launching shell. Exit to continue.&quot;
++                print &quot;----------------------------------&quot;
++                creator.launch_shell()
++            creator.unmount()
++            creator.package()
++        except imgcreate.CreatorError, e:
++            print &gt;&gt; sys.stderr, &quot;Error creating Live CD : %s&quot; % e
++            return 1
+     finally:
+         creator.cleanup()
+ 

Modified: trunk/rpms/livecd-tools/livecd-iso-to-pxeboot.sh
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-iso-to-pxeboot.sh?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-iso-to-pxeboot.sh?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff</A>
==============================================================================
--- trunk/rpms/livecd-tools/livecd-iso-to-pxeboot.sh (original)
+++ trunk/rpms/livecd-tools/livecd-iso-to-pxeboot.sh Tue Aug 17 10:22:01 2010
@@ -42,8 +42,8 @@
 fi
 
 # Check pxelinux.0 exists.
-if [ ! -f /usr/lib/syslinux/pxelinux.0 ]; then
-    echo &quot;Warning: /usr/lib/syslinux/pxelinux.0 not found.&quot;
+if [ ! -f /usr/share/syslinux/pxelinux.0 -a ! -f /usr/lib/syslinux/pxelinux.0 ]; then
+    echo &quot;Warning: pxelinux.0 not found.&quot;
     echo &quot;Make sure syslinux or pxelinux is installed on this system.&quot;
 fi
 
@@ -95,7 +95,9 @@
 cp $CDMNT/isolinux/vmlinuz0 tftpboot/vmlinuz0
 
 # pxelinux bootloader.
-if [ -f /usr/lib/syslinux/pxelinux.0 ]; then
+if [ -f /usr/share/syslinux/pxelinux.0 ]; then
+    cp /usr/share/syslinux/pxelinux.0 tftpboot
+elif [ -f /usr/lib/syslinux/pxelinux.0 ]; then
     cp /usr/lib/syslinux/pxelinux.0 tftpboot
 else
     echo &quot;Warning: You need to add pxelinux.0 to tftpboot/ subdirectory&quot;

Modified: trunk/rpms/livecd-tools/livecd-mayflower.cdbus.patch
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-mayflower.cdbus.patch?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-mayflower.cdbus.patch?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff</A>
==============================================================================
--- trunk/rpms/livecd-tools/livecd-mayflower.cdbus.patch (original)
+++ trunk/rpms/livecd-tools/livecd-mayflower.cdbus.patch Tue Aug 17 10:22:01 2010
@@ -1,23 +1,23 @@
-diff -Nur livecd-tools-013.orig/creator/mayflower livecd-tools-013/creator/mayflower
---- livecd-tools-013.orig/creator/mayflower	2009-04-06 19:56:24.000000000 -0400
-+++ livecd-tools-013/creator/mayflower	2009-04-07 10:05:33.000000000 -0400
-@@ -383,7 +383,8 @@
+diff -Nur livecd.orig/tools/mayflower livecd/tools/mayflower
+--- livecd.orig/tools/mayflower	2009-08-18 09:54:35.000000000 -0400
++++ livecd/tools/mayflower	2009-08-18 10:13:42.000000000 -0400
+@@ -387,7 +387,8 @@
              ;;
          CDLABEL=*)
-             CDLABEL=\${root#CDLABEL=}
--            echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, ATTRS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt; /etc/udev/rules.d/00-cdlabel.rules
-+            echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt; /etc/udev/rules.d/00-cdlabel.rules
-+            echo &quot;KERNEL==\&quot;sd[a-z]\&quot;, BUS==\&quot;scsi\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
-             echo &quot;KERNEL==\&quot;sr[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
-             echo &quot;KERNEL==\&quot;scd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
-             echo &quot;KERNEL==\&quot;pcd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
-@@ -626,7 +627,8 @@
+             CDLABEL=${root#CDLABEL=}
+-            echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, ATTRS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt; /etc/udev/rules.d/00-cdlabel.rules
++            echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt; /etc/udev/rules.d/00-cdlabel.rules
++            echo &quot;KERNEL==\&quot;sd[a-z]\&quot;, BUS==\&quot;scsi\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
+             echo &quot;KERNEL==\&quot;sr[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
+             echo &quot;KERNEL==\&quot;scd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
+             echo &quot;KERNEL==\&quot;pcd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;root\&quot;&quot; &gt;&gt; /etc/udev/rules.d/00-cdlabel.rules
+@@ -627,7 +628,8 @@
  
      # create rule so udev creates /dev/live symlink on real rootfs
-     if [ -n &quot;\$CDLABEL&quot; ]; then
--       echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, ATTRS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
-+       echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
-+       echo &quot;KERNEL==\&quot;sd[a-z]\&quot;, BUS==\&quot;scsi\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
-        echo &quot;KERNEL==\&quot;sr[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
-        echo &quot;KERNEL==\&quot;scd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
-        echo &quot;KERNEL==\&quot;pcd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;\$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
+     if [ -n &quot;$CDLABEL&quot; ]; then
+-       echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, ATTRS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
++       echo &quot;KERNEL==\&quot;hd[a-z]\&quot;, BUS==\&quot;ide\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
++       echo &quot;KERNEL==\&quot;sd[a-z]\&quot;, BUS==\&quot;scsi\&quot;, SYSFS{removable}==\&quot;1\&quot;, SYSFS{media}==\&quot;cdrom\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
+        echo &quot;KERNEL==\&quot;sr[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
+        echo &quot;KERNEL==\&quot;scd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*
+        echo &quot;KERNEL==\&quot;pcd[0-9]\&quot;, PROGRAM=\&quot;/lib/udev/vol_id -l %N\&quot;, RESULT==\&quot;$CDLABEL\&quot;, SYMLINK+=\&quot;live\&quot;&quot; &gt;&gt; /sysroot/etc/udev/rules.d/50-udev*

Modified: trunk/rpms/livecd-tools/livecd-tools.libata.support.patch
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-tools.libata.support.patch?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-tools.libata.support.patch?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff</A>
==============================================================================
--- trunk/rpms/livecd-tools/livecd-tools.libata.support.patch (original)
+++ trunk/rpms/livecd-tools/livecd-tools.libata.support.patch Tue Aug 17 10:22:01 2010
@@ -1,20 +1,27 @@
-diff -Nur livecd-tools-013.orig/creator/livecd-creator livecd-tools-013/creator/livecd-creator
---- livecd-tools-013.orig/creator/livecd-creator	2009-04-06 19:56:24.000000000 -0400
-+++ livecd-tools-013/creator/livecd-creator	2009-04-06 19:59:28.000000000 -0400
-@@ -904,6 +904,9 @@
-         mcfg.write('MODULES+=&quot;squashfs ext3 ext2 vfat msdos &quot;\n')
-         mcfg.write('MODULES+=&quot;sr_mod sd_mod ide-cd &quot;\n')
+diff -Nur livecd.orig/imgcreate/live.py livecd/imgcreate/live.py
+--- livecd.orig/imgcreate/live.py	2009-08-18 09:54:35.000000000 -0400
++++ livecd/imgcreate/live.py	2009-08-18 14:16:35.000000000 -0400
+@@ -68,7 +68,7 @@
  
-+        if &quot;=ata&quot; in self._modules:
-+            mcfg.write('MODULES+=&quot;libata ahci ata_piix &quot;\n')
-+            self._modules.remove(&quot;=ata&quot;)
-         if &quot;=usb&quot; in self._modules:
-             mcfg.write('MODULES+=&quot;ehci_hcd uhci_hcd ohci_hcd usb_storage usbhid &quot;\n')
-             self._modules.remove(&quot;=usb&quot;)
-diff -Nur livecd-tools-013.orig/creator/mayflower livecd-tools-013/creator/mayflower
---- livecd-tools-013.orig/creator/mayflower	2009-04-06 19:56:24.000000000 -0400
-+++ livecd-tools-013/creator/mayflower	2009-04-06 19:58:12.000000000 -0400
-@@ -103,15 +103,7 @@
+         self.__isodir = None
+ 
+-        self.__modules = [&quot;=ata&quot;, &quot;sym53c8xx&quot;, &quot;aic7xxx&quot;, &quot;=usb&quot;, &quot;=firewire&quot;, &quot;=mmc&quot;]
++        self.__modules = [&quot;sym53c8xx&quot;, &quot;aic7xxx&quot;, &quot;=usb&quot;, &quot;=firewire&quot;, &quot;=mmc&quot;]
+         self.__modules.extend(kickstart.get_modules(self.ks))
+ 
+     #
+@@ -218,6 +218,7 @@
+ 
+         f.write('MODULES+=&quot;squashfs ext3 ext2 vfat msdos &quot;\n')
+         f.write('MODULES+=&quot;sr_mod sd_mod ide-cd &quot;\n')
++        f.write('MODULES+=&quot;libata ahci ata_piix &quot;\n')
+ 
+         for module in self.__modules:
+             if module == &quot;=usb&quot;:
+diff -Nur livecd.orig/tools/mayflower livecd/tools/mayflower
+--- livecd.orig/tools/mayflower	2009-08-18 09:54:35.000000000 -0400
++++ livecd/tools/mayflower	2009-08-18 14:14:30.000000000 -0400
+@@ -107,15 +107,7 @@
      char=$(echo $m | cut -c1)
      if [ $char = '=' ]; then
  	NAME=$(echo $m | cut -c2-)

Modified: trunk/rpms/livecd-tools/livecd-tools.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-tools.spec?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/livecd-tools/livecd-tools.spec?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff</A>
==============================================================================
--- trunk/rpms/livecd-tools/livecd-tools.spec (original)
+++ trunk/rpms/livecd-tools/livecd-tools.spec Tue Aug 17 10:22:01 2010
@@ -3,27 +3,40 @@
 
 # ExclusiveDist: el5
 
+%define python_sitelib %(%{__python} -c 'from distutils import sysconfig; print sysconfig.get_python_lib()')
+
+%define real_name livecd
+
 Summary: Tools for building live CDs
 Name: livecd-tools
-Version: 013
-Release: 9%{?dist}
+Version: 014
+Release: 8%{?dist}
 License: GPL
 Group: System Environment/Base
 URL: <A HREF="http://git.fedoraproject.org/?p=hosted/livecd">http://git.fedoraproject.org/?p=hosted/livecd</A>
 
-Source0: livecd-tools-%{version}.tar.bz2
+Source0: livecd-tools-%{version}.tar.gz
 Source1: livecd-iso-to-pxeboot.sh
 Patch1: livecd-creator.python24.patch
-Patch2: livecd-creator.yumbase_close.patch
-Patch3: livecd-creator.lvm.patch
-Patch4: livecd-creator.installer.patch
-Patch5: livecd-tools.pxeboot.patch
-Patch6: livecd-creator.textmode.patch
-Patch7: livecd-mayflower.cdbus.patch
-Patch8: livecd-tools.libata.support.patch
-Patch9: livecd-creator.append.patch
+Patch2: livecd-creator.xen.patch
+Patch3: livecd-mayflower.pxeboot.patch
+Patch4: livecd-mayflower.cdbus.patch
+Patch5: livecd-tools.libata.support.patch
+Patch6: livecd-creator.extlinux.patch
+Patch7: livecd-tools.checkisomd5.patch
+Patch8: livecd-creator.restorecon.patch
+Patch9: livecd-creator.isomd5sum.patch
+Patch10: livecd-creator.mayflowerconf.patch
+Patch11: livecd-creator.syslinux.patch
+Patch12: livecd-creator.mkisofs.patch
+Patch13: livecd-creator.typo.patch
+Patch15: livecd-tools.persistent-overlay.patch
+Patch16: livecd-creator.terminfo.patch
+Patch17: livecd-creator.minimal-dev.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
+BuildArch: noarch
+BuildRequires: python
 Requires: anaconda-runtime
 Requires: coreutils
 #Requires: dosfstools &gt;= 2.11-8
@@ -35,7 +48,7 @@
 Requires: pykickstart &gt;= 0.43
 Requires: squashfs-tools
 Requires: util-linux
-Requires: yum &gt;= 3.0.0
+Requires: yum &gt;= 3.1.7
 %ifarch %{ix86} x86_64
 Requires: syslinux
 %endif
@@ -49,7 +62,7 @@
 <A HREF="http://fedoraproject.org/wiki/FedoraLiveCD">http://fedoraproject.org/wiki/FedoraLiveCD</A> for more details.
 
 %prep
-%setup
+%setup -n %{real_name}
 %patch1 -p1
 %patch2 -p1
 %patch3 -p1
@@ -59,6 +72,13 @@
 %patch7 -p1
 %patch8 -p1
 %patch9 -p1
+%patch10 -p1
+%patch11 -p1
+%patch12 -p1
+%patch13 -p1
+%patch15 -p1
+%patch16 -p1
+%patch17 -p1
 
 %build
 %{__make} %{?_smp_mflags}
@@ -75,13 +95,53 @@
 %files
 %defattr(-, root, root, 0755)
 %doc AUTHORS COPYING HACKING README
+%{_bindir}/image-creator
 %{_bindir}/livecd-creator
 %{_bindir}/livecd-iso-to-disk
 %{_bindir}/livecd-iso-to-pxeboot
+%{_datadir}/livecd-tools/
 %{_prefix}/lib/livecd-creator/
-%{_datadir}/livecd-tools/
+%dir %{python_sitelib}/imgcreate/
+%{python_sitelib}/imgcreate/*.py
+%{python_sitelib}/imgcreate/*.pyc
+%{python_sitelib}/imgcreate/*.pyo
 
 %changelog
+* Fri Mar 12 2010 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-8
+- Remove selinux patch as it prevented building a LiveCD with selinux in a different state than enforcing
+
+* Wed Oct 28 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-7
+- Fix typo in creator.py
+- Fix &quot;selinux --disabled&quot;
+- Add the persistence feature (persistent overlay) - thanks to Douglas McClendon
+- Add terminfo bits to live initrd
+- Create a minimal /dev instead of bind mounting the host's /dev
+
+* Tue Oct 27 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-6
+- Fix livecd-iso-to-pxeboot.sh script: new location for pxelinux.0
+- Fix livecd-mayflower.pxeboot.patch: don't worry if $thingtomount is a regular file
+
+* Fri Sep 11 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-5
+- Add -T option to mkisofs. This should make the LiveCD compatible with 
+  non-Rock Ridge capable systems.
+
+* Fri Aug 28 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-4
+- Make sure livecd-creator is compatible with newer syslinux releases
+
+* Tue Aug 25 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-3
+- Ensure md5sum implantation is optionnal (patch from Ron Yorston)
+- Keep /etc/mayflower.conf file after initrd creation
+
+* Wed Aug 19 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-2
+- Fix how restorecon is called
+
+* Tue Aug 18 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 014-1
+- Updating to 014
+- Migrating required patches
+- Adding patch for xen (<A HREF="https://bugzilla.redhat.com/show_bug.cgi?id=470564">https://bugzilla.redhat.com/show_bug.cgi?id=470564</A>)
+- Adding patch for extlinux from EPEL
+- Fix path for checkisomd5 in iso-to-disk utility (patch taken from EPEL)
+
 * Tue Apr 07 2009 Patrice Guay &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">patrice.guay at nanotechnologies.qc.ca</A>&gt; - 013-9
 - Add sd[a-z] to mayflower init's CDLABEL udev rules (patch submitted by Brandon Davidson)
 - Add support for libata (patch submitted by Brandon Davidson)

Added: trunk/rpms/u3-tool/u3-tool.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/u3-tool/u3-tool.spec?rev=9063&amp;view=markup">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/u3-tool/u3-tool.spec?rev=9063&amp;view=markup</A>
==============================================================================
--- trunk/rpms/u3-tool/u3-tool.spec (added)
+++ trunk/rpms/u3-tool/u3-tool.spec Tue Aug 17 10:22:01 2010
@@ -1,0 +1,41 @@
+# $Id$
+# Authority: dag
+
+Summary: Tool for controlling the special features of a &quot;U3 smart drive&quot; USB Flash disk
+Name: u3-tool
+Version: 0.3
+Release: 1%{?dist}
+License: GPL
+Group: Applications/File
+URL: <A HREF="http://u3-tool.sourceforge.net/">http://u3-tool.sourceforge.net/</A>
+
+Source: <A HREF="http://dl.sf.net/project/u3-tool/u3-tool/%{version">http://dl.sf.net/project/u3-tool/u3-tool/%{version</A>}/u3-tool-%{version}.tar.gz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+%description
+u3-tool is a tool for controlling the special features of a &quot;U3 smart drive&quot;
+USB Flash disk.
+
+%prep
+%setup
+
+%build
+%configure
+%{__make} %{?_smp_mflags}
+
+%install
+%{__rm} -rf %{buildroot}
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files
+%defattr(-, root, root, 0755)
+%doc AUTHORS ChangeLog COPYING INSTALL NEWS README TODO
+%doc %{_mandir}/man1/u3-tool.1*
+%{_sbindir}/u3-tool
+
+%changelog
+* Mon Aug 16 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.3-1
+- Initial package. (using DAR)

Propchange: trunk/rpms/u3-tool/u3-tool.spec
------------------------------------------------------------------------------
    svn:eol-style = native

Propchange: trunk/rpms/u3-tool/u3-tool.spec
------------------------------------------------------------------------------
    svn:keywords = Id Revision

Modified: trunk/rpms/wine/wine-test.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/wine/wine-test.spec?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/wine/wine-test.spec?rev=9063&amp;r1=9062&amp;r2=9063&amp;view=diff</A>
==============================================================================
--- trunk/rpms/wine/wine-test.spec (original)
+++ trunk/rpms/wine/wine-test.spec Tue Aug 17 10:22:01 2010
@@ -1,7 +1,7 @@
-# $Id: wine.spec 6529 2008-10-31 00:09:09Z dag $
+# $Id: wine-1.0.spec -1   $
 # Authority: dag
 
-# Tag: test
+# Tag: rft
 
 %define _without_freeglut 0
 %define _without_glut 1
@@ -20,28 +20,45 @@
 
 Summary: Windows 16/32/64 bit emulator
 Name: wine
-Version: 1.1.35
+Version: 1.3.0
 Release: 1%{?dist}
-License: LGPL
+License: LGPLv2+
 Group: Applications/Emulators
 URL: <A HREF="http://www.winehq.org/">http://www.winehq.org/</A>
 
-Source: <A HREF="http://dl.sf.net/wine/wine-%{version">http://dl.sf.net/wine/wine-%{version</A>}.tar.bz2
-Patch0: wine-prefixfonts.patch
-Patch1: wine-rpath.patch
+Source: <A HREF="http://dl.sf.net/sourceforge/wine/wine-%{version">http://dl.sf.net/sourceforge/wine/wine-%{version</A>}.tar.bz2
+Patch1: wine-1.2-rpath.patch
+### Fix for RHbz #593140
+Patch100: wine-1.2-fonts.patch
+### Add wine-gecko support
+Patch1000: wine-1.2-gecko.patch 
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
-ExclusiveArch: %{ix86} x86_64
-
-BuildRequires: bison, flex, libstdc++-devel
-BuildRequires: audiofile-devel, esound-devel
-BuildRequires: libjpeg-devel, lcms-devel, fontforge
-BuildRequires: libxml2-devel, libxslt-devel, openldap-devel
-BuildRequires: zlib-devel, ncurses-devel
+BuildRequires: audiofile-devel
+BuildRequires: autoconf
+BuildRequires: bison
+BuildRequires: desktop-file-utils
+BuildRequires: esound-devel
+BuildRequires: flex &gt;= 2.5.35
+BuildRequires: fontforge
+%ifarch x86_64
+BuildRequires: gcc &gt;= 4.4
+%endif
+BuildRequires: icoutils
+BuildRequires: lcms-devel
+BuildRequires: libjpeg-devel
+BuildRequires: libstdc++-devel
+BuildRequires: libxml2-devel
+BuildRequires: libxslt-devel
+BuildRequires: mpg123-devel
+BuildRequires: ncurses-devel
+BuildRequires: openldap-devel
+BuildRequires: openssl-devel 
 BuildRequires: sane-backends-devel
+BuildRequires: unixODBC-devel
+BuildRequires: zlib-devel
 %{!?_without_alsa:BuildRequires: alsa-lib-devel}
 %{!?_without_cups:BuildRequires: cups-devel}
-%{!?_without_freedesktop:BuildRequires: desktop-file-utils}
 %{!?_without_freeglut:BuildRequires: freeglut-devel}
 %{!?_without_glut:BuildRequires: glut-devel}
 %{!?_without_gphoto2:BuildRequires: gphoto2-devel}
@@ -154,7 +171,10 @@
 
 %prep
 %setup
-%patch0
+
+%patch1
+%patch100
+#patch1000
 
 %{__cat} &lt;&lt;EOF &gt;wine-config.desktop
 [Desktop Entry]
@@ -214,16 +234,27 @@
 RETVAL=0
 
 start() {
-    echo -n $&quot;Registering binary handler for Windows applications&quot;
-    /sbin/modprobe binfmt_misc &amp;&gt;/dev/null
-    echo ':windows:M::MZ::%{_bindir}/wine:' &gt;/proc/sys/fs/binfmt_misc/register || :
-    echo ':windowsPE:M::PE::%{_bindir}/wine:' &gt;/proc/sys/fs/binfmt_misc/register || :
+    if [ -e /proc/sys/fs/binfmt_misc/windows ]; then
+        echo -n $&quot;Binary handler for Windows applications already registered&quot;
+    else
+        echo -n $&quot;Registering binary handler for Windows applications: &quot;
+        /sbin/modprobe binfmt_misc &amp;&gt;/dev/null
+        echo ':windows:M::MZ::/usr/bin/wine:' &gt;/proc/sys/fs/binfmt_misc/register || :
+        echo ':windowsPE:M::PE::/usr/bin/wine:' &gt;/proc/sys/fs/binfmt_misc/register || :
+        RETVAL=$?
+        [ $RETVAL -eq 0 ] &amp;&amp; success || failure
+    fi
+    echo
 }
 
 stop() {
     echo -n $&quot;Unregistering binary handler for Windows applications&quot;
-    echo &quot;-1&quot; &gt;/proc/sys/fs/binfmt_misc/windows || :
-    echo &quot;-1&quot; &gt;/proc/sys/fs/binfmt_misc/windowsPE || :
+    echo &quot;-1&quot; &gt;/proc/sys/fs/binfmt_misc/windows
+    RETVAL=$?
+    echo &quot;-1&quot; &gt;/proc/sys/fs/binfmt_misc/windowsPE
+    RETVAL=$((RETVAL + $?))
+    [ $RETVAL -eq 0 ] &amp;&amp; success || failure
+    echo
 }
 
 reload() {
@@ -256,14 +287,14 @@
         stop
         start
         ;;
-    condrestart)
+    condrestart|try-restart)
         if [ -e /proc/sys/fs/binfmt_misc/windows ]; then
             stop
             start
         fi
         ;;
     *)
-        echo $&quot;Usage: $prog {start|stop|status|restart|condrestart}&quot;
+        echo $&quot;Usage: $prog {start|stop|status|restart|condrestart|try-restart}&quot;
         exit 1
 esac
 exit $RETVAL
@@ -272,12 +303,16 @@
 echo &quot;%{_libdir}/wine/&quot; &gt;wine.ld.conf
 
 %build
-%{expand: %%define optflags %%(echo %{optflags} | sed -e 's|-m64|-m32|')}
+export CFLAGS=&quot;%{optflags} -Wno-error&quot;
 %configure \
-    --disable-static \
-    --libdir=&quot;%{_prefix}/lib&quot; \
     --sysconfdir=&quot;%{_sysconfdir}/wine&quot; \
-%{?_without_opengl:--without-opengl} \
+    --disable-tests \
+    --enable-maintainer-mode \
+%ifarch x86_64
+    --enable-win64 \
+%endif 
+    --with-x \
+%{?_without_opengl:--without-opengl}
 %{__make} depend
 %{__make} %{?_smp_mflags}
 
@@ -294,37 +329,30 @@
 %{__install} -Dp -m0755 wine.sysv %{buildroot}%{_initrddir}/wine
 %{__install} -Dp -m0644 wine.ld.conf %{buildroot}%{_sysconfdir}/ld.so.conf.d/wine-%{_arch}.conf
 
-%if %{?_without_freedesktop:1}0
-    %{__install} -Dp -m0644 wine-config.desktop %{buildroot}/etc/X11/applnk/Applications/wine-config.desktop
-    %{__install} -Dp -m0644 wine-fileman.desktop %{buildroot}/etc/X11/applnk/Applications/wine-fileman.desktop
-    %{__install} -Dp -m0644 wine-regedit.desktop %{buildroot}/etc/X11/applnk/Applications/wine-regedit.desktop
-    %{__install} -Dp -m0644 wine-uninstaller.desktop %{buildroot}/etc/X11/applnk/Applications/wine-uninstaller.desktop
-%else
-    desktop-file-install --delete-original             \
-        --vendor=&quot;%{desktop_vendor}&quot;                   \
-        --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
-        %{buildroot}%{_datadir}/applications/wine.desktop
-
-    desktop-file-install                               \
-        --vendor=&quot;%{desktop_vendor}&quot;                   \
-        --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
-        wine-config.desktop
-
-    desktop-file-install                               \
-        --vendor=&quot;%{desktop_vendor}&quot;                   \
-        --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
-        wine-fileman.desktop
-
-    desktop-file-install                               \
-        --vendor=&quot;%{desktop_vendor}&quot;                   \
-        --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
-        wine-regedit.desktop
-
-    desktop-file-install                               \
-        --vendor=&quot;%{desktop_vendor}&quot;                   \
-        --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
-        wine-uninstaller.desktop
-%endif
+desktop-file-install --delete-original             \
+    --vendor=&quot;%{desktop_vendor}&quot;                   \
+    --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
+    %{buildroot}%{_datadir}/applications/wine.desktop
+
+desktop-file-install                               \
+    --vendor=&quot;%{desktop_vendor}&quot;                   \
+    --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
+    wine-config.desktop
+
+desktop-file-install                               \
+    --vendor=&quot;%{desktop_vendor}&quot;                   \
+    --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
+    wine-fileman.desktop
+
+desktop-file-install                               \
+    --vendor=&quot;%{desktop_vendor}&quot;                   \
+    --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
+    wine-regedit.desktop
+
+desktop-file-install                               \
+    --vendor=&quot;%{desktop_vendor}&quot;                   \
+    --dir=&quot;%{buildroot}%{_datadir}/applications&quot;   \
+    wine-uninstaller.desktop
 
 %post core
 /sbin/ldconfig
@@ -377,9 +405,9 @@
 %doc ANNOUNCE AUTHORS COPYING.LIB LICENSE* README VERSION
 %doc documentation/ChangeLog* documentation/README.*
 %doc %{_mandir}/man1/wine.1*
-%doc %{_mandir}/man1/wineprefixcreate.1*
 %doc %{_mandir}/man1/wineserver.1*
 %doc %{_mandir}/*/man1/wine.1*
+%doc %{_mandir}/*/man1/winemaker.1*
 %doc %{_mandir}/*/man1/wineserver.1*
 %config %{_initrddir}/wine
 %config %{_sysconfdir}/ld.so.conf.d/wine-%{_arch}.conf
@@ -398,42 +426,36 @@
 %{_bindir}/winemaker
 %{_bindir}/winemine
 %{_bindir}/winepath
-%{_bindir}/wineprefixcreate
 %{_bindir}/wineserver
 %{_bindir}/wine-preloader
-%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-wine.desktop}
-%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-wine-config.desktop}
-%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-wine-fileman.desktop}
-%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-wine-regedit.desktop}
-%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-wine-uninstaller.desktop}
-%{?_without_freedesktop:/etc/X11/applnk/Applications/wine-config.desktop}
-%{?_without_freedesktop:/etc/X11/applnk/Applications/wine-fileman.desktop}
-%{?_without_freedesktop:/etc/X11/applnk/Applications/wine-regedit.desktop}
-%{?_without_freedesktop:/etc/X11/applnk/Applications/wine-uninstaller.desktop}
+%{_datadir}/applications/%{desktop_vendor}-wine.desktop
+%{_datadir}/applications/%{desktop_vendor}-wine-config.desktop
+%{_datadir}/applications/%{desktop_vendor}-wine-fileman.desktop
+%{_datadir}/applications/%{desktop_vendor}-wine-regedit.desktop
+%{_datadir}/applications/%{desktop_vendor}-wine-uninstaller.desktop
 %dir %{_datadir}/wine/
 %{_datadir}/wine/fonts/
 %{_datadir}/wine/generic.ppd
+%{_datadir}/wine/l_intl.nls
 %{_datadir}/wine/wine.inf
 %{_libdir}/libwine.so.1*
 %dir %{_libdir}/wine/
 %{_libdir}/wine/fakedlls/
 
-### exe16
-%{_libdir}/wine/krnl386.exe16
-%{_libdir}/wine/user.exe16
-
 ### exe16.so
 %{_libdir}/wine/gdi.exe16.so
+%{_libdir}/wine/krnl386.exe16.so
+%{_libdir}/wine/rundll.exe16.so
+%{_libdir}/wine/user.exe16.so
 %{_libdir}/wine/winhelp.exe16.so
 
-### cpl.so
-%{_libdir}/wine/appwiz.cpl.so
-
 ### exe.so
+%{_libdir}/wine/attrib.exe.so
 %{_libdir}/wine/cacls.exe.so
 %{_libdir}/wine/clock.exe.so
 %{_libdir}/wine/cmd.exe.so
 %{_libdir}/wine/control.exe.so
+%{_libdir}/wine/cryptdlg.dll.so
 %{_libdir}/wine/dxdiag.exe.so
 %{_libdir}/wine/eject.exe.so
 %{_libdir}/wine/expand.exe.so
@@ -446,9 +468,11 @@
 %{_libdir}/wine/mshta.exe.so
 %{_libdir}/wine/msiexec.exe.so
 %{_libdir}/wine/net.exe.so
+%{_libdir}/wine/ngen.exe.so
 %{_libdir}/wine/notepad.exe.so
 %{_libdir}/wine/ntoskrnl.exe.so
 %{_libdir}/wine/oleview.exe.so
+%{_libdir}/wine/ping.exe.so
 %{_libdir}/wine/progman.exe.so
 %{_libdir}/wine/reg.exe.so
 %{_libdir}/wine/regedit.exe.so
@@ -457,6 +481,7 @@
 %{_libdir}/wine/rundll32.exe.so
 %{_libdir}/wine/secedit.exe.so
 %{_libdir}/wine/services.exe.so
+%{_libdir}/wine/sc.exe.so
 %{_libdir}/wine/spoolsv.exe.so
 %{_libdir}/wine/start.exe.so
 %{_libdir}/wine/svchost.exe.so
@@ -479,10 +504,11 @@
 %{_libdir}/wine/winver.exe.so
 %{_libdir}/wine/wordpad.exe.so
 %{_libdir}/wine/write.exe.so
+%{_libdir}/wine/wscript.exe.so
 %{_libdir}/wine/xcopy.exe.so
 
-### dll16
-%{_libdir}/wine/wprocs.dll16
+### cpl
+%{_libdir}/wine/appwiz.cpl.so
 
 ### dll16.so
 %{_libdir}/wine/avifile.dll16.so
@@ -511,6 +537,7 @@
 %{_libdir}/wine/storage.dll16.so
 %{_libdir}/wine/stress.dll16.so
 %{_libdir}/wine/toolhelp.dll16.so
+%{_libdir}/wine/twain.dll16.so
 %{_libdir}/wine/typelib.dll16.so
 %{_libdir}/wine/ver.dll16.so
 %{_libdir}/wine/w32sys.dll16.so
@@ -549,7 +576,6 @@
 %{_libdir}/wine/credui.dll.so
 %{_libdir}/wine/crtdll.dll.so
 %{_libdir}/wine/crypt32.dll.so
-%{_libdir}/wine/cryptdlg.dll.so
 %{_libdir}/wine/cryptdll.dll.so
 %{_libdir}/wine/cryptnet.dll.so
 %{_libdir}/wine/cryptui.dll.so
@@ -561,7 +587,6 @@
 %{_libdir}/wine/d3d10core.dll.so
 %{_libdir}/wine/d3dim.dll.so
 %{_libdir}/wine/d3drm.dll.so
-#%{_libdir}/wine/d3dx8.dll.so
 %{_libdir}/wine/d3dx9_24.dll.so
 %{_libdir}/wine/d3dx9_25.dll.so
 %{_libdir}/wine/d3dx9_26.dll.so
@@ -589,6 +614,7 @@
 %{_libdir}/wine/devenum.dll.so
 %{_libdir}/wine/dinput.dll.so
 %{_libdir}/wine/dinput8.dll.so
+%{_libdir}/wine/dispex.dll.so
 %{_libdir}/wine/dmband.dll.so
 %{_libdir}/wine/dmcompos.dll.so
 %{_libdir}/wine/dmime.dll.so
@@ -615,11 +641,13 @@
 %{_libdir}/wine/dxgi.dll.so
 %{_libdir}/wine/faultrep.dll.so
 %{_libdir}/wine/fltlib.dll.so
+%{_libdir}/wine/fwpuclnt.dll.so
 %{_libdir}/wine/fusion.dll.so
-%{_libdir}/wine/fwpuclnt.dll.so
+%{_libdir}/wine/gameux.dll.so
 %{_libdir}/wine/gdi32.dll.so
 %{_libdir}/wine/gdiplus.dll.so
 %{!?_without_opengl:%{_libdir}/wine/glu32.dll.so}
+#%{_libdir}/wine/glut32.dll.so
 %{_libdir}/wine/gpkcsp.dll.so
 %{_libdir}/wine/hal.dll.so
 %{_libdir}/wine/hid.dll.so
@@ -646,6 +674,7 @@
 %{_libdir}/wine/localui.dll.so
 %{_libdir}/wine/lz32.dll.so
 %{_libdir}/wine/mapi32.dll.so
+%{_libdir}/wine/mapistub.dll.so
 %{_libdir}/wine/mciavi32.dll.so
 %{_libdir}/wine/mcicda.dll.so
 %{_libdir}/wine/mciqtz32.dll.so
@@ -674,7 +703,12 @@
 %{_libdir}/wine/mssip32.dll.so
 %{_libdir}/wine/mstask.dll.so
 %{_libdir}/wine/msvcirt.dll.so
+%{_libdir}/wine/msvcp90.dll.so
+%{_libdir}/wine/msvcr100.dll.so
+%{_libdir}/wine/msvcr70.dll.so
 %{_libdir}/wine/msvcr71.dll.so
+%{_libdir}/wine/msvcr80.dll.so
+%{_libdir}/wine/msvcr90.dll.so
 %{_libdir}/wine/msvcrt.dll.so
 %{_libdir}/wine/msvcrt20.dll.so
 %{_libdir}/wine/msvcrt40.dll.so
@@ -683,6 +717,7 @@
 %{_libdir}/wine/msvidc32.dll.so
 %{_libdir}/wine/mswsock.dll.so
 %{_libdir}/wine/msxml3.dll.so
+%{_libdir}/wine/msxml4.dll.so
 %{_libdir}/wine/nddeapi.dll.so
 %{_libdir}/wine/netapi32.dll.so
 %{_libdir}/wine/newdev.dll.so
@@ -724,6 +759,7 @@
 %{_libdir}/wine/rsabase.dll.so
 %{_libdir}/wine/rsaenh.dll.so
 %{_libdir}/wine/rtutils.dll.so
+%{_libdir}/wine/samlib.dll.so
 %{_libdir}/wine/sccbase.dll.so
 %{_libdir}/wine/schannel.dll.so
 %{_libdir}/wine/secur32.dll.so
@@ -764,7 +800,6 @@
 %{_libdir}/wine/wiaservc.dll.so
 %{_libdir}/wine/windowscodecs.dll.so
 %{!?_without_opengl:%{_libdir}/wine/wined3d.dll.so}
-%{_libdir}/wine/winedos.dll.so
 %{_libdir}/wine/winemapi.dll.so
 %{_libdir}/wine/wing32.dll.so
 %{_libdir}/wine/winhttp.dll.so
@@ -829,6 +864,7 @@
 %{_libdir}/wine/msadp32.acm.so
 %{_libdir}/wine/msg711.acm.so
 %{_libdir}/wine/msgsm32.acm.so
+%{_libdir}/wine/winemp3.acm.so
 
 ### tlb.so
 %{_libdir}/wine/mshtml.tlb.so
@@ -839,11 +875,12 @@
 %{_libdir}/wine/hhctrl.ocx.so
 %{_libdir}/wine/msisys.ocx.so
 
-### mod16.so
+### mod16
 %{_libdir}/wine/winoldap.mod16.so
 
 ### sys.so
 %{_libdir}/wine/mountmgr.sys.so
+%{_libdir}/wine/usbd.sys.so
 
 %files capi
 %defattr(-, root, root, 0755)
@@ -878,7 +915,6 @@
 %files twain
 %defattr(-, root, root, 0755)
 %dir %{_libdir}/wine/
-%{_libdir}/wine/twain.dll16.so
 %{_libdir}/wine/twain_32.dll.so
 
 %files devel
@@ -909,44 +945,12 @@
 %{_libdir}/wine/*.def
 
 %changelog
-* Tue Jan 12 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.35-1
-- Updated to release 1.1.35.
-
-* Wed Nov 18 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.33-1
-- Updated to release 1.1.33.
-
-* Sun Sep 27 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.30-1
-- Updated to release 1.1.30.
-
-* Thu Sep 10 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.29-1
-- Updated to release 1.1.29.
-
-* Tue Jul 21 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.26-1
-- Updated to release 1.1.26.
-
-* Sun Jul 12 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.25-1
-- Updated to release 1.1.25.
-
-* Sun May 24 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.22-1
-- Updated to release 1.1.22.
-
-* Sun May 17 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.21-1
-- Updated to release 1.1.21.
-
-* Tue Apr 28 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.20-1
-- Updated to release 1.1.20.
-
-* Mon Mar 16 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.17-1
-- Updated to release 1.1.17.
-
-* Wed Jan 21 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.13-1
-- Updated to release 1.1.13.
-
-* Wed Dec 10 2008 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.10-1
-- Updated to release 1.1.10.
-
-* Thu Nov 27 2008 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.9-1
-- Updated to release 1.1.9.
+* Fri Aug 13 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.3.0-1
+- Updated to release 1.3.0.
+
+* Thu Aug 12 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.2-1
+- Updated to release 1.2.
+- Added a few fedora patches.
 
 * Fri Oct 31 2008 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0.1-1
 - Updated to release 1.0.1.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007855.html">[svn] r9062 - in /trunk/tools/mrepo: ./ config/ config/dists/
</A></li>
	<LI>Next message: <A HREF="007857.html">[svn] r9064 - in /trunk/rpms: perl-Directory-Scratch-Structured/ perl-Directory-Scratch-Structured/perl-Directory-Scratch-Structured.spec perl-Directory-Scratch/ perl-Directory-Scratch/perl-Directory-Scratch.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7856">[ date ]</a>
              <a href="thread.html#7856">[ thread ]</a>
              <a href="subject.html#7856">[ subject ]</a>
              <a href="author.html#7856">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
