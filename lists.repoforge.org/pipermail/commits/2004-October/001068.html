<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r2262 - in trunk/rpms: alevt alleyoop alphapplet amsn apollon	apolos arrows asp2php avidemux avidemux2 avifile awesum
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2262%20-%20in%20trunk/rpms%3A%20alevt%20alleyoop%20alphapplet%20amsn%20apollon%0A%09apolos%20arrows%20asp2php%20avidemux%20avidemux2%20avifile%20awesum&In-Reply-To=%3C20041009231548.892BE17FCC%40web22.us.megagiga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001067.html">
   <LINK REL="Next"  HREF="001069.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r2262 - in trunk/rpms: alevt alleyoop alphapplet amsn apollon	apolos arrows asp2php avidemux avidemux2 avifile awesum</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2262%20-%20in%20trunk/rpms%3A%20alevt%20alleyoop%20alphapplet%20amsn%20apollon%0A%09apolos%20arrows%20asp2php%20avidemux%20avidemux2%20avifile%20awesum&In-Reply-To=%3C20041009231548.892BE17FCC%40web22.us.megagiga.com%3E"
       TITLE="[SVN] r2262 - in trunk/rpms: alevt alleyoop alphapplet amsn apollon	apolos arrows asp2php avidemux avidemux2 avifile awesum">svn-commits at rpmforge.net
       </A><BR>
    <I>Sun Oct 10 01:15:48 CEST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001067.html">[SVN] r2261 - in trunk/rpms: acroread afick airsnort
</A></li>
        <LI>Next message: <A HREF="001069.html">[SVN] r2263 - in trunk/rpms: texmaker thunderbird tightvnc tinc	tinyca tvtime webmin workrave xawdecode xawtv xkobo xmms-imms	xscorch zinf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1068">[ date ]</a>
              <a href="thread.html#1068">[ thread ]</a>
              <a href="subject.html#1068">[ subject ]</a>
              <a href="author.html#1068">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2004-10-10 01:15:44 +0200 (Sun, 10 Oct 2004)
New Revision: 2262

Modified:
   trunk/rpms/alevt/alevt.spec
   trunk/rpms/alleyoop/alleyoop.spec
   trunk/rpms/alphapplet/alphapplet.spec
   trunk/rpms/amsn/amsn.spec
   trunk/rpms/apollon/apollon.spec
   trunk/rpms/apolos/apolos.spec
   trunk/rpms/arrows/arrows.spec
   trunk/rpms/asp2php/asp2php.spec
   trunk/rpms/avidemux/avidemux.spec
   trunk/rpms/avidemux2/avidemux2.spec
   trunk/rpms/avifile/avifile.spec
   trunk/rpms/awesum/awesum.spec
Log:
More desktop_vendor updates.


Modified: trunk/rpms/alevt/alevt.spec
===================================================================
--- trunk/rpms/alevt/alevt.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/alevt/alevt.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -2,10 +2,14 @@
 # Authority: dag
 # Upstream: Edgar Toernig &lt;froese$gmx,de&gt;
 
+%{?dist: %{expand: %%define %dist 1}}
+
 %{?rh7:%define _without_freedesktop 1}
 %{?el2:%define _without_freedesktop 1}
 %{?rh6:%define _without_freedesktop 1}
 
+%define desktop_vendor rpmforge
+
 Summary: Teletext/videotext decoder and browser for the bttv driver and X
 Name: alevt
 Version: 1.6.1
@@ -63,7 +67,7 @@
         %{__install} -D -m0644 alevt.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/alevt.desktop
 %else
         %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-        desktop-file-install --vendor net                  \
+        desktop-file-install --vendor %{desktop_vendor}    \
                 --add-category X-Red-Hat-Base              \
                 --dir %{buildroot}%{_datadir}/applications \
                 alevt.desktop
@@ -75,11 +79,11 @@
 %files
 %defattr(-, root, root, 0755)
 %doc CHANGELOG COPYRIGHT README alevt.lsm.in
-%doc %{_mandir}/man?/*
+%doc %{_mandir}/man1/*
 %{_bindir}/*
 %{_datadir}/pixmaps/alevt.xpm
-%{!?_without_freedesktop:%{_datadir}/applications/net-alevt.desktop}
 %{?_without_freedesktop:%{_datadir}/gnome/apps/Multimedia/alevt.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-alevt.desktop}
 
 %changelog
 * Sun Jun 06 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.6.1-1

Modified: trunk/rpms/alleyoop/alleyoop.spec
===================================================================
--- trunk/rpms/alleyoop/alleyoop.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/alleyoop/alleyoop.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -2,13 +2,15 @@
 # Authority: dag
 # Upstream: Jeffrey Stedfast &lt;fejj$ximian,com&gt;
 
+%define desktop_vendor rpmforge
+
 Summary: Graphical front-end to the Valgrind memory checker for x86
 Name: alleyoop
 Version: 0.8.2
 Release: 1
 License: GPL
 Group: Development/Tools
-URL: <A HREF="http://alleyoop.sf.net/">http://alleyoop.sf.net/</A>
+URL: <A HREF="http://alleyoop.sourceforge.net/">http://alleyoop.sourceforge.net/</A>
 
 Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
@@ -35,7 +37,7 @@
 %prep
 %setup
 
-%{__cat} &lt;&lt;EOF &gt;%{name}.desktop
+%{__cat} &lt;&lt;EOF &gt;alleyoop.desktop
 [Desktop Entry]
 Name=Memory Checker
 Comment=Validate the memory usage of any program
@@ -59,10 +61,10 @@
 %find_lang %{name}
 
 %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-desktop-file-install --vendor gnome                \
+desktop-file-install --vendor %{desktop_vendor}    \
 	--add-category X-Red-Hat-Base              \
 	--dir %{buildroot}%{_datadir}/applications \
-	%{name}.desktop
+	alleyoop.desktop
 
 %post
 export GCONF_CONFIG_SOURCE=&quot;$(gconftool-2 --get-default-source)&quot;
@@ -77,9 +79,9 @@
 
 %files -f %{name}.lang
 %defattr(-, root, root, 0755)
-%config %{_sysconfdir}/gconf/schemas/*.schemas
-%{_bindir}/*
-%{_datadir}/applications/*.desktop
+%config %{_sysconfdir}/gconf/schemas/alleyoop.schemas
+%{_bindir}/alleyoop
+%{_datadir}/applications/%{desktop_vendor}-alleyoop.desktop
 
 %changelog
 * Sun Apr 04 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.8.2-1

Modified: trunk/rpms/alphapplet/alphapplet.spec
===================================================================
--- trunk/rpms/alphapplet/alphapplet.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/alphapplet/alphapplet.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -2,6 +2,8 @@
 # Authority: dag
 # Upstream: Dag Wieers &lt;dag$wieers,com&gt;
 
+%define desktop_vendor rpmforge
+
 Summary: Tray applet for displaying phonetic alphabets
 Name: alphapplet
 Version: 0.2
@@ -16,7 +18,6 @@
 Source: <A HREF="http://dag.wieers.com/home-made/gnome-applets/alphapplet-%{version">http://dag.wieers.com/home-made/gnome-applets/alphapplet-%{version</A>}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
-
 BuildRequires: mono, gtk-sharp
 ### FIXME: gtk-sharp needs gtk2/gnome2 *.so files ;(
 Requires: mono, gtk-sharp, gtk2-devel, libgnomeui-devel, GConf2-devel, libglade2-devel
@@ -43,10 +44,11 @@
 %{__rm} -rf %{buildroot}
 %makeinstall
 
-desktop-file-install --vendor gnome --delete-original \
-        --add-category X-Red-Hat-Base                 \
-        --dir %{buildroot}%{_datadir}/applications    \
-        %{buildroot}%{_datadir}/applications/%{name}.desktop
+desktop-file-install --vendor %{desktop_vendor}    \
+	--delete-original                          \
+        --add-category X-Red-Hat-Base              \
+        --dir %{buildroot}%{_datadir}/applications \
+        %{buildroot}%{_datadir}/applications/alphapplet.desktop
 %{__install} -m0755 alphapplet.sh %{buildroot}%{_bindir}/alphapplet
 
 %clean
@@ -56,7 +58,7 @@
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog COPYING COPYRIGHT README TODO
 %{_bindir}/*
-%{_datadir}/applications/*.desktop
+%{_datadir}/applications/%{desktop_vendor}-alphapplet.desktop
 %{_datadir}/pixmaps/*
 %{_datadir}/alphapplet/
 

Modified: trunk/rpms/amsn/amsn.spec
===================================================================
--- trunk/rpms/amsn/amsn.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/amsn/amsn.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -11,6 +11,8 @@
 %{?el2:%define _without_freedesktop 1}
 %{?rh6:%define _without_freedesktop 1}
 
+%define desktop_vendor rpmforge
+
 %define tls_maj 1.4
 %define tls_min 1
 %define real_version 0_93
@@ -21,7 +23,7 @@
 Release: 1
 License: GPL
 Group: Applications/Internet
-URL: <A HREF="http://amsn.sf.net/">http://amsn.sf.net/</A>
+URL: <A HREF="http://amsn.sourceforge.net/">http://amsn.sourceforge.net/</A>
 
 Packager: Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">skotty at ulyssis.org</A>&gt;
 Vendor: Dries Apt/Yum Repository <A HREF="http://dries.ulyssis.org/ayo/">http://dries.ulyssis.org/ayo/</A>
@@ -69,7 +71,7 @@
 Categories=Application;Network;
 EOF
 
-%{__cat} &lt;&lt;'EOF2' &gt;%{name}.sh
+%{__cat} &lt;&lt;'EOF2' &gt;amsn.sh
 #!/bin/bash
 
 AMSNLANG=&quot;$(echo $LANG | tr '[A-Z]' '[a-z]')&quot;
@@ -132,7 +134,7 @@
 	%{__install} -D -m0644 amsn.desktop %{buildroot}%{_datadir}/gnome/apps/Internet/amsn.desktop
 %else
 %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-	desktop-file-install --vendor net                  \
+	desktop-file-install --vendor %{desktop_vendor}    \
 		--add-category X-Red-Hat-Base              \
 		--dir %{buildroot}%{_datadir}/applications \
 		amsn.desktop
@@ -147,8 +149,8 @@
 %{_bindir}/amsn
 %{_datadir}/amsn/
 %{_datadir}/pixmaps/*.png
-%{!?_without_freedesktop:%{_datadir}/applications/net-amsn.desktop}
 %{?_without_freedesktop:%{_datadir}/gnome/apps/Internet/amsn.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-amsn.desktop}
 
 %changelog
 * Sun Aug 29 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.94-1

Modified: trunk/rpms/apollon/apollon.spec
===================================================================
--- trunk/rpms/apollon/apollon.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/apollon/apollon.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -4,6 +4,8 @@
 # Screenshot: <A HREF="http://apollon.sourceforge.net/apollon1.png">http://apollon.sourceforge.net/apollon1.png</A>
 # ScreenshotURL: <A HREF="http://apollon.sourceforge.net/pictures.html">http://apollon.sourceforge.net/pictures.html</A>
 
+%define desktop_vendor rpmforge
+
 Summary: KDE filesharing client which uses gift
 Name: apollon
 %{?fc2:Version: 1.0b1}
@@ -61,7 +63,7 @@
 %find_lang %{name}
 
 %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-desktop-file-install --vendor kde                  \
+desktop-file-install --vendor %{desktop_version}   \
 	--dir %{buildroot}%{_datadir}/applications \
 	--add-category X-Red-Hat-Extras            \
 	apollon.desktop
@@ -83,7 +85,7 @@
 %exclude %{_libdir}/libapollon.la
 %{_libdir}/libapollon.so*
 %exclude %{_datadir}/applnk/Applications/Apollon.desktop
-%{_datadir}/applications/kde-apollon.desktop
+%{_datadir}/applications/%{desktop_vendor}-apollon.desktop
 %{_datadir}/apps/apollon/
 %{_datadir}/icons/crystalsvg/*/filesystems/folder_apollon.png
 %{_datadir}/icons/*/*/actions/*.png

Modified: trunk/rpms/apolos/apolos.spec
===================================================================
--- trunk/rpms/apolos/apolos.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/apolos/apolos.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -8,6 +8,8 @@
 %{?el2:%define _without_freedesktop 1}
 %{?rh6:%define _without_freedesktop 1}
 
+%define desktop_vendor rpmforge
+
 Summary: Small cd player for GNOME
 Name: apolos
 Version: 0.1.7
@@ -60,7 +62,8 @@
 %if %{?_without_freedesktop:1}0
 	%{__install} -D -m0644 apolos.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/apolos.desktop
 %else
-	desktop-file-install --vendor gnome --delete-original \
+	desktop-file-install --vendor %{desktop_vendor}       \
+		--delete-original                             \
 		--add-category X-Red-Hat-Base                 \
 		--dir %{buildroot}%{_datadir}/applications    \
 		%{buildroot}%{_datadir}/applications/apolos.desktop
@@ -75,7 +78,7 @@
 %{_bindir}/*
 %{_datadir}/applications/gnome-apolos.desktop
 %{?_without_freedesktop:%{_datadir}/gnome/apps/Multimedia/apolos.desktop}
-%{!?_without_freedesktop:%{_datadir}/applications/gnome-apolos.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-apolos.desktop}
 
 %changelog
 * Mon Jun 07 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.1.7-1

Modified: trunk/rpms/arrows/arrows.spec
===================================================================
--- trunk/rpms/arrows/arrows.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/arrows/arrows.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -1,6 +1,8 @@
 # $Id$
 # Authority: dag
 
+%define desktop_vendor rpmforge
+
 %define _bindir %{_prefix}/X11R6/bin
 
 Summary: Neat little maze game
@@ -46,10 +48,10 @@
 %{__install} -D -m0755 arrows %{buildroot}%{_bindir}/arrows
 
 %{__install} -d -m0755 %{buildroot}%{_datadir}/applications
-desktop-file-install --vendor net                  \
+desktop-file-install --vendor %{desktop_vendor}    \
 	--add-category X-Red-Hat-Base              \
 	--dir %{buildroot}%{_datadir}/applications \
-	%{name}.desktop
+	arrows.desktop
 
 %clean
 %{__rm} -rf %{buildroot}
@@ -57,8 +59,8 @@
 %files
 %defattr(-, root, root, 0755)
 %doc LICENSE README
-%{_bindir}/*
-%{_datadir}/applications/*.desktop
+%{_bindir}/arrows
+%{_datadir}/applications/%{desktop_vendor}-arrows.desktop
 
 %changelog
 * Wed Jan 14 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.6-1

Modified: trunk/rpms/asp2php/asp2php.spec
===================================================================
--- trunk/rpms/asp2php/asp2php.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/asp2php/asp2php.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -4,12 +4,16 @@
 
 # Tag: test
 
-%define dfi %(which desktop-file-install &amp;&gt;/dev/null; echo $?)
+%{?dist: %{expand: %%define %dist 1}}
 
+%{?rh7:%define _without_freedesktop 1}
+%{?el2:%define _without_freedesktop 1}
+%{?rh6:%define _without_freedesktop 1}
+
 Summary: Converts WWW Active Server Pages to PHP pages
 Name: asp2php
-Version: 0.76.19
-Release: 3
+Version: 0.76.23
+Release: 1
 License: GPL
 Group: Development/Tools
 URL: <A HREF="http://asp2php.naken.cc/">http://asp2php.naken.cc/</A>
@@ -17,7 +21,7 @@
 Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
 
-Source: <A HREF="http://www.mikekohn.com/asp2php/asp2php-%{version">http://www.mikekohn.com/asp2php/asp2php-%{version</A>}.tar.gz
+Source: <A HREF="http://downloads.mikekohn.net/asp2php/asp2php-%{version">http://downloads.mikekohn.net/asp2php/asp2php-%{version</A>}.tar.gz
 Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildRequires: gtk+-devel
@@ -59,11 +63,11 @@
 %{__install} -D -m0755 asp2php %{buildroot}%{_bindir}/asp2php
 %{__install} -D -m0755 gtkasp2php %{buildroot}%{_bindir}/gtkasp2php
 
-%if %{dfi}
+%if %{?_without_freedesktop:1}0
 	%{__install} -D -m0644 gtkasp2php.desktop %{buildroot}%{_datadir}/gnome/apps/Development/gtkasp2php.desktop
 %else
 	%{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-	desktop-file-install --vendor gnome                \
+	desktop-file-install --vendor %{desktop_vendor}    \
 		--add-category X-Red-Hat-Base              \
 		--dir %{buildroot}%{_datadir}/applications \
 		gtkasp2php.desktop
@@ -74,18 +78,18 @@
 
 %files
 %defattr(-, root, root, 0755)
-%doc LICENSE README TODO *.png sample/
+%doc CHANGES LICENSE README *.png sample/
 %{_bindir}/asp2php
 
 %files gtk
 %defattr(-, root, root, 0755)
 %{_bindir}/gtkasp2php
-%if %{dfi}
-	%{_datadir}/gnome/apps/Development/*.desktop
-%else
-	%{_datadir}/applications/*.desktop
-%endif
+%{?_without_freedesktop:%{_datadir}/gnome/apps/Development/gtkasp2php.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-gtkasp2php.desktop}
 
 %changelog
+* Sun Oct 10 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.76.23-1
+- Updated to release 0.76.23.
+
 * Fri Apr 09 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.76.19-1
 - Initial package. (using DAR)

Modified: trunk/rpms/avidemux/avidemux.spec
===================================================================
--- trunk/rpms/avidemux/avidemux.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/avidemux/avidemux.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -2,8 +2,14 @@
 # Authority: dag
 # Upstream: &lt;fixounet$free,fr&gt;
 
-%define dfi %(which desktop-file-install &amp;&gt;/dev/null; echo $?)
+%{?dist: %{expand: %%define %dist 1}}
 
+%{?rh7:%define _without_freedesktop 1}
+%{?el2:%define _without_freedesktop 1}
+%{?rh6:%define _without_freedesktop 1}
+
+%define desktop_vendor rpmforge
+
 Summary: Graphical multiplex/demultiplex tool using GTK
 Name: avidemux
 Version: 0.9
@@ -57,7 +63,7 @@
 	%{__install} -D -m0644 avidemux.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/avidemux.desktop
 %else
         %{__install} -d -m0755 %{buildroot}%{_datadir}/applications
-        desktop-file-install --vendor gnome                \
+        desktop-file-install --vendor %{desktop_vendor}    \
                 --add-category X-Red-Hat-Base              \
                 --dir %{buildroot}%{_datadir}/applications \
                 avidemux.desktop
@@ -69,12 +75,9 @@
 %files
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog COPYING History README TODO
-%{_bindir}/*
-%if %{dfi}
-        %{_datadir}/gnome/apps/Multimedia/*.desktop
-%else
-        %{_datadir}/applications/*.desktop
-%endif
+%{_bindir}/avidemux
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-avidemux.desktop}
+%{?_without_freedesktop:%{_datadir}/gnome/apps/Multimedia/avidemux.desktop}
 
 %changelog
 * Sat Aug 23 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;- 0.9-1

Modified: trunk/rpms/avidemux2/avidemux2.spec
===================================================================
--- trunk/rpms/avidemux2/avidemux2.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/avidemux2/avidemux2.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -6,7 +6,10 @@
 
 %{?rh7:%define _without_freedesktop 1}
 %{?el2:%define _without_freedesktop 1}
+%{?rh6:%define _without_freedesktop 1}
 
+%define desktop_vendor rpmforge
+
 %define real_name avidemux
 
 Summary: Graphical video editing tool
@@ -70,7 +73,7 @@
 	%{__install} -D -m0755 avidemux2.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/avidemux2.desktop
 %else
 	%{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-	desktop-file-install --vendor gnome                \
+	desktop-file-install --vendor %{desktop_vendor}    \
 		--add-category X-Red-Hat-Base              \
 		--dir %{buildroot}%{_datadir}/applications \
 		avidemux2.desktop
@@ -84,7 +87,7 @@
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog COPYING History README TODO
 %{_bindir}/avidemux2
-%{!?_without_freedesktop:%{_datadir}/applications/gnome-avidemux2.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-avidemux2.desktop}
 %{?_without_freedesktop:%{_datadir}/gnome/apps/Multimedia/avidemux2.desktop}
 
 %changelog

Modified: trunk/rpms/avifile/avifile.spec
===================================================================
--- trunk/rpms/avifile/avifile.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/avifile/avifile.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -2,8 +2,15 @@
 # Authority: dag
 # Distcc: 0
 
+%{?dist: %{expand: %%define %dist 1}}
+
+%{?rh7:%define _without_freedesktop 1}
+%{?el2:%define _without_freedesktop 1}
+%{?rh6:%define _without_freedesktop 1}
+
+%define desktop_vendor rpmforge
+
 %define	date 20030710
-%define dfi %(which desktop-file-install &amp;&gt;/dev/null; echo $?)
 
 Summary: Library used to play AVI streams
 Name: avifile
@@ -81,15 +88,14 @@
 %makeinstall
 %{__install} -m0644 -D bin/test.png %{buildroot}%{_datadir}/pixmaps/%{name}.png
 
-%if %{dfi}
-	%{__install} -d -m0755 %{buildroot}%{_datadir}/gnome/apps/Multimedia/
-	%{__install} -m0644 %{name}.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/
+%if %{?_without_freedesktop:1}0
+	%{__install} -D -m0644 avifile.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/avifile.desktop
 %else
 	%{__install} -m0755 -d %{buildroot}%{_datadir}/applications/
-	desktop-file-install --vendor=net                  \
+	desktop-file-install --vendor %{desktop_vendor}    \
 		--add-category X-Red-Hat-Base              \
 		--dir %{buildroot}%{_datadir}/applications \
-		%{name}.desktop
+		avifile.desktop
 %endif
 
 %{__rm} -f doc/Makefile*
@@ -125,11 +131,8 @@
 %{_libdir}/avifile0.7/vidix/*.so
 %{_datadir}/avifile0.7/
 %{_datadir}/pixmaps/*
-%if %{dfi}
-        %{_datadir}/gnome/apps/Multimedia/*.desktop
-%else
-        %{_datadir}/applications/*.desktop
-%endif
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-avifile.desktop}
+%{?_without_freedesktop:%{_datadir}/gnome/apps/Multimedia/avifile.desktop}
 
 %files devel
 %defattr(-, root, root, 0755)

Modified: trunk/rpms/awesum/awesum.spec
===================================================================
--- trunk/rpms/awesum/awesum.spec	2004-10-09 22:28:27 UTC (rev 2261)
+++ trunk/rpms/awesum/awesum.spec	2004-10-09 23:15:44 UTC (rev 2262)
@@ -7,13 +7,15 @@
 %{?rh7:%define _without_freedesktop 1}
 %{?el2:%define _without_freedesktop 1}
 
+%define desktop_vendor rpmforge
+
 Summary: Graphical checksum verifier
 Name: awesum
 Version: 0.6.0
 Release: 1
 License: BSD
 Group: Applications/File
-URL: <A HREF="http://awesum.sf.net/">http://awesum.sf.net/</A>
+URL: <A HREF="http://awesum.sourceforge.net/">http://awesum.sourceforge.net/</A>
 
 Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
@@ -54,7 +56,7 @@
 ./install.sh
 
 %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-desktop-file-install --vendor gnome                \
+desktop-file-install --vendor %{desktop_vendor}    \
 	--add-category X-Red-Hat-Base              \
 	--dir %{buildroot}%{_datadir}/applications \
 	awesum.desktop
@@ -69,7 +71,7 @@
 %defattr(-, root, root, 0755)
 %doc *.txt doc/html/
 %{_bindir}/awesum
-%{_datadir}/applications/*.desktop
+%{_datadir}/applications/%{desktop-vendor}-awesum.desktop
 %{_datadir}/awesum/
 %exclude %{_docdir}/awesum/
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001067.html">[SVN] r2261 - in trunk/rpms: acroread afick airsnort
</A></li>
	<LI>Next message: <A HREF="001069.html">[SVN] r2263 - in trunk/rpms: texmaker thunderbird tightvnc tinc	tinyca tvtime webmin workrave xawdecode xawtv xkobo xmms-imms	xscorch zinf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1068">[ date ]</a>
              <a href="thread.html#1068">[ thread ]</a>
              <a href="subject.html#1068">[ subject ]</a>
              <a href="author.html#1068">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
