<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r2595 - in trunk/rpms: . bochs clamav dstat ebtables mtr	streamdvd subversion xmms-imms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2595%20-%20in%20trunk/rpms%3A%20.%20bochs%20clamav%20dstat%20ebtables%20mtr%0A%09streamdvd%20subversion%20xmms-imms&In-Reply-To=%3C20041203064520.A7F6117F5E%40web22.us.megagiga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001399.html">
   <LINK REL="Next"  HREF="001401.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r2595 - in trunk/rpms: . bochs clamav dstat ebtables mtr	streamdvd subversion xmms-imms</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2595%20-%20in%20trunk/rpms%3A%20.%20bochs%20clamav%20dstat%20ebtables%20mtr%0A%09streamdvd%20subversion%20xmms-imms&In-Reply-To=%3C20041203064520.A7F6117F5E%40web22.us.megagiga.com%3E"
       TITLE="[SVN] r2595 - in trunk/rpms: . bochs clamav dstat ebtables mtr	streamdvd subversion xmms-imms">svn-commits at rpmforge.net
       </A><BR>
    <I>Fri Dec  3 07:45:20 CET 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001399.html">[SVN] r2594 - trunk/tools/dstat
</A></li>
        <LI>Next message: <A HREF="001401.html">[SVN] r2596 - in trunk/rpms: mtr videolan-client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1400">[ date ]</a>
              <a href="thread.html#1400">[ thread ]</a>
              <a href="subject.html#1400">[ subject ]</a>
              <a href="author.html#1400">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2004-12-03 07:45:18 +0100 (Fri, 03 Dec 2004)
New Revision: 2595

Added:
   trunk/rpms/bochs/bochs-2.1.1-gcc342.patch
   trunk/rpms/ebtables/ebtables-2.0.6-gcc34.patch
   trunk/rpms/mtr/
   trunk/rpms/mtr/mtr-0.48-nogtk.patch
   trunk/rpms/mtr/mtr-0.49-s390x.patch
   trunk/rpms/mtr/mtr-0.52-SA_LEN.patch
   trunk/rpms/mtr/mtr-0.54-CVE-2002-0497.patch
   trunk/rpms/mtr/mtr-0.54-ipv6-ifaddr.patch
   trunk/rpms/mtr/mtr-0.54-ipv6-ip6arpa.patch
   trunk/rpms/mtr/mtr-0.54-ipv6-kame.patch
   trunk/rpms/mtr/mtr-0.54-servfail.patch
   trunk/rpms/mtr/mtr-0.65.tar.gz~
   trunk/rpms/mtr/mtr.spec
   trunk/rpms/mtr/xmtr.consolehelper
   trunk/rpms/mtr/xmtr.pam
   trunk/rpms/streamdvd/
   trunk/rpms/streamdvd/streamdvd.spec
Modified:
   trunk/rpms/clamav/clamav.spec
   trunk/rpms/dstat/dstat.spec
   trunk/rpms/ebtables/ebtables.spec
   trunk/rpms/subversion/subversion-0.24.2-swig.patch
   trunk/rpms/subversion/subversion.spec
   trunk/rpms/xmms-imms/xmms-imms.spec
Log:
Updates and initial commits.


Added: trunk/rpms/bochs/bochs-2.1.1-gcc342.patch
===================================================================
--- trunk/rpms/bochs/bochs-2.1.1-gcc342.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/bochs/bochs-2.1.1-gcc342.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,11 @@
+--- fpu/fpu_proto.h.orig	2004-11-26 01:23:18.245611240 +0100
++++ fpu/fpu_proto.h	2004-11-26 01:23:32.373463480 +0100
+@@ -141,7 +141,7 @@
+ extern int FPU_load_single(bx_address single, FPU_REG *loaded_data) BX_CPP_AttrRegparmN(2);
+ extern int FPU_load_int64(bx_address _s) BX_CPP_AttrRegparmN(1);
+ extern int FPU_load_int32(bx_address _s, FPU_REG *loaded_data) BX_CPP_AttrRegparmN(2);
+-extern int FPU_load_int16(bx_address _s, FPU_REG *loaded_data) BX_CPP_AttrRegparmN(2);
++extern int FPU_load_int16(bx_address _s, FPU_REG *loaded_data) BX_CPP_AttrRegparmN(1);
+ extern int FPU_load_bcd(bx_address s) BX_CPP_AttrRegparmN(1);
+ extern int FPU_store_extended(FPU_REG *st0_ptr, u_char st0_tag,
+ 			      bx_address d) BX_CPP_AttrRegparmN(3);

Modified: trunk/rpms/clamav/clamav.spec
===================================================================
--- trunk/rpms/clamav/clamav.spec	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/clamav/clamav.spec	2004-12-03 06:45:18 UTC (rev 2595)
@@ -11,7 +11,7 @@
 Summary: Anti-virus software
 Name: clamav
 Version: 0.80
-Release: 1
+Release: 2
 License: GPL
 Group: Applications/System
 URL: <A HREF="http://www.clamav.net/">http://www.clamav.net/</A>
@@ -130,8 +130,8 @@
 		s|^#(NotifyClamd) .+$|$1 %{_sysconfdir}/clamd.conf|;
 	' etc/freshclam.conf
 
-%{__cat} &lt;&lt;EOF &gt;clamav.logrotate
-%{_localstatedir}/log/clamav/clamav.log {
+%{__cat} &lt;&lt;EOF &gt;clamd.logrotate
+%{_localstatedir}/log/clamav/clamd.log {
 	create 644 clamav clamav
 }
 EOF
@@ -199,7 +199,7 @@
 %{__install} -D -m0755 %{SOURCE1} %{buildroot}%{_initrddir}/clamd
 %{__install} -D -m0755 freshclam.cron %{buildroot}%{_sysconfdir}/cron.daily/freshclam
 %{__install} -D -m0644 freshclam.logrotate %{buildroot}%{_sysconfdir}/logrotate.d/freshclam
-%{__install} -D -m0644 clamav.logrotate %{buildroot}%{_sysconfdir}/logrotate.d/clamav
+%{__install} -D -m0644 clamd.logrotate %{buildroot}%{_sysconfdir}/logrotate.d/clamav
 
 %if %{!?_without_milter:1}0
 %{__install} -D -m0755 %{SOURCE2} %{buildroot}%{_initrddir}/clamav-milter
@@ -208,7 +208,7 @@
 
 %{__install} -d -m0755 %{buildroot}%{_localstatedir}/log/clamav/
 touch %{buildroot}/var/log/clamav/freshclam.log
-touch %{buildroot}/var/log/clamav/clamav.log
+touch %{buildroot}/var/log/clamav/clamd.log
 
 %{__install} -d -m0755 %{buildroot}%{_localstatedir}/run/clamav/
 
@@ -300,7 +300,7 @@
 %{_localstatedir}/run/clamav/
 %{_localstatedir}/clamav/
 %dir %{_localstatedir}/log/clamav/
-%{_localstatedir}/log/clamav/clamav.log
+%{_localstatedir}/log/clamav/clamd.log
 
 %if %{!?_without_milter:1}0
 %files milter
@@ -332,14 +332,11 @@
 %{_libdir}/pkgconfig/libclamav.pc
 
 %changelog
-* Sun Nov 29 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.80-4..
+* Wed Dec 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.80-2
 - Added %dir /var/clamav/log. (Adam Bowns)
-
-* Sat Nov 06 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.80-3
+- Changed logrotate script to use clamd.log. (Stuart Schneider)
 - Added curl dependency. (Petr Kristof)
 - Synchronized some options from Petr. (Petr Kristof)
-
-* Tue Nov 02 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.80-2
 - Fixed another clamav.conf reference. (Michael Best)
 
 * Mon Nov 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.80-1

Modified: trunk/rpms/dstat/dstat.spec
===================================================================
--- trunk/rpms/dstat/dstat.spec	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/dstat/dstat.spec	2004-12-03 06:45:18 UTC (rev 2595)
@@ -9,7 +9,7 @@
 
 Summary: Versatile vmstat, iostat and ifstat replacement
 Name: dstat
-Version: 0.5.4
+Version: 0.5.5
 Release: 1
 License: GPL
 Group: System Environment/Base
@@ -72,6 +72,9 @@
 %{_bindir}/dstat
 
 %changelog
+* Thu Dec 02 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.5.5-1
+- Updated to release 0.5.5.
+
 * Thu Nov 25 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.5.4-1
 - Updated to release 0.5.4.
 - Use dstat15 if distribution uses python 1.5.

Added: trunk/rpms/ebtables/ebtables-2.0.6-gcc34.patch
===================================================================
--- trunk/rpms/ebtables/ebtables-2.0.6-gcc34.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/ebtables/ebtables-2.0.6-gcc34.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,11 @@
+--- ebtables-v2.0.6/ebtables.c.old	Thu Sep  9 22:39:49 2004
++++ ebtables-v2.0.6/ebtables.c	Thu Sep  9 22:40:18 2004
+@@ -1170,7 +1170,7 @@ static int check_rule_exists(int rule_nr
+ 		if (!t-&gt;compare(t-&gt;t, u_e-&gt;t))
+ 			continue;
+ 		return i;
+-letscontinue:
++letscontinue:;
+ 	}
+ 	return -1;
+ }

Modified: trunk/rpms/ebtables/ebtables.spec
===================================================================
--- trunk/rpms/ebtables/ebtables.spec	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/ebtables/ebtables.spec	2004-12-03 06:45:18 UTC (rev 2595)
@@ -16,6 +16,7 @@
 Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
 
 Source: <A HREF="http://dl.sf.net/ebtables/ebtables-v%{version">http://dl.sf.net/ebtables/ebtables-v%{version</A>}.tar.gz
+Patch0: ebtables-2.0.6-gcc34.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 %description
@@ -28,6 +29,7 @@
 
 %prep
 %setup -n ebtables-v%{version}
+%patch0 -p1
 
 %{__cat} &lt;&lt;'EOF' &gt;ebtables.sysv
 #!/bin/bash
@@ -180,6 +182,9 @@
 %{_sbindir}/ebtables
 
 %changelog
+* Thu Dec 02 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2.0.6-2
+- Added patch for gcc 3.4. (Nigel Smith)
+
 * Tue Apr 27 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2.0.6-2
 - Cosmetic changes.
 

Added: trunk/rpms/mtr/mtr-0.48-nogtk.patch
===================================================================
--- trunk/rpms/mtr/mtr-0.48-nogtk.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr-0.48-nogtk.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,39 @@
+diff -ur mtr-0.48/mtr.c mtr-0.48.nogtk/mtr.c
+--- mtr-0.48/mtr.c	Wed Mar  6 19:37:49 2002
++++ mtr-0.48.nogtk/mtr.c	Wed Mar  6 19:40:18 2002
+@@ -63,7 +63,9 @@
+     { &quot;report&quot;, 0, 0, 'r' },
+     { &quot;report-cycles&quot;, 1, 0, 'c' },
+     { &quot;curses&quot;, 0, 0, 't' },
++#ifndef NO_GTK
+     { &quot;gtk&quot;, 0, 0, 'g' },
++#endif
+     { &quot;interval&quot;, 1, 0, 'i' },
+     { &quot;psize&quot;, 1, 0, 'p' },
+     { &quot;no-dns&quot;, 0, 0, 'n' },
+@@ -79,7 +81,11 @@
+ 
+   opt = 0;
+   while(1) {
++#ifdef NO_GTK
++    opt = getopt_long(argc, argv, &quot;a:hvrc:tklnsi:p:&quot;
++#else
+     opt = getopt_long(argc, argv, &quot;a:hvrc:tgklnsi:p:&quot;
++#endif
+ #ifdef ENABLE_IPV6
+ 	&quot;46&quot;
+ #endif
+@@ -218,8 +224,13 @@
+   }
+ 
+   if(PrintHelp) {
++#ifdef NO_GTK
++    printf(&quot;usage: %s [-hvrctlsni46] [--help] [--version] [--report]\n&quot;
++	   &quot;\t\t[--report-cycles=COUNT] [--curses]\n&quot;
++#else
+     printf(&quot;usage: %s [-hvrctglsni46] [--help] [--version] [--report]\n&quot;
+ 	   &quot;\t\t[--report-cycles=COUNT] [--curses] [--gtk]\n&quot;
++#endif
+            &quot;\t\t[--raw] [--split] [--no-dns] [--address interface]\n&quot; /* BL */
+            &quot;\t\t[--psize=bytes/-p=bytes]\n&quot;            /* ok */
+ 	   &quot;\t\t[--interval=SECONDS] HOSTNAME [PACKETSIZE]\n&quot;, argv[0]);

Added: trunk/rpms/mtr/mtr-0.49-s390x.patch
===================================================================
--- trunk/rpms/mtr/mtr-0.49-s390x.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr-0.49-s390x.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,14 @@
+--- mtr-0.49/configure.in.s390x	2002-03-06 12:27:37.000000000 +0100
++++ mtr-0.49/configure.in	2002-09-24 12:21:55.000000000 +0200
+@@ -69,8 +69,9 @@
+ #  AC_CHECK_FUNC(setuid, , AC_MSG_ERROR (I Need either seteuid or setuid))
+ 
+ AC_CHECK_FUNC(res_mkquery, , 
+-  AC_CHECK_LIB(bind, res_mkquery, , 
+-   AC_CHECK_LIB(resolv, res_mkquery, , AC_MSG_ERROR(No resolver library found))))
++  AC_CHECK_LIB(bind, res_mkquery, LIBS=&quot;$LIBS -lbind&quot;, 
++   AC_CHECK_LIB(resolv, res_mkquery, LIBS=&quot;$LIBS -lresolv&quot;,
++    AC_CHECK_LIB(resolv, __res_mkquery, LIBS=&quot;$LIBS -lresolv&quot;, AC_MSG_ERROR(No resolver library found)))))
+ 
+ AC_CHECK_FUNC(herror, , AC_DEFINE(NO_HERROR))
+ AC_CHECK_FUNC(strerror, , AC_DEFINE(NO_STRERROR))

Added: trunk/rpms/mtr/mtr-0.52-SA_LEN.patch
===================================================================
--- trunk/rpms/mtr/mtr-0.52-SA_LEN.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr-0.52-SA_LEN.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,23 @@
+--- mtr-0.52/net.h.orig	Sun Mar 30 18:54:41 2003
++++ mtr-0.52/net.h	Sun Mar 30 19:15:28 2003
+@@ -68,3 +68,10 @@
+ 
+ #define MAXPACKET 4096
+ #define MINPACKET 64
++
++#ifdef linux
++#ifndef SA_LEN
++#define SA_LEN(x) (((x)-&gt;sa_family == AF_INET6) ? sizeof(struct sockaddr_in6) : \
++		(((x)-&gt;sa_family == AF_INET)?sizeof(struct sockaddr_in):sizeof(struct sockaddr)))
++#endif
++#endif
+--- mtr-0.52/dns.c.orig	Sun Mar 30 18:54:41 2003
++++ mtr-0.52/dns.c	Sun Mar 30 19:17:57 2003
+@@ -44,6 +44,7 @@
+ #include &lt;errno.h&gt;
+ 
+ #include &quot;dns.h&quot;
++#include &quot;net.h&quot;
+ 
+ #ifdef NO_STRERROR
+ extern int sys_nerr;

Added: trunk/rpms/mtr/mtr-0.54-CVE-2002-0497.patch
===================================================================
--- trunk/rpms/mtr/mtr-0.54-CVE-2002-0497.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr-0.54-CVE-2002-0497.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,254 @@
+This patch (modified by Robert Scheck &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">redhat at linuxnetz.de</A>&gt;) is originally
+from SuSE but also used at PLD and fixes CVE-2002-0497, which is a buffer 
+overflow in mtr 0.46 and earlier, when installed setuid root, allows local
+users to access a raw socket via a long MTR_OPTIONS environment variable.
+
+Fedora Core's mtr hasn't per default setuid root, but the users/admins
+maybe change that and then, mtr is vulnerable.
+
+<A HREF="http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2002-0497">http://www.cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2002-0497</A>
+<A HREF="http://lists.debian.org/debian-security-announce/debian-security-announce-2002/msg00034.html">http://lists.debian.org/debian-security-announce/debian-security-announce-2002/msg00034.html</A>
+
+--- mtr-0.54/dns.c			2004-08-07 14:25:39.000000000 +0200
++++ mtr-0.54/dns.c.CVE-2002-0497	2004-08-07 14:21:41.000000000 +0200
+@@ -882,7 +882,7 @@
+    if (type == T_A || type == T_AAAA) {
+       dorequest(rp-&gt;hostname,type,rp-&gt;id);
+       if (debug){
+-         sprintf(tempstring,&quot;Resolver: Sent reverse authentication request for \&quot;%s\&quot;.&quot;,
++         snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Sent reverse authentication request for \&quot;%s\&quot;.&quot;,
+           rp-&gt;hostname);
+          restell(tempstring);
+       }
+@@ -890,7 +890,7 @@
+       ptrstring4(rp-&gt;ip, tempstring, sizeof(tempstring));
+       dorequest(tempstring,type,rp-&gt;id);
+       if (debug){
+-         sprintf(tempstring,&quot;Resolver: Sent domain lookup request for \&quot;%s\&quot;.&quot;,
++         snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Sent domain lookup request for \&quot;%s\&quot;.&quot;,
+           strlongip(rp-&gt;ip));
+          restell(tempstring);
+       }
+@@ -933,7 +933,7 @@
+    rp-&gt;expiretime = sweeptime + (double)ttl;
+    untieresolve(rp);
+    if (debug){
+-      sprintf(tempstring,&quot;Resolver: Lookup successful: %s\n&quot;,rp-&gt;hostname);
++      snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Lookup successful: %s\n&quot;,rp-&gt;hostname);
+       restell(tempstring);
+    }
+ }
+@@ -987,7 +987,7 @@
+       case NOERROR:
+          if (hp-&gt;ancount){
+             if (debug){
+-               sprintf(tempstring,&quot;Resolver: Received nameserver reply. (qd:%u an:%u ns:%u ar:%u)&quot;,
++               snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Received nameserver reply. (qd:%u an:%u ns:%u ar:%u)&quot;,
+                 hp-&gt;qdcount,hp-&gt;ancount,hp-&gt;nscount,hp-&gt;arcount);
+                restell(tempstring);
+             }
+@@ -1022,14 +1022,14 @@
+             namestring[strlen(stackstring)] = '\0';
+             if (strcasecmp(stackstring,namestring)){
+                if (debug){
+-                  sprintf(tempstring,&quot;Resolver: Unknown query packet dropped. (\&quot;%s\&quot; does not match \&quot;%s\&quot;)&quot;,
++                  snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Unknown query packet dropped. (\&quot;%s\&quot; does not match \&quot;%s\&quot;)&quot;,
+                    stackstring,namestring);
+                   restell(tempstring);
+                }
+                return;
+             }
+             if (debug){
+-               sprintf(tempstring,&quot;Resolver: Queried domain name: \&quot;%s\&quot;&quot;,namestring);
++               snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Queried domain name: \&quot;%s\&quot;&quot;,namestring);
+                restell(tempstring);
+             }
+             c+= r;
+@@ -1040,7 +1040,7 @@
+             qdatatype = sucknetword(c);
+             qclass = sucknetword(c);
+             if (qclass != C_IN){
+-               sprintf(tempstring,&quot;Resolver error: Received unsupported query class: %u (%s)&quot;,
++               snprintf(tempstring, sizeof(tempstring),&quot;Resolver error: Received unsupported query class: %u (%s)&quot;,
+                 qclass,qclass &lt; ClasstypeCount ? classtypes[qclass] :
+                  classtypes[ClasstypeCount]);
+                restell(tempstring);
+@@ -1054,7 +1054,7 @@
+                      }
+                   break;
+                default:
+-                  sprintf(tempstring,&quot;Resolver error: Received unimplemented query type: %u (%s)&quot;,
++                  snprintf(tempstring, sizeof(tempstring),&quot;Resolver error: Received unimplemented query type: %u (%s)&quot;,
+                    qdatatype,qdatatype &lt; ResourcetypeCount ?
+                     resourcetypes[qdatatype] : resourcetypes[ResourcetypeCount]);
+                   restell(tempstring);
+@@ -1076,7 +1076,7 @@
+                else
+                   usefulanswer = 1;
+                if (debug){
+-                  sprintf(tempstring,&quot;Resolver: answered domain query: \&quot;%s\&quot;&quot;,namestring);
++                  snprintf(tempstring, sizeof(tempstring),&quot;Resolver: answered domain query: \&quot;%s\&quot;&quot;,namestring);
+                   restell(tempstring);
+                }
+                c+= r;
+@@ -1089,10 +1089,10 @@
+                ttl = sucknetlong(c);
+                rdatalength = sucknetword(c);
+                if (class != qclass){
+-                  sprintf(tempstring,&quot;query class: %u (%s)&quot;,qclass,qclass &lt; ClasstypeCount ?
++                  snprintf(tempstring, sizeof(tempstring),&quot;query class: %u (%s)&quot;,qclass,qclass &lt; ClasstypeCount ?
+                    classtypes[qclass] : classtypes[ClasstypeCount]);
+                   restell(tempstring);
+-                  sprintf(tempstring,&quot;rr class: %u (%s)&quot;,class,class &lt; ClasstypeCount ?
++                  snprintf(tempstring, sizeof(tempstring),&quot;rr class: %u (%s)&quot;,class,class &lt; ClasstypeCount ?
+                    classtypes[class] : classtypes[ClasstypeCount]);
+                   restell(tempstring);
+                   restell(&quot;Resolver error: Answered class does not match queried class.&quot;);
+@@ -1108,20 +1108,20 @@
+                }
+                if (datatype == qdatatype || datatype == T_CNAME){
+                   if (debug){
+-                     sprintf(tempstring,&quot;Resolver: TTL: %s&quot;,strtdiff(sendstring,ttl));
++                     snprintf(tempstring, sizeof(tempstring),&quot;Resolver: TTL: %s&quot;,strtdiff(sendstring,ttl));
+                      restell(tempstring);
+                   }
+                   if (usefulanswer)
+                      switch (datatype){
+                         case T_A:
+                            if (rdatalength != 4){
+-                              sprintf(tempstring,&quot;Resolver error: Unsupported rdata format for \&quot;A\&quot; type. (%u bytes)&quot;,
++                              snprintf(tempstring, sizeof(tempstring),&quot;Resolver error: Unsupported rdata format for \&quot;A\&quot; type. (%u bytes)&quot;,
+                                rdatalength);
+                               restell(tempstring);
+                               return;
+                            }
+                            if (memcmp(&amp;rp-&gt;ip,(ip_t *)c,sizeof(ip_t))){
+-                              sprintf(tempstring,&quot;Resolver: Reverse authentication failed: %s != &quot;,
++                              snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Reverse authentication failed: %s != &quot;,
+                                strlongip(rp-&gt;ip));
+                               memcpy(&amp;alignedip,(ip_t *)c,sizeof(ip_t));
+                               strcat(tempstring,strlongip(alignedip.s_addr));
+@@ -1129,7 +1129,7 @@
+                               res_hostipmismatch++;
+                               failrp(rp);
+                            } else {
+-                              sprintf(tempstring,&quot;Resolver: Reverse authentication complete: %s == \&quot;%s\&quot;.&quot;,
++                              snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Reverse authentication complete: %s == \&quot;%s\&quot;.&quot;,
+                                strlongip(rp-&gt;ip),nonull(rp-&gt;hostname));
+                               restell(tempstring);
+                               res_reversesuccess++;
+@@ -1146,7 +1146,7 @@
+                               return;
+                            }
+                            if (debug){
+-                              sprintf(tempstring,&quot;Resolver: Answered domain: \&quot;%s\&quot;&quot;,namestring);
++                              snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Answered domain: \&quot;%s\&quot;&quot;,namestring);
+                               restell(tempstring);
+                            }
+                            if (r &gt; HostnameLength){
+@@ -1171,14 +1171,14 @@
+                            }
+                            break;
+                         default:
+-                           sprintf(tempstring,&quot;Resolver error: Received unimplemented data type: %u (%s)&quot;,
++                           snprintf(tempstring, sizeof(tempstring),&quot;Resolver error: Received unimplemented data type: %u (%s)&quot;,
+                             datatype,datatype &lt; ResourcetypeCount ?
+                              resourcetypes[datatype] : resourcetypes[ResourcetypeCount]);
+                            restell(tempstring);
+                      }
+                } else {
+                   if (debug){
+-                     sprintf(tempstring,&quot;Resolver: Ignoring resource type %u. (%s)&quot;,
++                     snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Ignoring resource type %u. (%s)&quot;,
+                       datatype,datatype &lt; ResourcetypeCount ?
+                        resourcetypes[datatype] : resourcetypes[ResourcetypeCount]);
+                      restell(tempstring);
+@@ -1202,7 +1202,7 @@
+          failrp(rp);
+          break;
+       default:
+-         sprintf(tempstring,&quot;Resolver: Received error response %u. (%s)&quot;,
++         snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Received error response %u. (%s)&quot;,
+           getheader_rcode(hp),getheader_rcode(hp) &lt; ResponsecodeCount ?
+            responsecodes[getheader_rcode(hp)] : responsecodes[ResponsecodeCount]);
+          restell(tempstring);
+@@ -1225,13 +1225,13 @@
+             if (_res.nsaddr_list[i].sin_addr.s_addr == from.sin_addr.s_addr)
+                break;
+       if (i == _res.nscount){
+-         sprintf(tempstring,&quot;Resolver error: Received reply from unknown source: %s&quot;,
++         snprintf(tempstring, sizeof(tempstring),&quot;Resolver error: Received reply from unknown source: %s&quot;,
+           strlongip(from.sin_addr.s_addr));
+          restell(tempstring);
+       } else
+          parserespacket((byte *)resrecvbuf,r);
+    } else {
+-      sprintf(tempstring,&quot;Resolver: Socket error: %s&quot;,strerror(errno));
++      snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Socket error: %s&quot;,strerror(errno));
+       restell(tempstring);
+    }
+ }
+@@ -1255,7 +1255,7 @@
+          case STATE_FINISHED:	/* TTL has expired */
+          case STATE_FAILED:	/* Fake TTL has expired */
+             if (debug){
+-               sprintf(tempstring,&quot;Resolver: Cache record for \&quot;%s\&quot; (%s) has expired. (state: %u)  Marked for expire at: %g, time: %g.&quot;,
++               snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Cache record for \&quot;%s\&quot; (%s) has expired. (state: %u)  Marked for expire at: %g, time: %g.&quot;,
+                 nonull(rp-&gt;hostname),strlongip(rp-&gt;ip),rp-&gt;state,rp-&gt;expiretime,sweeptime);
+                restell(tempstring);
+             }
+@@ -1307,14 +1307,14 @@
+       if ((rp-&gt;state == STATE_FINISHED) || (rp-&gt;state == STATE_FAILED)){
+          if ((rp-&gt;state == STATE_FINISHED) &amp;&amp; (rp-&gt;hostname)){
+             if (debug){
+-               sprintf(tempstring,&quot;Resolver: Used cached record: %s == \&quot;%s\&quot;.\n&quot;,
++               snprintf(tempstring, sizeof(tempstring),&quot;Resolver: Used cached record: %s == \&quot;%s\&quot;.\n&quot;,
+                 satostr(sa),rp-&gt;hostname);
+                restell(tempstring);
+             }
+             return rp-&gt;hostname;
+          } else {
+             if (debug){
+-               sprintf(tempstring,&quot;Resolver: Used failed record: %s == ???\n&quot;,
++               sprintf(tempstring, sizeof(tempstring),&quot;Resolver: Used failed record: %s == ???\n&quot;,
+                 satostr(sa));
+                restell(tempstring);
+             }
+--- mtr-0.54/mtr.c			2004-08-07 14:25:39.000000000 +0200
++++ mtr-0.54/mtr.c.CVE-2002-0497	2004-08-07 14:13:35.000000000 +0200
+@@ -192,13 +192,13 @@
+   net_preopen_result = net_preopen ();
+ 
+   /*  Now drop to user permissions  */
+-  if(setuid(getuid())) {
++  if(setgid(getgid()) || setuid(getuid())) {
+     printf(&quot;mtr: Unable to drop permissions.\n&quot;);
+     exit(1);
+   }
+ 
+   /*  Double check, just in case  */
+-  if(geteuid() != getuid()) {
++  if(geteuid() != getuid() || getegid() != getgid()) {
+     printf(&quot;mtr: Unable to drop permissions.\n&quot;);
+     exit(1);
+   }
+--- mtr-0.54/split.c			2004-08-07 14:25:39.000000000 +0200
++++ mtr-0.54/split.c.CVE-2002-0497	2004-08-07 14:18:48.000000000 +0200
+@@ -105,7 +105,7 @@
+       name = dns_lookup((struct sockaddr *)addr);
+       if(name != NULL) {
+ 	/* May be we should test name's length */
+-	sprintf(newLine, &quot;%s %d %d %d %d %d %d&quot;, name,
++	snprintf(newLine, sizeof(newLine), &quot;%s %d %d %d %d %d %d&quot;, name,
+ 		net_percent(at),
+ 		net_returned(at), net_xmit(at),
+ 		net_best(at) /1000, net_avg(at)/1000, 
+@@ -118,7 +118,7 @@
+ 			addr-&gt;sa_len,
+ #endif
+ 			hbuf, sizeof(hbuf), NULL, 0, NI_NUMERICHOST);
+-	sprintf(newLine, &quot;%s %d %d %d %d %d %d&quot;, 
++	snprintf(newLine, sizeof(newLine), &quot;%s %d %d %d %d %d %d&quot;, 
+ 		hbuf,
+ 		net_percent(at),
+ 		net_returned(at), net_xmit(at),

Added: trunk/rpms/mtr/mtr-0.54-ipv6-ifaddr.patch
===================================================================
--- trunk/rpms/mtr/mtr-0.54-ipv6-ifaddr.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr-0.54-ipv6-ifaddr.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,29 @@
+diff -urN mtr-0.54.orig/mtr.c mtr-0.54/mtr.c
+--- mtr-0.54.orig/mtr.c	2004-10-04 15:24:45.000000000 +0200
++++ mtr-0.54/mtr.c	2004-10-04 16:34:21.000000000 +0200
+@@ -250,21 +250,21 @@
+ 
+     memset(&amp;hints, 0, sizeof(hints));
+     hints.ai_family = af;
+-    hints.ai_flags = AI_PASSIVE;
++    hints.ai_flags = (AI_PASSIVE|AI_NUMERICHOST);
+     hints.ai_socktype = SOCK_DGRAM;
+-    error = getaddrinfo(NULL, &quot;0&quot;, &amp;hints, &amp;res0);
++    error = getaddrinfo(InterfaceAddress, &quot;0&quot;, &amp;hints, &amp;res0);
+     if(error) {
+       printf(&quot;mtr: bad interface address: %s\n&quot;, InterfaceAddress);
+       exit(1);
+     }
+ 
+     for(res = res0; res; res = res-&gt;ai_next) {
+-      if((res-&gt;ai_family == AF_INET) &amp;&amp; (sendsock4 == -1)) {
++      if((res-&gt;ai_family == AF_INET) &amp;&amp; (sendsock4 &gt;= 0)) {
+         if(bind(sendsock4, (struct sockaddr*)res-&gt;ai_addr, res-&gt;ai_addrlen) == -1) {
+           perror(&quot;mtr: failed to bind to interface&quot;);
+           exit(1);
+         }
+-      }else if((res-&gt;ai_family == AF_INET6) &amp;&amp; (sendsock6 == -1)) {
++      }else if((res-&gt;ai_family == AF_INET6) &amp;&amp; (sendsock6 &gt;= 0)) {
+         if(bind(sendsock6, (struct sockaddr*)res-&gt;ai_addr, res-&gt;ai_addrlen) == -1) {
+           perror(&quot;mtr: failed to bind to interface&quot;);
+           exit(1);

Added: trunk/rpms/mtr/mtr-0.54-ipv6-ip6arpa.patch
===================================================================
--- trunk/rpms/mtr/mtr-0.54-ipv6-ip6arpa.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr-0.54-ipv6-ip6arpa.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,12 @@
+diff -urN mtr-0.54.orig/dns.c mtr-0.54/dns.c
+--- mtr-0.54.orig/dns.c	2004-10-04 00:28:26.000000000 +0200
++++ mtr-0.54/dns.c	2004-10-04 00:30:40.000000000 +0200
+@@ -873,7 +873,7 @@
+       *p++ = '.';
+       *p = '\0';
+    }
+-   strcpy(p, &quot;ip6.int&quot;);
++   strcpy(p, &quot;ip6.arpa&quot;);
+    return buf;
+ }
+ #endif

Added: trunk/rpms/mtr/mtr-0.54-ipv6-kame.patch
===================================================================
(Binary files differ)


Property changes on: trunk/rpms/mtr/mtr-0.54-ipv6-kame.patch
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/rpms/mtr/mtr-0.54-servfail.patch
===================================================================
--- trunk/rpms/mtr/mtr-0.54-servfail.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr-0.54-servfail.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,24 @@
+diff -urN mtr-0.54.orig/dns.c mtr-0.54/dns.c
+--- mtr-0.54.orig/dns.c	2002-11-23 19:24:16.000000000 +0100
++++ mtr-0.54/dns.c	2004-03-05 17:27:48.000000000 +0100
+@@ -265,6 +265,7 @@
+ dword res_iplookupsuccess = 0;
+ dword res_reversesuccess = 0;
+ dword res_nxdomain = 0;
++dword res_servfail = 0;
+ dword res_nserror = 0;
+ dword res_hostipmismatch = 0;
+ dword res_unknownid = 0;
+@@ -1062,6 +1063,12 @@
+          res_nxdomain++;
+          failrp(rp);
+          break;
++      case SERVFAIL:
++         if (debug)
++            restell(&quot;Resolver: Server failure.&quot;);
++         res_servfail++;
++         failrp(rp);
++         break;
+       default:
+          sprintf(tempstring,&quot;Resolver: Received error response %u. (%s)&quot;,
+           getheader_rcode(hp),getheader_rcode(hp) &lt; ResponsecodeCount ?

Added: trunk/rpms/mtr/mtr-0.65.tar.gz~
===================================================================
(Binary files differ)


Property changes on: trunk/rpms/mtr/mtr-0.65.tar.gz~
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/rpms/mtr/mtr.spec
===================================================================
--- trunk/rpms/mtr/mtr.spec	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/mtr.spec	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,342 @@
+# $Id$
+# Authority: dag
+# Upstream: Roger Wolff &lt;R.E.Wolff$BitWizard,nl&gt;
+
+%{?rh7:%define _without_freedesktop 1}
+%{?el2:%define _without_freedesktop 1}
+%{?rh6:%define _without_freedesktop 1}
+
+%define desktop_vendor rpmforge
+
+Summary: Network diagnostic tool
+Name: mtr
+Version: 0.65
+Release: 1
+Epoch: 2
+License: GPL
+Group: Applications/Internet
+URL: <A HREF="http://www.BitWizard.nl/mtr">http://www.BitWizard.nl/mtr</A>
+
+Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
+
+Source: <A HREF="ftp://ftp.bitwizard.nl/mtr/mtr-%{version">ftp://ftp.bitwizard.nl/mtr/mtr-%{version</A>}.tar.gz
+Patch0: mtr-0.49-s390x.patch
+Patch1: mtr-0.54-ipv6-kame.patch
+Patch2: mtr-0.48-nogtk.patch
+Patch3: mtr-0.52-SA_LEN.patch
+Patch4: mtr-0.54-servfail.patch
+Patch5: mtr-0.54-CVE-2002-0497.patch
+Patch6: mtr-0.54-ipv6-ifaddr.patch
+Patch7: mtr-0.54-ipv6-ip6arpa.patch
+Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+BuildRequires: ncurses-devel, libtermcap-devel
+BuildRequires: automake, gtk+-devel
+
+%description
+Mtr is a network diagnostic tool that combines ping and traceroute
+into one program. Mtr provides two interfaces: an ncurses interface,
+useful for using Mtr from a telnet session; and a GTK+ interface for X
+(provided in the mtr-gtk package).
+
+%package gtk
+Summary: The GTK+ interface for mtr.
+Group: Applications/Internet
+Requires: mtr = %{epoch}:%{version}-%{release}
+Requires: usermode &gt;= 1.37
+
+%description gtk
+The mtr-gtk package provides the GTK+ interface for the mtr network
+diagnostic tool.
+
+%prep
+%setup
+%patch0 -p1 -b .s390x
+#%patch1 -p1 -b .ipv6-kame
+#%patch2 -p1 -b .nogtk
+#%patch3 -p1 -b .SA_LEN
+#%patch4 -p1 -b .servfail
+#%patch5 -p1 -b .CVE-2002-0497
+#%patch6 -p1 -b .ipv6-ifaddr
+#%patch7 -p1 -b .ipv6-ip6arpa
+
+%{__cat} &lt;&lt;EOF &gt;xmtr.desktop
+[Desktop Entry]
+Name=Traceroute
+Type=Application
+Comment=Traces packets between two network hosts
+Exec=xmtr
+Terminal=false
+Icon=xmtr.xpm
+Encoding=UTF-8
+X-Desktop-File-Install-Version=0.2
+Categories=System;Application;
+EOF
+
+%{__cat} &lt;&lt;EOF &gt;xmtr.pam
+#%PAM-1.0
+auth       sufficient	pam_rootok.so
+auth       required	pam_stack.so service=system-auth
+session    required	pam_permit.so
+session    optional	pam_xauth.so
+account    required	pam_permit.so
+EOF
+
+%{__cat} &lt;&lt;EOF &gt;xmtr.consolehelper
+USER=root
+PROGRAM=%{_sbindir}/xmtr
+SESSION=true
+EOF
+
+%build
+aclocal
+automake -a
+autoconf
+%configure \
+	--with-gtk \
+	--enable-ipv6
+%{__make} %{?_smp_mflags}
+%{__mv} -f mtr xmtr
+
+%{__make} distclean
+%configure \
+	--without-gtk \
+	--enable-ipv6
+%{__make} %{?_smp_mflags}
+
+%install
+%{__rm} -rf %{buildroot}
+%{__install} -D -m0755 mtr %{buildroot}%{_sbindir}/mtr
+%{__make} install \
+	DESTDIR=&quot;%{buildroot}&quot;
+
+%{__install} -D -m0755 xmtr %{buildroot}%{_sbindir}/xmtr
+%{__install} -D -m0644 img/mtr_icon.xpm %{buildroot}%{_datadir}/pixmaps/xmtr.xpm
+%{__install} -D -m0644 xmtr.consolehelper %{buildroot}%{_sysconfdir}/security/console.apps/xmtr
+%{__install} -D -m0644 xmtr.pam %{buildroot}%{_sysconfdir}/pam.d/xmtr
+%{__install} -d -m0755 %{buildroot}%{_bindir}
+%{__ln_s} -f consolehelper %{buildroot}%{_bindir}/xmtr
+
+%if %{?_without_freedesktop:1}0
+	%{__install} -D -m0644 xmtr.desktop %{buildroot}%{_datadir}/gnome/apps/Internet/xmtr.desktop
+%else
+	%{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
+	desktop-file-install --vendor %{desktop_vendor}    \
+		--add-category X-Red-Hat-Base              \
+		--dir %{buildroot}%{_datadir}/applications \
+		xmtr.desktop
+%endif
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files
+%defattr(-, root, root, 0755)
+%doc AUTHORS COPYING FORMATS NEWS README SECURITY
+%doc %{_mandir}/man8/mtr.8*
+%{_sbindir}/mtr
+
+%files gtk
+%defattr(-, root, root, 0755)
+%{_bindir}/xmtr
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-xmtr.desktop}
+%{?_without_freedesktop:%{_datadir}/gnome/apps/Internet/xmtr.desktop}
+%{_datadir}/pixmaps/xmtr.xpm
+%{_sbindir}/xmtr
+%{_sysconfdir}/pam.d/xmtr
+%{_sysconfdir}/security/console.apps/xmtr
+
+%changelog
+* Thu Nov 25 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2:0.65-1
+- Updated to release 0.65.
+
+* Mon Oct 18 2004 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 2:0.54-10
+- rebuilt
+
+* Wed Oct 06 2004 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 2:0.54-9
+- Add CVE patch for security reasons (#129386)
+- Add patch to fix broken --address option (#132628)
+- Add patch to fix broken reverse DNS lookups for ipv6 (#134532)
+
+* Tue Aug 24 2004 Warren Togami &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">wtogami at redhat.com</A>&gt; 2:0.54-8
+- #121705 and other spec cleanups
+- remove redundant documentation
+
+* Thu Jul 01 2004 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.54-7
+- Fixed broken behaviour with resolver SERVFAIL results (#125392)
+- Added ncurses-devel libtermcap-devel as BuildPreReq (#124553)
+- Added gtk+ Requires for mtr-gtk package (#121705)
+
+* Tue Jun 15 2004 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt;
+- rebuilt
+
+* Wed Apr 21 2004 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.54-5
+- Removed absolute path for Icon in desktop file (#120170)
+
+* Mon Feb 16 2004 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt;
+- Added IPv6 patch from <A HREF="ftp://ftp.kame.net/pub/kame/misc/mtr-054-*">ftp://ftp.kame.net/pub/kame/misc/mtr-054-*</A>
+- Enabled IPv6 in mtr.
+- Included fix from Robert Scheck to make GTK optional in configure.
+
+* Fri Feb 13 2004 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt;
+- rebuilt
+
+* Wed Feb 04 2004 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.54-2
+- Fix to build on current tree.
+
+* Sat Oct 18 2003 Florian La Roche &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Florian.LaRoche at redhat.de</A>&gt;
+- update to 0.54
+
+* Wed Jun 04 2003 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt;
+- rebuilt
+
+* Wed Jan 22 2003 Tim Powers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">timp at redhat.com</A>&gt;
+- rebuilt
+
+* Fri Nov 29 2002 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.52-1
+- Update to latest upstream version (0.52).
+
+* Tue Nov 12 2002 Nalin Dahyabhai &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">nalin at redhat.com</A>&gt; 0.49-9
+- Remove absolute paths from the PAM configuration, ensuring that the modules
+  for the right arch get used on multilib systems.
+- Remove Icon:.
+
+* Tue Sep 24 2002 Bernhard Rosenkraenzer &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">bero at redhat.com</A>&gt; 0.49-7a
+- Fix build on s390x
+
+* Mon Aug 19 2002 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.49-7
+- Fixed consolehelper support.
+
+* Wed Aug 07 2002 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.49-6
+- Desktop file fixes (#69550).
+
+* Fri Jun 21 2002 Tim Powers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">timp at redhat.com</A>&gt; 0.49-5
+- automated rebuild
+
+* Tue Jun 18 2002 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.49-4
+- Added consolehelper support to xmtr.
+
+* Sun May 26 2002 Tim Powers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">timp at redhat.com</A>&gt;
+- automated rebuild
+
+* Wed May 22 2002 Phil Knirsch &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pknirsch at redhat.com</A>&gt; 0.49-2
+- Fixed autoFOO problems.
+
+* Fri Mar 08 2002 Florian La Roche &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Florian.LaRoche at redhat.de</A>&gt;
+- 0.49 update
+
+* Thu Mar 07 2002 Florian La Roche &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Florian.LaRoche at redhat.de</A>&gt;
+- 0.48 update
+
+* Mon Jun 25 2001 Preston Brown &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pbrown at redhat.com</A>&gt;
+- 0.44 bugfix release
+- fix display of icon in .desktop entry
+
+* Sun Jun 24 2001 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt;
+- Bump release + rebuild.
+
+* Mon Feb 12 2001 Preston Brown &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pbrown at redhat.com</A>&gt;
+- don't advertise gtk support in non-gtk binary (#27172)
+
+* Fri Oct 20 2000 Bill Nottingham &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">notting at redhat.com</A>&gt;
+- fix autoconf check for resolver functions
+
+* Fri Jul 21 2000 Bill Nottingham &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">notting at redhat.com</A>&gt;
+- fix group
+
+* Wed Jul 12 2000 Prospector &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">bugzilla at redhat.com</A>&gt;
+- automatic rebuild
+
+* Thu Jul  6 2000 Bill Nottingham &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">notting at redhat.com</A>&gt;
+- fix setuid bit
+- remove symlink
+- force build of non-gtk version
+
+* Mon Jun 19 2000 Preston Brown &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pbrown at redhat.com</A>&gt;
+- disable SUID bits
+- desktop entry
+
+* Mon Jun 19 2000 Than Ngo &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">than at redhat.de</A>&gt;
+- FHS fixes
+
+* Fri May 26 2000 Preston Brown &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">pbrown at redhat.com</A>&gt;
+- adopted for Winston
+
+* Thu Aug 19 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.41-1]
+- Added afr's patch to allow disabeling of gtk without Robn's hack. 
+- Made report mode report the newly added extra resolution. 
+
+* Wed Aug 18 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+- renamed mtr-gtk to xmtr
+- added symlink from /usr/bin/mtr to /usr/sbin/mtr
+
+  [mtr-0.40-1]
+- Fixed some problems with HPUX and SunOS.
+- Included Olav Kvittem's patch to do packetsize option.
+- Made the timekeeping in micro seconds.
+
+* Wed Jun 10 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.39-1]
+- Updated to version 0.39.
+
+* Wed Jun  9 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.38-1]
+- Updated to version 0.38.
+
+* Thu Apr 15 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.37-2]
+- Changed RPM headers to conform to Red Hat Contrib|Net specs.
+
+* Mon Apr 12 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.37-1]
+- v0.37
+- Added Bill Bogstad's &quot;show the local host &amp; time&quot; patch. 
+- Added R. Sparks' show-last-ping patch, submitted by Philip Kizer.
+
+- v0.36
+- Added Craigs change-the-interval-on-the-fly patch.
+- Added Moritz Barsnick's &quot;do something sensible if host not found&quot; 
+  patch.
+- Some cleanup of both Craigs and Moritz' patches.
+
+* Wed Apr  7 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.35-1]
+- v0.35
+- Added Craig Milo Rogers pause/resume for GTK patch.
+- Added Craig Milo Rogers cleanup of &quot;reset&quot;. (restart at the beginning)
+- Net_open used to send a first packet. After that the display-driver
+  got a chance to distort the timing by taking its time to initialize.
+
+* Mon Apr  5 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.34-1]
+- v0.34
+- Added Matt's nifty &quot;use the icmp unreachables to do the timing&quot; patch.
+- Added Steve Kann's pause/resume patch.
+
+* Wed Mar 10 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.33-1]
+- v0.33
+- Fixed the Linux glibc resolver problems.
+- Fixed the off-by-one problem with -c option.
+
+* Mon Mar  8 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.32-1]
+- v0.32
+- Fixed the FreeBSD bug detection stuff.
+
+* Fri Mar  5 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.31-1]
+- v0.31
+- Fixed a few documentation issues. -- Matt
+-  Changed the autoconf stuff to find the resolver library on
+     Solaris. -- REW
+-  Cleaned up the autoconf.in file a bit. -- Matt.
+
+* Thu Mar  4 1999 Ryan Weaver &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ryanw at infohwy.com</A>&gt;
+  [mtr-0.30-1]
+- Build gtk version against gtk+-1.2.0
+- v0.30
+- Fixed a typo in the changelog (NEWS) entry for 0.27. :-)
+- added use of &quot;MTR_OPTIONS&quot; environment variable for defaults.


Property changes on: trunk/rpms/mtr/mtr.spec
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Added: trunk/rpms/mtr/xmtr.consolehelper
===================================================================
--- trunk/rpms/mtr/xmtr.consolehelper	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/xmtr.consolehelper	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,3 @@
+USER=root
+PROGRAM=/usr/X11R6/bin/xmtr
+SESSION=true

Added: trunk/rpms/mtr/xmtr.pam
===================================================================
--- trunk/rpms/mtr/xmtr.pam	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/mtr/xmtr.pam	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,6 @@
+#%PAM-1.0
+auth       sufficient	pam_rootok.so
+auth       required	pam_stack.so service=system-auth
+session    required	pam_permit.so
+session    optional	pam_xauth.so
+account    required	pam_permit.so

Added: trunk/rpms/streamdvd/streamdvd.spec
===================================================================
--- trunk/rpms/streamdvd/streamdvd.spec	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/streamdvd/streamdvd.spec	2004-12-03 06:45:18 UTC (rev 2595)
@@ -0,0 +1,52 @@
+# $Id$
+# Authority: dag
+
+%define real_name StreamDVD
+
+Summary: Tool to backup DVDs
+Name: streamdvd
+Version: 0.4
+Release: 1
+License: GPL
+Group: Applications/Multimedia
+URL: <A HREF="http://www.badabum.de/streamdvd.html">http://www.badabum.de/streamdvd.html</A>
+
+Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
+
+Source: <A HREF="http://www.badabum.de/down/streamdvd-%{version">http://www.badabum.de/down/streamdvd-%{version</A>}.tar.gz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+BuildRequires: libdvdread-devel &gt;= 0.9.2
+
+%description
+StreamDVD is a fast tool to backup Video DVDs. You can select the desired
+title, chapters, video, audio and subpicture streams and also a resize
+factor and StreamDVD will write a 'ready to author' vob file to stdout.
+
+%prep
+%setup -n %{real_name}-%{version}
+
+%build
+%{__make} %{?_smp_mflags} \
+	CFLAGS=&quot;%{optflags}&quot;
+%{__make} %{?_smp_mflags} -C contrib/StreamAnalyze \
+	CFLAGS=&quot;%{optflags}&quot;
+
+%install
+%{__rm} -rf %{buildroot}
+%{__install} -D -m0755 streamdvd %{buildroot}%{_bindir}/streamdvd
+%{__install} -D -m0755 contrib/StreamAnalyze/streamanalyze %{buildroot}%{_bindir}/streamanalyze
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files
+%defattr(-, root, root, 0755)
+%doc COPYING README
+%{_bindir}/streamanalyze
+%{_bindir}/streamdvd
+
+%changelog
+* Fri Dec 03 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4-1
+- Initial package. (using DAR)


Property changes on: trunk/rpms/streamdvd/streamdvd.spec
___________________________________________________________________
Name: svn:keywords
   + Id
Name: svn:eol-style
   + native

Modified: trunk/rpms/subversion/subversion-0.24.2-swig.patch
===================================================================
--- trunk/rpms/subversion/subversion-0.24.2-swig.patch	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/subversion/subversion-0.24.2-swig.patch	2004-12-03 06:45:18 UTC (rev 2595)
@@ -1,26 +1,16 @@
 
 Remove code to pick up LDFLAGS for swig; breaks for lib64.
 
---- subversion-0.24.2/build/ac-macros/swig.m4.swig
-+++ subversion-0.24.2/build/ac-macros/swig.m4
-@@ -69,20 +69,6 @@
-       ])
-       SWIG_LIBSWIG_DIR=&quot;$ac_cv_swig_swiglib_dir&quot;
- 
--      AC_CACHE_CHECK([if swig needs -L for its libraries],
--        [ac_cv_swig_ldflags],[
--        # The swig libraries are one directory above the
--        # `swig -swiglib` directory.
--        ac_cv_swig_ldflags=&quot;&quot;
--        swig_lib_dir=&quot;`dirname $ac_cv_swig_swiglib_dir`&quot;
--        if test &quot;$swig_lib_dir&quot; &amp;&amp;
--           test &quot;$swig_lib_dir&quot; != &quot;/lib&quot; &amp;&amp;
+--- subversion-1.1.0/build/ac-macros/swig.m4.swig
++++ subversion-1.1.0/build/ac-macros/swig.m4
+@@ -138,7 +138,9 @@
+         swig_lib_dir=&quot;`dirname $ac_cv_swig_swiglib_dir`&quot;
+         if test &quot;$swig_lib_dir&quot; &amp;&amp;
+            test &quot;$swig_lib_dir&quot; != &quot;/lib&quot; &amp;&amp;
 -           test &quot;$swig_lib_dir&quot; != &quot;/usr/lib&quot;; then
--          ac_cv_swig_ldflags=&quot;-L$swig_lib_dir&quot;
--        fi
--      ])
--      SWIG_LDFLAGS=&quot;$ac_cv_swig_ldflags&quot;
--
-       AC_CACHE_CHECK([for Python includes], [ac_cv_python_includes],[
-         ac_cv_python_includes=&quot;`$PYTHON ${abs_srcdir}/build/get-py-info.py --includes`&quot;
++           test &quot;$swig_lib_dir&quot; != &quot;/lib64&quot; &amp;&amp;
++           test &quot;$swig_lib_dir&quot; != &quot;/usr/lib&quot; &amp;&amp;
++           test &quot;$swig_lib_dir&quot; != &quot;/usr/lib64&quot;; then
+           ac_cv_swig_ldflags=&quot;-L$swig_lib_dir&quot;
+         fi
        ])

Modified: trunk/rpms/subversion/subversion.spec
===================================================================
--- trunk/rpms/subversion/subversion.spec	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/subversion/subversion.spec	2004-12-03 06:45:18 UTC (rev 2595)
@@ -1,13 +1,18 @@
 # $Id$
 # Authority: matthias
 
+# ExcludeDist: fc3
 # Tag: test
 
 %{?dist: %{expand: %%define %dist 1}}
 
-%{?el3:%define _without_perl 1}
-%{?el3:%define _without_python 1}
+%{?el3:%define _without_swig 1}
 
+%if %{?_without_swig:1}0
+%define _without_perl 1
+%define _without_python 1
+%endif
+
 # set to zero to avoid running test suite
 %define make_check 0
 
@@ -15,8 +20,8 @@
 
 Summary: Modern Version Control System designed to replace CVS
 Name: subversion
-Version: 1.0.9
-Release: 2
+Version: 1.1.1
+Release: 1
 License: BSD
 Group: Development/Tools
 URL: <A HREF="http://subversion.tigris.org/">http://subversion.tigris.org/</A>
@@ -24,19 +29,18 @@
 Source0: <A HREF="http://subversion.tigris.org/tarballs/subversion-%{version">http://subversion.tigris.org/tarballs/subversion-%{version</A>}.tar.bz2
 Source1: subversion.conf
 Source3: filter-requires.sh
+Source4: <A HREF="http://www.xsteve.at/prg/emacs/psvn.el">http://www.xsteve.at/prg/emacs/psvn.el</A>
 Patch1: subversion-0.24.2-swig.patch
 Patch2: subversion-0.20.1-deplibs.patch
 Patch3: subversion-0.31.0-rpath.patch
-Patch4: subversion-1.0.2-blame.patch
-Patch5: subversion-r8822.patch
 Patch6: subversion-1.0.3-pie.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildRequires: autoconf, libtool, python, python-devel, texinfo
 BuildRequires: db4-devel &gt;= 4.1.25, expat-devel, docbook-style-xsl
 BuildRequires: apr-devel &gt;= 0.9.3-2, apr-util-devel &gt;= 0.9.3-2, openssl-devel
-%{!?_without_python:BuildRequires: swig}
-%{!?_without_perl:BuildRequires: neon-devel &gt;= 0.24.6-1}
+#%{!?_without_swig:BuildRequires: swig &gt;= 1.3.21-5, neon-devel &gt;= 0.24.7-1}
+%{!?_without_swig:BuildRequires: swig, neon-devel}
 
 %define __perl_requires %{SOURCE3}
 
@@ -88,8 +92,6 @@
 %patch1 -p1 -b .swig
 %patch2 -p1 -b .deplibs
 %patch3 -p1 -b .rpath
-%patch4 -p1 -b .blame
-%patch5 -p1 -b .r8822
 %patch6 -p1 -b .pie
 
 rm -rf neon apr apr-util db4
@@ -120,13 +122,13 @@
 %endif
 
 %if %{!?_without_perl:1}0
-%{__make} %{?_smp_mflags} swig-pl-lib %{swigdirs}}
+%{__make} %{?_smp_mflags} swig-pl %{swigdirs}}
 
 # build the perl modules
-pushd subversion/bindings/swig/perl
-CFLAGS=&quot;%{optflags}&quot; %{__perl} Makefile.PL INSTALLDIRS=&quot;vendor&quot;
-%{__make} %{?_smp_mflags}
-popd
+#pushd subversion/bindings/swig/perl
+#CFLAGS=&quot;%{optflags}&quot; %{__perl} Makefile.PL INSTALLDIRS=&quot;vendor&quot;
+#%{__make} %{?_smp_mflags}
+#popd
 %endif
 
 %install
@@ -143,10 +145,12 @@
 %{__make} install-swig-pl-lib %{swigdirs} \
         DESTDIR=&quot;%{buildroot}&quot;
 
-%{__make} pure_install -C subversion/bindings/swig/perl \
+%{__make} pure_vendor_install -C subversion/bindings/swig/perl/native \
         PERL_INSTALL_ROOT=&quot;%{buildroot}&quot;
 %endif
 
+%find_lang %{name}
+
 # Add subversion.conf configuration file into httpd/conf.d directory.
 %{__install} -D -m0644 %{SOURCE1} %{buildroot}%{_sysconfdir}/httpd/conf.d/subversion.conf
 
@@ -172,13 +176,16 @@
 %{__rm} -rf tools/*/*.in tools/test-scripts \
        doc/book/book/images/images doc/book/book/images/*.ppt
 
+# Install psvn for emacs and xemacs
+%{__install} -D -m0644 %{SOURCE4} %{buildroot}%{_datadir}/emacs/site-lisp
+%{__install} -D -m0644 %{SOURCE4} %{buildroot}%{_datadir}/xemacs/site-packages/lisp
+
 # Rename authz_svn INSTALL doc for docdir
 ln -f subversion/mod_authz_svn/INSTALL mod_authz_svn-INSTALL
 
 %if %{make_check}
 %check
 %{__make} check CLEANUP=yes
-%{__make} -C subversion/bindings/swig/perl test
 %endif
 
 %clean
@@ -192,16 +199,19 @@
 
 %postun perl -p /sbin/ldconfig
 
-%files
+%files -f %{name}.lang
 %defattr(-, root, root, 0755)
 %doc BUGS COMMITTERS COPYING HACKING INSTALL README CHANGES
 %doc tools subversion/LICENSE mod_authz_svn-INSTALL
-%doc doc/book/book/book.html doc/book/book/images
+%doc doc/book/book/svn-book.html doc/book/book/images
+%doc contrib/client-side/svn_load_dirs{.pl,_*,.README}
 %{_bindir}/*
 %{_libdir}/libsvn_*.so.*
 %{_mandir}/man*/*
 #%exclude %{_bindir}/neon-config
 #%exclude %{_mandir}/man3/*
+%{_datadir}/emacs/site-lisp
+%{_datadir}/xemacs/site-packages/lisp
 %{!?_without_perl:%exclude %{_libdir}/libsvn_swig_perl*}
 %{!?_without_perl:%exclude %{_mandir}/man*/*::*}
 %{!?_without_python:%{pydir}/svn}
@@ -210,7 +220,7 @@
 %files devel
 %defattr(-, root, root, 0755)
 #%{_bindir}/neon-config
-%{_includedir}/subversion-1
+%{_includedir}/subversion-1/
 %{_libdir}/libsvn*.a
 %{_libdir}/libsvn*.la
 %{_libdir}/libsvn*.so

Modified: trunk/rpms/xmms-imms/xmms-imms.spec
===================================================================
--- trunk/rpms/xmms-imms/xmms-imms.spec	2004-12-02 21:56:50 UTC (rev 2594)
+++ trunk/rpms/xmms-imms/xmms-imms.spec	2004-12-03 06:45:18 UTC (rev 2595)
@@ -46,7 +46,8 @@
 %{__autoheader}
 %{__autoconf}
 %configure
-%{__make} %{?_smp_mflags}
+%{__make} %{?_smp_mflags} \
+	LDFLAGS=&quot;-lm&quot;
 
 %install
 %{__rm} -rf %{buildroot}


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001399.html">[SVN] r2594 - trunk/tools/dstat
</A></li>
	<LI>Next message: <A HREF="001401.html">[SVN] r2596 - in trunk/rpms: mtr videolan-client
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1400">[ date ]</a>
              <a href="thread.html#1400">[ thread ]</a>
              <a href="subject.html#1400">[ subject ]</a>
              <a href="author.html#1400">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
