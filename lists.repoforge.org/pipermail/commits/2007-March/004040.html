<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5241 - in trunk/rpms: . cairo directfb gstreamer-plugins-bad	gstreamer-plugins-extras gstreamer-plugins-ugly inkscape js	liboil nsc soundtouch swfdec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5241%20-%20in%20trunk/rpms%3A%20.%20cairo%20directfb%20gstreamer-plugins-bad%0A%09gstreamer-plugins-extras%20gstreamer-plugins-ugly%20inkscape%20js%0A%09liboil%20nsc%20soundtouch%20swfdec&In-Reply-To=%3C20070325203221.6FAD1944B61%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004039.html">
   <LINK REL="Next"  HREF="004041.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5241 - in trunk/rpms: . cairo directfb gstreamer-plugins-bad	gstreamer-plugins-extras gstreamer-plugins-ugly inkscape js	liboil nsc soundtouch swfdec</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5241%20-%20in%20trunk/rpms%3A%20.%20cairo%20directfb%20gstreamer-plugins-bad%0A%09gstreamer-plugins-extras%20gstreamer-plugins-ugly%20inkscape%20js%0A%09liboil%20nsc%20soundtouch%20swfdec&In-Reply-To=%3C20070325203221.6FAD1944B61%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5241 - in trunk/rpms: . cairo directfb gstreamer-plugins-bad	gstreamer-plugins-extras gstreamer-plugins-ugly inkscape js	liboil nsc soundtouch swfdec">packagers at lists.rpmforge.net
       </A><BR>
    <I>Sun Mar 25 22:32:21 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004039.html">[svn] r5240 - trunk/rpms/gnome-applet-timer
</A></li>
        <LI>Next message: <A HREF="004041.html">[svn] r5242 - in trunk/rpms: . amsn arpd dosbox fragroute honeyd	icewm imlib iodine iptstate libdnsres libevent memcached	nttlscan pcsc-lite python-elementtree sharedance skystreets	tor trickle udpcast vomit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4040">[ date ]</a>
              <a href="thread.html#4040">[ thread ]</a>
              <a href="subject.html#4040">[ subject ]</a>
              <a href="author.html#4040">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2007-03-25 22:32:19 +0200 (Sun, 25 Mar 2007)
New Revision: 5241

Added:
   trunk/rpms/inkscape/inkscape-0.39.spec
   trunk/rpms/js/js-1.5-threadsafe.patch
   trunk/rpms/js/js-1.5-va_copy.patch
   trunk/rpms/js/js-1.5.spec
   trunk/rpms/js/js-1.60-ncurses.patch
   trunk/rpms/js/js-ldflags.patch
   trunk/rpms/js/js-perlconnect.patch
   trunk/rpms/soundtouch/
   trunk/rpms/soundtouch/soundtouch.spec
Modified:
   trunk/rpms/cairo/cairo.spec
   trunk/rpms/directfb/directfb.spec
   trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec
   trunk/rpms/gstreamer-plugins-extras/gstreamer-plugins-extras.spec
   trunk/rpms/gstreamer-plugins-ugly/gstreamer-plugins-ugly.spec
   trunk/rpms/js/js-shlib.patch
   trunk/rpms/js/js.spec
   trunk/rpms/liboil/liboil.spec
   trunk/rpms/nsc/nsc.spec
   trunk/rpms/swfdec/swfdec.spec
Log:
Updates

Modified: trunk/rpms/cairo/cairo.spec
===================================================================
--- trunk/rpms/cairo/cairo.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/cairo/cairo.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -2,21 +2,30 @@
 # Authority: dag
 # Upstream: &lt;cairo$cairographics,org&gt;
 
+### EL5 ships with version 1.2.4-1.fc6
+# ExclusiveDist: el2 rh7 rh9 el3 el4
+
 %{?dist: %{expand: %%define %dist 1}}
 
-%{?fc1:%define _without_xorg 1}
-%{?el3:%define _without_xorg 1}
-%{?rh9:%define _without_xorg 1}
-%{?rh8:%define _without_xorg 1}
-%{?rh7:%define _without_xorg 1}
-# %{?el2:%define _without_xorg 1}
-%{?rh6:%define _without_xorg 1}
-%{?yd3:%define _without_xorg 1}
+%{!?dist:%define _with_modxorg 1}
+%{?fc7:  %define _with_modxorg 1}
+%{?el5:  %define _with_modxorg 1}
+%{?fc6:  %define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
 
+%{?rh9:%define _without_directfb 1}
+%{?rh7:%define _without_directfb 1}
+%{?el2:%define _without_directfb 1}
+
+%{?rh7:%define _without_fontconfig 1}
+%{?el2:%define _without_fontconfig 1}
+
+%{?rh7:%define _without_pkgconfig 1}
+
 Summary: Anti-aliased vector-based rendering for X
 Name: cairo
-Version: 0.2.0
-Release: 1.2
+Version: 1.2.4
+Release: 1
 License: MIT
 Group: System Environment/Libraries
 URL: <A HREF="http://cairo.freedesktop.org/">http://cairo.freedesktop.org/</A>
@@ -24,11 +33,13 @@
 Source: <A HREF="http://cairo.freedesktop.org/snapshots/cairo-%{version">http://cairo.freedesktop.org/snapshots/cairo-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
-BuildRequires: pkgconfig, freetype-devel, fontconfig-devel, libpixman-devel
+BuildRequires: pkgconfig, freetype-devel, libpixman-devel
 BuildRequires: libpng-devel, gcc-c++
+%{!?_without_directfb:BuildRequires: directfb-devel &gt;= 0.9.24}
+%{!?_without_fontconfig:BuildRequires: fontconfig-devel}
 #BuildRequires: glitz-devel, libxcb-devel
-%{?_without_xorg:BuildRequires: XFree86-devel}
-%{!?_without_xorg:BuildRequires: xorg-x11-devel}
+%{?_with_modxorg:BuildRequires: libX11-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 
 %description
 Cairo provides anti-aliased vector-based rendering for X. Paths consist
@@ -52,19 +63,21 @@
 %setup
 
 %build
-%configure
+%{?_without_pkgconfig:export png_CFLAGS=&quot;$(libpng-config --cflags)&quot;}
+%{?_without_pkgconfig:export png_LIBS=&quot;$(libpng-config --libs)&quot;}
+%{?_without_pkgconfig:export png_REQUIRES=&quot; &quot;}
+
+%configure \
+%{!?_without_directfb:--enable-directfb}
 %{__make} %{?_smp_mflags}
 
 %install
 %{__rm} -rf %{buildroot}
-%makeinstall
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 
-%post
-/sbin/ldconfig 2&gt;/dev/null
+%post -p /sbin/ldconfig
+%postun -p /sbin/ldconfig
 
-%postun
-/sbin/ldconfig 2&gt;/dev/null
-
 %clean
 %{__rm} -rf %{buildroot}
 
@@ -75,16 +88,17 @@
 
 %files devel
 %defattr(-, root, root, 0755)
-%{_includedir}/cairo.h
-%{_includedir}/cairo-features.h
+%doc %{_datadir}/gtk-doc/html/cairo/
+%{_includedir}/cairo/
 %{_libdir}/libcairo.a
 %exclude %{_libdir}/libcairo.la
 %{_libdir}/libcairo.so
 %{_libdir}/pkgconfig/cairo.pc
+%{_libdir}/pkgconfig/cairo-*.pc
 
 %changelog
-* Sat Apr 08 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.2.0-1.2
-- Rebuild for Fedora Core 5.
+* Sun Jan 02 2005 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.0-1
+- Updated to release 0.2.0.
 
 * Wed Feb 25 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.1.23-1
 - Updated to release 0.1.23.

Modified: trunk/rpms/directfb/directfb.spec
===================================================================
--- trunk/rpms/directfb/directfb.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/directfb/directfb.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -1,17 +1,30 @@
 # $Id$
 # Authority: matthias
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?el5:%define _with_sysfs 1}
+
+%define real_name DirectFB
+%define real_version 0.9.25
+
 Summary: Hardware graphics acceleration library
 Name: directfb
-Version: 0.9.24
+Version: 0.9.25.1
 Release: 1
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://www.directfb.org/">http://www.directfb.org/</A>
+
 Source: <A HREF="http://www.directfb.org/download/DirectFB/DirectFB-%{version">http://www.directfb.org/download/DirectFB/DirectFB-%{version</A>}.tar.gz
+Patch0: DirectFB-0.9.25.1-types.patch
+Patch1: DirectFB-0.9.25.1-linux-compiler.patch
+Patch2: DirectFB-0.9.25.1-ppc.patch
+Patch3: DirectFB-0.9.25.1-sysfs.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
 BuildRequires: libpng-devel, libjpeg-devel, zlib-devel, freetype-devel &gt;= 2.0
-BuildRequires: SDL-devel, libtool, gcc-c++
+BuildRequires: SDL-devel, libtool, gcc-c++, libvncserver-devel
+%{?_with_sysfs:BuildRequires: libsysfs-devel}
 
 %description
 DirectFB is a thin library that provides hardware graphics acceleration,
@@ -22,116 +35,110 @@
 the underlying hardware. DirectFB adds graphical power to embedded systems
 and sets a new standard for graphics under Linux.
 
-
 %package devel
-Summary: Development files for DirectFB
+Summary: Header files, libraries and development documentation for %{name}.
 Group: Development/Libraries
-Requires: %{name} = %{version}, SDL-devel
+Requires: %{name} = %{version}-%{release}
+Requires: SDL-devel
 
 %description devel
-DirectFB is a thin library that provides hardware graphics acceleration,
-input device handling and abstraction, integrated windowing system with
-support for translucent windows and multiple display layers on top of the
-Linux Framebuffer Device. It is a complete hardware abstraction layer with
-software fallbacks for every graphics operation that is not supported by
-the underlying hardware. DirectFB adds graphical power to embedded systems
-and sets a new standard for graphics under Linux.
+This package contains the header files, static libraries and development
+documentation for %{name}. If you like to develop programs using %{name},
+you will need to install %{name}-devel.
 
-Header files needed for building applications based on DirectFB.
-
-
 %prep
-%setup -n DirectFB-%{version}
+%setup -n %{real_name}-%{version}
+%patch0 -p1 -b .types
+%patch1 -p1 -b .linux-compiler
+%patch2 -p1 -b .ppc
+%patch3 -p1 -b .sysfs
 
-
 %build
 %configure \
-    --enable-fbdev \
-    --enable-static \
-    --enable-linux-input \
-    --disable-maintainer-mode \
-    --disable-fast-install
+	--disable-dependency-tracking \
+	--disable-fast-install \
+	--disable-maintainer-mode \
+%ifarch x86_64
+	--disable-mmx \
+%endif
+	--enable-fbdev \
+	--enable-linux-input \
+	--enable-static \
+	--enable-video4linux2 \
+	--enable-zlib
 %{__make} %{?_smp_mflags}
 
-
 %install
 %{__rm} -rf %{buildroot}
-# Ugly libtool hack!
-#rm -f libtool &amp;&amp; cp -a `which libtool` . || :
-%{__make} install DESTDIR=%{buildroot}
-# Remove all *.la files
-find %{buildroot} -name &quot;*.la&quot; | xargs rm -f
-# Clean up the docs
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
+
+### Clean up the docs
 %{__rm} -f docs/html/Makefile*
 
-
 %clean
 %{__rm} -rf %{buildroot}
 
+%post -p /sbin/ldconfig
+%postun -p /sbin/ldconfig
 
-%post
-/sbin/ldconfig
-
-%postun
-/sbin/ldconfig
-
-
 %files
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog COPYING docs/README.screenshots fb.modes NEWS README
-%{_libdir}/*.so.*
-%dir %{_libdir}/%{name}-%{version}
-%dir %{_libdir}/%{name}-%{version}/gfxdrivers
-%dir %{_libdir}/%{name}-%{version}/inputdrivers
-%dir %{_libdir}/%{name}-%{version}/interfaces
-%dir %{_libdir}/%{name}-%{version}/interfaces/*
-%dir %{_libdir}/%{name}-%{version}/systems
-%{_libdir}/%{name}-%{version}/gfxdrivers/*.so
-%{_libdir}/%{name}-%{version}/gfxdrivers/*.o
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_joystick.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_keyboard.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_mutouch.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_linux_input.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_lirc.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_ps2mouse.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_serialmouse.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_sonypi.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_wm97xx_ts.so
-%{_libdir}/%{name}-%{version}/inputdrivers/libdirectfb_sdlinput.so
-%{_libdir}/%{name}-%{version}/inputdrivers/*.o
-%{_libdir}/%{name}-%{version}/interfaces/*/*.so
-%{_libdir}/%{name}-%{version}/interfaces/*/*.o
-%{_libdir}/%{name}-%{version}/systems/libdirectfb_fbdev.so
-%{_libdir}/%{name}-%{version}/systems/libdirectfb_sdl.so
-%{_libdir}/%{name}-%{version}/systems/*.o
-%{_libdir}/%{name}-%{version}/wm/*.o
-%{_libdir}/%{name}-%{version}/wm/*.so
-%{_datadir}/%{name}-%{version}
-%{_mandir}/man5/*
+%doc %{_mandir}/man1/dfbg.1*
+%doc %{_mandir}/man5/directfbrc.5*
+%{_bindir}/dfbg
+%{_bindir}/dfbdump
+%{_bindir}/dfbinfo
+%{_bindir}/dfbinput
+%{_bindir}/dfblayer
+%{_bindir}/dfbpenmount
+%{_bindir}/dfbscreen
+%{_bindir}/dfbsummon
+%{_datadir}/directfb-%{real_version}/
+%dir %{_libdir}/directfb-%{real_version}/
+%dir %{_libdir}/directfb-%{real_version}/*/
+%dir %{_libdir}/directfb-%{real_version}/*/*/
+%{_libdir}/directfb-%{real_version}/*/*.o
+%{_libdir}/directfb-%{real_version}/*/*/*.o
+%{_libdir}/directfb-%{real_version}/*/*.so
+%{_libdir}/directfb-%{real_version}/*/*/*.so
+%{_libdir}/libdirect-*.so.*
+%{_libdir}/libdirectfb-*.so.*
+%{_libdir}/libfusion-*.so.*
 
 %files devel
 %defattr(-, root, root, 0755)
 %doc docs/html/*
-%{_bindir}/*
-%{_includedir}/*
-%{_libdir}/*.a
-%{_libdir}/*.so
-%dir %{_libdir}/%{name}-%{version}
-%dir %{_libdir}/%{name}-%{version}/gfxdrivers
-%dir %{_libdir}/%{name}-%{version}/inputdrivers
-%dir %{_libdir}/%{name}-%{version}/interfaces
-%dir %{_libdir}/%{name}-%{version}/interfaces/*
-%dir %{_libdir}/%{name}-%{version}/systems
-%{_libdir}/%{name}-%{version}/gfxdrivers/*.a
-%{_libdir}/%{name}-%{version}/inputdrivers/*.a
-%{_libdir}/%{name}-%{version}/interfaces/*/*.a
-%{_libdir}/%{name}-%{version}/systems/*.a
-%{_libdir}/%{name}-%{version}/wm/*.a
-%{_libdir}/pkgconfig/*
-%{_mandir}/man1/*
+%doc %{_mandir}/man1/directfb-csource.1*
+%{_bindir}/directfb-config
+%{_bindir}/directfb-csource
+%{_includedir}/directfb/
+%{_includedir}/directfb-internal/
+%dir %{_libdir}/directfb-%{real_version}/
+%dir %{_libdir}/directfb-%{real_version}/*/
+%dir %{_libdir}/directfb-%{real_version}/*/*/
+%{_libdir}/directfb-%{real_version}/*/*.a
+%{_libdir}/directfb-%{real_version}/*/*/*.a
+%exclude %{_libdir}/directfb-%{real_version}/*/*.la
+%exclude %{_libdir}/directfb-%{real_version}/*/*/*.la
+%{_libdir}/libdirectfb.a
+%{_libdir}/libdirect.a
+%{_libdir}/libfusion.a
+%exclude %{_libdir}/libdirectfb.la
+%exclude %{_libdir}/libdirect.la
+%exclude %{_libdir}/libfusion.la
+%{_libdir}/libdirectfb.so
+%{_libdir}/libdirect.so
+%{_libdir}/libfusion.so
+%{_libdir}/pkgconfig/direct.pc
+%{_libdir}/pkgconfig/directfb.pc
+%{_libdir}/pkgconfig/directfb-internal.pc
+%{_libdir}/pkgconfig/fusion.pc
 
+%changelog
+* Sun Mar 25 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.9.25.1-1
+- Updated to release 0.9.25.1.
 
-%changelog
 * Sun Nov 13 2005 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.9.24-1
 - Updated to release 0.9.24.
 

Modified: trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec
===================================================================
--- trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -1,6 +1,6 @@
 # $Id$
 # Authority: matthias
-# ExclusiveDist: fc5 fc6 fc7 el5
+# ExclusiveDist: fc5 fc6 el5 fc7
 
 %define desktop_vendor rpmforge
 
@@ -11,7 +11,7 @@
 %define gstpb_minver 0.10.2
 
 Summary: GStreamer streaming media framework &quot;bad&quot; plug-ins
-Name: %{gstreamer}-plugins-bad
+Name: gstreamer-plugins-bad
 Version: 0.10.3
 Release: 3
 License: LGPL
@@ -75,11 +75,13 @@
 %setup -q -n gst-plugins-bad-%{version}
 %patch0 -p1 -b .faad2
 
+### Use correct soundtouch pkgconfig package name
+%{__perl} -pi.orig -e 's|libSoundTouch|soundtouch-1.0|g' configure
 
 %build
 %configure \
-    --with-package-name='gst-plugins-ugly %{desktop_vendor} rpm' \
-    --with-package-origin='<A HREF="http://www.rpmforge.net/">http://www.rpmforge.net/</A>' \
+    --with-package-name=&quot;gst-plugins-bad %{desktop_vendor} rpm&quot; \
+    --with-package-origin=&quot;<A HREF="http://www.rpmforge.net/">http://www.rpmforge.net/</A>&quot; \
     --enable-debug \
     --disable-gtk-doc
 %{__make} %{?_smp_mflags}
@@ -87,7 +89,7 @@
 
 %install
 %{__rm} -rf %{buildroot}
-%makeinstall
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 %find_lang gst-plugins-bad-%{majorminor}
 
 # Clean out files that should not be part of the rpm.

Modified: trunk/rpms/gstreamer-plugins-extras/gstreamer-plugins-extras.spec
===================================================================
--- trunk/rpms/gstreamer-plugins-extras/gstreamer-plugins-extras.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/gstreamer-plugins-extras/gstreamer-plugins-extras.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -23,7 +23,7 @@
 %define extplug_names a52dec dvdnavsrc dvdreadsrc faad gsmenc gsmdec lame libfame mad mpeg2dec swfdec musepack
 
 Summary: GStreamer streaming media framework extra plugins
-Name: %{gstreamer}-plugins-extra
+Name: gstreamer-plugins-extra
 Version: 0.8.8
 Release: 3
 License: LGPL

Modified: trunk/rpms/gstreamer-plugins-ugly/gstreamer-plugins-ugly.spec
===================================================================
--- trunk/rpms/gstreamer-plugins-ugly/gstreamer-plugins-ugly.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/gstreamer-plugins-ugly/gstreamer-plugins-ugly.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -1,7 +1,7 @@
 # $Id$
 # Authority: matthias
 
-# ExclusiveDist: fc5 fc6
+# ExclusiveDist: fc5 fc6 el5
 
 %define desktop_vendor rpmforge
 
@@ -12,7 +12,7 @@
 %define gstpb_minver 0.10.2
 
 Summary: GStreamer streaming media framework &quot;ugly&quot; plug-ins
-Name: %{gstreamer}-plugins-ugly
+Name: gstreamer-plugins-ugly
 Version: 0.10.5
 Release: 1
 License: LGPL

Added: trunk/rpms/inkscape/inkscape-0.39.spec
===================================================================
--- trunk/rpms/inkscape/inkscape-0.39.spec	                        (rev 0)
+++ trunk/rpms/inkscape/inkscape-0.39.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,100 @@
+# $Id: inkscape.spec 1606 2004-07-20 08:18:01Z dag $
+# Authority: dag
+# Upstream: &lt;inkscape-devel$lists,sf,net&gt;
+
+%{?dist: %{expand: %%define %dist 1}}
+
+%{?rh7:%define _without_freedesktop 1}
+%{?el2:%define _without_freedesktop 1}
+%{?rh6:%define _without_freedesktop 1}
+
+%define desktop_vendor rpmforge
+
+Summary: Vector drawing application
+Name: inkscape
+Version: 0.39
+Release: 1
+License: GPL
+Group: Applications/Multimedia
+URL: <A HREF="http://inkscape.sourceforge.net/">http://inkscape.sourceforge.net/</A>
+
+Source: <A HREF="http://dl.sf.net/inkscape/inkscape-%{version">http://dl.sf.net/inkscape/inkscape-%{version</A>}.tar.gz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+BuildRequires: perl(XML::Parser)
+%{!?_without_freedesktop:BuildRequires: desktop-file-utils}
+
+%description
+Inkscape is a SVG based generic vector-drawing program.
+
+%prep
+%setup
+
+%{__cat} &lt;&lt;EOF &gt;inkscape.desktop.in
+[Desktop Entry]
+Name=Inkscape Vector Drawing Program
+Comment=Vector drawing program.
+Type=Application
+MimeType=image/svg+xml
+FilePattern=inkscape
+Icon=inkscape.png
+Exec=inkscape %U
+TryExec=inkscape
+Terminal=false
+StartupNotify=true
+Categories=GNOME;Application;Graphics;
+EOF
+
+%build
+%configure 
+%{__make} %{?_smp_mflags}
+
+%install
+%{__rm} -rf %{buildroot}
+%makeinstall
+%find_lang %{name}
+
+%if %{!?_without_freedesktop:1}0
+        desktop-file-install --delete-original             \
+		--vendor %{desktop_vendor}                 \
+                --add-category X-Red-Hat-Base              \
+                --dir %{buildroot}%{_datadir}/applications \
+                %{buildroot}%{_datadir}/applications/inkscape.desktop
+%endif
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files -f %{name}.lang
+%defattr(-, root, root, 0755)
+%doc AUTHORS ChangeLog COPYING* HACKING NEWS README
+%doc %{_mandir}/man1/ink*.1*
+%{_bindir}/ink*
+#%{_libdir}/inkscape/
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-inkscape.desktop}
+%{?_without_freedesktop:%{_datadir}/applications/inkscape.desktop}
+%{_datadir}/inkscape/
+%{_datadir}/pixmaps/inkscape.png
+
+%changelog
+* Tue Jul 20 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.39-1
+- Updated to release 0.39.
+
+* Tue Apr 13 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.38.1-1
+- Updated to release 0.38.1.
+
+* Mon Feb 16 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.37-0
+- Updated to release 0.37.
+
+* Wed Dec 17 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.36-0
+- Updated to release 0.36.
+
+* Thu May 01 2003 Christian Schaller &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">uraeus at gnome.org</A>&gt;
+- Fix up the spec file for current release.
+
+* Mon Sep 23 2002 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.6-1
+- Updated to release 0.2.6.
+
+* Thu Sep 12 2002 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.5-1
+- Updated to release 0.2.5.
+- Changed SPEC to benefit from macros.

Added: trunk/rpms/js/js-1.5-threadsafe.patch
===================================================================
--- trunk/rpms/js/js-1.5-threadsafe.patch	                        (rev 0)
+++ trunk/rpms/js/js-1.5-threadsafe.patch	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,17 @@
+diff -Naupr js.orig/src/Makefile.ref js/src/Makefile.ref
+--- js.orig/src/Makefile.ref	2003-11-15 01:10:55.000000000 +0100
++++ js/src/Makefile.ref	2006-07-24 17:06:59.000000000 +0200
+@@ -61,11 +61,11 @@ endif
+ 
+ ifdef JS_THREADSAFE
+ DEFINES += -DJS_THREADSAFE
+-INCLUDES += -I../../dist/$(OBJDIR)/include
++INCLUDES += $(shell nspr-config --cflags)
+ ifdef USE_MSVC
+ OTHER_LIBS += ../../dist/$(OBJDIR)/lib/libnspr${NSPR_LIBSUFFIX}.lib
+ else
+-OTHER_LIBS += -L../../dist/$(OBJDIR)/lib -lnspr${NSPR_LIBSUFFIX}
++OTHER_LIBS += $(shell nspr-config --libs)
+ endif
+ endif
+ 

Added: trunk/rpms/js/js-1.5-va_copy.patch
===================================================================
--- trunk/rpms/js/js-1.5-va_copy.patch	                        (rev 0)
+++ trunk/rpms/js/js-1.5-va_copy.patch	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,30 @@
+diff -Naupr js.orig/src/config/Linux_All.mk js/src/config/Linux_All.mk
+--- js.orig/src/config/Linux_All.mk	2005-05-10 21:53:44.000000000 +0200
++++ js/src/config/Linux_All.mk	2006-01-26 11:38:12.000000000 +0100
+@@ -91,8 +91,12 @@ endif
+ JS_EDITLINE = 1
+ 
+ ifeq ($(CPU_ARCH),x86_64)
+-# Use VA_COPY() standard macro on x86-64
+-# FIXME: better use it everywhere
++# Use va_copy() standard macro on x86-64
++OS_CFLAGS += -DHAVE_VA_COPY -DVA_COPY=va_copy
++endif
++
++ifeq ($(CPU_ARCH),ppc)
++# Use va_copy() standard macro on ppc too
+ OS_CFLAGS += -DHAVE_VA_COPY -DVA_COPY=va_copy
+ endif
+ 
+diff -Naupr js.orig/src/jsprf.c js/src/jsprf.c
+--- js.orig/src/jsprf.c	2004-09-24 05:31:15.000000000 +0200
++++ js/src/jsprf.c	2006-01-26 11:34:52.000000000 +0100
+@@ -55,7 +55,7 @@
+ ** and requires array notation.
+ */
+ #ifdef HAVE_VA_COPY
+-#define VARARGS_ASSIGN(foo, bar)        VA_COPY(foo,bar)
++#define VARARGS_ASSIGN(foo, bar)        va_copy(foo,bar)
+ #elif defined(HAVE_VA_LIST_AS_ARRAY)
+ #define VARARGS_ASSIGN(foo, bar)        foo[0] = bar[0]
+ #else

Added: trunk/rpms/js/js-1.5.spec
===================================================================
--- trunk/rpms/js/js-1.5.spec	                        (rev 0)
+++ trunk/rpms/js/js-1.5.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,92 @@
+# $Id: js.spec 4303 2006-04-18 22:05:03Z dries $
+# Authority: dag
+
+Summary: JavaScript interpreter
+Name: js
+Version: 1.5
+Release: 1.2
+License: MPL
+Group: Development/Languages
+URL: <A HREF="http://www.mozilla.org/js/">http://www.mozilla.org/js/</A>
+Source: <A HREF="http://ftp.mozilla.org/pub/mozilla.org/js/js-%{version">http://ftp.mozilla.org/pub/mozilla.org/js/js-%{version</A>}.tar.gz
+Patch0: js-make.patch
+Patch1: js-shlib.patch
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+%description
+JavaScript is the Netscape-developed object scripting languages.
+This package has been created for purposes of Sablotron and is suitable
+for embedding in applications.
+
+%package devel
+Summary: Header files, libraries and development documentation for %{name}
+Group: Development/Libraries
+Requires: %{name} = %{version}-%{release}
+
+%description devel
+This package contains the header files, static libraries and development
+documentation for %{name}. If you like to develop programs using %{name},
+you will need to install %{name}-devel.
+
+%prep
+%setup -n %{name}
+%patch0 -b .make
+%patch1 -b .shlib
+
+%{__perl} -pi.orig -e 's|\bVA_COPY\(|va_copy\(|g' src/jsprf.c
+
+%build
+BUILD_OPT=&quot;1&quot; %{__make} -C src -f Makefile.ref \
+    XCFLAGS=&quot;%{optflags} -fPIC&quot; \
+    BUILD_OPT=&quot;1&quot;
+
+%install
+%{__rm} -rf %{buildroot}
+%{__install} -Dp -m0755 src/Linux_All_OPT.OBJ/js %{buildroot}%{_bindir}/js
+%{__install} -Dp -m0755 src/Linux_All_OPT.OBJ/jscpucfg %{buildroot}%{_bindir}/jscpucfg
+%{__install} -Dp -m0755 src/Linux_All_OPT.OBJ/libjs.a %{buildroot}%{_libdir}/libjs.a
+%{__install} -Dp -m0755 src/Linux_All_OPT.OBJ/libjs.so %{buildroot}%{_libdir}/libjs.so.1
+%{__ln_s} -nf libjs.so.1 %{buildroot}%{_libdir}/libjs.so
+
+%{__install} -d -m0755 %{buildroot}%{_includedir}/js/
+%{__install} -p -m0644 src/*.h %{buildroot}%{_includedir}/js/
+%{__install} -p -m0644 src/Linux_All_OPT.OBJ/jsautocfg.h %{buildroot}%{_includedir}/js/
+
+%post
+/sbin/ldconfig 2&gt;/dev/null
+
+%postun
+/sbin/ldconfig 2&gt;/dev/null
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files
+%defattr(-, root, root, 0755)
+%doc src/README.html
+%{_bindir}/js
+%{_libdir}/libjs.so.*
+
+%files devel
+%defattr(-, root, root, 0755)
+%{_bindir}/jscpucfg
+%{_libdir}/libjs.so
+%{_libdir}/libjs.a
+%{_includedir}/js/
+
+%changelog
+* Sat Apr 08 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 1.5-1.2
+- Rebuild for Fedora Core 5.
+
+* Fri Nov 11 2005 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 1.5-1.
+- Updated to final release of 1.5.
+
+* Sat Mar 26 2005 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5-0.rc6a
+- Added x86_64 VA_COPY patch. (Stef Van Dessel)
+
+* Tue Jun 15 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net">http://freshrpms.net</A>&gt; 1.5-0.rc6a
+- Update to 1.5rc6a.
+
+* Tue Mar 02 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5-0.rc6
+- Initial package. (using DAR)
+

Added: trunk/rpms/js/js-1.60-ncurses.patch
===================================================================
--- trunk/rpms/js/js-1.60-ncurses.patch	                        (rev 0)
+++ trunk/rpms/js/js-1.60-ncurses.patch	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,12 @@
+diff -Naupr js.orig/src/Makefile.ref js/src/Makefile.ref
+--- js.orig/src/Makefile.ref	2006-08-21 20:58:45.000000000 +0200
++++ js/src/Makefile.ref	2007-02-02 12:59:06.000000000 +0100
+@@ -132,7 +132,7 @@ endif 
+ ifdef JS_READLINE
+ # For those platforms with the readline library installed.
+ DEFINES += -DEDITLINE
+-PROG_LIBS += -lreadline -ltermcap
++PROG_LIBS += -lreadline -lncurses
+ else
+ ifdef JS_EDITLINE
+ # Use the editline library, built locally.

Added: trunk/rpms/js/js-ldflags.patch
===================================================================
--- trunk/rpms/js/js-ldflags.patch	                        (rev 0)
+++ trunk/rpms/js/js-ldflags.patch	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,11 @@
+--- src/Makefile.ref.orig	2005-04-19 22:14:17.000000000 +0300
++++ src/Makefile.ref	2005-04-19 22:14:49.000000000 +0300
+@@ -108,7 +108,7 @@
+ PERLLDFLAGS := $(subst -rdynamic,-export-dynamic,$(PERLLDFLAGS))
+ 
+ CFLAGS += $(PERLCFLAGS)
+-#LDFLAGS += $(PERLLDFLAGS) #PH removed this assgnment
++LDFLAGS += $(PERLLDFLAGS)
+ INCLUDES += -I. #needed for perlconnect/jsperl.c
+ endif
+ 

Added: trunk/rpms/js/js-perlconnect.patch
===================================================================
--- trunk/rpms/js/js-perlconnect.patch	                        (rev 0)
+++ trunk/rpms/js/js-perlconnect.patch	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,14 @@
+--- src/perlconnect/jsperl.c.orig
++++ src/perlconnect/jsperl.c
+@@ -218,7 +218,9 @@
+ {
+     PerlInterpreter *perl = JS_GetPrivate(cx, obj);
+ 
+-    perl_destruct(perl);
+-    perl_free(perl);
++    if (perl) {
++	perl_destruct(perl);
++	perl_free(perl);
++    }
+     /*    return JS_TRUE; */
+ }

Modified: trunk/rpms/js/js-shlib.patch
===================================================================
--- trunk/rpms/js/js-shlib.patch	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/js/js-shlib.patch	2007-03-25 20:32:19 UTC (rev 5241)
@@ -1,3 +1,5 @@
+Use gcc for linking because of -Wl,... from &quot;perl -MExtUtils::Embed -e ldopts&quot;.
+
 --- src/config/Linux_All.mk.orig	2003-05-16 02:21:08.000000000 +0200
 +++ src/config/Linux_All.mk	2004-03-02 03:56:15.000000000 +0100
 @@ -42,7 +42,7 @@
@@ -5,7 +7,7 @@
  
  RANLIB = echo
 -MKSHLIB = $(LD) -shared $(XMKSHLIBOPTS)
-+MKSHLIB = $(LD) -shared -lc -soname libjs.so.1 $(XMKSHLIBOPTS)
++MKSHLIB = $(CC) -shared -lc -Wl,-soname,libjs.so.1 $(XMKSHLIBOPTS)
  
  #.c.o:
  #      $(CC) -c -MD $*.d $(CFLAGS) $&lt;

Modified: trunk/rpms/js/js.spec
===================================================================
--- trunk/rpms/js/js.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/js/js.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -1,18 +1,39 @@
 # $Id$
 # Authority: dag
 
+%define perl_vendorarch %(eval &quot;`perl -V:installvendorarch`&quot;; echo $installvendorarch)
+
+%{?dist: %{expand: %%define %dist 1}}
+%{?el5:%define _with_nspr 1}
+%{?el4:%define _with_seamonkey_nspr 1}
+%{?el3:%define _with_seamonkey_nspr 1}
+%{?rh9:%define _with_mozilla_nspr 1}
+%{?rh7:%define _with_mozilla_nspr 1}
+%{?el2:%define _with_seamonkey_nspr 1}
+
 Summary: JavaScript interpreter
 Name: js
-Version: 1.5
-Release: 1.2
-License: MPL
+Version: 1.60
+Release: 1
+License: GPL
 Group: Development/Languages
 URL: <A HREF="http://www.mozilla.org/js/">http://www.mozilla.org/js/</A>
 Source: <A HREF="http://ftp.mozilla.org/pub/mozilla.org/js/js-%{version">http://ftp.mozilla.org/pub/mozilla.org/js/js-%{version</A>}.tar.gz
 Patch0: js-make.patch
 Patch1: js-shlib.patch
+Patch2: js-1.5-va_copy.patch
+Patch3: js-ldflags.patch
+Patch4: js-1.5-threadsafe.patch
+Patch5: js-1.60-ncurses.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
+BuildRequires: perl &gt;= 1:5.6.1, readline-devel, ncurses-devel
+Buildrequires: pkgconfig
+%{?_with_nspr:BuildRequires: nspr-devel}
+%{?_with_seamonkey_nspr:BuildRequires: seamonkey-nspr}
+%{?_with_mozilla_nspr:BuildRequires: mozilla-nspr}
+Provides: libjs = %{version}-%{release}
+
 %description
 JavaScript is the Netscape-developed object scripting languages.
 This package has been created for purposes of Sablotron and is suitable
@@ -22,6 +43,7 @@
 Summary: Header files, libraries and development documentation for %{name}
 Group: Development/Libraries
 Requires: %{name} = %{version}-%{release}
+Provides: libjs-devel = %{version}-%{release}
 
 %description devel
 This package contains the header files, static libraries and development
@@ -30,16 +52,42 @@
 
 %prep
 %setup -n %{name}
-%patch0 -b .make
-%patch1 -b .shlib
+%patch0 -p0 -b .make
+%patch1 -p0 -b .shlib
+%patch2 -p1 -b .vacopy
+%patch3 -p0 -b .ldflags
+%patch4 -p1 -b .threadsafe
+%patch5 -p1 -b .ncurses
 
-%{__perl} -pi.orig -e 's|\bVA_COPY\(|va_copy\(|g' src/jsprf.c
+%{__cat} &lt;&lt;'EOF' &gt;libjs.pc
+prefix=%{_prefix}
+exec_prefix=%{_prefix}
+libdir=%{_libdir}
+includedir=%{_includedir}
 
+Name: libjs
+Description: JS library
+Requires:
+Version: %{version}
+Libs: -L${libdir} -ljs
+Cflags: -I${includedir}
+EOF
+
 %build
-BUILD_OPT=&quot;1&quot; %{__make} -C src -f Makefile.ref \
-    XCFLAGS=&quot;%{optflags} -fPIC&quot; \
-    BUILD_OPT=&quot;1&quot;
+export BUILD_OPT=&quot;1&quot;
+%{__make} -C src -f Makefile.ref \
+	JS_THREADSAFE=&quot;1&quot; \
+	XCFLAGS=&quot;%{optflags} -fPIC&quot; \
+	BUILD_OPT=&quot;1&quot;
+	JS_READLINE=&quot;1&quot; \
+	JS_PERLCONNECT=&quot;1&quot;
 
+cd src/perlconnect
+MAKEFLAGS=&quot;-s&quot; %{__perl} Makefile.PL INSTALLDIRS=&quot;vendor&quot;
+cd -
+%{__make} %{?_smp_mflags} -C src/perlconnect OPTIMIZE=&quot;%{optflags}&quot;
+
+
 %install
 %{__rm} -rf %{buildroot}
 %{__install} -Dp -m0755 src/Linux_All_OPT.OBJ/js %{buildroot}%{_bindir}/js
@@ -49,36 +97,46 @@
 %{__ln_s} -nf libjs.so.1 %{buildroot}%{_libdir}/libjs.so
 
 %{__install} -d -m0755 %{buildroot}%{_includedir}/js/
-%{__install} -p -m0644 src/*.h %{buildroot}%{_includedir}/js/
-%{__install} -p -m0644 src/Linux_All_OPT.OBJ/jsautocfg.h %{buildroot}%{_includedir}/js/
+%{__install} -p -m0644 src/js*.h %{buildroot}%{_includedir}/
+%{__install} -p -m0644 src/Linux_All_OPT.OBJ/jsautocfg.h %{buildroot}%{_includedir}/
 
-%post
-/sbin/ldconfig 2&gt;/dev/null
+%{__install} -Dp -m0644 libjs.pc %{buildroot}%{_libdir}/pkgconfig/libjs.pc
 
-%postun
-/sbin/ldconfig 2&gt;/dev/null
+%{__make} -C src/perlconnect pure_install PERL_INSTALL_ROOT=&quot;%{buildroot}&quot;
 
+### Remove unwanted perl related files
+find %{buildroot} -type f -name .packlist -o -name jsperlbuild.pl | xargs -r rm
+find %{buildroot} -type f -name '*.bs' -a -size 0 | xargs -r rm
+### For some reason, the pure_install above doesn't set u+w :-(
+find %{buildroot}%{perl_vendorarch} -type f -exec %{__chmod} u+w {} \;
+
+%post -p /sbin/ldconfig
+%postun -p /sbin/ldconfig
+
 %clean
 %{__rm} -rf %{buildroot}
 
 %files
 %defattr(-, root, root, 0755)
-%doc src/README.html
+%doc src/README*.html src/perlconnect/bg.jpg
 %{_bindir}/js
 %{_libdir}/libjs.so.*
+%{perl_vendorarch}/auto/JS/
+%{perl_vendorarch}/*.pm
 
 %files devel
 %defattr(-, root, root, 0755)
 %{_bindir}/jscpucfg
 %{_libdir}/libjs.so
 %{_libdir}/libjs.a
-%{_includedir}/js/
+%{_libdir}/pkgconfig/libjs.pc
+%{_includedir}/js*.h
 
 %changelog
-* Sat Apr 08 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 1.5-1.2
-- Rebuild for Fedora Core 5.
+* Sun Mar 25 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.coM</A>&gt; - 1.60-1
+- Updated to release 1.60.
 
-* Fri Nov 11 2005 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 1.5-1.
+* Fri Nov 11 2005 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 1.5-1
 - Updated to final release of 1.5.
 
 * Sat Mar 26 2005 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5-0.rc6a

Modified: trunk/rpms/liboil/liboil.spec
===================================================================
--- trunk/rpms/liboil/liboil.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/liboil/liboil.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -1,9 +1,12 @@
 # $Id$
 # Authority: matthias
 
+### EL ships with liboil 0.3.8-2.1
+# ExclusiveDist: el2 rh7 rh9 el3 el4
+
 Summary: Library of Optimized Inner Loops, CPU optimized functions
 Name: liboil
-Version: 0.3.9
+Version: 0.3.11
 Release: 0
 License: LGPL
 Group: System Environment/Libraries
@@ -46,7 +49,7 @@
 
 %install
 %{__rm} -rf %{buildroot}
-%makeinstall
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 
 
 %clean
@@ -75,6 +78,9 @@
 
 
 %changelog
+* Sun Mar 25 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.3.11-1
+- Updated to release 0.3.11.
+
 * Wed Sep 20 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.9-1
 - Update to 0.3.9.
 - Remove no longer gcc opt patch.

Modified: trunk/rpms/nsc/nsc.spec
===================================================================
--- trunk/rpms/nsc/nsc.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/nsc/nsc.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -7,7 +7,7 @@
 Summary: Console monitor for Nagios
 Name: nsc
 Version: 0.80.2
-Release: 1.2
+Release: 2
 License: GPL
 Group: Applications/System
 URL: <A HREF="http://nsc-gothix.sourceforge.net/">http://nsc-gothix.sourceforge.net/</A>
@@ -15,6 +15,7 @@
 Source: <A HREF="http://dl.sf.net/nsc-gothix/nsc-%{real_version">http://dl.sf.net/nsc-gothix/nsc-%{real_version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
+BuildArch: noarch
 Requires: nagios, perl(Curses)
 
 %description
@@ -33,8 +34,11 @@
 
 %install
 %{__rm} -rf %{buildroot}
-%{__install} -Dp -m0755 nsc.pl %{buildroot}%{_sbindir}/nsc
+%{__install} -Dp -m0755 nsc.pl %{buildroot}%{_bindir}/nsc
 %{__install} -Dp -m0644 nsc.1 %{buildroot}%{_mandir}/man1/nsc.1
+%{__install} -Dp -m0644 nsc.pl %{buildroot}%{_libdir}/nsc/nsc.pl
+%{__install} -Dp -m0644 nsc_nagios.pm %{buildroot}%{_libdir}/nsc/nsc_nagios.pm
+%{__cp} -av gothix/ %{buildroot}%{_libdir}/nsc/
 
 %clean
 %{__rm} -rf %{buildroot}
@@ -42,12 +46,13 @@
 %files
 %defattr(-, root, root, 0755)
 %doc CHANGES.txt INSTALL.txt LICENSE.txt NOTES.txt nsc.doc README.txt *status.log
-%doc %{_mandir}/man?/nsc*
-%{_sbindir}/nsc
+%doc %{_mandir}/man1/nsc.1*
+%{_bindir}/nsc
+%{_libdir}/nsc/
 
 %changelog
-* Sat Apr 08 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.80.2-1.2
-- Rebuild for Fedora Core 5.
+* Fri Mar 23 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.80.2-2
+- Added missing perl modules. (Boris Folgmann)
 
 * Fri Nov 11 2005 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.80.2-1
 - Updated to release 0.80.2.

Added: trunk/rpms/soundtouch/soundtouch.spec
===================================================================
--- trunk/rpms/soundtouch/soundtouch.spec	                        (rev 0)
+++ trunk/rpms/soundtouch/soundtouch.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -0,0 +1,78 @@
+# $Id$
+# Authority: dag
+
+Summary: Audio Processing library for changing Tempo, Pitch and Playback Rates
+Name: soundtouch
+Version: 1.3.1
+Release: 1
+License: LGPL
+Group: System Environment/Libraries
+URL: <A HREF="http://sky.prohosting.com/oparviai/soundtouch/">http://sky.prohosting.com/oparviai/soundtouch/</A>
+
+Source: <A HREF="http://www.surina.net/soundtouch/soundtouch-%{version">http://www.surina.net/soundtouch/soundtouch-%{version</A>}.tar.gz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+BuildRequires: gcc-c++, libtool
+
+%description
+SoundTouch is a LGPL-licensed open-source audio processing library for
+changing the Tempo, Pitch and Playback Rates of audio streams or
+files. The SoundTouch library is suited for application developers
+writing sound processing tools that require tempo/pitch control
+functionality, or just for playing around with the sound effects.
+
+The SoundTouch library source kit includes an example utility
+SoundStretch which allows processing .wav audio files from a
+command-line interface.
+
+%package devel
+Summary: Header files, libraries and development documentation for %{name}.
+Group: Development/Libraries
+Requires: %{name} = %{version}-%{release}
+Requires: pkgconfig
+
+%description devel
+This package contains the header files, static libraries and development
+documentation for %{name}. If you like to develop programs using %{name},
+you will need to install %{name}-devel.
+
+%prep
+%setup
+
+%build
+%configure \
+	--disable-dependency-tracking \
+	--enable-shared
+%{__make} %{?_smp_mflags}
+
+%install
+%{__rm} -rf %{buildroot}
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
+
+### Clean up buildroot
+%{__rm} -rf %{buildroot}%{_prefix}/doc/soundtouch/
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%post -p /sbin/ldconfig
+%postun -p /sbin/ldconfig
+
+%files
+%defattr(-, root, root, 0755)
+%doc COPYING.TXT README.html
+%{_bindir}/soundstretch
+%{_libdir}/lib*.so.*
+
+%files devel
+%defattr(-, root, root, 0755)
+%{_datadir}/aclocal/soundtouch.m4
+%{_includedir}/soundtouch/
+%{_libdir}/lib*.a
+%exclude %{_libdir}/lib*.la
+%{_libdir}/lib*.so
+%{_libdir}/pkgconfig/*.pc
+
+%changelog
+* Sun Mar 25 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.3.1-1
+- Initial package. (using DAR)


Property changes on: trunk/rpms/soundtouch/soundtouch.spec
___________________________________________________________________
Name: svn:keywords
   + Id Revision
Name: svn:eol-style
   + native

Modified: trunk/rpms/swfdec/swfdec.spec
===================================================================
--- trunk/rpms/swfdec/swfdec.spec	2007-03-23 11:22:51 UTC (rev 5240)
+++ trunk/rpms/swfdec/swfdec.spec	2007-03-25 20:32:19 UTC (rev 5241)
@@ -21,18 +21,25 @@
 %{?fc3:   %define gimp_plugin 1}
 %{?fc2:   %define gimp_plugin 1}
 %{?yd4:   %define gimp_plugin 1}
+
 %{!?dist: %define _without_mozilla 1}
-%{?el5:   %define _without_mozilla 1}
 %{?fc6:   %define _without_mozilla 1}
 %{?fc5:   %define _without_mozilla 1}
 %{?fc1:   %define _without_mozilla 1}
-%{?el3:   %define _without_mozilla 1}
+
+### Ca't figure out why only EL5 produces swfdec-mozilla-player
+%{?el5:%define _with_mozilla_player 1}
+
+%define mozilla seamonkey
+%{!?dist:%define mozilla firefox}
+%{?el5:%define mozilla firefox}
+%{?fc6:%define mozilla firefox}
+%{?rh9:%define mozilla mozilla}
+%{?rh7:%define mozilla mozilla}
+
 %{?el3:   %define _without_gstreamer 1}
-%{?rh9:   %define _without_mozilla 1}
 %{?rh9:   %define _without_gstreamer 1}
-%{?rh7:   %define _without_mozilla 1}
 %{?rh7:   %define _without_gstreamer 1}
-%{?el2:   %define _without_mozilla 1}
 %{?el2:   %define _without_gstreamer 1}
 
 Summary: Flash animations rendering library
@@ -41,14 +48,16 @@
 Release: 2
 License: LGPL
 Group: System Environment/Libraries
-URL: <A HREF="http://swfdec.sourceforge.net/">http://swfdec.sourceforge.net/</A>
+URL: <A HREF="http://swfdec.freedesktop.org/wiki/">http://swfdec.freedesktop.org/wiki/</A>
+#Source: <A HREF="http://swfdec.freedesktop.org/download/swfdec/0.4/swfdec-%{version">http://swfdec.freedesktop.org/download/swfdec/0.4/swfdec-%{version</A>}.tar.gz
 Source: <A HREF="http://www.schleef.org/swfdec/download/swfdec-%{version">http://www.schleef.org/swfdec/download/swfdec-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: libart_lgpl-devel, gtk2-devel &gt;= 2.1.2
 BuildRequires: libmad-devel, SDL-devel, gdk-pixbuf-devel, gcc-c++
 BuildRequires: liboil-devel, GConf2-devel, js-devel
+BuildRequires: directfb
 %{?gimp_plugin:BuildRequires: gimp-devel &gt;= 2.0}
-%{!?_without_mozilla:BuildRequires: mozilla-devel}
+%{!?_without_mozilla:BuildRequires: %{mozilla}-devel}
 %{!?_without_gstreamer:BuildRequires: gstreamer-plugins-devel}
 %{?_with_modxorg:BuildRequires: libXt-devel}
 
@@ -99,7 +108,7 @@
 
 %post
 /sbin/ldconfig 2&gt;/dev/null
-/usr/bin/update-gdk-pixbuf-loaders . || :
+/usr/bin/update-gdk-pixbuf-loaders $(uname -i)-redhat-linux-gnu || :
 
 ### Backward compatibility for gtk &lt; 2.4.13-9
 [ -x %{_bindir}/gdk-pixbuf-query-loaders ] &amp;&amp; \
@@ -108,7 +117,7 @@
 
 %postun
 /sbin/ldconfig 2&gt;/dev/null
-/usr/bin/update-gdk-pixbuf-loaders . || :
+/usr/bin/update-gdk-pixbuf-loaders $(uname -i)-redhat-linux-gnu || :
 
 ### Backward compatibility for gtk &lt; 2.4.13-9
 [ -x %{_bindir}/gdk-pixbuf-query-loaders ] &amp;&amp; \
@@ -136,7 +145,7 @@
 %if %{!?_without_mozilla:1}0
 %files -n mozilla-swfdec
 %defattr(-, root, root, 0755)
-%{_bindir}/swfdec-mozilla-player
+%{?_with_mozilla_player:%{_bindir}/swfdec-mozilla-player}
 %exclude %{_libdir}/mozilla/plugins/libswfdecmozilla.a
 %exclude %{_libdir}/mozilla/plugins/libswfdecmozilla.la
 %{_libdir}/mozilla/plugins/libswfdecmozilla.so


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004039.html">[svn] r5240 - trunk/rpms/gnome-applet-timer
</A></li>
	<LI>Next message: <A HREF="004041.html">[svn] r5242 - in trunk/rpms: . amsn arpd dosbox fragroute honeyd	icewm imlib iodine iptstate libdnsres libevent memcached	nttlscan pcsc-lite python-elementtree sharedance skystreets	tor trickle udpcast vomit
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4040">[ date ]</a>
              <a href="thread.html#4040">[ thread ]</a>
              <a href="subject.html#4040">[ subject ]</a>
              <a href="author.html#4040">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
