<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5223 - in trunk/rpms: gocr gsm libmms
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5223%20-%20in%20trunk/rpms%3A%20gocr%20gsm%20libmms&In-Reply-To=%3C20070307141531.51CB2318146%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004021.html">
   <LINK REL="Next"  HREF="004023.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5223 - in trunk/rpms: gocr gsm libmms</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5223%20-%20in%20trunk/rpms%3A%20gocr%20gsm%20libmms&In-Reply-To=%3C20070307141531.51CB2318146%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5223 - in trunk/rpms: gocr gsm libmms">packagers at lists.rpmforge.net
       </A><BR>
    <I>Wed Mar  7 15:15:31 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004021.html">[svn] r5222 - in trunk/rpms: BasiliskII dkms-ndiswrapper	gaim-encryption
</A></li>
        <LI>Next message: <A HREF="004023.html">[svn] r5224 - in trunk/rpms: mjpegtools mpeg2dec rar sdlmame unrar	zvbi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4022">[ date ]</a>
              <a href="thread.html#4022">[ thread ]</a>
              <a href="subject.html#4022">[ subject ]</a>
              <a href="author.html#4022">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2007-03-07 15:15:30 +0100 (Wed, 07 Mar 2007)
New Revision: 5223

Removed:
   trunk/rpms/libmms/libmms-0.2-proxy.patch
Modified:
   trunk/rpms/gocr/gocr.spec
   trunk/rpms/gsm/gsm.spec
   trunk/rpms/libmms/libmms.spec
Log:
Update gocr to 0.44, gsm to 1.0.12 and libmms to 0.3.


Modified: trunk/rpms/gocr/gocr.spec
===================================================================
--- trunk/rpms/gocr/gocr.spec	2007-03-07 13:57:18 UTC (rev 5222)
+++ trunk/rpms/gocr/gocr.spec	2007-03-07 14:15:30 UTC (rev 5223)
@@ -3,14 +3,13 @@
 
 Summary: Optical Character Recognition (OCR) program
 Name: gocr
-Version: 0.43
+Version: 0.44
 Release: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://jocr.sourceforge.net/">http://jocr.sourceforge.net/</A>
 
-Source: <A HREF="http://dl.sf.net/jocr/gocr-%{version">http://dl.sf.net/jocr/gocr-%{version</A>}.tar.gz
-Patch0: <A HREF="http://www-e.uni-magdeburg.de/jschulen/ocr/gocr-0.41-pgm.patch">http://www-e.uni-magdeburg.de/jschulen/ocr/gocr-0.41-pgm.patch</A>
+Source: <A HREF="http://downloads.sf.net/jocr/gocr-%{version">http://downloads.sf.net/jocr/gocr-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildRequires: gtk+-devel &gt;= 1.2.8, netpbm-devel
@@ -80,6 +79,10 @@
 %{_bindir}/gtk-ocr
 
 %changelog
+* Wed Mar  7 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.44-1
+- Update to 0.44.
+- Remove no longer used patch.
+
 * Mon Dec 18 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.43-1
 - Updated to release 0.43.
 

Modified: trunk/rpms/gsm/gsm.spec
===================================================================
--- trunk/rpms/gsm/gsm.spec	2007-03-07 13:57:18 UTC (rev 5222)
+++ trunk/rpms/gsm/gsm.spec	2007-03-07 14:15:30 UTC (rev 5223)
@@ -2,12 +2,12 @@
 # Authority: dag
 # Upstream: Jutta Degener &lt;jutta$pobox,com&gt;
 
-%define srcver 1.0-pl10
+%define srcver 1.0-pl12
 
 Summary: Shared libraries for GSM speech compressor
 Name: gsm
-Version: 1.0.10
-Release: 6
+Version: 1.0.12
+Release: 1
 License: MIT
 Group: System Environment/Libraries
 URL: <A HREF="http://kbs.cs.tu-berlin.de/~jutta/toast.html">http://kbs.cs.tu-berlin.de/~jutta/toast.html</A>
@@ -69,6 +69,9 @@
 %{_includedir}/gsm/
 
 %changelog
+* Wed Mar  7 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.12-1
+- Update to 1.0.12.
+
 * Fri Mar 17 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.10-6
 - Release bump to drop the disttag number in FC5 build.
 

Deleted: trunk/rpms/libmms/libmms-0.2-proxy.patch
===================================================================
--- trunk/rpms/libmms/libmms-0.2-proxy.patch	2007-03-07 13:57:18 UTC (rev 5222)
+++ trunk/rpms/libmms/libmms-0.2-proxy.patch	2007-03-07 14:15:30 UTC (rev 5223)
@@ -1,273 +0,0 @@
-Index: src/mmsh.c
-===================================================================
-RCS file: /cvsroot/libmms/libmms/src/mmsh.c,v
-retrieving revision 1.3
-diff -u -p -r1.3 mmsh.c
---- src/mmsh.c	12 Dec 2005 15:08:07 -0000	1.3
-+++ src/mmsh.c	23 Mar 2006 21:33:49 -0000
-@@ -36,6 +36,7 @@
- 
- #include &lt;unistd.h&gt;
- #include &lt;stdio.h&gt;
-+#include &lt;stdlib.h&gt;
- #include &lt;sys/socket.h&gt;
- #include &lt;netinet/in.h&gt;
- #include &lt;netdb.h&gt;
-@@ -155,11 +156,16 @@ struct mmsh_s {
- 
-   /* url parsing */
-   char         *url;
-+  char         *proxy_url;
-   char         *proto;
--  char         *host;
--  int           port;
--  char         *user;
--  char         *password;
-+  char         *connect_host;
-+  int           connect_port;
-+  char         *http_host;
-+  int           http_port;
-+  char         *proxy_user;
-+  char         *proxy_password;
-+  char         *host_user;
-+  char         *host_password;
-   char         *uri;
- 
-   char          str[SCRATCH_SIZE]; /* scratch buffer to built strings */
-@@ -711,17 +717,17 @@ static int mmsh_valid_proto (char *proto
- static int mmsh_tcp_connect(mms_io_t *io, mmsh_t *this) {
-   int progress, res;
-   
--  if (!this-&gt;port) this-&gt;port = MMSH_PORT;
-+  if (!this-&gt;connect_port) this-&gt;connect_port = MMSH_PORT;
-   
-   /* 
-    * try to connect 
-    */
--  lprintf(&quot;try to connect to %s on port %d \n&quot;, this-&gt;host, this-&gt;port);
-+  lprintf(&quot;try to connect to %s on port %d \n&quot;, this-&gt;connect_host, this-&gt;connect_port);
- 
--  this-&gt;s = io_connect (io, this-&gt;host, this-&gt;port);
-+  this-&gt;s = io_connect (io, this-&gt;connect_host, this-&gt;connect_port);
- 
-   if (this-&gt;s == -1) {
--    lprintf (&quot;mmsh: failed to connect '%s'\n&quot;, this-&gt;host);
-+    lprintf (&quot;mmsh: failed to connect '%s'\n&quot;, this-&gt;connect_host);
-     return 1;
-   }
- 
-@@ -761,7 +767,7 @@ static int mmsh_connect_int (mms_io_t *i
-   lprintf(&quot;first http request\n&quot;);
-   
-   snprintf (this-&gt;str, SCRATCH_SIZE, mmsh_FirstRequest, this-&gt;uri,
--            this-&gt;host, this-&gt;port, 1);
-+            this-&gt;http_host, this-&gt;http_port, 1);
- 
-   if (!send_command (io, this, this-&gt;str))
-     goto fail;
-@@ -867,12 +873,12 @@ static int mmsh_connect_int (mms_io_t *i
-   switch (this-&gt;stream_type) {
-     case MMSH_SEEKABLE:
-       snprintf (this-&gt;str, SCRATCH_SIZE, mmsh_SeekableRequest, this-&gt;uri,
--                this-&gt;host, this-&gt;port, 0, 0, 0, 2, 0,
-+                this-&gt;http_host, this-&gt;http_port, 0, 0, 0, 2, 0,
-                 this-&gt;num_stream_ids, stream_selection);
-       break;
-     case MMSH_LIVE:
-       snprintf (this-&gt;str, SCRATCH_SIZE, mmsh_LiveRequest, this-&gt;uri,
--                this-&gt;host, this-&gt;port, 2,
-+                this-&gt;http_host, this-&gt;http_port, 2,
-                 this-&gt;num_stream_ids, stream_selection);
-       break;
-   }
-@@ -910,17 +916,36 @@ fail:
- 
- mmsh_t *mmsh_connect (mms_io_t *io, void *data, const char *url, int bandwidth) {
-   mmsh_t *this;
--  GURI  *uri;
-- 
-+  GURI  *uri = NULL;
-+  GURI  *proxy_uri = NULL;
-+  char  *proxy_env;
-   if (!url)
-     return NULL;
- 
- //  report_progress (stream, 0);
--
-+  /*
-+   * initializatoin is essential here.  the fail: label depends
-+   * on the various char * in our this structure to be
-+   * NULL if they haven't been assigned yet.
-+   */
-   this = (mmsh_t*) malloc (sizeof (mmsh_t));
-+  this-&gt;url=NULL;
-+  this-&gt;proxy_url = NULL;
-+  this-&gt;proto = NULL;
-+  this-&gt;connect_host = NULL;
-+  this-&gt;http_host = NULL;
-+  this-&gt;proxy_user = NULL;
-+  this-&gt;proxy_password = NULL;
-+  this-&gt;host_user = NULL;
-+  this-&gt;host_password = NULL;
-+  this-&gt;uri = NULL;
- 
-   this-&gt;custom_data     = data;
-   this-&gt;url             = strdup(url);
-+  if ((proxy_env = getenv(&quot;http_proxy&quot;)) != NULL)
-+    this-&gt;proxy_url = strdup(proxy_env);
-+  else
-+    this-&gt;proxy_url = NULL;
-   this-&gt;s               = -1;
-   this-&gt;asf_header_len  = 0;
-   this-&gt;asf_header_read = 0;
-@@ -935,18 +960,59 @@ mmsh_t *mmsh_connect (mms_io_t *io, void
- 
- //  report_progress (stream, 0);
- 
-+  if (this-&gt;proxy_url) {
-+    proxy_uri = gnet_uri_new(this-&gt;proxy_url);
-+    if (!proxy_uri) {
-+      lprintf(&quot;invalid proxy url\n&quot;);
-+      goto fail;
-+    }
-+    if (! proxy_uri-&gt;port ) {
-+      proxy_uri-&gt;port = 3128; //default squid port
-+    }
-+  }
-   uri = gnet_uri_new(this-&gt;url);
-   if (!uri) {
-     lprintf (&quot;invalid url\n&quot;);
-     goto fail;
-   }
--  this-&gt;proto = uri-&gt;scheme;
--  this-&gt;user = uri-&gt;user;
--  this-&gt;host = uri-&gt;hostname;
--  this-&gt;port = uri-&gt;port;
--  this-&gt;password = uri-&gt;passwd;
--  this-&gt;uri = uri-&gt;path;
--  
-+  if (! uri-&gt;port ) {
-+    //checked in tcp_connect, but it's better to initialize it here
-+    uri-&gt;port = MMSH_PORT;
-+  }
-+  if (this-&gt;proxy_url) {
-+    this-&gt;proto = (uri-&gt;scheme) ? strdup(uri-&gt;scheme) : NULL;
-+    this-&gt;connect_host = (proxy_uri-&gt;hostname) ? strdup(proxy_uri-&gt;hostname) : NULL;
-+    this-&gt;connect_port = proxy_uri-&gt;port;
-+    this-&gt;http_host = (uri-&gt;scheme) ? strdup(uri-&gt;hostname) : NULL;
-+    this-&gt;http_port = uri-&gt;port;
-+    this-&gt;proxy_user = (proxy_uri-&gt;user) ? strdup(proxy_uri-&gt;user) : NULL;
-+    this-&gt;proxy_password = (proxy_uri-&gt;passwd) ? strdup(proxy_uri-&gt;passwd) : NULL;
-+    this-&gt;host_user = (uri-&gt;user) ? strdup(uri-&gt;user) : NULL;
-+    this-&gt;host_password = (uri-&gt;passwd) ? strdup(uri-&gt;passwd) : NULL;
-+    gnet_uri_set_scheme(uri,&quot;http&quot;);
-+    char * uri_string = gnet_uri_get_string(uri);
-+    this-&gt;uri = strdup(uri_string);
-+    g_free(uri_string);
-+  } else {
-+    this-&gt;proto = (uri-&gt;scheme) ? strdup(uri-&gt;scheme) : NULL;
-+    this-&gt;connect_host = (uri-&gt;hostname) ? strdup(uri-&gt;hostname) : NULL;
-+    this-&gt;connect_port = uri-&gt;port;
-+    this-&gt;http_host = (uri-&gt;hostname) ? strdup(uri-&gt;hostname) : NULL;
-+    this-&gt;http_port = uri-&gt;port;
-+    this-&gt;proxy_user = NULL;
-+    this-&gt;proxy_password = NULL;
-+    this-&gt;host_user =(uri-&gt;user) ?  strdup(uri-&gt;user) : NULL;
-+    this-&gt;host_password = (uri-&gt;passwd) ? strdup(uri-&gt;passwd) : NULL;
-+    this-&gt;uri = (uri-&gt;path) ? strdup(uri-&gt;path) : NULL;
-+  }
-+  if (proxy_uri) {
-+    gnet_uri_delete(proxy_uri);
-+    proxy_uri = NULL;
-+  }
-+  if (uri) {
-+    gnet_uri_delete(uri);
-+    uri = NULL;
-+  }
-   if (!mmsh_valid_proto(this-&gt;proto)) {
-     lprintf (&quot;unsupported protocol\n&quot;);
-     goto fail;
-@@ -968,18 +1034,30 @@ mmsh_t *mmsh_connect (mms_io_t *io, void
- 
- fail:
-   lprintf(&quot;mmsh_connect: failed\n&quot; );
-+  if (proxy_uri)
-+    gnet_uri_delete(proxy_uri);
-+  if (uri)
-+    gnet_uri_delete(uri);
-   if (this-&gt;s != -1)
-     close(this-&gt;s);
-   if (this-&gt;url)
-     free(this-&gt;url);
-+  if (this-&gt;proxy_url)
-+    free(this-&gt;proxy_url);
-   if (this-&gt;proto)
-     free(this-&gt;proto);
--  if (this-&gt;host)
--    free(this-&gt;host);
--  if (this-&gt;user)
--    free(this-&gt;user);
--  if (this-&gt;password)
--    free(this-&gt;password);
-+  if (this-&gt;connect_host)
-+    free(this-&gt;connect_host);
-+  if (this-&gt;http_host)
-+    free(this-&gt;http_host);
-+  if (this-&gt;proxy_user)
-+    free(this-&gt;proxy_user);
-+  if (this-&gt;proxy_password)
-+    free(this-&gt;proxy_password);
-+  if (this-&gt;host_user)
-+    free(this-&gt;host_user);
-+  if (this-&gt;host_password)
-+    free(this-&gt;host_password);
-   if (this-&gt;uri)
-     free(this-&gt;uri);
- 
-@@ -1146,15 +1224,23 @@ void mmsh_close (mmsh_t *this) {
-   if (this-&gt;s != -1)
-     close(this-&gt;s);
-   if (this-&gt;url)
--    free (this-&gt;url);
-+    free(this-&gt;url);
-+  if (this-&gt;proxy_url)
-+    free(this-&gt;proxy_url);
-   if (this-&gt;proto)
-     free(this-&gt;proto);
--  if (this-&gt;host)
--    free(this-&gt;host);
--  if (this-&gt;user)
--    free(this-&gt;user);
--  if (this-&gt;password)
--    free(this-&gt;password);
-+  if (this-&gt;connect_host)
-+    free(this-&gt;connect_host);
-+  if (this-&gt;http_host)
-+    free(this-&gt;http_host);
-+  if (this-&gt;proxy_user)
-+    free(this-&gt;proxy_user);
-+  if (this-&gt;proxy_password)
-+    free(this-&gt;proxy_password);
-+  if (this-&gt;host_user)
-+    free(this-&gt;host_user);
-+  if (this-&gt;host_password)
-+    free(this-&gt;host_password);
-   if (this-&gt;uri)
-     free(this-&gt;uri);
-   if (this)
-Index: src/mmsh.h
-===================================================================
-RCS file: /cvsroot/libmms/libmms/src/mmsh.h,v
-retrieving revision 1.2
-diff -u -p -r1.2 mmsh.h
---- src/mmsh.h	12 Dec 2005 09:24:20 -0000	1.2
-+++ src/mmsh.h	23 Mar 2006 21:33:49 -0000
-@@ -26,6 +26,8 @@
- #define HAVE_MMSH_H
- 
- #include &lt;inttypes.h&gt;
-+#include &lt;stdio.h&gt;
-+#include &lt;sys/types.h&gt;
- #include &quot;mmsio.h&quot;
- 
- typedef struct mmsh_s mmsh_t;

Modified: trunk/rpms/libmms/libmms.spec
===================================================================
--- trunk/rpms/libmms/libmms.spec	2007-03-07 13:57:18 UTC (rev 5222)
+++ trunk/rpms/libmms/libmms.spec	2007-03-07 14:15:30 UTC (rev 5223)
@@ -3,13 +3,12 @@
 
 Summary: MMS stream protocol library
 Name: libmms
-Version: 0.2
-Release: 2
+Version: 0.3
+Release: 1
 License: LGPL
 Group: System Environment/Libraries
-URL: <A HREF="http://libmms.sourceforge.net/">http://libmms.sourceforge.net/</A>
-Source: <A HREF="http://dl.sf.net/libmms/libmms-%{version">http://dl.sf.net/libmms/libmms-%{version</A>}.tar.gz
-Patch0: libmms-0.2-proxy.patch
+URL: <A HREF="http://sourceforge.net/projects/libmms">http://sourceforge.net/projects/libmms</A>
+Source: <A HREF="http://downloads.sf.net/libmms/libmms-%{version">http://downloads.sf.net/libmms/libmms-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: glib2-devel
 
@@ -29,7 +28,6 @@
 
 %prep
 %setup
-%patch0 -p0 -b .proxy
 
 
 %build
@@ -66,6 +64,10 @@
 
 
 %changelog
+* Wed Mar  7 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3-1
+- Update to 0.3.
+- Remove HTTP_PROXY support patch which is now included.
+
 * Tue Mar 28 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.2-2
 - Add HTTP_PROXY support patch from Daniel S. Rogers.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004021.html">[svn] r5222 - in trunk/rpms: BasiliskII dkms-ndiswrapper	gaim-encryption
</A></li>
	<LI>Next message: <A HREF="004023.html">[svn] r5224 - in trunk/rpms: mjpegtools mpeg2dec rar sdlmame unrar	zvbi
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4022">[ date ]</a>
              <a href="thread.html#4022">[ thread ]</a>
              <a href="subject.html#4022">[ subject ]</a>
              <a href="author.html#4022">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
