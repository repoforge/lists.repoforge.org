<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r7607 - in trunk/tools/wiipresent: . docs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7607%20-%20in%20trunk/tools/wiipresent%3A%20.%20docs&In-Reply-To=%3C200908141731.n7EHVPdu026157%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006402.html">
   <LINK REL="Next"  HREF="006404.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r7607 - in trunk/tools/wiipresent: . docs</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7607%20-%20in%20trunk/tools/wiipresent%3A%20.%20docs&In-Reply-To=%3C200908141731.n7EHVPdu026157%40surya.karan.org%3E"
       TITLE="[svn] r7607 - in trunk/tools/wiipresent: . docs">packagers at lists.rpmforge.net
       </A><BR>
    <I>Fri Aug 14 19:31:25 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006402.html">[svn] r7606 - in trunk/tools/dstat: . docs plugins
</A></li>
        <LI>Next message: <A HREF="006404.html">[svn] r7608 - trunk/tools/wiipresent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6403">[ date ]</a>
              <a href="thread.html#6403">[ thread ]</a>
              <a href="subject.html#6403">[ subject ]</a>
              <a href="author.html#6403">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2009-08-14 18:31:25 +0100 (Fri, 14 Aug 2009)
New Revision: 7607

Added:
   trunk/tools/wiipresent/wiipresent-xinit.sh
Modified:
   trunk/tools/wiipresent/ChangeLog
   trunk/tools/wiipresent/docs/wiipresent.1
   trunk/tools/wiipresent/docs/wiipresent.1.html
   trunk/tools/wiipresent/docs/wiipresent.1.txt
   trunk/tools/wiipresent/wiipresent.c
Log:
Added example xinit script. Allow for more than one bluetooth address.

Modified: trunk/tools/wiipresent/ChangeLog
===================================================================
--- trunk/tools/wiipresent/ChangeLog	2009-08-14 15:28:41 UTC (rev 7606)
+++ trunk/tools/wiipresent/ChangeLog	2009-08-14 17:31:25 UTC (rev 7607)
@@ -1,5 +1,7 @@
 * 0.7.2svn - release 24/04/2009
 - Added support for kpdf
+- Added example xinit script
+- Allow for more than one bluetooth address
 
 * 0.7.2 - release 17/04/2009
 - Added -r/--reconnect option to wait for reconnect on disconnect

Modified: trunk/tools/wiipresent/docs/wiipresent.1
===================================================================
--- trunk/tools/wiipresent/docs/wiipresent.1	2009-08-14 15:28:41 UTC (rev 7606)
+++ trunk/tools/wiipresent/docs/wiipresent.1	2009-08-14 17:31:25 UTC (rev 7607)
@@ -2,7 +2,7 @@
 .\&quot; It was generated using the DocBook XSL Stylesheets (version 1.69.1).
 .\&quot; Instead of manually editing it, you probably should edit the DocBook XML
 .\&quot; source for it and then use the DocBook XSL Stylesheets to regenerate it.
-.TH &quot;WIIPRESENT&quot; &quot;1&quot; &quot;04/17/2009&quot; &quot;&quot; &quot;&quot;
+.TH &quot;WIIPRESENT&quot; &quot;1&quot; &quot;08/14/2009&quot; &quot;&quot; &quot;&quot;
 .\&quot; disable hyphenation
 .nh
 .\&quot; disable justification (adjust text to left margin only)
@@ -108,7 +108,7 @@
 .sp
 .TP
 Up/Down buttons
-scroll up/down
+scroll up/down, page up/down
 .TP
 Left/Right buttons
 switch between applications (window manager)
@@ -135,7 +135,7 @@
 left/right mouse buttons
 .TP
 \fIA\fR button
-left mouse button
+leave mouse button
 .SH &quot;BUGS&quot;
 This program is free of bugs. Yeah right.
 .sp

Modified: trunk/tools/wiipresent/docs/wiipresent.1.html
===================================================================
--- trunk/tools/wiipresent/docs/wiipresent.1.html	2009-08-14 15:28:41 UTC (rev 7606)
+++ trunk/tools/wiipresent/docs/wiipresent.1.html	2009-08-14 17:31:25 UTC (rev 7607)
@@ -234,7 +234,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    scroll up/down
+    scroll up/down, page up/down
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -306,7 +306,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    left mouse button
+    leave mouse button
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;/dl&gt;&lt;/div&gt;
@@ -354,7 +354,7 @@
 &lt;div id=&quot;footer&quot;&gt;
 &lt;div id=&quot;footer-text&quot;&gt;
 Version 0.6&lt;br /&gt;
-Last updated 2009-04-17 21:34:26 CEST
+Last updated 2009-08-14 19:22:13 CEST
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/body&gt;

Modified: trunk/tools/wiipresent/docs/wiipresent.1.txt
===================================================================
--- trunk/tools/wiipresent/docs/wiipresent.1.txt	2009-08-14 15:28:41 UTC (rev 7606)
+++ trunk/tools/wiipresent/docs/wiipresent.1.txt	2009-08-14 17:31:25 UTC (rev 7607)
@@ -128,7 +128,7 @@
 buttons below.*
 
 Up/Down buttons::
-    scroll up/down
+    scroll up/down, page up/down
 
 Left/Right buttons::
     switch between applications (window manager)
@@ -158,7 +158,7 @@
     left/right mouse buttons
 
 'A' button::
-    left mouse button
+    leave mouse button
 
 
 == BUGS

Added: trunk/tools/wiipresent/wiipresent-xinit.sh
===================================================================
--- trunk/tools/wiipresent/wiipresent-xinit.sh	                        (rev 0)
+++ trunk/tools/wiipresent/wiipresent-xinit.sh	2009-08-14 17:31:25 UTC (rev 7607)
@@ -0,0 +1,20 @@
+#!/bin/bash
+
+if ! hcitool dev | grep -q hci0; then
+    echo &quot;Cannot find any local bluetooth device. Bailing out.&quot; &gt;&amp;2
+    exit 1
+fi
+
+while true; do
+    SYSTEM=&quot;$(awk '/^host[0-9]$/ { print $1 }' /proc/cmdline)&quot;
+    case $SYSTEM in
+        (host1) OPTIONS=&quot;-b 00:11:22:33:44:55 -b 00:11:22:33:44:55&quot;;;
+        (host2) OPTIONS=&quot;-b 00:11:22:33:44:55 -b 00:11:22:33:44:55&quot;;;
+        (host3) OPTIONS=&quot;-b 00:11:22:33:44:55 -b 00:11:22:33:44:55&quot;;;
+        (host4) OPTIONS=&quot;-b 00:11:22:33:44:55 -b 00:11:22:33:44:55&quot;;;
+        (host5) OPTIONS=&quot;-b 00:11:22:33:44:55 -b 00:11:22:33:44:55&quot;;;
+        (host6) OPTIONS=&quot;-b 00:11:22:33:44:55 -b 00:11:22:33:44:55&quot;;;
+        (*) OPTIONS=&quot;&quot;
+    esac
+    wiipresent $OPTIONS -l 45 -r -t
+done


Property changes on: trunk/tools/wiipresent/wiipresent-xinit.sh
___________________________________________________________________
Name: svn:executable
   + *

Modified: trunk/tools/wiipresent/wiipresent.c
===================================================================
--- trunk/tools/wiipresent/wiipresent.c	2009-08-14 15:28:41 UTC (rev 7606)
+++ trunk/tools/wiipresent/wiipresent.c	2009-08-14 17:31:25 UTC (rev 7607)
@@ -270,13 +270,16 @@
 
 int main(int argc, char **argv) {
     int length = 0;
-    char *btaddress = NULL;
+    int totaddr = 20;
+    int numaddr = 0;
+    char *btaddresses[totaddr];
     int infrared = False;
     int tilt = True;
     int reconnect = False;
     wmote = (wiimote_t) WIIMOTE_INIT;
 
     int c;
+    int i = 0;
 
     // Make stdout unbuffered
     setvbuf(stdout, NULL, _IONBF, 0);
@@ -304,7 +307,8 @@
 
         switch (c) {
             case 'b':
-                btaddress = optarg;
+                btaddresses[numaddr] = optarg;
+                numaddr++;
                 continue;
             case 'd':
                 displayname = optarg;
@@ -366,14 +370,18 @@
 
     // Check bluetooth address
     // FIXME: Allow for wiimote scanning
-    if (btaddress == NULL) {
-        fprintf(stderr, &quot;%s: Bluetooth address (-b/--bluetooth) is mandatory.\n&quot;, NAME);
+    if (numaddr == 0) {
+        fprintf(stderr, &quot;%s: One bluetooth address (-b/--bluetooth) is mandatory.\n&quot;, NAME);
         return 1;
-    } else if (strlen(btaddress) != 17) {
-        fprintf(stderr, &quot;%s: Bluetooth address %s has incorrect length.\n&quot;, NAME, btaddress);
-        return 1;
     }
 
+    for(i=0; i&lt;numaddr; i++) {
+        if (strlen(btaddresses[i]) != 17) {
+            fprintf(stderr, &quot;%s: Bluetooth address %s has incorrect length.\n&quot;, NAME, btaddresses[i]);
+            return 1;
+        }
+    }
+
     // Obtain the X11 display.
     if (displayname == NULL)
         displayname = getenv(&quot;DISPLAY&quot;);
@@ -391,13 +399,13 @@
         XSetErrorHandler(IgnoreDeadWindow);
 
         // Wait for 1+2
-        if (btaddress == NULL) {
+        if (numaddr == 0) {
     //        printf(&quot;Please press 1+2 on a wiimote in the viscinity...&quot;);
-            fprintf(stderr, &quot;%s: Sorry, you need to provide a bluetooth address using -b/--bluetooth.\n&quot;, NAME);
+            fprintf(stderr, &quot;%s: Sorry, you need to provide at least one  bluetooth address using -b/--bluetooth.\n&quot;, NAME);
             exit(1);
         } else {
-            printf(&quot;Please press 1+2 on the wiimote with address %s...&quot;, btaddress);
-            wiimote_connect(&amp;wmote, btaddress);
+            printf(&quot;Please press 1+2 on the wiimote with address %s...&quot;, btaddresses[0]);
+            wiimote_connect(&amp;wmote, btaddresses[0]);
             printf(&quot;\n&quot;);
         }
 
@@ -1088,19 +1096,19 @@
                 // Zoom in, volume up
                 if (wmote.keys.plus) {
                     if (strcasestr(name, &quot;firefox&quot;) == name) {
-                        XKeycode(XK_plus, ControlMask);
+                        XKeycode(XK_plus, ShiftMask | ControlMask);
                     } else if (strcasestr(name, &quot;gnome-terminal&quot;) == name) {
                         XKeycode(XK_plus, ShiftMask | ControlMask);
                     } else if (strcasestr(name, &quot;kpdf&quot;) == name) {
-                        XKeycode(XK_plus, ControlMask);
+                        XKeycode(XK_plus, ShiftMask | ControlMask);
                     } else if (strcasestr(name, &quot;mplayer&quot;) == name) {
                         XKeycode(XK_0, ShiftMask);
                     } else if (strcasestr(name, &quot;nautilus&quot;) == name) {
-                        XKeycode(XK_plus, ControlMask);
+                        XKeycode(XK_plus, ShiftMask | ControlMask);
                     } else if (strcasestr(name, &quot;opera&quot;) == name) {
                         XKeycode(XK_plus, 0);
                     } else if (strcasestr(name, &quot;rhythmbox&quot;) == name) {
-                        XKeycode(XK_Up, ControlMask);
+                        XKeycode(XK_Up, ShiftMask | ControlMask);
                     } else if (strcasestr(name, &quot;totem&quot;) == name) {
                         XKeycode(XK_Up, 0); 
                     } else if (strcasestr(name, &quot;tvtime&quot;) == name) {


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006402.html">[svn] r7606 - in trunk/tools/dstat: . docs plugins
</A></li>
	<LI>Next message: <A HREF="006404.html">[svn] r7608 - trunk/tools/wiipresent
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6403">[ date ]</a>
              <a href="thread.html#6403">[ thread ]</a>
              <a href="subject.html#6403">[ subject ]</a>
              <a href="author.html#6403">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
