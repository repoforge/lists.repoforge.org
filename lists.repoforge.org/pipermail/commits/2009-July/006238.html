<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r7441 - in trunk/rpms: dia fish libEMF libdlna ushare
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7441%20-%20in%20trunk/rpms%3A%20dia%20fish%20libEMF%20libdlna%20ushare&In-Reply-To=%3C200907150039.n6F0dawO028950%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006237.html">
   <LINK REL="Next"  HREF="006239.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r7441 - in trunk/rpms: dia fish libEMF libdlna ushare</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7441%20-%20in%20trunk/rpms%3A%20dia%20fish%20libEMF%20libdlna%20ushare&In-Reply-To=%3C200907150039.n6F0dawO028950%40surya.karan.org%3E"
       TITLE="[svn] r7441 - in trunk/rpms: dia fish libEMF libdlna ushare">packagers at lists.rpmforge.net
       </A><BR>
    <I>Wed Jul 15 02:39:36 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006237.html">[svn] r7440 - in trunk/rpms: pidgin-facebook pidgin-libnotify wine
</A></li>
        <LI>Next message: <A HREF="006239.html">[svn] r7442 - trunk/rpms/motion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6238">[ date ]</a>
              <a href="thread.html#6238">[ thread ]</a>
              <a href="subject.html#6238">[ subject ]</a>
              <a href="author.html#6238">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2009-07-15 01:39:36 +0100 (Wed, 15 Jul 2009)
New Revision: 7441

Modified:
   trunk/rpms/dia/dia.spec
   trunk/rpms/fish/fish.spec
   trunk/rpms/libEMF/libEMF.spec
   trunk/rpms/libdlna/libdlna.spec
   trunk/rpms/ushare/ushare.spec
Log:
Updates

Modified: trunk/rpms/dia/dia.spec
===================================================================
--- trunk/rpms/dia/dia.spec	2009-07-14 16:42:18 UTC (rev 7440)
+++ trunk/rpms/dia/dia.spec	2009-07-15 00:39:36 UTC (rev 7441)
@@ -3,15 +3,25 @@
 
 Summary: Diagram drawing program
 Name: dia
-Version: 0.96.1
+Version: 0.97
 Release: 1
 Epoch: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://www.gnome.org/projects/dia/">http://www.gnome.org/projects/dia/</A>
 
-#Source: <A HREF="http://ftp.gnome.org/pub/gnome/sources/dia/%{version">http://ftp.gnome.org/pub/gnome/sources/dia/%{version</A>}/dia-%{version}.tar.bz2
-Source: <A HREF="http://ftp.gnome.org/pub/gnome/sources/dia/0.96/dia-%{version">http://ftp.gnome.org/pub/gnome/sources/dia/0.96/dia-%{version</A>}.tar.bz2
+Source0: <A HREF="http://ftp.gnome.org/pub/gnome/sources/dia/%{version">http://ftp.gnome.org/pub/gnome/sources/dia/%{version</A>}/dia-%{version}.tar.bz2
+Source11: <A HREF="http://dia-installer.de/shapes/central_data_processing/central_data_processing.zip">http://dia-installer.de/shapes/central_data_processing/central_data_processing.zip</A>
+Source12: <A HREF="http://dia-installer.de/shapes/chemistry_lab/chemistry_lab.zip">http://dia-installer.de/shapes/chemistry_lab/chemistry_lab.zip</A>
+Source13: <A HREF="http://dia-installer.de/shapes/cmos/cmos.zip">http://dia-installer.de/shapes/cmos/cmos.zip</A>
+Source14: <A HREF="http://dia-installer.de/shapes/digital/digital.zip">http://dia-installer.de/shapes/digital/digital.zip</A>
+Source15: <A HREF="http://dia-installer.de/shapes/edpc/edpc.zip">http://dia-installer.de/shapes/edpc/edpc.zip</A>
+Source16: <A HREF="http://dia-installer.de/shapes/electronic/electronic.zip">http://dia-installer.de/shapes/electronic/electronic.zip</A>
+Source17: <A HREF="http://dia-installer.de/shapes/lst/lst.zip">http://dia-installer.de/shapes/lst/lst.zip</A>
+Source18: <A HREF="http://dia-installer.de/shapes/optics/optics.zip">http://dia-installer.de/shapes/optics/optics.zip</A>
+Source19: <A HREF="http://dia-installer.de/shapes/Racks/Racks.zip">http://dia-installer.de/shapes/Racks/Racks.zip</A>
+Source20: <A HREF="http://dia-installer.de/shapes/renewable_energy/renewable_energy.zip">http://dia-installer.de/shapes/renewable_energy/renewable_energy.zip</A>
+Source21: <A HREF="http://dia-installer.de/shapes/scenegraph/scenegraph.zip">http://dia-installer.de/shapes/scenegraph/scenegraph.zip</A>
 Patch1: dia-0.92.2-dtd.patch
 Patch2: dia-0.95-pre6-help.patch
 Patch3: dia-0.94-fallbacktoxpmicons.patch
@@ -19,15 +29,26 @@
 Patch5: dia-0.96.1-64bit.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
-BuildRequires: glib2-devel &gt;= 2.6, gtk2-devel &gt;= 2.6, libxml2-devel &gt;= 2.3.9
-BuildRequires: libgnome-devel &gt;= 2.0, libgnomeui-devel &gt;= 2.0, pango-devel &gt;= 1.1.5
-BuildRequires: libart_lgpl-devel &gt;= 2.3.10, libxslt-devel, libpng-devel
-BuildRequires: python-devel &gt;= 2.2.1, pygtk2-devel, gcc-c++, gettext, pkgconfig &gt;= 0.9
-BuildRequires: intltool, perl(XML::Parser), gettext, PyXML, docbook-style-xsl
+BuildRequires: docbook-style-xsl
+BuildRequires: gcc-c++
+BuildRequires: gettext
+BuildRequires: glib2-devel &gt;= 2.6
+BuildRequires: gtk2-devel &gt;= 2.6
+BuildRequires: intltool
+BuildRequires: libart_lgpl-devel &gt;= 2.3.10
+BuildRequires: libEMF-devel
+BuildRequires: libgnome-devel &gt;= 2.0
+BuildRequires: libgnomeui-devel &gt;= 2.0
+BuildRequires: libpng-devel
+BuildRequires: libxml2-devel &gt;= 2.3.9
+BuildRequires: libxslt-devel
+BuildRequires: pango-devel &gt;= 1.1.5
+BuildRequires: perl(XML::Parser)
+BuildRequires: pkgconfig &gt;= 0.9
+BuildRequires: python-devel &gt;= 2.2.1
+BuildRequires: pygtk2-devel
+BuildRequires: PyXML
 %{?el4:BuildRequires: gcc-g77}
-%{?fc5:BuildRequires: gcc-gfortran}
-%{?fc4:BuildRequires: gcc-gfortran}
-%{?fc3:BuildRequires: gcc-g77}
 
 %description
 The Dia drawing program is designed to be like the Microsoft(R) Visio
@@ -39,17 +60,20 @@
 
 %prep
 %setup
-%patch1 -p1 -b .dtd
-%patch2 -p1 -b .help
+#patch1 -p1 -b .dtd
+#patch2 -p1 -b .help
 %patch3 -p1 -b .fallbacktoxpmicons
 %patch4 -p1 -b .py-detect
-%patch5 -p1 -b .64bit
+#patch5 -p1 -b .64bit
 
+%{__perl} -pi.orig -e 's|\(W32::HDC\)user_data;|(W32::HDC)(guint64)user_data;|g' plug-ins/wmf/wmf.cpp
+
 %build
+#autoreconf --force --install --symlink
 %configure \
-	--enable-db2html \
-	--enable-gnome \
-	--with-python
+    --enable-db2html \
+    --enable-gnome \
+    --with-python
 %{__make} %{?_smp_mflags}
 
 %install
@@ -57,9 +81,21 @@
 %{__make} install DESTDIR=&quot;%{buildroot}&quot;
 %find_lang %{name}
 
-### Clean up buildroot
-#{__rm} -f %{buildroot}%{_libdir}/dia/*.la
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE11}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE12}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE13}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE14}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE15}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE16}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE17}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE18}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE19}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE20}
+unzip -n -d %{buildroot}%{_datadir}/dia %{SOURCE21}
 
+### Conflicts with Assorted/square.shape
+%{__perl} -pi -e &quot;s|Square|Square2|&quot; %{buildroot}%{_datadir}/dia/shapes/chemistry_lab/square.shape
+
 %clean
 %{__rm} -rf %{buildroot}
 
@@ -67,27 +103,35 @@
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog COPYING doc/ KNOWN_BUGS NEWS README THANKS TODO
 %doc %{_datadir}/gnome/help/dia/
-%doc %{_mandir}/man?/*
+%doc %{_mandir}/man1/dia.1*
+%doc %lang(fr) %{_mandir}/fr/man1/dia.1*
 %{_bindir}/dia
 %{_datadir}/applications/dia.desktop
 %{_datadir}/dia/
+%{_datadir}/icons/hicolor/*/apps/dia.png
+%{_datadir}/icons/hicolor/scalable/apps/dia.svg
 %{_datadir}/mime-info/dia.keys
 %{_datadir}/mime-info/dia.mime
-%{_datadir}/pixmaps/dia-diagram.png
-%{_datadir}/pixmaps/dia_gnome_icon.png
+%{_datadir}/omf/dia/
+#%{_datadir}/pixmaps/dia-diagram.png
+#%{_datadir}/pixmaps/dia_gnome_icon.png
+%{_docdir}/dia/
 %{_libdir}/dia/
 
 %changelog
-* Mon Jun 25 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.96.1-1.
+* Tue Jul 14 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.97-1
+- Updated to release 0.97.
+
+* Mon Jun 25 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.96.1-1
 - Updated to release 0.96.1.
 
 * Sat May 06 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.95-1
 - Updated to release 0.95.
 
-* Wed Aug 25 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.94-1.
+* Wed Aug 25 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.94-1
 - Updated to release 0.94.
 
-* Wed May 05 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.93-1.
+* Wed May 05 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.93-1
 - Updated to release 0.93.
 
 * Sun Nov 09 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.92.2-1

Modified: trunk/rpms/fish/fish.spec
===================================================================
--- trunk/rpms/fish/fish.spec	2009-07-14 16:42:18 UTC (rev 7440)
+++ trunk/rpms/fish/fish.spec	2009-07-15 00:39:36 UTC (rev 7441)
@@ -3,14 +3,9 @@
 
 %{?dtag: %{expand: %%define %dtag 1}}
 
-%{!?dtag:%define _with_modxorg 1}
+%{?el4:%define _without_modxorg 1}
+%{?el3:%define _without_modxorg 1}
 
-%{?el5:%define _with_modxorg 1}
-%{?fc8:%define _with_modxorg 1}
-%{?fc7:%define _with_modxorg 1}
-%{?fc6:%define _with_modxorg 1}
-%{?fc5:%define _with_modxorg 1}
-
 Summary: Friendly interactive shell
 Name: fish
 Version: 1.23.0
@@ -23,8 +18,8 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildRequires: ncurses-devel, doxygen, groff, gettext, autoconf
-%{?_with_modxorg:BuildRequires: xorg-x11-proto-devel, libXt-devel, libXext-devel}
-%{!?_with_modxorg:BuildRequires: XFree86-devel}
+%{!?_without_modxorg:BuildRequires: xorg-x11-proto-devel, libXt-devel, libXext-devel}
+%{?_without_modxorg:BuildRequires: XFree86-devel}
 
 %description
 fish is a shell geared towards interactive use. It's features are

Modified: trunk/rpms/libEMF/libEMF.spec
===================================================================
--- trunk/rpms/libEMF/libEMF.spec	2009-07-14 16:42:18 UTC (rev 7440)
+++ trunk/rpms/libEMF/libEMF.spec	2009-07-15 00:39:36 UTC (rev 7441)
@@ -39,8 +39,8 @@
 
 %build
 %configure \
-	--disable-static \
-	--enable-editing
+    --disable-static \
+    --enable-editing
 %{__make} %{?_smp_mflags}
 
 %install
@@ -48,7 +48,7 @@
 %{__make} install DESTDIR=&quot;%{buildroot}&quot; CPPROG=&quot;%{__cp} -avp&quot;
 
 %post -p /sbin/ldconfig
-%postun	-p /sbin/ldconfig
+%postun -p /sbin/ldconfig
 
 %clean
 %{__rm} -rf %{buildroot}

Modified: trunk/rpms/libdlna/libdlna.spec
===================================================================
--- trunk/rpms/libdlna/libdlna.spec	2009-07-14 16:42:18 UTC (rev 7440)
+++ trunk/rpms/libdlna/libdlna.spec	2009-07-15 00:39:36 UTC (rev 7441)
@@ -2,10 +2,14 @@
 # Authority: dag
 # Upstream: Benjamin Zores &lt;ben$geexbox,org&gt;
 
+%{?dtag: %{expand: %%define %dtag 1}}
+
+%{?el3:%define _without_ffmpeg05 1}
+
 Summary: Implementation of Digital Living Network Alliance (DLNA) standards
 Name: libdlna
 Version: 0.2.3
-Release: 1
+Release: 2
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://libdlna.geexbox.org/">http://libdlna.geexbox.org/</A>
@@ -13,6 +17,8 @@
 Source: <A HREF="http://libdlna.geexbox.org/releases/libdlna-%{version">http://libdlna.geexbox.org/releases/libdlna-%{version</A>}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
+BuildRequires: ffmpeg-devel
+
 %description
 libdlna aims at being the reference open-source implementation of DLNA
 (Digital Living Network Alliance) standards. Its primary goal is to
@@ -32,9 +38,15 @@
 %prep
 %setup
 
-%{__perl} -pi.orig -e 's|/lib\b|/%{_lib}|g' config.mak
+%if %{!?_without_ffmpeg05:1}0
+%{__perl} -pi.orig -e '
+        s|ffmpeg/avformat.h|ffmpeg/libavformat/avformat.h|;
+        s|ffmpeg/avcodec.h|ffmpeg/libavcodec/avcodec.h|;
+    ' configure src/*.c src/*.h
+%endif
 
 %build
+export CFLAGS=&quot;%{optflags} -I%{_includedir}/ffmpeg -I%{_includedir}/ffmpeg/avformat -I%{_includedir}/ffmpeg/avcodec&quot;
 ./configure \
     --disable-static \
     --libdir=&quot;%{_libdir}&quot; \
@@ -62,6 +74,9 @@
 %{_libdir}/pkgconfig/libdlna.pc
 
 %changelog
+* Mon Jul 13 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.3-2
+- Rebuild against ffmpeg-0.5.
+
 * Tue Nov 27 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.3-1
 - Updated to release 0.2.3.
 

Modified: trunk/rpms/ushare/ushare.spec
===================================================================
--- trunk/rpms/ushare/ushare.spec	2009-07-14 16:42:18 UTC (rev 7440)
+++ trunk/rpms/ushare/ushare.spec	2009-07-15 00:39:36 UTC (rev 7441)
@@ -6,7 +6,7 @@
 Summary: Universal Plug'nPlay (uPNP) Media Server
 Name: ushare
 Version: 1.1a
-Release: 2
+Release: 3
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://ushare.geexbox.org/">http://ushare.geexbox.org/</A>
@@ -171,6 +171,9 @@
 %exclude %{_sysconfdir}/init.d/ushare
 
 %changelog
+* Tue Jul 14 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1a-3
+- Rebuild against ffmpeg-0.5.
+
 * Mon Dec 17 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1a-2
 - Rebuild against libupnp 1.6.x.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006237.html">[svn] r7440 - in trunk/rpms: pidgin-facebook pidgin-libnotify wine
</A></li>
	<LI>Next message: <A HREF="006239.html">[svn] r7442 - trunk/rpms/motion
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6238">[ date ]</a>
              <a href="thread.html#6238">[ thread ]</a>
              <a href="subject.html#6238">[ subject ]</a>
              <a href="author.html#6238">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
