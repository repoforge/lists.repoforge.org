<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r3969 - in trunk/rpms: BasiliskII audacious bmp-mp3 bmp-wma	glame gnuboy gxmame kino libquicktime mixxx mjpegtools	mpeg2dec mplayer quake3 swfdec transcode vcdimager	videolan-client x264 xine xine-lib xmame xmms-mp3 xmms-musepack zvbi
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3969%20-%20in%20trunk/rpms%3A%20BasiliskII%20audacious%20bmp-mp3%20bmp-wma%0A%09glame%20gnuboy%20gxmame%20kino%20libquicktime%20mixxx%20mjpegtools%0A%09mpeg2dec%20mplayer%20quake3%20swfdec%20transcode%20vcdimager%0A%09videolan-client%20x264%20xine%20xine-lib%20xmame%20xmms-mp3%20xmms-musepack%20zvbi&In-Reply-To=%3C20060116150510.86C8D3180F2%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002768.html">
   <LINK REL="Next"  HREF="002770.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r3969 - in trunk/rpms: BasiliskII audacious bmp-mp3 bmp-wma	glame gnuboy gxmame kino libquicktime mixxx mjpegtools	mpeg2dec mplayer quake3 swfdec transcode vcdimager	videolan-client x264 xine xine-lib xmame xmms-mp3 xmms-musepack zvbi</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3969%20-%20in%20trunk/rpms%3A%20BasiliskII%20audacious%20bmp-mp3%20bmp-wma%0A%09glame%20gnuboy%20gxmame%20kino%20libquicktime%20mixxx%20mjpegtools%0A%09mpeg2dec%20mplayer%20quake3%20swfdec%20transcode%20vcdimager%0A%09videolan-client%20x264%20xine%20xine-lib%20xmame%20xmms-mp3%20xmms-musepack%20zvbi&In-Reply-To=%3C20060116150510.86C8D3180F2%40pooch.vmhosting.org%3E"
       TITLE="[svn] r3969 - in trunk/rpms: BasiliskII audacious bmp-mp3 bmp-wma	glame gnuboy gxmame kino libquicktime mixxx mjpegtools	mpeg2dec mplayer quake3 swfdec transcode vcdimager	videolan-client x264 xine xine-lib xmame xmms-mp3 xmms-musepack zvbi">packagers at lists.rpmforge.net
       </A><BR>
    <I>Mon Jan 16 16:05:10 CET 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="002768.html">[svn] r3968 - in trunk/rpms: bitlbee conserver dnsmasq etherape
</A></li>
        <LI>Next message: <A HREF="002770.html">[svn] r3970 - trunk/rpms/easytag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2769">[ date ]</a>
              <a href="thread.html#2769">[ thread ]</a>
              <a href="subject.html#2769">[ subject ]</a>
              <a href="author.html#2769">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2006-01-16 16:05:06 +0100 (Mon, 16 Jan 2006)
New Revision: 3969

Added:
   trunk/rpms/videolan-client/vlc-0.8.4a-extraqualif.patch
Removed:
   trunk/rpms/mplayer/mplayer-cvs.spec
Modified:
   trunk/rpms/BasiliskII/BasiliskII.spec
   trunk/rpms/audacious/audacious.spec
   trunk/rpms/bmp-mp3/bmp-mp3.spec
   trunk/rpms/bmp-wma/bmp-wma.spec
   trunk/rpms/glame/glame.spec
   trunk/rpms/gnuboy/gnuboy.spec
   trunk/rpms/gxmame/gxmame.spec
   trunk/rpms/kino/kino.spec
   trunk/rpms/libquicktime/libquicktime.spec
   trunk/rpms/mixxx/mixxx.spec
   trunk/rpms/mjpegtools/mjpegtools.spec
   trunk/rpms/mpeg2dec/mpeg2dec.spec
   trunk/rpms/mplayer/mplayer.spec
   trunk/rpms/quake3/quake3-1.33-nostrip.patch
   trunk/rpms/quake3/quake3.spec
   trunk/rpms/swfdec/swfdec.spec
   trunk/rpms/transcode/transcode.spec
   trunk/rpms/vcdimager/vcdimager.spec
   trunk/rpms/videolan-client/videolan-client.spec
   trunk/rpms/x264/x264.spec
   trunk/rpms/xine-lib/xine-lib.spec
   trunk/rpms/xine/xine.spec
   trunk/rpms/xmame/xmame.spec
   trunk/rpms/xmms-mp3/xmms-1.2.10-gcc4.patch
   trunk/rpms/xmms-mp3/xmms-mp3.spec
   trunk/rpms/xmms-musepack/xmms-musepack.spec
   trunk/rpms/zvbi/zvbi.spec
Log:
First batch of changes for FC5's modular X. Also switch MPlayer CVS (gtk2) to be the main one from now on.


Modified: trunk/rpms/BasiliskII/BasiliskII.spec
===================================================================
--- trunk/rpms/BasiliskII/BasiliskII.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/BasiliskII/BasiliskII.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -7,15 +7,21 @@
 %define desktop_vendor rpmforge
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
 %{!?dist:%define _with_banks 1}
+%{?fc5:  %define _with_banks 1}
 %{?fc4:  %define _with_banks 1}
 %{?el4:  %define _with_banks 1}
 %{?fc3:  %define _with_banks 1}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 Summary: 68k Macintosh emulator
 Name: BasiliskII
 Version: 1.0
-Release: 0.%{date}
+Release: 0.%{date}.3
 License: GPL
 Group: Applications/Emulators
 URL: <A HREF="http://www.gibix.net/projects/basilisk2/">http://www.gibix.net/projects/basilisk2/</A>
@@ -26,6 +32,7 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: gcc-c++, gtk2-devel, esound-devel &gt;= 0.2.8
 BuildRequires: desktop-file-utils, readline-devel
+%{?_with_modxorg:BuildRequires: libXt-devel}
 %{?_with_sdl:BuildRequires: SDL-devel}
 
 %description
@@ -35,7 +42,7 @@
 a Macintosh ROM image to use Basilisk II.
 
 Available rebuild options :
---with    : sdl banks
+--with    : sdl banks modxorg
 --without : mon
 
 
@@ -101,6 +108,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.20051122.3
+- Add modular xorg build switch, and make it the default.
+
 * Thu Dec  1 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.20051122
 - Update to 20051122 snapshot.
 - Add --with sdl rebuild option.

Modified: trunk/rpms/audacious/audacious.spec
===================================================================
--- trunk/rpms/audacious/audacious.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/audacious/audacious.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,6 +1,11 @@
 # $Id$
 # Authority: matthias
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{?fc5:%define _with_modxorg 1}
+
 Summary: Media player which uses a skinned interface
 Name: audacious
 Version: 0.1.2
@@ -22,6 +27,7 @@
 %{!?_without_lirc:BuildRequires: lirc-devel}
 BuildRequires: libsndfile, libsamplerate, libsidplay
 BuildRequires: ImageMagick
+%{?_with_modxorg:BuildRequires: libXext-devel, libXt-devel}
 
 %description
 Audacious is a media player forked from BMP (Beep Media Player) which uses a

Modified: trunk/rpms/bmp-mp3/bmp-mp3.spec
===================================================================
--- trunk/rpms/bmp-mp3/bmp-mp3.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/bmp-mp3/bmp-mp3.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,9 +1,15 @@
 # $Id$
 # Authority: matthias
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 Summary: MP3 playback plugin for the Beep Media Player
 Name: bmp-mp3
-Version: 0.9.7
+Version: 0.9.7.1
 Release: 1
 License: GPL
 Group: Applications/Multimedia
@@ -11,8 +17,9 @@
 Source: <A HREF="http://dl.sf.net/beepmp/bmp-%{version">http://dl.sf.net/beepmp/bmp-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: bmp &gt;= %{version}
-BuildRequires: XFree86-devel, gtk2-devel, libglade2-devel, libvorbis-devel
+BuildRequires: bmp-devel, libglade2-devel, libvorbis-devel
 BuildRequires: id3lib-devel, gcc-c++
+%{?_with_modxorg:BuildRequires: libXt-devel}
 
 %description
 This package contains an MP3 playback plugin for BMP (Beep Media Player),
@@ -46,6 +53,12 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.9.7.1-1
+- Update to 0.9.7.1.
+- Simplify some build requirements to &quot;bmp-devel&quot;, which does look like a
+  strange loop, but isn't :-)
+- Enable modular xorg conditional.
+
 * Wed Apr 13 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.9.7-1
 - Initial RPM release, rebuild the whole application and take only mpg123
   plugin. Pure packager laziness in action.

Modified: trunk/rpms/bmp-wma/bmp-wma.spec
===================================================================
--- trunk/rpms/bmp-wma/bmp-wma.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/bmp-wma/bmp-wma.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -6,7 +6,7 @@
 Summary: Windows Media Audio (WMA) playback plugin for the Beep Media Player
 Name: bmp-wma
 Version: 0.1.1
-Release: 1
+Release: 2
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://bmp-plugins.berlios.de/">http://bmp-plugins.berlios.de/</A>
@@ -28,6 +28,7 @@
 
 
 %build
+export CFLAGS=&quot;%{optflags} -DHAVE_LRINTF -fPIC&quot;
 %configure
 %{__make} %{?_smp_mflags}
 
@@ -50,7 +51,12 @@
 
 
 %changelog
-* Thu Jul 21 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.1.1-2
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.1.1-2
+- Force -DHAVE_LRINTF in CFLAGS since it's not detected by configure on FC5
+  as it should.
+- Force -fPIC too as build fails otherwise.
+
+* Thu Jul 21 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.1.1-1
 - Include bmp-wma-0.1.1-gcc4.patch with the &quot;usual&quot; ffmpeg common.h change.
 
 * Thu May 26 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.1.1-1

Modified: trunk/rpms/glame/glame.spec
===================================================================
--- trunk/rpms/glame/glame.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/glame/glame.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,12 +1,18 @@
 # $Id$
 # Authority: matthias
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:%define _with_modxorg 1}
+
 %define desktop_vendor rpmforge
 
 Summary: GNU/Linux Audio MEchanics, the GIMP of audio processing
 Name: glame
 Version: 2.0.1
-Release: 1
+Release: 2
 License: GPL
 Group: Applications/Multimedia
 Source0: <A HREF="http://dl.sf.net/glame/glame-%{version">http://dl.sf.net/glame/glame-%{version</A>}.tar.gz
@@ -21,6 +27,7 @@
 BuildRequires: lame-devel, libmad-devel, libvorbis-devel, ladspa-devel
 %{!?_without_alsa:BuildRequires: alsa-lib-devel}
 %{!?_without_freedesktop:BuildRequires: desktop-file-utils}
+%{?_with_modxorg:BuildRequires: xorg-x11-xbitmaps}
 
 %description
 GLAME is meant to be the GIMP of audio processing. It is designed to be
@@ -122,6 +129,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.0.1-2
+- Add modular xorg build conditional.
+
 * Tue Mar 29 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.0.1-1
 - Update to 2.0.1.
 - Requires gtk2 &gt;= 2.6.0, which will only be relased when FC4 is.

Modified: trunk/rpms/gnuboy/gnuboy.spec
===================================================================
--- trunk/rpms/gnuboy/gnuboy.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/gnuboy/gnuboy.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,17 +1,25 @@
 # $Id$
 # Authority: matthias
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:%define _with_modxorg 1}
+
 Summary: Nintendo GameBoy Color emulator
 Name: gnuboy
 Version: 1.0.3
-Release: 7
+Release: 8
 License: GPL
 Group: Applications/Emulators
 Source: <A HREF="http://gnuboy.unix-fu.org/src/%{name">http://gnuboy.unix-fu.org/src/%{name</A>}-%{version}.tar.gz
 URL: <A HREF="http://gnuboy.unix-fu.org/">http://gnuboy.unix-fu.org/</A>
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: SDL &gt;= 1.2.0
-BuildRequires: SDL-devel &gt;= 1.2.0, XFree86-devel
+BuildRequires: SDL-devel &gt;= 1.2.0
+%{?_with_modxorg:BuildRequires: libX11-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 
 %description
 gnuboy (all lowercase) is a portable program for emulating the 
@@ -43,6 +51,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.3-8
+- Add modular xorg build conditional.
+
 * Fri Nov 11 2005 Dries verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; 1.0.3-7
 - Fixed the source url.
 

Modified: trunk/rpms/gxmame/gxmame.spec
===================================================================
--- trunk/rpms/gxmame/gxmame.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/gxmame/gxmame.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -2,8 +2,10 @@
 # Authority: matthias
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
 %{!?dist:%define _with_gettextdevel 1}
+%{?fc5:  %define _with_gettextdevel 1}
 %{?fc4:  %define _with_gettextdevel 1}
 %{?fc3:  %define _with_gettextdevel 1}
 
@@ -13,7 +15,7 @@
 Summary: Complete GTK frontend for xmame
 Name: gxmame
 Version: 0.35
-Release: 0.2%{?date:.%{date}}%{?prever:.%{prever}}
+Release: 0.3%{?date:.%{date}}%{?prever:.%{prever}}
 License: GPL
 Group: Applications/Emulators
 URL: <A HREF="http://gxmame.sourceforge.net/">http://gxmame.sourceforge.net/</A>
@@ -69,6 +71,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.35-0.3.beta2
+- Add FC5 to the build conditionals.
+
 * Sat Jul 30 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.35-0.2.beta2
 - Remove the xpm icon, only the png one is used.
 

Modified: trunk/rpms/kino/kino.spec
===================================================================
--- trunk/rpms/kino/kino.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/kino/kino.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -2,6 +2,12 @@
 # Authority: dag
 # Upstream: Dan Dennedy &lt;ddennedy$users,sf,net&gt;
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 #define cvs 20040802
 
 Summary: Simple non-linear video editor
@@ -17,8 +23,9 @@
 Requires: gtk2 &gt;= 2.6
 BuildRequires: libdv-devel &gt;= 0.102, libavc1394-devel, libraw1394-devel
 BuildRequires: libogg-devel, libvorbis-devel, a52dec-devel
-BuildRequires: XFree86-devel, gtk2-devel &gt;= 2.6, libglade2-devel, gettext
+BuildRequires: gtk2-devel &gt;= 2.6, libglade2-devel, gettext
 BuildRequires: libxml2-devel, libsamplerate-devel, intltool
+%{?_with_modxorg:BuildRequires: libXv-devel}
 # libtool *sigh*
 BuildRequires: gcc-c++
 %{!?_without_quicktime:BuildRequires: libquicktime-devel}
@@ -92,6 +99,9 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.0-2
+- Add modular xorg build conditional.
+
 * Wed Dec  7 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net">http://freshrpms.net</A>&gt; 0.8.0-1
 - Update to 0.8.0.
 - Change libgnomeui-devel dependency to new gtk2-devel only.

Modified: trunk/rpms/libquicktime/libquicktime.spec
===================================================================
--- trunk/rpms/libquicktime/libquicktime.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/libquicktime/libquicktime.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -3,7 +3,11 @@
 # Upstream: &lt;libquicktime-devel$lists,sourceforge,net&gt;
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:%define _with_modxorg 1}
+
 %{?fc1:%define _without_alsa 1}
 %{?el3:%define _without_alsa 1}
 %{?rh9:%define _without_alsa 1}
@@ -19,7 +23,7 @@
 Summary: Library for reading and writing quicktime files
 Name: libquicktime
 Version: 0.9.7
-Release: 2%{?prever:.%{prever}}
+Release: 3%{?prever:.%{prever}}
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://libquicktime.sourceforge.net/">http://libquicktime.sourceforge.net/</A>
@@ -30,6 +34,7 @@
 %{?!_without_1394:BuildRequires: libraw1394-devel, libavc1394-devel}
 %{?!_without_alsa:BuildRequires: alsa-lib-devel}
 %{?!_without_ffmpeg:BuildRequires: ffmpeg-devel}
+%{?_with_modxorg:BuildRequires: libXt-devel, mesa-libGLU-devel, libXaw-devel, libXv-devel}
 # A bug, the devel libs don't require the main ones :-(
 %{?yd3:BuildRequires: libraw1394, libavc1394}
 
@@ -119,6 +124,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.9.7-3
+- Enable modular xorg conditional build.
+
 * Sun Jun  5 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.9.7-2
 - Add quicktime -&gt; lqt include symlink (required currently for transcode).
 - Add zlib-devel devel package requirement.

Modified: trunk/rpms/mixxx/mixxx.spec
===================================================================
--- trunk/rpms/mixxx/mixxx.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/mixxx/mixxx.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,6 +1,12 @@
 # $Id$
 # Authority: dag
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 %{?fc1:%define _without_alsa 1}
 %{?el3:%define _without_alsa 1}
 %{?rh9:%define _without_alsa 1}
@@ -13,16 +19,18 @@
 Summary: DJ software emulating an analog mixer with two playback devices
 Name: mixxx
 Version: 1.4.2
-Release: 2
+Release: 3
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://mixxx.sourceforge.net/">http://mixxx.sourceforge.net/</A>
 Source: <A HREF="http://dl.sf.net/mixxx/mixxx-%{version">http://dl.sf.net/mixxx/mixxx-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: glibc-devel, XFree86-devel, qt-devel &gt;= 3.0, glib-devel
+BuildRequires: qt-devel &gt;= 3.0, glib-devel
 BuildRequires: audiofile-devel, libmad-devel, libid3tag-devel
 BuildRequires: libvorbis-devel, libogg-devel, libsndfile-devel
 BuildRequires: portaudio, fftw-devel, gcc-c++
+%{?_with_modxorg:BuildRequires: libXmu-devel, mesa-libGLU-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 %{!?_without_freedesktop:BuildRequires: desktop-file-utils}
 %{!?_without_alsa:BuildRequires: alsa-lib-devel}
 
@@ -37,9 +45,10 @@
 Mixxx. Low latency operation and hardware controllers makes the big difference
 in a live gig. Mixxx supports it all.
 
+
 %prep
 %setup
-
+# Create desktop entry
 %{__cat} &lt;&lt;EOF &gt;mixxx.desktop
 [Desktop Entry]
 Name=Mixxx DJ Software
@@ -52,6 +61,7 @@
 Categories=Application;AudioVideo;
 EOF
 
+
 %build
 source &quot;/etc/profile.d/qt.sh&quot;
 # The PWD thing is an ugly hack since relative paths mess everything up...
@@ -65,6 +75,7 @@
     %{__make} %{?_smp_mflags}
 popd
 
+
 %install
 %{__rm} -rf %{buildroot}
 # That trailing slash is mandatory because of &quot;$(INSTALL_ROOT)usr&quot; lines
@@ -83,9 +94,11 @@
         mixxx.desktop
 %endif
 
+
 %clean
 %{__rm} -rf %{buildroot}
 
+
 %files
 %defattr(-, root, root, 0755)
 %doc COPYING LICENSE Mixxx-Manual.pdf README*
@@ -95,7 +108,11 @@
 %{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-mixxx.desktop}
 %{?_without_freedesktop:%{_datadir}/gnome/apps/Multimedia/mixxx.desktop}
 
+
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.4.2-3
+- Add modular xorg build conditional.
+
 * Wed Nov  3 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.4.2-2
 - Enable ALSA properly.
 

Modified: trunk/rpms/mjpegtools/mjpegtools.spec
===================================================================
--- trunk/rpms/mjpegtools/mjpegtools.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/mjpegtools/mjpegtools.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -70,6 +70,10 @@
     ./configure &amp;&amp; %{__make} CFLAGS=&quot;%{optflags}&quot;
 popd
 %endif
+
+# Required for 1.8.0 with gcc 4.1 (FC5+)
+export CFLAGS=&quot;%{optflags} -fpermissive&quot;
+export CXXFLAGS=&quot;%{optflags} -fpermissive&quot;
 %configure \
 %ifarch %{ix86}
     %{?_without_mmx:--with-jpeg-mmx=&quot;`pwd`/jpeg-mmx-%{jpegmmx_version}&quot;}
@@ -118,6 +122,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.8.0-2
+- Add -fpermissive to CFLAGS for now, as otherwise the build fails on FC5.
+
 * Fri Dec  9 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.8.0-1
 - Update to 1.8.0.
 - Remove %%{?_smp_mflags}, as the build failed for me on x86_64 with -j4.

Modified: trunk/rpms/mpeg2dec/mpeg2dec.spec
===================================================================
--- trunk/rpms/mpeg2dec/mpeg2dec.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/mpeg2dec/mpeg2dec.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -2,19 +2,27 @@
 # Authority: matthias
 # Upstream: &lt;libmpeg2-devel$lists,sf,net&gt;
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:%define _with_modxorg 1}
+
 #define date 20040610
 
 Summary: MPEG-2 and MPEG-1 decoding library and test program
 Name: mpeg2dec
 Version: 0.4.0
-Release: %{?date:0.%{date}.}5b
+Release: %{?date:0.%{date}.}6b
 License: LGPL
 Group: System Environment/Libraries
 URL: <A HREF="http://libmpeg2.sourceforge.net/">http://libmpeg2.sourceforge.net/</A>
 Source: <A HREF="http://libmpeg2.sourceforge.net/files/mpeg2dec-%{?date:snapshot">http://libmpeg2.sourceforge.net/files/mpeg2dec-%{?date:snapshot</A>}%{!?date:%{version}}b.tar.gz
 Patch: mpeg2dec-0.4.0b-pic.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: XFree86-devel, SDL-devel, pkgconfig, gcc-c++
+BuildRequires: SDL-devel, pkgconfig, gcc-c++
+%{?_with_modxorg:BuildRequires: libX11-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 # Required for ./bootstrap
 BuildRequires: autoconf, automake, libtool
 
@@ -55,11 +63,9 @@
 %makeinstall
 
 
-%post
-/sbin/ldconfig 2&gt;/dev/null
+%post -p /sbin/ldconfig
 
-%postun
-/sbin/ldconfig 2&gt;/dev/null
+%postun -p /sbin/ldconfig
 
 
 %clean
@@ -85,6 +91,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.4.0-6b
+- Add modular xorg build conditional.
+
 * Fri Dec 10 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.4.0-5b
 - Add patch from rpm.livna.org to remove -prefer-non-pic.
 - Downgrade to 0.4.0b to fix permanent segfaults...

Deleted: trunk/rpms/mplayer/mplayer-cvs.spec
===================================================================
--- trunk/rpms/mplayer/mplayer-cvs.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/mplayer/mplayer-cvs.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,606 +0,0 @@
-# $Id$
-# Authority: matthias
-
-# Overridable kernel version, needed for the DVB includes
-%{!?kernel: %define kernel %(uname -r)}
-
-%{?dist: %{expand: %%define %dist 1}}
-
-%{?fc1:%define _without_alsa 1}
-%{?fc1:%define _without_theora 1}
-%{?fc1:%define _without_xvmc 1}
-
-%{?el3:%define _without_alsa 1}
-%{?el3:%define _without_fribidi 1}
-%{?el3:%define _without_theora 1}
-%{?el3:%define _without_xvmc 1}
-
-%{?rh9:%define _without_alsa 1}
-%{?rh9:%define _without_fribidi 1}
-%{?rh9:%define _without_theora 1}
-%{?rh9:%define _without_xvmc 1}
-
-%{?rh8:%define _without_alsa 1}
-%{?rh8:%define _without_fribidi 1}
-%{?rh8:%define _without_theora 1}
-%{?rh8:%define _without_xvmc 1}
-
-%{?rh7:%define _without_alsa 1}
-%{?rh7:%define _without_fribidi 1}
-%{?rh7:%define _without_freedesktop 1}
-%{?rh7:%define _without_theora 1}
-%{?rh7:%define _without_gcccheck 1}
-%{?rh7:%define _without_xvmc 1}
-
-%{?el2:%define _without_alsa 1}
-%{?el2:%define _without_arts 1}
-%{?el2:%define _without_caca 1}
-%{?el2:%define _without_dv 1}
-%{?el2:%define _without_fribidi 1}
-%{?el2:%define _without_freedesktop 1}
-%{?el2:%define _without_theora 1}
-%{?el2:%define _without_xvmc 1}
-
-%{?yd3:%define _without_alsa 1}
-%{?yd3:%define _without_fribidi 1}
-%{?yd3:%define _without_theora 1}
-
-# Is this a daily build? If so, put the date like &quot;20020808&quot; otherwise put 0
-%define date      20051211
-#define rcver     pre7
-
-Summary: MPlayer, the Movie Player for Linux
-Name: mplayer
-Version: 1.0
-Release: 0.23%{?rcver:.%{rcver}}%{?date:.%{date}}
-License: GPL
-Group: Applications/Multimedia
-URL: <A HREF="http://mplayerhq.hu/">http://mplayerhq.hu/</A>
-%if %{?date:1}0
-# cvs -z3 -d:pserver:<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">anonymous at mplayerhq.hu</A>:/cvsroot/mplayer co -P
-# cvs -z3 -d:pserver:<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">anonymous at mplayerhq.hu</A>:/cvsroot/ffmpeg co -P
-# mv ffmpeg/{libavcodec,libavformat,libavutil} mplayer/
-# find mplayer -name CVS | xargs rm -rf
-# mv mplayer MPlayer-%{date}
-# tar cjvf MPlayer-%{date}.tar.bz2 MPlayer-%{date}/
-Source0: <A HREF="http://www.mplayerhq.hu/MPlayer/cvs/MPlayer-%{date">http://www.mplayerhq.hu/MPlayer/cvs/MPlayer-%{date</A>}.tar.bz2
-%else
-Source0: <A HREF="http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{version">http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{version</A>}%{?rcver}.tar.bz2
-%endif
-Source1: <A HREF="http://www.live555.com/liveMedia/public/live.2005.12.09.tar.gz">http://www.live555.com/liveMedia/public/live.2005.12.09.tar.gz</A>
-Source2: <A HREF="http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.5.tar.bz2">http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.5.tar.bz2</A>
-# Only for reference, required on YDL4 at least
-Source10: uio.h-ppc.patch
-Patch0: MPlayer-0.90pre9-runtimemsg.patch
-Patch1: MPlayer-0.90-playlist.patch
-Patch2: MPlayer-0.90pre10-redhat.patch
-Patch10: MPlayer-1.0pre6a-fribidi.patch
-Patch11: MPlayer-1.0pre8-udev.patch
-Patch12: MPlayer-1.0pre7-nostrip.patch
-BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-Requires: mplayer-fonts
-BuildRequires: XFree86-devel, gtk2-devel, SDL-devel
-BuildRequires: libpng-devel, libjpeg-devel, libungif-devel
-BuildRequires: lame-devel, libmad-devel, flac-devel
-BuildRequires: libmatroska-devel
-BuildRequires: ImageMagick
-%{?_with_samba:BuildRequires: samba-common}
-%{?_with_dvdread:BuildRequires: libdvdread-devel}
-%{!?_without_dvb:BuildRequires: kernel-devel = %{kernel}}
-%{!?_without_dv:BuildRequires: libdv-devel}
-%{!?_without_ladspa:BuildRequires: ladspa-devel}
-%{!?_without_alsa:BuildRequires: alsa-lib-devel}
-%{!?_without_fribidi:BuildRequires: fribidi-devel}
-%{!?_without_aalib:BuildRequires: aalib-devel}
-%{!?_without_lirc:BuildRequires: lirc-devel}
-%{!?_without_cdparanoia:BuildRequires: cdparanoia-devel}
-%{!?_without_arts:BuildRequires: arts-devel}
-%{!?_without_xvid:BuildRequires: xvidcore-devel}
-%{!?_without_x264:BuildRequires: x264-devel}
-%{!?_without_esd:BuildRequires: esound-devel}
-%{!?_without_lzo:BuildRequires: lzo-devel}
-%{!?_without_fame:BuildRequires: libfame-devel}
-%{!?_without_caca:BuildRequires: libcaca-devel}
-%{!?_without_theora:BuildRequires: libtheora-devel}
-%{!?_without_xvmc:BuildRequires: libXvMCW-devel}
-%{!?_without_dts:BuildRequires: libdca-devel}
-%{!?_without_faac:BuildRequires: faac-devel}
-%{!?_without_mpc:BuildRequires: libmpcdec-devel}
-%{!?_without_vstream:BuildRequires: vstream-client-devel}
-
-%description
-MPlayer is a multimedia player. It plays most video formats as well as DVDs.
-Its big feature is the wide range of supported output drivers. There are also
-nice antialiased shaded subtitles and OSD.
-
-On x86, additional Win32 binary codecs should be added to %{_libdir}/win32/.
-
-Available rpmbuild rebuild options :
---with : samba dvdread
---without : aalib lirc cdparanoia arts xvid esd lzo fame caca dvb vstream
-            theora osdmenu gcccheck fribidi xvmc x264 faac mpc live ladspa
-
-
-%package -n mencoder
-Summary: MPlayer&#8217;s Movie Encoder
-Group: Applications/Multimedia
-Requires: %{name} = %{version}
-
-%description -n mencoder
-MPlayer&#8217;s Movie Encoder is a simple movie encoder, designed to encode 
-MPlayer-playable movies to other MPlayer-playable formats. It encodes to
-MPEG-4 (DivX/XviD), one of the libavcodec codecs and PCM/MP3/VBRMP3 audio
-in 1, 2 or 3 passes.  Furthermore  it has stream copying abilities, a
-powerful filter system (crop, expand, flip, postprocess, rotate, scale,
-noise, rgb/yuv conversion) and more.
-
-
-%package docs
-Summary: Documentation for MPlayer, the Movie Player for Linux
-Group: Applications/Multimedia
-
-%description docs
-MPlayer is a movie player. It plays most video formats as well as DVDs.
-Its big feature is the wide range of supported output drivers. There are also
-nice antialiased shaded subtitles and OSD.
-
-This package contains the end user documentation.
-
-
-%prep
-%if %{?date:1}0
-%setup -n MPlayer-%{date} -a 1
-%else
-%setup -n MPlayer-%{version}%{?rcver} -a 1
-%endif
-%patch0 -p1 -b .runtimemsg
-%patch1 -p1 -b .playlist
-%patch2 -p0 -b .redhat
-%patch10 -p1 -b .fribidi
-%patch11 -p1 -b .udev
-%patch12 -p1 -b .nostrip
-
-# Clean up the tarball contents (useful for the included docs)
-find . -name &quot;CVS&quot; | xargs %{__rm} -rf
-
-# Overwrite some of the details of the provided system menu entry
-%{__perl} -pi -e 's|^Exec=gmplayer$|Exec=gmplayer %f|g;
-                  s|^Categories=.*|Categories=Application;AudioVideo;|g' \
-    etc/mplayer.desktop
-echo &quot;MimeType=video/dv;video/mpeg;video/x-mpeg;video/msvideo;video/quicktime;video/x-anim;video/x-avi;video/x-ms-asf;video/x-ms-wmv;video/x-msvideo;video/x-nsv;video/x-flc;video/x-fli;application/ogg;application/x-ogg;application/x-matroska;audio/x-mp3;audio/x-mpeg;audio/mpeg;audio/x-wav;audio/x-mpegurl;audio/x-scpls;audio/x-m4a;audio/x-ms-asf;audio/x-ms-asx;audio/x-ms-wax;application/vnd.rn-realmedia;audio/x-real-audio;audio/x-pn-realaudio;misc/ultravox;audio/vnd.rn-realaudio;audio/x-pn-aiff;audio/x-pn-au;audio/x-pn-wav;audio/x-pn-windows-acm;image/vnd.rn-realpix;video/vnd.rn-realvideo;audio/x-pn-realaudio-plugin;&quot; &gt;&gt; etc/mplayer.desktop
-
-
-%build
-# Build statically linked live555 libraries
-%if 0%{!?_without_live:1}
-pushd live
-    # Force the use of our CFLAGS
-    %{__perl} -pi -e 's|-O2|%{optflags}|g' config.linux
-    # Configure and build
-    ./genMakefiles linux &amp;&amp; %{__make}
-popd
-%endif
-
-export CFLAGS=&quot;%{optflags}&quot;
-echo | ./configure \
-    --prefix=%{_prefix} \
-    --bindir=%{_bindir} \
-    --datadir=%{_datadir}/mplayer \
-    --mandir=%{_mandir} \
-    --confdir=%{_sysconfdir}/mplayer \
-    --libdir=%{_libdir} \
-    --enable-gui \
-    --enable-largefiles \
-    --enable-dynamic-plugins \
-%ifarch %{ix86}
-    --enable-runtime-cpudetection \
-    --enable-win32 \
-    --with-win32libdir=%{_libdir}/win32 \
-    --with-reallibdir=%{_libdir}/win32 \
-%else
-    --with-reallibdir=%{_libdir}/real \
-%endif
-    --enable-joystick \
-    %{?_without_gcccheck:--disable-gcc-checking} \
-    %{?_without_alsa:--disable-alsa} \
-    %{?_without_aalib:--disable-aa} \
-    %{?_without_lirc:--disable-lirc} \
-    %{?_without_cdparanoia:--disable-cdparanoia} \
-    %{!?_without_cdparanoia:--with-cdparanoiaincdir=%{_includedir}/cdda} \
-    %{?_without_libdv:--disable-libdv} \
-    %{?_without_arts:--disable-arts} \
-    %{?_without_esd:--disable-esd} \
-    %{!?_with_dvdread:--disable-dvdread} \
-    %{?_without_fame:--disable-libfame} \
-    %{?_without_caca:--disable-caca} \
-    %{?_without_theora:--disable-theora} \
-    %{!?_without_dvb:--enable-dvbhead} \
-    %{!?_without_dvb:--with-dvbincdir=/lib/modules/%{kernel}/build/include} \
-    --disable-fastmemcpy \
-    --enable-i18n \
-    --language=all \
-    %{!?_without_osdmenu:--enable-menu} \
-    %{?_with_samba:--enable-smb} \
-    %{!?_without_fribidi:--enable-fribidi} \
-    %{!?_without_xvmc:--enable-xvmc --with-xvmclib=XvMCW} \
-    %{!?_without_live:--with-livelibdir=`pwd`/live} \
-    --enable-debug
-
-%{__make} %{?_smp_mflags}
-
-
-%install
-%{__rm} -rf %{buildroot}
-# The libdir override is required for libpostproc when _libdir is /usr/lib64
-%{__make} install DESTDIR=%{buildroot} \
-    libdir=%{buildroot}%{_libdir}
-
-# The default Skin
-%{__mkdir_p} %{buildroot}%{_datadir}/mplayer/Skin/
-%{__tar} -xjf %{SOURCE2} -C %{buildroot}%{_datadir}/mplayer/Skin/
-%{__mv} -f %{buildroot}%{_datadir}/mplayer/Skin/* %{buildroot}%{_datadir}/mplayer/Skin/default
-
-# The fonts are now in a separate package
-%{__rm} -rf %{buildroot}%{_datadir}/mplayer/font || :
-
-# Remove unwanted stuff from the docs to be included
-%{__rm} -rf DOCS/{man,xml}
-
-# Create empty Win32 binary codec directory
-%ifarch %{ix86}
-%{__mkdir_p} %{buildroot}%{_libdir}/win32
-%else
-%{__mkdir_p} %{buildroot}%{_libdir}/real
-%endif
-
-
-%post
-/sbin/ldconfig
-update-desktop-database %{_datadir}/applications &amp;&gt;/dev/null || :
-
-%postun
-/sbin/ldconfig
-update-desktop-database %{_datadir}/applications &amp;&gt;/dev/null || :
-
-
-%clean
-%{__rm} -rf %{buildroot}
-
-
-%files
-%defattr(-, root, root, 0755)
-%doc AUTHORS ChangeLog Copyright LICENSE README etc/*.conf
-%dir %{_sysconfdir}/mplayer/
-#config %{_sysconfdir}/mplayer/mplayer.conf
-%{_bindir}/gmplayer
-%{_bindir}/mplayer
-%ifarch %{ix86}
-%dir %{_libdir}/win32/
-%else
-%dir %{_libdir}/real/
-%endif
-%{_libdir}/libdha.so*
-%{_libdir}/mplayer/
-%{!?_without_freedesktop:%{_datadir}/applications/mplayer.desktop}
-%{_datadir}/mplayer/
-%{_datadir}/pixmaps/mplayer-desktop.xpm
-%{_mandir}/man1/mplayer.1*
-%lang(cs) %{_mandir}/cs/man1/mplayer.1*
-%lang(de) %{_mandir}/de/man1/mplayer.1*
-%lang(es) %{_mandir}/es/man1/mplayer.1*
-%lang(fr) %{_mandir}/fr/man1/mplayer.1*
-%lang(hu) %{_mandir}/hu/man1/mplayer.1*
-%lang(it) %{_mandir}/it/man1/mplayer.1*
-%lang(pl) %{_mandir}/pl/man1/mplayer.1*
-%lang(sv) %{_mandir}/sv/man1/mplayer.1*
-
-%files -n mencoder
-%defattr(-, root, root, 0755)
-%{_bindir}/mencoder
-%{_mandir}/man1/mencoder.1*
-%lang(cs) %{_mandir}/cs/man1/mencoder.1*
-%lang(de) %{_mandir}/de/man1/mencoder.1*
-%lang(es) %{_mandir}/es/man1/mencoder.1*
-%lang(fr) %{_mandir}/fr/man1/mencoder.1*
-%lang(hu) %{_mandir}/hu/man1/mencoder.1*
-%lang(it) %{_mandir}/it/man1/mencoder.1*
-%lang(pl) %{_mandir}/pl/man1/mencoder.1*
-%lang(sv) %{_mandir}/sv/man1/mencoder.1*
-
-%files docs
-%defattr(-, root, root, 0755)
-%doc DOCS/*
-
-
-%changelog
-* Mon Dec 19 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.23.20051211
-- Enable vstream support (TiVo vserver stream).
-
-* Tue Dec 13 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.22.20051211
-- Force _libdir since libdha and vidix modules are now built on x86_64.
-- Include empty _libdir/real/ for non-x86 archs.
-
-* Sun Dec 11 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.21.20051211
-- Update to CVS code.
-- Update Blue skin to 1.5.
-- Update udev patch (v4l detection no longer uses test on /dev files, but lirc
-  still does).
-- Remove all obsolete patches.
-- Change gtk+ build requirement to gtk2.
-- Enable x264 again.
-- Add faac, ladspa and musepack (mpc) support (enabled).
-- Add live555 support, include latest snapshot : live.2005.12.09.
-- Enable dvb by default, and make overriding the kernel version possible.
-- Switch from external libdvdread to mpdvdkit, since the streaming part fails
-  to build otherwise.
-- Remove disabled dvdnav support, as it's no longer available.
-
-* Sun Dec 11 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.20.pre7
-- Enable DTS (libdca).
-- Try to enable x264, fix configure check (libpthread), but compile fails.
-
-* Fri Dec  9 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.19.pre7
-- Include patch to fix PPC compilation on FC4 at last.
-
-* Thu Dec  8 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.18.pre7
-- Disabled shared libpostprocess, let the original ffmpeg package take
-  care of that once and for all.
-- Include ad_pcm_fix patch.
-
-* Tue Jul 19 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.17.pre7
-- Added x86_64 patch from Ryo Dairiki.
-- Remove gtk-update-icon-cache calls, at least until icon changes place.
-
-* Tue Jun 28 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.16.pre7
-- Fix &quot;libfame&quot; to &quot;fame&quot; rebuild option listed in the description.
-
-* Sun May  1 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.16.pre7
-- Include gcc4 patches from Gentoo portage, to build on FC4..
-- Split off docs sub-package, as it represents 7MB of data!
-- Split off mencoder sub-package too, not everyone uses it.
-- Add gtk-update-icon-cache calls in post and postun.
-- Add debug option (it only adds -g and disabled stripping) + patch.
-
-* Sun Apr 17 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.16.pre7
-- Update to 1.0pre7.
-- No longer overwrite the entire desktop file, just replace a few fields.
-- Remove libogg and libvorbis deps, ogg/vorbis now uses Tremor internally.
-- Disable xmms support, as it's been moved to Extras.
-- Disable external faad2, it changes too much, using the internal is safer.
-- Add Copyright and LICENSE files to %%doc.
-- Remove .cvsignore file removal from DOCS, there are none leftover anymore.
-- Remove manual libpostproc install, it seems fixed now.
-- Add same MimeType as totem, except flac and flash types.
-- Remove lib64 hacks, problems have been fixed.
-
-* Thu Jan 13 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.15.pre6a
-- Change lirc patch into more generic udev one to avoid /dev/video* detection.
-- Enable v4l again (from the above patch).
-
-* Fri Jan  7 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.14.pre6a
-- Added quick patch to skip /dev/lirc* file presence check, since this doesn't
-  work as expected with udev.
-- Add ppc to the ifarch for libdha and vidix modules inclusion as configure
-  enables it for &quot;ppc &amp;&amp; linux&quot; (not x86_64, though, probably a good reason?).
-- Include uio.h-ppc.patch as source, as this is a required change on YDL4 (ppc)
-  to get MPlayer's x11 vo to compile properly (VECTOR vs. IOVEC).
-- Added libXvMCW support for Unichrome and others, even though a comment in the
-  configure script seems to suggest it's not entirely ready yet.
-
-* Mon Jan  3 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.13.pre6a
-- Update to 1.0pre6a.
-- Remove cz man pages, add cs ones.
-- Fix fribidi support and include patch from Nir Misgav.
-
-* Wed Nov  3 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.12.20042025
-- Merge Dag's scriplet changes.
-
-* Mon Oct 25 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.11.20042025
-- Update to today's CVS snapshot.
-- Simplify the desktop file install, as there is now one included.
-- Add --disable-fastmemcpy to fix broken libpostproc.
-
-* Sat Oct 16 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.11.pre5
-- Added update-desktop-database scriplet calls.
-
-* Fri Jul 23 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.11.pre5
-- Add fixes for x86_64, it now builds and works.
-- Added external libmatroska support.
-- Added optional DVB conditional build.
-
-* Fri Jul 16 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.10.pre5
-- Update to 1.0pre5.
-- Updated Blue skin to 1.4.
-- Now use the MPlayer_mini.xpm icon to fix the transparent vs. white problem.
-
-* Thu May 20 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.10.pre4
-- Rebuild for Fedora Core 2.
-- Update to 1.0pre4... why doesn't drag'n drop work anymore? :-(
-- Updated Blue skin to 1.2.
-- Added caca and theora support.
-- Un-conditionalized alsa and libdv, which are now part of Fedora Core 2.
-
-* Thu Apr 15 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.9.20040415
-- Updated to today's CVS snapshot to fix http vulnerability.
-
-* Wed Feb 11 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.8.20040325
-- Updated to today's CVS snapshot.
-- Updated Blue skin to 1.1.
-- Added xmms support to mencoder.
-- Added it man page.
-
-* Wed Feb 11 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.7.20040211.fr
-- Updated to today's CVS snapshot.
-
-* Fri Dec  5 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.6.20031205.fr
-- Updated to today's CVS snapshot.
-- Removed the ffmpeg CVS stuff, as it's now part of the snapshots again.
-- Rebuild against a modified libfame to have libfame/fame.h found.
-- Change back xvidcore-static build dep to xvidcore-devel, as it seems to
-  build against the shared lib again.
-- Fix libmad to libmad-devel build dep.
-
-* Mon Nov 17 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.5.pre2.20031107.fr
-- Rebuild with proper faad2 (external) support.
-
-* Sun Oct  5 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 1.0rc2.
-
-* Thu Oct  2 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to today's CVS snapshot.
-- Fixed menu entry (missing trailing &quot;;&quot; to Categories=!).
-
-* Wed Sep  3 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 1.0pre1.
-
-* Fri Aug  8 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to today's cvs snapshot.
-- Added libfame support.
-- Enabled translated man pages.
-- Added osdmenu and samba build switches.
-- Disabled codecs.conf, as it's not installed anymore.
-- Fixed xvidcore build requirement, as link is static.
-- Removed explicit /sbin/ldconfig dep, picked up automatically.
-
-* Mon Jun 16 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to today's cvs snapshot.
-- Reverted Requires(...) to plain Requires.
-- Changed %pre / %post to -p.
-- Added libpostproc install workaround since it seems broken.
-
-* Mon Apr 28 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Added libpng dependencies.
-
-* Tue Apr  8 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90 final.
-- Changed the default skin to Blue.
-- Moved the fonts into a separate package.
-- Split libpostproc (to remove mplayer dep from transcode).
-- Added faad2 support and explicit lzo dep.
-
-* Mon Mar 31 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Rebuilt for Red Hat Linux 9.
-
-* Mon Mar 24 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Fix ppc build.
-
-* Wed Mar 19 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90rc5.
-
-* Sat Mar 15 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Added gcccheck build option.
-- Added freedesktop build option.
-
-* Sun Feb 16 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Rebuild against new libdvdread.
-
-* Wed Feb 12 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Add a workaround for the default skin's permission problem.
-
-* Mon Feb 10 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90rc4.
-- Updated default skin to 1.7.
-
-* Wed Jan 22 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Added --without dvdnav build option.
-
-* Mon Jan 20 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90rc3.
-- Added &quot;--without esd&quot; build option.
-
-* Sat Jan 11 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to today's snapshot as it fixes many bugs (fullscreen for ex).
-- Replace all divx4linux stuff with xvid.
-- Rebuilt with libavcodec from ffmpeg, doh!
-
-* Thu Jan  2 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90rc2, updated the cdda patch too.
-- Removed the Epoch... yes, upgrade manually by erasing and installing again.
-
-* Mon Dec  9 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90rc1.
-
-* Fri Nov 15 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Re-enabled the auto req/prov.
-
-* Tue Nov 12 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre10.
-- Added CDDA support through cdparanoia + include fix.
-- Enabled shared postproc library.
-- Fixed VCD support by having redhat -&gt; linux (probably fixes joystick too).
-- Removed CFLAGS overwriting.
-
-* Sat Oct 26 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Fixed aa with --disable-aa instead of --disable-aalib.
-
-* Fri Oct 25 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre9.
-- Enable ALSA by default now.
-- Added patch to remove that awful startup message about runtime cpudetection.
-- Added libdvdnav support for rebuild.
-
-* Wed Oct  3 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Enforced --without libdv, lirc options to disable even if libs are present.
-
-* Sat Sep 28 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Rebuilt for Red Hat Linux 8.0.
-- Added new menu entry.
-- New --with and --without rebuild options.
-
-* Fri Sep 20 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre8.
-- Added some files to the %%doc section.
-
-* Thu Sep  5 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre7.
-- Removed obsolete prefix.
-- Explicitely disable ALSA for now.
-
-* Mon Aug 20 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Rebuilt with libdvdnav... but removed, just too experimental :-(
-- Added direct DVD menu entry.
-
-* Mon Aug 13 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Added arts dependency.
-
-* Tue Aug  6 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre6.
-- Added aalib and lirc build dependencies to get a full-featured binary.
-- Updated %%description.
-- Added iso-8859-2 font in the package.
-- Cleaned up old unuseful hacks.
-
-* Mon Jun 10 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre5.
-
-* Tue May 14 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre4.
-- Overwrite the absolute link for the mencoder.1 man page.
-
-* Sat May 11 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Added the mime types for the menu entry.
-
-* Thu May  2 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Added CFLAGS for configure and i18n.
-- Rebuilt against Red Hat Linux 7.3.
-- Added the %%{?_smp_mflags} expansion.
-
-* Tue Apr 30 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre2.
-- Fixed the libGLcore.so.1 and lirc dependencies.
-- Build with gcc 2.96 instead of gcc3.
-
-* Fri Apr 26 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to 0.90pre1, fully GPL at last! Here come the binary packages :-)
-
-* Fri Feb  1 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Update to today's current version.
-- Added 3 skins + removed workaround since skin archives are fixed.
-
-* Wed Jan  2 2002 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- %doc cleanup and update to today's build.
-- Modified for the new CONFDIR stuff.
-
-* Wed Dec 12 2001 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt;
-- Initial RPM release.
-

Modified: trunk/rpms/mplayer/mplayer.spec
===================================================================
--- trunk/rpms/mplayer/mplayer.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/mplayer/mplayer.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,10 +1,16 @@
 # $Id$
 # Authority: matthias
 
-%define _without_x264 1
+# Overridable kernel version, needed for the DVB includes
+%{!?kernel: %define kernel %(uname -r)}
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+%{?_with_modxorg: %define _without_xvmc 1}
+
 %{?fc1:%define _without_alsa 1}
 %{?fc1:%define _without_theora 1}
 %{?fc1:%define _without_xvmc 1}
@@ -45,47 +51,48 @@
 %{?yd3:%define _without_theora 1}
 
 # Is this a daily build? If so, put the date like &quot;20020808&quot; otherwise put 0
-#define date      20041025
-%define rcver     pre7
+%define date      20060113
+#define rcver     pre7
 
 Summary: MPlayer, the Movie Player for Linux
 Name: mplayer
 Version: 1.0
-Release: 0.20%{?rcver:.%{rcver}}%{?date:.%{date}}
+Release: 0.24%{?rcver:.%{rcver}}%{?date:.%{date}}
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://mplayerhq.hu/">http://mplayerhq.hu/</A>
 %if %{?date:1}0
+# cvs -z3 -d:pserver:<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">anonymous at mplayerhq.hu</A>:/cvsroot/mplayer co -P
+# cvs -z3 -d:pserver:<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">anonymous at mplayerhq.hu</A>:/cvsroot/ffmpeg co -P
+# cp -a mplayer MPlayer-%{date}
+# cp -a ffmpeg/{libavcodec,libavformat,libavutil} MPlayer-%{date}/
+# find MPlayer-%{date} -name CVS -o -name .cvsignore | xargs rm -rf
+# tar cjvf MPlayer-%{date}.tar.bz2 MPlayer-%{date}/
 Source0: <A HREF="http://www.mplayerhq.hu/MPlayer/cvs/MPlayer-%{date">http://www.mplayerhq.hu/MPlayer/cvs/MPlayer-%{date</A>}.tar.bz2
 %else
 Source0: <A HREF="http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{version">http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{version</A>}%{?rcver}.tar.bz2
 %endif
-Source2: <A HREF="http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.4.tar.bz2">http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.4.tar.bz2</A>
+Source1: <A HREF="http://www.live555.com/liveMedia/public/live.2006.01.05.tar.gz">http://www.live555.com/liveMedia/public/live.2006.01.05.tar.gz</A>
+Source2: <A HREF="http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.5.tar.bz2">http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.5.tar.bz2</A>
 # Only for reference, required on YDL4 at least
 Source10: uio.h-ppc.patch
 Patch0: MPlayer-0.90pre9-runtimemsg.patch
 Patch1: MPlayer-0.90-playlist.patch
 Patch2: MPlayer-0.90pre10-redhat.patch
 Patch10: MPlayer-1.0pre6a-fribidi.patch
-Patch11: MPlayer-1.0pre6a-udev.patch
-Patch12: MPlayer-1.0pre7-gcc4.patch
-Patch13: MPlayer-1.0pre7-gcc_detection.patch
-Patch14: MPlayer-1.0pre7-nostrip.patch
-Patch15: MPlayer-1.0pre7-x86_64.patch
-Patch16: MPlayer-1.0pre7-ad_pcm_fix.patch
-Patch17: MPlayer-1.0pre7-gcc4-altivec.patch
-Patch18: MPlayer-1.0pre7-x264.patch
+Patch11: MPlayer-1.0pre8-udev.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: mplayer-fonts
-BuildRequires: XFree86-devel, gtk+-devel, SDL-devel
+BuildRequires: gtk2-devel, SDL-devel
 BuildRequires: libpng-devel, libjpeg-devel, libungif-devel
 BuildRequires: lame-devel, libmad-devel, flac-devel
 BuildRequires: libmatroska-devel
-BuildRequires: libmad-devel
 BuildRequires: ImageMagick
+%{?_with_samba:BuildRequires: samba-common}
+%{?_with_dvdread:BuildRequires: libdvdread-devel}
+%{!?_without_dvb:BuildRequires: kernel-devel = %{kernel}}
 %{!?_without_dv:BuildRequires: libdv-devel}
-%{?_with_samba:BuildRequires: samba-common}
-%{?_with_dvb:BuildRequires: kernel-source}
+%{!?_without_ladspa:BuildRequires: ladspa-devel}
 %{!?_without_alsa:BuildRequires: alsa-lib-devel}
 %{!?_without_fribidi:BuildRequires: fribidi-devel}
 %{!?_without_aalib:BuildRequires: aalib-devel}
@@ -95,14 +102,16 @@
 %{!?_without_xvid:BuildRequires: xvidcore-devel}
 %{!?_without_x264:BuildRequires: x264-devel}
 %{!?_without_esd:BuildRequires: esound-devel}
-%{!?_without_dvdread:BuildRequires: libdvdread-devel}
 %{!?_without_lzo:BuildRequires: lzo-devel}
 %{!?_without_fame:BuildRequires: libfame-devel}
 %{!?_without_caca:BuildRequires: libcaca-devel}
 %{!?_without_theora:BuildRequires: libtheora-devel}
 %{!?_without_xvmc:BuildRequires: libXvMCW-devel}
 %{!?_without_dts:BuildRequires: libdca-devel}
-#{!?_without_dvdnav:BuildRequires: libdvdnav-devel}
+%{!?_without_faac:BuildRequires: faac-devel}
+%{!?_without_mpc:BuildRequires: libmpcdec-devel}
+%{!?_without_vstream:BuildRequires: vstream-client-devel}
+%{?_with_modxorg:BuildRequires: libXv-devel, mesa-libGL-devel, libXvMC-devel}
 
 %description
 MPlayer is a multimedia player. It plays most video formats as well as DVDs.
@@ -112,9 +121,9 @@
 On x86, additional Win32 binary codecs should be added to %{_libdir}/win32/.
 
 Available rpmbuild rebuild options :
---with : samba dvb
---without : aalib lirc cdparanoia arts xvid esd dvdread lzo fame caca
-            theora osdmenu gcccheck fribidi xvmc
+--with : samba dvdread
+--without : aalib lirc cdparanoia arts xvid esd lzo fame caca dvb vstream
+            theora osdmenu gcccheck fribidi xvmc x264 faac mpc live ladspa
 
 
 %package -n mencoder
@@ -145,23 +154,19 @@
 
 %prep
 %if %{?date:1}0
-%setup -n MPlayer-%{date}
+%setup -n MPlayer-%{date} -a 1
 %else
-%setup -n MPlayer-%{version}%{?rcver}
+%setup -n MPlayer-%{version}%{?rcver} -a 1
 %endif
 %patch0 -p1 -b .runtimemsg
 %patch1 -p1 -b .playlist
 %patch2 -p0 -b .redhat
 %patch10 -p1 -b .fribidi
 %patch11 -p1 -b .udev
-%patch12 -p1 -b .gcc4
-%patch13 -p0 -b .gcc_detection
-%patch14 -p1 -b .nostrip
-%patch15 -p1 -b .x86_64
-%patch16 -p0 -b .ad_pcm_fix
-%patch17 -p0 -b .gcc4-altivec
-%patch18 -p1 -b .x264
 
+# Clean up the tarball contents (useful for the included docs)
+find . -name &quot;CVS&quot; | xargs %{__rm} -rf
+
 # Overwrite some of the details of the provided system menu entry
 %{__perl} -pi -e 's|^Exec=gmplayer$|Exec=gmplayer %f|g;
                   s|^Categories=.*|Categories=Application;AudioVideo;|g' \
@@ -170,13 +175,24 @@
 
 
 %build
-find . -name &quot;CVS&quot; | xargs %{__rm} -rf
+# Build statically linked live555 libraries
+%if 0%{!?_without_live:1}
+pushd live
+    # Force the use of our CFLAGS
+    %{__perl} -pi -e 's|-O2|%{optflags}|g' config.linux
+    # Configure and build
+    ./genMakefiles linux &amp;&amp; %{__make}
+popd
+%endif
+
 export CFLAGS=&quot;%{optflags}&quot;
 echo | ./configure \
     --prefix=%{_prefix} \
+    --bindir=%{_bindir} \
     --datadir=%{_datadir}/mplayer \
+    --mandir=%{_mandir} \
     --confdir=%{_sysconfdir}/mplayer \
-    --mandir=%{_mandir} \
+    --libdir=%{_libdir} \
     --enable-gui \
     --enable-largefiles \
     --enable-dynamic-plugins \
@@ -189,7 +205,6 @@
     --with-reallibdir=%{_libdir}/real \
 %endif
     --enable-joystick \
-    --disable-mpdvdkit \
     %{?_without_gcccheck:--disable-gcc-checking} \
     %{?_without_alsa:--disable-alsa} \
     %{?_without_aalib:--disable-aa} \
@@ -199,13 +214,12 @@
     %{?_without_libdv:--disable-libdv} \
     %{?_without_arts:--disable-arts} \
     %{?_without_esd:--disable-esd} \
-    %{?_without_dvdread:--disable-dvdread} \
+    %{!?_with_dvdread:--disable-dvdread} \
     %{?_without_fame:--disable-libfame} \
     %{?_without_caca:--disable-caca} \
     %{?_without_theora:--disable-theora} \
-    %{?_without_x264:--disable-x264} \
-    %{?_with_dvb:--enable-dvbhead} \
-    %{?_with_dvb:--with-dvbincdir=/lib/modules/`uname -r`/build/include} \
+    %{!?_without_dvb:--enable-dvbhead} \
+    %{!?_without_dvb:--with-dvbincdir=/lib/modules/%{kernel}/build/include} \
     --disable-fastmemcpy \
     --enable-i18n \
     --language=all \
@@ -213,21 +227,21 @@
     %{?_with_samba:--enable-smb} \
     %{!?_without_fribidi:--enable-fribidi} \
     %{!?_without_xvmc:--enable-xvmc --with-xvmclib=XvMCW} \
+    %{!?_without_live:--with-livelibdir=`pwd`/live} \
     --enable-debug
 
-    # &quot;dvdnav disabled, it does not work&quot; (1.0pre5, still the same)
-    #{!?_without_dvdnav:--enable-dvdnav} \
-
 %{__make} %{?_smp_mflags}
 
 
 %install
 %{__rm} -rf %{buildroot}
 # The libdir override is required for libpostproc when _libdir is /usr/lib64
-%{__make} install DESTDIR=%{buildroot} \
+%{__make} install \
+    STRIPBINARIES=&quot;no&quot; \
+    DESTDIR=%{buildroot} \
     libdir=%{buildroot}%{_libdir}
 
-### The default Skin
+# The default Skin
 %{__mkdir_p} %{buildroot}%{_datadir}/mplayer/Skin/
 %{__tar} -xjf %{SOURCE2} -C %{buildroot}%{_datadir}/mplayer/Skin/
 %{__mv} -f %{buildroot}%{_datadir}/mplayer/Skin/* %{buildroot}%{_datadir}/mplayer/Skin/default
@@ -241,6 +255,8 @@
 # Create empty Win32 binary codec directory
 %ifarch %{ix86}
 %{__mkdir_p} %{buildroot}%{_libdir}/win32
+%else
+%{__mkdir_p} %{buildroot}%{_libdir}/real
 %endif
 
 
@@ -266,11 +282,11 @@
 %{_bindir}/mplayer
 %ifarch %{ix86}
 %dir %{_libdir}/win32/
+%else
+%dir %{_libdir}/real/
 %endif
-%ifarch %{ix86} ppc
 %{_libdir}/libdha.so*
 %{_libdir}/mplayer/
-%endif
 %{!?_without_freedesktop:%{_datadir}/applications/mplayer.desktop}
 %{_datadir}/mplayer/
 %{_datadir}/pixmaps/mplayer-desktop.xpm
@@ -303,6 +319,36 @@
 
 
 %changelog
+* Mon Dec 19 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.24.20060113
+- Update to a Friday the 13th snapshot! :-)
+- Update live555 library to 2006.01.05.
+- Remove XFree86-devel build requirement, gtk2-devel takes care of the
+  required X stuff.
+- Remove no longer needed nostrip patch, use STRIPBINARIES now.
+- Disable &quot;xvmc&quot; (the old wrapper) on FC5, and use the xorg libXvMC instead.
+
+* Mon Dec 19 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.23.20051211
+- Enable vstream support (TiVo vserver stream).
+
+* Tue Dec 13 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.22.20051211
+- Force _libdir since libdha and vidix modules are now built on x86_64.
+- Include empty _libdir/real/ for non-x86 archs.
+
+* Sun Dec 11 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.21.20051211
+- Update to CVS code.
+- Update Blue skin to 1.5.
+- Update udev patch (v4l detection no longer uses test on /dev files, but lirc
+  still does).
+- Remove all obsolete patches.
+- Change gtk+ build requirement to gtk2.
+- Enable x264 again.
+- Add faac, ladspa and musepack (mpc) support (enabled).
+- Add live555 support, include latest snapshot : live.2005.12.09.
+- Enable dvb by default, and make overriding the kernel version possible.
+- Switch from external libdvdread to mpdvdkit, since the streaming part fails
+  to build otherwise.
+- Remove disabled dvdnav support, as it's no longer available.
+
 * Sun Dec 11 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.20.pre7
 - Enable DTS (libdca).
 - Try to enable x264, fix configure check (libpthread), but compile fails.

Modified: trunk/rpms/quake3/quake3-1.33-nostrip.patch
===================================================================
--- trunk/rpms/quake3/quake3-1.33-nostrip.patch	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/quake3/quake3-1.33-nostrip.patch	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,16 +1,17 @@
-diff -Naupr quake3-1.33_SVN338.orig/code/unix/Makefile quake3-1.33_SVN338/code/unix/Makefile
---- quake3-1.33_SVN338.orig/code/unix/Makefile	2005-11-13 20:30:24.000000000 +0100
-+++ quake3-1.33_SVN338/code/unix/Makefile	2005-11-13 20:30:04.000000000 +0100
-@@ -1544,22 +1544,22 @@ $(B)/missionpack/qcommon/%.asm: $(CMDIR)
+diff -Naupr quake3-1.33_SVN470.orig/code/unix/Makefile quake3-1.33_SVN470/code/unix/Makefile
+--- quake3-1.33_SVN470.orig/code/unix/Makefile	2006-01-06 22:56:50.000000000 +0100
++++ quake3-1.33_SVN470/code/unix/Makefile	2006-01-13 13:49:47.000000000 +0100
+@@ -1619,24 +1619,24 @@ $(B)/missionpack/qcommon/%.asm: $(CMDIR)
  
  copyfiles: build_release
  	@if [ ! -d $(COPYDIR)/baseq3 ]; then echo &quot;You need to set COPYDIR to where you installed Quake III!&quot;; false; fi
--	$(INSTALL) -s -m 0755 $(BR)/$(PLATFORM)quake3$(BINEXT) $(COPYDIR)/quake3
--	#$(INSTALL) -s -m 0755 $(BR)/$(PLATFORM)quake3-smp$(BINEXT) $(COPYDIR)/quake3-smp
--	$(INSTALL) -s -m 0755 $(BR)/$(PLATFORM)q3ded$(BINEXT) $(COPYDIR)/q3ded
-+	$(INSTALL) -m 0755 $(BR)/$(PLATFORM)quake3$(BINEXT) $(COPYDIR)/quake3
-+	#$(INSTALL) -m 0755 $(BR)/$(PLATFORM)quake3-smp$(BINEXT) $(COPYDIR)/quake3-smp
-+	$(INSTALL) -m 0755 $(BR)/$(PLATFORM)q3ded$(BINEXT) $(COPYDIR)/q3ded
+-	$(INSTALL) -s -m 0755 $(BR)/ioquake3.$(ARCH)$(BINEXT) $(COPYDIR)/ioquake3.$(ARCH)$(BINEXT)
++	$(INSTALL) -m 0755 $(BR)/ioquake3.$(ARCH)$(BINEXT) $(COPYDIR)/ioquake3.$(ARCH)$(BINEXT)
+ 
+ 	@if [ -f $(BR)/ioq3ded.$(ARCH)$(BINEXT) ]; then \
+-		$(INSTALL) -s -m 0755 $(BR)/ioq3ded.$(ARCH)$(BINEXT) $(COPYDIR)/ioq3ded.$(ARCH)$(BINEXT); \
++		$(INSTALL) -m 0755 $(BR)/ioq3ded.$(ARCH)$(BINEXT) $(COPYDIR)/ioq3ded.$(ARCH)$(BINEXT); \
+ 	fi 
  	-$(MKDIR) -p -m 0755 $(COPYDIR)/baseq3
 -	$(INSTALL) -s -m 0755 $(BR)/baseq3/cgame$(ARCH).$(SHLIBEXT) \
 +	$(INSTALL) -m 0755 $(BR)/baseq3/cgame$(ARCH).$(SHLIBEXT) \

Modified: trunk/rpms/quake3/quake3.spec
===================================================================
--- trunk/rpms/quake3/quake3.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/quake3/quake3.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,22 +1,30 @@
 # $Id$
 # Authority: matthias
 
-%define svn 338
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
+%define svn 470
+
 Summary: Quake 3 Arena tournament 3D shooter game
 Name: quake3
 Version: 1.33
-Release: 0.1%{?svn:.svn%{svn}}
+Release: 0.2%{?svn:.svn%{svn}}
 Group: Amusements/Games
 License: GPL
 URL: <A HREF="http://www.icculus.org/quake3/">http://www.icculus.org/quake3/</A>
 # SVN checkout, then &quot;make dist&quot;
+# svn co <A HREF="svn://svn.icculus.org/quake3/trunk">svn://svn.icculus.org/quake3/trunk</A> quake3
 Source0: %{name}-%{version}%{?svn:_SVN%{svn}}.tar.bz2
 Source1: quake3.png
 Patch0: quake3-1.33-nostrip.patch
 Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: SDL-devel, xorg-x11-devel, xorg-x11-devel
-BuildRequires: nasm
+BuildRequires: SDL-devel, openal-devel, nasm
+%{?_with_modxorg:BuildRequires: libXt-devel, mesa-libGL-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 
 %description
 This is Quake 3 Arena.
@@ -32,7 +40,7 @@
 
 %build
 # Note that using %{optflags} instead of the flags in the Makefiles screw up
-# the binary badly!
+# the binary badly! So... don't :-(
 %{__make} %{?_smp_mflags}
 
 
@@ -41,7 +49,7 @@
 %{__mkdir_p} %{buildroot}%{_prefix}/games/quake3/baseq3/
 %{__make} copyfiles COPYDIR=&quot;%{buildroot}%{_prefix}/games/quake3&quot;
 
-%{__install} -D -m 0644 %{SOURCE1} \
+%{__install} -D -p -m 0644 %{SOURCE1} \
     %{buildroot}%{_datadir}/pixmaps/quake3.png
 
 # Desktop file
@@ -77,7 +85,7 @@
 
 %files
 %defattr(-, root, root, 0755)
-%doc ChangeLog COPYING.txt id-readme.txt i_o-q3-readme
+%doc BUGS ChangeLog COPYING.txt id-readme.txt README TODO
 %attr(0755, root, root) %{_bindir}/quake3
 %{_prefix}/games/quake3/
 %{_datadir}/applications/quake3.desktop
@@ -85,6 +93,13 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.33-0.2.svn470
+- Update to today's svn sode (rev. 470).
+- Add modular xorg build conditional.
+- Revisit nostrip patch for the new code.
+- Add (new?) openal-devel build requirement.
+- Update %%doc files.
+
 * Sun Nov 13 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.33-0.1.svn338
 - Update to GPL'ed 1.33 and spec file cleanup.
 

Modified: trunk/rpms/swfdec/swfdec.spec
===================================================================
--- trunk/rpms/swfdec/swfdec.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/swfdec/swfdec.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -2,27 +2,35 @@
 # Authority: dag
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist: %define _without_gstreamer 1}
+%{?fc5:   %define _without_gstreamer 1}
+%{!?dist: %define _with_modxorg 1}
+%{?fc5:   %define _with_modxorg 1}
 %{!?dist: %define gimp_plugin 1}
+%{?fc5:   %define gimp_plugin 1}
 %{?el4:   %define gimp_plugin 1}
 %{?fc4:   %define gimp_plugin 1}
 %{?fc3:   %define gimp_plugin 1}
 %{?fc2:   %define gimp_plugin 1}
 %{?yd4:   %define gimp_plugin 1}
-%{?fc1: %define _without_mozilla 1}
-%{?el3: %define _without_mozilla 1}
-%{?el3: %define _without_gstreamer 1}
-%{?rh9: %define _without_mozilla 1}
-%{?rh9: %define _without_gstreamer 1}
-%{?rh7: %define _without_mozilla 1}
-%{?rh7: %define _without_gstreamer 1}
-%{?el2: %define _without_mozilla 1}
-%{?el2: %define _without_gstreamer 1}
+%{!?dist: %define _without_mozilla 1}
+%{?fc5:   %define _without_mozilla 1}
+%{?fc1:   %define _without_mozilla 1}
+%{?el3:   %define _without_mozilla 1}
+%{?el3:   %define _without_gstreamer 1}
+%{?rh9:   %define _without_mozilla 1}
+%{?rh9:   %define _without_gstreamer 1}
+%{?rh7:   %define _without_mozilla 1}
+%{?rh7:   %define _without_gstreamer 1}
+%{?el2:   %define _without_mozilla 1}
+%{?el2:   %define _without_gstreamer 1}
 
 Summary: Flash animations rendering library
 Name: swfdec
 Version: 0.3.5
-Release: 1
+Release: 2
 License: LGPL
 Group: System Environment/Libraries
 URL: <A HREF="http://swfdec.sourceforge.net/">http://swfdec.sourceforge.net/</A>
@@ -34,6 +42,7 @@
 %{?gimp_plugin:BuildRequires: gimp-devel &gt;= 2.0}
 %{!?_without_mozilla:BuildRequires: mozilla-devel}
 %{!?_without_gstreamer:BuildRequires: gstreamer-plugins-devel}
+%{?_with_modxorg:BuildRequires: libXt-devel}
 
 %description
 Libswfdec is a library for rendering Flash animations. Currently it
@@ -128,6 +137,11 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.5-2
+- Disable gstreamer support on FC5 (as it's for 0.8).
+- Disable mozilla plugin on FC5 (if someone wants to look into it...).
+- Add modular xorg build conditional.
+
 * Wed May 25 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.5-1
 - Update to 0.3.5.
 

Modified: trunk/rpms/transcode/transcode.spec
===================================================================
--- trunk/rpms/transcode/transcode.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/transcode/transcode.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -5,7 +5,11 @@
 #define prever rc1
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 %{?fc1:%define _without_theora 1}
 
 %{?el3:%define _without_theora 1}
@@ -24,7 +28,7 @@
 Summary: Linux video stream processing utility
 Name: transcode
 Version: 1.0.2
-Release: 2%{?prever:.%{prever}}
+Release: 3%{?prever:.%{prever}}
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://www.transcoding.org/">http://www.transcoding.org/</A>
@@ -36,6 +40,7 @@
 BuildRequires: mpeg2dec-devel, ffmpeg-devel
 # Seems like ImageMagick-devel should require this! (FC2 and higher)
 BuildRequires: libexif-devel
+%{?_with_modxorg:BuildRequires: libXv-devel}
 %{!?_without_postproc:BuildRequires: ffmpeg-libpostproc-devel}
 %{!?_without_lame:BuildRequires: lame-devel &gt;= 3.89}
 %{!?_without_theora:BuildRequires: libtheora-devel}
@@ -94,16 +99,12 @@
     %{!?_without_libfame:--enable-libfame} \
     %{!?_without_magick:--enable-imagemagick}
 %{__make} %{?_smp_mflags}
-    pkgdir=&quot;%{_libdir}/transcode&quot; \
-    MOD_PATH=&quot;%{_libdir}/transcode&quot;
 
 
 %install
 %{__rm} -rf %{buildroot} _docs
 %makeinstall \
     docsdir=&quot;../_docs/&quot;
-    pkgdir=&quot;%{buildroot}%{_libdir}/transcode&quot; \
-    MOD_PATH=&quot;%{buildroot}%{_libdir}/transcode&quot;
 
 
 %clean
@@ -127,6 +128,10 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.2-3
+- Add modular xorg build conditional.
+- No longer override pkgdir and MOD_PATH, it's not needed anymore.
+
 * Fri Dec  9 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.2-2
 - Rebuild against mjpegtools 1.8.0.
 

Modified: trunk/rpms/vcdimager/vcdimager.spec
===================================================================
--- trunk/rpms/vcdimager/vcdimager.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/vcdimager/vcdimager.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -4,17 +4,15 @@
 Summary: VideoCD (pre-)mastering and ripping tool
 Name: vcdimager
 Version: 0.7.23
-Release: 2
+Release: 3
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://www.vcdimager.org/">http://www.vcdimager.org/</A>
-
 Source: <A HREF="ftp://ftp.gnu.org/pub/gnu/vcdimager/vcdimager-%{version">ftp://ftp.gnu.org/pub/gnu/vcdimager/vcdimager-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+BuildRequires: libcdio-devel &gt;= 0.72, libxml2-devel &gt;= 2.3.8
+BuildRequires: zlib-devel, pkgconfig &gt;= 0.9, popt, gcc-c++
 
-BuildRequires: libxml2-devel &gt;= 2.3.8, zlib-devel, pkgconfig &gt;= 0.9, popt, gcc-c++
-BuildRequires: libcdio-devel &gt;= 0.72
-
 %description
 VCDImager allows you to create VideoCD BIN/CUE CD images from mpeg
 files which can be burned with cdrdao or any other program capable of
@@ -61,13 +59,14 @@
 
 %post
 for infofile in vcdxrip.info vcdimager.info vcd-info.info; do
-    /sbin/install-info %{_infodir}/${infofile} %{_infodir}/dir || :
+    /sbin/install-info %{_infodir}/${infofile} %{_infodir}/dir 2&gt;/dev/null || :
 done
 
 %preun
 if [ $1 -eq 0 ]; then
     for infofile in vcdxrip.info vcdimager.info vcd-info.info; do
-        /sbin/install-info --delete %{_infodir}/${infofile} %{_infodir}/dir || :
+        /sbin/install-info --delete %{_infodir}/${infofile} %{_infodir}/dir \
+            2&gt;/dev/null || :
     done
 fi
 
@@ -93,6 +92,9 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.7.23-3
+- Silence install-info scriplets.
+
 * Sat Jul 30 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.7.23-2
 - Rebuild against new libcdio.
 

Modified: trunk/rpms/videolan-client/videolan-client.spec
===================================================================
--- trunk/rpms/videolan-client/videolan-client.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/videolan-client/videolan-client.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -3,7 +3,11 @@
 # Upstream: &lt;vlc-devel$videolan,org&gt;
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 %{?el4:%define _without_wxwidgets 1}
 
 %{?fc3:%define _without_wxwidgets 1}
@@ -61,17 +65,20 @@
 Summary: The VideoLAN client, also a very good standalone video player
 Name: videolan-client
 Version: 0.8.4a
-Release: 1
+Release: 2
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://www.videolan.org/">http://www.videolan.org/</A>
 Source0: <A HREF="http://downloads.videolan.org/pub/videolan/vlc/%{version">http://downloads.videolan.org/pub/videolan/vlc/%{version</A>}/vlc-%{version}.tar.bz2
 Source1: <A HREF="http://downloads.videolan.org/pub/videolan/vlc/%{version">http://downloads.videolan.org/pub/videolan/vlc/%{version</A>}/contrib/ffmpeg-%{ffmpeg_date}.tar.bz2
 Source2: <A HREF="http://www.live555.com/liveMedia/public/live.2006.01.05.tar.gz">http://www.live555.com/liveMedia/public/live.2006.01.05.tar.gz</A>
+Patch0: vlc-0.8.4a-extraqualif.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: gcc-c++, XFree86-devel, libpng-devel, libxml2-devel
+BuildRequires: gcc-c++, libpng-devel, libxml2-devel
 BuildRequires: libgcrypt-devel, gnutls-devel
 %{!?_without_freedesktop:BuildRequires: desktop-file-utils}
+#{?_with_modxorg:BuildRequires: libXt-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 %{!?_without_dvdread:BuildRequires: libdvdread-devel}
 %{!?_without_dvdnav:BuildRequires: libdvdnav-devel}
 %{!?_without_smb:BuildRequires: samba-common}
@@ -145,6 +152,7 @@
 
 %prep
 %setup -n %{real_name}-%{version} -a 1 -a 2
+%patch0 -p1 -b .extraqualif
 # Fix PLUGIN_PATH path for lib64
 %{__perl} -pi -e 's|/lib/vlc|/%{_lib}/vlc|g' vlc-config.in.in configure*
 
@@ -177,7 +185,6 @@
 %endif
 
 %configure \
-    --x-libraries=&quot;%{_prefix}/X11R6/%{_lib}&quot; \
     --enable-release \
     %{!?_without_dvdread:--enable-dvdread} \
     %{?_without_dvdnav:--disable-dvdnav} \
@@ -292,6 +299,10 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.4a-2
+- Add modular xorg build conditional.
+- Include extraqualif patch to fix FC5 / gcc 4.1 errors.
+
 * Sun Jan  8 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.4a-1
 - Update to 0.8.4a.
 - Enable live555.

Added: trunk/rpms/videolan-client/vlc-0.8.4a-extraqualif.patch
===================================================================
--- trunk/rpms/videolan-client/vlc-0.8.4a-extraqualif.patch	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/videolan-client/vlc-0.8.4a-extraqualif.patch	2006-01-16 15:05:06 UTC (rev 3969)
@@ -0,0 +1,28 @@
+diff -Naupr vlc-0.8.4a.orig/modules/gui/skins2/utils/var_tree.hpp vlc-0.8.4a/modules/gui/skins2/utils/var_tree.hpp
+--- vlc-0.8.4a.orig/modules/gui/skins2/utils/var_tree.hpp	2005-12-11 22:36:20.000000000 +0100
++++ vlc-0.8.4a/modules/gui/skins2/utils/var_tree.hpp	2006-01-13 16:26:56.000000000 +0100
+@@ -88,7 +88,7 @@ class VarTree: public Variable, public S
+ 
+         /// Parent node
+         VarTree *parent() { return m_pParent; }
+-        void VarTree::checkParents( VarTree *pParent );
++        void checkParents( VarTree *pParent );
+ 
+         Iterator uncle();
+ 
+diff -Naupr vlc-0.8.4a.orig/modules/gui/skins2/x11/x11_graphics.hpp vlc-0.8.4a/modules/gui/skins2/x11/x11_graphics.hpp
+--- vlc-0.8.4a.orig/modules/gui/skins2/x11/x11_graphics.hpp	2005-12-11 22:36:20.000000000 +0100
++++ vlc-0.8.4a/modules/gui/skins2/x11/x11_graphics.hpp	2006-01-13 16:35:05.000000000 +0100
+@@ -98,10 +98,10 @@ class X11Graphics: public OSGraphics
+         GC m_gc;
+ 
+         /// Add an horizontal segment in a region
+-        void X11Graphics::addHSegmentInRegion( Region &amp;rMask, int xStart,
++        void addHSegmentInRegion( Region &amp;rMask, int xStart,
+                                                int xEnd, int y );
+         /// Add a vertical segment in a region
+-        void X11Graphics::addVSegmentInRegion( Region &amp;rMask, int yStart,
++        void addVSegmentInRegion( Region &amp;rMask, int yStart,
+                                                int yEnd, int x );
+ };
+ 

Modified: trunk/rpms/x264/x264.spec
===================================================================
--- trunk/rpms/x264/x264.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/x264/x264.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,6 +1,12 @@
 # $Id$
 # Authority: matthias
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 %{?fc1:%define _without_xorg 1}
 %{?el3:%define _without_xorg 1}
 %{?rh9:%define _without_xorg 1}
@@ -12,7 +18,7 @@
 Summary: Library for encoding and decoding H264/AVC video streams
 Name: x264
 Version: 0.0.396
-Release: 1
+Release: 2
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://developers.videolan.org/x264.html">http://developers.videolan.org/x264.html</A>
@@ -21,8 +27,12 @@
 Source: %{name}-%{version}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: nasm, yasm
+%if 0%{?_with_modxorg:1}
+BuildRequires: libXt-devel
+%else
 %{?_without_xorg:BuildRequires: XFree86-devel}
 %{!?_without_xorg:BuildRequires: xorg-x11-devel}
+%endif
 # version.sh requires svnversion
 BuildRequires: subversion
 
@@ -90,6 +100,9 @@
 
 
 %changelog
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.0.396-2
+- Enable modular xorg conditional build.
+
 * Mon Jan  9 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.0.396-1
 - Update to svn 396.
 

Modified: trunk/rpms/xine/xine.spec
===================================================================
--- trunk/rpms/xine/xine.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/xine/xine.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -2,7 +2,11 @@
 # Authority: matthias
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 %{?rh7:%define _without_freedesktop 1}
 %{?el2:%define _without_freedesktop 1}
 
@@ -11,7 +15,7 @@
 Summary: Free multimedia player
 Name: xine
 Version: 0.99.4
-Release: 1
+Release: 2
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://xinehq.de/">http://xinehq.de/</A>
@@ -24,10 +28,12 @@
 Patch2: xine-ui-0.99.3-uifixups.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: xine-lib &gt;= 1.0.0
-BuildRequires: gcc-c++, XFree86-devel, libpng-devel, xine-lib-devel &gt;= 1.0.0
+BuildRequires: gcc-c++, libpng-devel, xine-lib-devel &gt;= 1.0.0
 BuildRequires: curl-devel, libidn-devel, libtermcap-devel, readline-devel
 BuildRequires: pkgconfig, /usr/bin/find
 %{!?_without_freedesktop:BuildRequires: desktop-file-utils}
+#{?_with_modxorg:BuildRequires: libXt-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 %{!?_without_aalib:BuildRequires: aalib-devel}
 %{!?_without_caca:BuildRequires: libcaca-devel}
 %{!?_without_lirc:BuildRequires: lirc-devel}
@@ -151,6 +157,9 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.99.4-2
+- Add modular xorg build conditional.
+
 * Sat Jul 30 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.99.4-1
 - Update to 0.99.4, which includes gcc4 fixes.
 

Modified: trunk/rpms/xine-lib/xine-lib.spec
===================================================================
--- trunk/rpms/xine-lib/xine-lib.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/xine-lib/xine-lib.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -3,7 +3,11 @@
 # Upstream: &lt;xine-user$lists,sf,net&gt;
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 %{?fc1:%define _without_alsa 1}
 %{?fc1:%define _without_theora 1}
 %{?fc1:%define _without_xvmc 1}
@@ -46,10 +50,12 @@
 Source: <A HREF="http://dl.sf.net/xine/xine-lib-%{version">http://dl.sf.net/xine/xine-lib-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: libdvdcss
-BuildRequires: gcc-c++, pkgconfig, XFree86-devel, zlib-devel
+BuildRequires: gcc-c++, pkgconfig, zlib-devel
 BuildRequires: libvorbis-devel, SDL-devel
 # BUG : libmng-devel should apparently require libjpeg-devel for includes
 BuildRequires: libpng-devel, libmng-devel, libjpeg-devel
+%{?_with_modxorg:BuildRequires: libXvMC-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 %{?_with_rte:BuildRequires: rte-devel}
 %{?_with_extdvdnav:BuildRequires: libdvdnav-devel &gt;= 0.1.4}
 %{?_with_extffmpeg:BuildRequires: ffmpeg-devel}
@@ -91,7 +97,9 @@
 %package devel
 Summary: Development files for the xine library
 Group: Development/Libraries
-Requires: %{name} = %{version}, pkgconfig, zlib-devel, XFree86-devel
+Requires: %{name} = %{version}, pkgconfig, zlib-devel
+%{?_with_modxorg:Requires: libXvMC-devel}
+%{!?_with_modxorg:Requires: XFree86-devel}
 Obsoletes: xine-libs-devel &lt;= 1.0.0
 
 %description devel

Modified: trunk/rpms/xmame/xmame.spec
===================================================================
--- trunk/rpms/xmame/xmame.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/xmame/xmame.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -2,7 +2,11 @@
 # Authority: matthias
 
 %{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
 
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 %{?el4:%define _without_glide3 1}
 %{?fc1:%define _without_alsa 1}
 %{?el3:%define _without_alsa 1}
@@ -24,7 +28,7 @@
 Summary: The X Multi Arcade Machine Emulator
 Name: xmame
 Version: 0.102
-Release: 1%{?rcver:.%{rcver}}
+Release: 2%{?rcver:.%{rcver}}
 Source0: <A HREF="http://x.mame.net/download/xmame-%{version">http://x.mame.net/download/xmame-%{version</A>}.tar.bz2
 # <A HREF="http://cheat.retrogames.com/">http://cheat.retrogames.com/</A> 0.81 - 21/04/2004
 Source20: <A HREF="http://cheat.retrogames.com/cheat.zip">http://cheat.retrogames.com/cheat.zip</A>
@@ -43,8 +47,11 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Obsoletes: %{name}-x11 &lt;= 0.87
 Obsoletes: %{name}-xgl &lt;= 0.87
-BuildRequires: unzip, XFree86-devel, zlib-devel, expat-devel
-%{?opengl:BuildRequires: Mesa-devel, libjpeg-devel}
+BuildRequires: unzip, zlib-devel, expat-devel
+%{?_with_modxorg:BuildRequires: libXt-devel, libXv-devel, libXext-devel}
+%{?_with_modxorg:%{?opengl:BuildRequires: mesa-libGLU-devel, libjpeg-devel}}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
+%{!?_with_modxorg:%{?opengl:BuildRequires: Mesa-devel, libjpeg-devel}}
 %{?glide3:BuildRequires: Glide3-devel}
 %{!?_without_alsa:BuildRequires: alsa-lib-devel}
 %{!?_without_esound:BuildRequires: esound-devel}
@@ -260,6 +267,9 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.102-2
+- Add modular xorg build conditional.
+
 * Sun Nov 27 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.102-1
 - Update to 0.102.
 

Modified: trunk/rpms/xmms-mp3/xmms-1.2.10-gcc4.patch
===================================================================
--- trunk/rpms/xmms-mp3/xmms-1.2.10-gcc4.patch	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/xmms-mp3/xmms-1.2.10-gcc4.patch	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,6 +1,6 @@
---- xmms-1.2.10.orig/General/ir/ir.h	2001-03-06 00:17:44.000000000 +1100
-+++ xmms-1.2.10/General/ir/ir.h	2005-08-07 18:07:23.000000000 +1000
-@@ -49,8 +49,6 @@ typedef struct
+--- xmms-1.2.10/General/ir/ir.h.orig	2001-03-05 23:17:44.000000000 +1000
++++ xmms-1.2.10/General/ir/ir.h	2005-03-24 20:48:31.000000000 +1000
+@@ -49,8 +49,6 @@
  }
  irConfig;
  
@@ -9,15 +9,16 @@
  extern irConfig ircfg;
  extern gboolean irconf_is_going;
  
-
---- xmms-1.2.10.orig/Output/esd/esdout.h	2001-12-03 13:38:42.000000000 +1100
-+++ xmms-1.2.10/Output/esd/esdout.h	2005-08-07 17:59:45.000000000 +1000
-@@ -58,6 +58,7 @@ typedef struct
- ESDConfig;
+--- xmms-1.2.10/xmms/sm.c.orig	2004-01-11 18:33:00.000000000 +0100
++++ xmms-1.2.10/xmms/sm.c	2004-04-12 22:44:28.000000000 +0200
+@@ -147,8 +147,9 @@
  
- extern ESDConfig esd_cfg;
-+extern void esdout_reset_playerid(void);
+ #else
  
- void esdout_init(void);
- void esdout_about(void);
-
+-void sm_init(int argc, char **argv, const char *previous_session_id)
++const char * sm_init(int argc, char **argv, const char *previous_session_id)
+ {
++	return NULL;
+ }
+ 
+ void sm_cleanup(void)

Modified: trunk/rpms/xmms-mp3/xmms-mp3.spec
===================================================================
--- trunk/rpms/xmms-mp3/xmms-mp3.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/xmms-mp3/xmms-mp3.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -4,7 +4,7 @@
 Summary: XMMS plugin for mp3 playback.
 Name: xmms-mp3
 Version: 1.2.10
-Release: 13
+Release: 14
 Epoch: 1
 License: GPL
 Group: Applications/Multimedia
@@ -48,6 +48,9 @@
 
 
 %changelog
+* Tue Dec 20 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1:1.2.10-14
+- Update gcc4 patch to include fix for xmms.org bug #1730, fixes FC5 build.
+
 * Tue Dec 20 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1:1.2.10-13
 - Fix xmms requirement by adding the 1 epoch.
 

Modified: trunk/rpms/xmms-musepack/xmms-musepack.spec
===================================================================
--- trunk/rpms/xmms-musepack/xmms-musepack.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/xmms-musepack/xmms-musepack.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -7,13 +7,13 @@
 Summary: X MultiMedia System input plugin to play mpegplus (mpc) files
 Name: xmms-musepack
 Version: 1.2
-Release: 0.1%{?prever:.%{prever}}
+Release: 0.2%{?prever:.%{prever}}
 License: BSD
 Group: Applications/Multimedia
 URL: <A HREF="http://www.musepack.net/">http://www.musepack.net/</A>
 Source: <A HREF="http://musepack.origean.net/files/linux/plugins/xmms-musepack-%{version">http://musepack.origean.net/files/linux/plugins/xmms-musepack-%{version</A>}%{?prever:-%{prever}}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: xmms-devel, libmpcdec-devel, taglib-devel, gcc-c++
+BuildRequires: xmms-devel, pkgconfig, libmpcdec-devel, taglib-devel, gcc-c++
 
 
 %description
@@ -46,6 +46,9 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.2-0.2.RC1
+- Add pkgconfig build requirement to fix build.
+
 * Mon May  9 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.2-0.1.RC1
 - Update to 1.2-RC1.
 - Now build against new libmpcdec and not libmusepack.

Modified: trunk/rpms/zvbi/zvbi.spec
===================================================================
--- trunk/rpms/zvbi/zvbi.spec	2006-01-15 23:48:59 UTC (rev 3968)
+++ trunk/rpms/zvbi/zvbi.spec	2006-01-16 15:05:06 UTC (rev 3969)
@@ -1,16 +1,24 @@
 # $Id$
 # Authority: matthias
 
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist:%define _with_modxorg 1}
+%{?fc5:  %define _with_modxorg 1}
+
 Summary: Raw VBI, Teletext and Closed Caption decoding library
 Name: zvbi
-Version: 0.2.15
+Version: 0.2.17
 Release: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://zapping.sourceforge.net/">http://zapping.sourceforge.net/</A>
 Source: <A HREF="http://dl.sf.net/zapping/zvbi-%{version">http://dl.sf.net/zapping/zvbi-%{version</A>}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: XFree86-devel, libpng-devel, gcc-c++, doxygen, gettext
+BuildRequires: libpng-devel, gcc-c++, doxygen, gettext
+#{?_with_modxorg:BuildRequires: libXt-devel}
+%{!?_with_modxorg:BuildRequires: XFree86-devel}
 Obsoletes: libzvbi &lt;= 0.2.4
 
 %description
@@ -52,20 +60,20 @@
 %{__rm} -rf %{buildroot}
 
 
-%post
-/sbin/ldconfig
+%post -p /sbin/ldconfig
 
-%postun
-/sbin/ldconfig
+%postun -p /sbin/ldconfig
 
 
 %files -f %{name}.lang
 %defattr(-, root, root, 0755)
 %doc AUTHORS BUGS COPYING ChangeLog NEWS README TODO doc/html
 %{_bindir}/zvbi-chains
+%{_bindir}/zvbi-ntsc-cc
 %{_sbindir}/zvbid
 %{_libdir}/*.so.*
 %{_mandir}/man1/zvbi-chains.1*
+%{_mandir}/man1/zvbi-ntsc-cc.1*
 %{_mandir}/man1/zvbid.1*
 
 %files devel
@@ -78,6 +86,11 @@
 
 
 %changelog
+* Fri Jan 13 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.2.17-1
+- Update to 0.2.17.
+- Add now zvbi-ntsc-cc binary and man page.
+- Add modular xorg build conditional.
+
 * Thu Mar 31 2005 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.15-1
 - Updated to release 0.2.15.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002768.html">[svn] r3968 - in trunk/rpms: bitlbee conserver dnsmasq etherape
</A></li>
	<LI>Next message: <A HREF="002770.html">[svn] r3970 - trunk/rpms/easytag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2769">[ date ]</a>
              <a href="thread.html#2769">[ thread ]</a>
              <a href="subject.html#2769">[ subject ]</a>
              <a href="author.html#2769">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
