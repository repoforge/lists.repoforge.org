<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r9776 - in /trunk/rpms/kobodeluxe: kobodeluxe-0.4pre10-various-from-debian2.patch kobodeluxe.spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r9776%20-%20in%20/trunk/rpms/kobodeluxe%3A%0A%20kobodeluxe-0.4pre10-various-from-debian2.patch%20kobodeluxe.spec&In-Reply-To=%3C201103222011.p2MKBvAe028873%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="008559.html">
   <LINK REL="Next"  HREF="008561.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r9776 - in /trunk/rpms/kobodeluxe: kobodeluxe-0.4pre10-various-from-debian2.patch kobodeluxe.spec</H1>
    <B>Yury V. Zaytsev</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r9776%20-%20in%20/trunk/rpms/kobodeluxe%3A%0A%20kobodeluxe-0.4pre10-various-from-debian2.patch%20kobodeluxe.spec&In-Reply-To=%3C201103222011.p2MKBvAe028873%40surya.karan.org%3E"
       TITLE="[svn] r9776 - in /trunk/rpms/kobodeluxe: kobodeluxe-0.4pre10-various-from-debian2.patch kobodeluxe.spec">yury at shurup.com
       </A><BR>
    <I>Tue Mar 22 21:11:57 CET 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="008559.html">[svn] r9775 - /trunk/rpms/dia/dia.spec
</A></li>
        <LI>Next message: <A HREF="008561.html">[svn] r9777 - /trunk/rpms/perl-DateTime/perl-DateTime.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8560">[ date ]</a>
              <a href="thread.html#8560">[ thread ]</a>
              <a href="subject.html#8560">[ subject ]</a>
              <a href="author.html#8560">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: yury
Date: Tue Mar 22 20:11:57 2011
New Revision: 9776

URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge?rev=9776&amp;view=rev">http://svn.rpmforge.net/viewvc/rpmforge?rev=9776&amp;view=rev</A>
Log:
kobodeluxe EL6 build fix


Added:
    trunk/rpms/kobodeluxe/kobodeluxe-0.4pre10-various-from-debian2.patch
Modified:
    trunk/rpms/kobodeluxe/kobodeluxe.spec

Added: trunk/rpms/kobodeluxe/kobodeluxe-0.4pre10-various-from-debian2.patch
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/kobodeluxe/kobodeluxe-0.4pre10-various-from-debian2.patch?rev=9776&amp;view=markup">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/kobodeluxe/kobodeluxe-0.4pre10-various-from-debian2.patch?rev=9776&amp;view=markup</A>
==============================================================================
--- trunk/rpms/kobodeluxe/kobodeluxe-0.4pre10-various-from-debian2.patch (added)
+++ trunk/rpms/kobodeluxe/kobodeluxe-0.4pre10-various-from-debian2.patch Tue Mar 22 20:11:57 2011
@@ -1,0 +1,84 @@
+--- KoboDeluxe-0.4pre10/graphics/window.cpp.org 2010-11-15 22:28:23.000000000 +0100
++++ KoboDeluxe-0.4pre10/graphics/window.cpp     2010-11-15 22:29:23.000000000 +0100
+@@ -310,7 +310,7 @@
+                 */
+                if(token)
+                {
+-                       char *tok = strchr(txt, token);
++                       const char *tok = strchr(txt, token);
+                        if(tok)
+                                tokpos = tok-txt;
+                        else
+--- KoboDeluxe-0.4pre10/enemies.h.org   2010-11-15 23:04:52.000000000 +0100
++++ KoboDeluxe-0.4pre10/enemies.h       2010-11-15 23:06:00.000000000 +0100
+@@ -64,7 +64,7 @@
+ extern const enemy_kind cannon;
+ extern const enemy_kind pipe1;
+ extern const enemy_kind core;
+-extern const enemy_kind pipe2;
++extern const enemy_kind pipe2_kbdl;
+ extern const enemy_kind rock;
+ extern const enemy_kind ring;
+ extern const enemy_kind enemy_m1;
+@@ -257,10 +257,10 @@
+        }
+        else if(ek == &amp;core)
+        {
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 3);
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 7);
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 1);
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 5);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 3);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 7);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 1);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 5);
+                enemies.make(&amp;explosion, CS2PIXEL(x), CS2PIXEL(y));
+                release();
+                manage.destroyed_a_core();
+@@ -372,7 +372,7 @@
+
+ inline int _enemy::is_pipe()
+ {
+-       return ((_state != notuse) &amp;&amp; ((ek == &amp;pipe1) || (ek == &amp;pipe2)));
++       return ((_state != notuse) &amp;&amp; ((ek == &amp;pipe1) || (ek == &amp;pipe2_kbdl)));
+ }
+
+
+--- KoboDeluxe-0.4pre10/enemy.cpp.org   2010-11-15 23:06:12.000000000 +0100
++++ KoboDeluxe-0.4pre10/enemy.cpp       2010-11-15 23:06:52.000000000 +0100
+@@ -762,19 +762,19 @@
+        }
+        p ^= a;
+        if(p &amp; U_MASK)
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 1);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 1);
+        if(p &amp; R_MASK)
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 3);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 3);
+        if(p &amp; D_MASK)
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 5);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 5);
+        if(p &amp; L_MASK)
+-               enemies.make(&amp;pipe2, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 7);
++               enemies.make(&amp;pipe2_kbdl, CS2PIXEL(x), CS2PIXEL(y), 0, 0, 7);
+        manage.add_score(10);
+        release();
+ }
+
+
+-const enemy_kind pipe2 = {
++const enemy_kind pipe2_kbdl = {
+        0,
+        &amp;_enemy::make_pipe2,
+        &amp;_enemy::move_pipe2,
+--- KoboDeluxe-0.4pre10/score.cpp.org   2010-11-15 22:40:13.000000000 +0100
++++ KoboDeluxe-0.4pre10/score.cpp       2010-11-15 22:40:33.000000000 +0100
+@@ -417,7 +417,7 @@
+
+                // if the last characters in the file name is the string
+                // UIDbuf...
+-               char *tmpptr = strstr(path, UIDbuf);
++               const char *tmpptr = strstr(path, UIDbuf);
+                if(tmpptr != NULL &amp;&amp; (*(tmpptr + strlen(UIDbuf)) == '\0'))
+                {
+                        if(stat(path, &amp;st_buffer))

Modified: trunk/rpms/kobodeluxe/kobodeluxe.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/kobodeluxe/kobodeluxe.spec?rev=9776&amp;r1=9775&amp;r2=9776&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/kobodeluxe/kobodeluxe.spec?rev=9776&amp;r1=9775&amp;r2=9776&amp;view=diff</A>
==============================================================================
--- trunk/rpms/kobodeluxe/kobodeluxe.spec (original)
+++ trunk/rpms/kobodeluxe/kobodeluxe.spec Tue Mar 22 20:11:57 2011
@@ -11,7 +11,7 @@
 Summary: SDL port of Akira Higuchi's game XKobo 
 Name: kobodeluxe
 Version: 0.4
-Release: 0.pre10%{?dist}
+Release: 0.pre10.1%{?dist}
 License: GPL
 Group: Amusements/Games
 URL: <A HREF="http://www.olofson.net/kobodl/">http://www.olofson.net/kobodl/</A>
@@ -24,6 +24,7 @@
 Patch1: kobodeluxe-0.4pre10-various-from-debian.patch
 Patch2: kobodeluxe-0.4pre10-fix-segfault-in-midi.patch
 Patch3: kobodeluxe-0.4pre10-gcc44.patch
+Patch4: kobodeluxe-0.4pre10-various-from-debian2.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 Obsoletes: skobo &lt;= %{version}-%{release}
@@ -42,6 +43,7 @@
 %patch1 -p1
 %patch2 -p1 -z .pix
 %patch3 -p0
+%patch4 -p1 -b .various-from-debian2
 
 %{__cat} &lt;&lt;EOF &gt;kobodeluxe.desktop
 [Desktop Entry]
@@ -107,5 +109,8 @@
 %{_localstatedir}/games/kobo-deluxe/
 
 %changelog
+* Tue Mar 22 2011 Yury V. Zaytsev &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">yury at shurup.com</A>&gt; - 0.4-0.pre10.1
+- Fixed EL6 build (thanks to Bjarne Saltbaek!)
+
 * Tue Feb 13 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4-0.pre10
 - Initial package. (using DAR)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="008559.html">[svn] r9775 - /trunk/rpms/dia/dia.spec
</A></li>
	<LI>Next message: <A HREF="008561.html">[svn] r9777 - /trunk/rpms/perl-DateTime/perl-DateTime.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#8560">[ date ]</a>
              <a href="thread.html#8560">[ thread ]</a>
              <a href="subject.html#8560">[ subject ]</a>
              <a href="author.html#8560">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
