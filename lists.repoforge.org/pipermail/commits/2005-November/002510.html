<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r3710 - in trunk/rpms: . quake3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3710%20-%20in%20trunk/rpms%3A%20.%20quake3&In-Reply-To=%3C20051113222000.3137631814F%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002509.html">
   <LINK REL="Next"  HREF="002511.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r3710 - in trunk/rpms: . quake3</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3710%20-%20in%20trunk/rpms%3A%20.%20quake3&In-Reply-To=%3C20051113222000.3137631814F%40pooch.vmhosting.org%3E"
       TITLE="[svn] r3710 - in trunk/rpms: . quake3">packagers at lists.rpmforge.net
       </A><BR>
    <I>Sun Nov 13 23:20:00 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002509.html">[svn] r3709 - in trunk/rpms: . perl-Devel-Symdump
</A></li>
        <LI>Next message: <A HREF="002511.html">[svn] r3711 - trunk/rpms/perl-Devel-Symdump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2510">[ date ]</a>
              <a href="thread.html#2510">[ thread ]</a>
              <a href="subject.html#2510">[ subject ]</a>
              <a href="author.html#2510">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2005-11-13 23:19:59 +0100 (Sun, 13 Nov 2005)
New Revision: 3710

Added:
   trunk/rpms/quake3/
   trunk/rpms/quake3/quake3-1.33-nostrip.patch
   trunk/rpms/quake3/quake3.png
   trunk/rpms/quake3/quake3.spec
Log:
Initial import of the GPL'ed Quake 3 Arena (tested and working great!).


Added: trunk/rpms/quake3/quake3-1.33-nostrip.patch
===================================================================
--- trunk/rpms/quake3/quake3-1.33-nostrip.patch	2005-11-13 22:15:30 UTC (rev 3709)
+++ trunk/rpms/quake3/quake3-1.33-nostrip.patch	2005-11-13 22:19:59 UTC (rev 3710)
@@ -0,0 +1,35 @@
+diff -Naupr quake3-1.33_SVN338.orig/code/unix/Makefile quake3-1.33_SVN338/code/unix/Makefile
+--- quake3-1.33_SVN338.orig/code/unix/Makefile	2005-11-13 20:30:24.000000000 +0100
++++ quake3-1.33_SVN338/code/unix/Makefile	2005-11-13 20:30:04.000000000 +0100
+@@ -1544,22 +1544,22 @@ $(B)/missionpack/qcommon/%.asm: $(CMDIR)
+ 
+ copyfiles: build_release
+ 	@if [ ! -d $(COPYDIR)/baseq3 ]; then echo &quot;You need to set COPYDIR to where you installed Quake III!&quot;; false; fi
+-	$(INSTALL) -s -m 0755 $(BR)/$(PLATFORM)quake3$(BINEXT) $(COPYDIR)/quake3
+-	#$(INSTALL) -s -m 0755 $(BR)/$(PLATFORM)quake3-smp$(BINEXT) $(COPYDIR)/quake3-smp
+-	$(INSTALL) -s -m 0755 $(BR)/$(PLATFORM)q3ded$(BINEXT) $(COPYDIR)/q3ded
++	$(INSTALL) -m 0755 $(BR)/$(PLATFORM)quake3$(BINEXT) $(COPYDIR)/quake3
++	#$(INSTALL) -m 0755 $(BR)/$(PLATFORM)quake3-smp$(BINEXT) $(COPYDIR)/quake3-smp
++	$(INSTALL) -m 0755 $(BR)/$(PLATFORM)q3ded$(BINEXT) $(COPYDIR)/q3ded
+ 	-$(MKDIR) -p -m 0755 $(COPYDIR)/baseq3
+-	$(INSTALL) -s -m 0755 $(BR)/baseq3/cgame$(ARCH).$(SHLIBEXT) \
++	$(INSTALL) -m 0755 $(BR)/baseq3/cgame$(ARCH).$(SHLIBEXT) \
+ 					$(COPYDIR)/baseq3/.
+-	$(INSTALL) -s -m 0755 $(BR)/baseq3/qagame$(ARCH).$(SHLIBEXT) \
++	$(INSTALL) -m 0755 $(BR)/baseq3/qagame$(ARCH).$(SHLIBEXT) \
+ 					$(COPYDIR)/baseq3/.
+-	$(INSTALL) -s -m 0755 $(BR)/baseq3/ui$(ARCH).$(SHLIBEXT) \
++	$(INSTALL) -m 0755 $(BR)/baseq3/ui$(ARCH).$(SHLIBEXT) \
+ 					$(COPYDIR)/baseq3/.
+ 	-$(MKDIR) -p -m 0755 $(COPYDIR)/missionpack
+-	$(INSTALL) -s -m 0755 $(BR)/missionpack/cgame$(ARCH).$(SHLIBEXT) \
++	$(INSTALL) -m 0755 $(BR)/missionpack/cgame$(ARCH).$(SHLIBEXT) \
+ 					$(COPYDIR)/missionpack/.
+-	$(INSTALL) -s -m 0755 $(BR)/missionpack/qagame$(ARCH).$(SHLIBEXT) \
++	$(INSTALL) -m 0755 $(BR)/missionpack/qagame$(ARCH).$(SHLIBEXT) \
+ 					$(COPYDIR)/missionpack/.
+-	$(INSTALL) -s -m 0755 $(BR)/missionpack/ui$(ARCH).$(SHLIBEXT) \
++	$(INSTALL) -m 0755 $(BR)/missionpack/ui$(ARCH).$(SHLIBEXT) \
+ 					$(COPYDIR)/missionpack/.
+ 
+ clean:clean-debug clean-release

Added: trunk/rpms/quake3/quake3.png
===================================================================
(Binary files differ)


Property changes on: trunk/rpms/quake3/quake3.png
___________________________________________________________________
Name: svn:mime-type
   + application/octet-stream

Added: trunk/rpms/quake3/quake3.spec
===================================================================
--- trunk/rpms/quake3/quake3.spec	2005-11-13 22:15:30 UTC (rev 3709)
+++ trunk/rpms/quake3/quake3.spec	2005-11-13 22:19:59 UTC (rev 3710)
@@ -0,0 +1,93 @@
+# $Id$
+# Authority: matthias
+
+%define svn 338
+
+Summary: Quake 3 Arena tournament 3D shooter game
+Name: quake3
+Version: 1.33
+Release: 0.1%{?svn:.svn%{svn}}
+Group: Amusements/Games
+License: GPL
+URL: <A HREF="http://www.icculus.org/quake3/">http://www.icculus.org/quake3/</A>
+# SVN checkout, then &quot;make dist&quot;
+Source0: %{name}-%{version}%{?svn:_SVN%{svn}}.tar.bz2
+Source1: quake3.png
+Patch0: quake3-1.33-nostrip.patch
+Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
+BuildRequires: SDL-devel, xorg-x11-devel, xorg-x11-devel
+BuildRequires: nasm
+
+%description
+This is Quake 3 Arena.
+In addition to this package, you will need to copy the pak?.pk3 files from
+the original 1.32 Quake 3 Arena point release as well as pak0.pk3 from the
+original CD-ROM to %{_prefix}/games/quake3/.
+
+
+%prep
+%setup -n %{name}-%{version}%{?svn:_SVN%{svn}}
+%patch0 -p1 -b .nostrip
+
+
+%build
+# Note that using %{optflags} instead of the flags in the Makefiles screw up
+# the binary badly!
+%{__make} %{?_smp_mflags}
+
+
+%install
+%{__rm} -rf %{buildroot}
+%{__mkdir_p} %{buildroot}%{_prefix}/games/quake3/baseq3/
+%{__make} copyfiles COPYDIR=&quot;%{buildroot}%{_prefix}/games/quake3&quot;
+
+%{__install} -D -m 0644 %{SOURCE1} \
+    %{buildroot}%{_datadir}/pixmaps/quake3.png
+
+# Desktop file
+%{__mkdir_p} %{buildroot}%{_datadir}/applications/
+cat &gt; %{buildroot}%{_datadir}/applications/quake3.desktop &lt;&lt; EOF
+[Desktop Entry]
+Encoding=UTF-8
+Name=Quake 3 Arena
+Comment=Tournament 3D shooter game
+Exec=quake3
+Icon=quake3.png
+Terminal=false
+Type=Application
+Categories=Application;Game;
+EOF
+
+# Wrapper script
+%{__mkdir_p} %{buildroot}%{_bindir}/
+%{__cat} &gt; %{buildroot}%{_bindir}/quake3 &lt;&lt; 'EOF'
+#!/bin/sh
+# Needed to make symlinks/shortcuts work.
+# Run Quake III with some default arguments
+
+cd %{_prefix}/games/quake3
+./quake3 &quot;$@&quot;
+exit $?
+EOF
+
+
+%clean
+%{__rm} -rf %{buildroot}
+
+
+%files
+%defattr(-, root, root, 0755)
+%doc ChangeLog COPYING.txt id-readme.txt i_o-q3-readme
+%attr(0755, root, root) %{_bindir}/quake3
+%{_prefix}/games/quake3/
+%{_datadir}/applications/quake3.desktop
+%{_datadir}/pixmaps/quake3.png
+
+
+%changelog
+* Sun Nov 13 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.33-0.1.svn338
+- Update to GPL'ed 1.33 and spec file cleanup.
+
+* Sun Oct 15 2000 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.17-1
+- Initial RPM based on Loki's 1.17 point release
+


Property changes on: trunk/rpms/quake3/quake3.spec
___________________________________________________________________
Name: svn:keywords
   + Id


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002509.html">[svn] r3709 - in trunk/rpms: . perl-Devel-Symdump
</A></li>
	<LI>Next message: <A HREF="002511.html">[svn] r3711 - trunk/rpms/perl-Devel-Symdump
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2510">[ date ]</a>
              <a href="thread.html#2510">[ thread ]</a>
              <a href="subject.html#2510">[ subject ]</a>
              <a href="author.html#2510">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
