<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r1997 - trunk/tools/yam
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r1997%20-%20trunk/tools/yam&In-Reply-To=%3C20040814133755.732D017F77%40web22.us.megagiga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000802.html">
   <LINK REL="Next"  HREF="000804.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r1997 - trunk/tools/yam</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r1997%20-%20trunk/tools/yam&In-Reply-To=%3C20040814133755.732D017F77%40web22.us.megagiga.com%3E"
       TITLE="[SVN] r1997 - trunk/tools/yam">svn-commits at rpmforge.net
       </A><BR>
    <I>Sat Aug 14 15:37:55 CEST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="000802.html">[SVN] r1996 - trunk/tools/yam
</A></li>
        <LI>Next message: <A HREF="000804.html">[SVN] r1998 - trunk/tools/yam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#803">[ date ]</a>
              <a href="thread.html#803">[ thread ]</a>
              <a href="subject.html#803">[ subject ]</a>
              <a href="author.html#803">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2004-08-14 15:37:53 +0200 (Sat, 14 Aug 2004)
New Revision: 1997

Modified:
   trunk/tools/yam/ChangeLog
   trunk/tools/yam/README
   trunk/tools/yam/README.dhcpd
   trunk/tools/yam/README.dirs
   trunk/tools/yam/README.dnsmasq
   trunk/tools/yam/README.loop
   trunk/tools/yam/README.naming
   trunk/tools/yam/TODO
   trunk/tools/yam/yam
   trunk/tools/yam/yam-example.conf
Log:
Small fixes.

Modified: trunk/tools/yam/ChangeLog
===================================================================
--- trunk/tools/yam/ChangeLog	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/ChangeLog	2004-08-14 13:37:53 UTC (rev 1997)
@@ -2,6 +2,7 @@
 - Skipped a 0.4 release to indicate this is an important update.
 - Rewrote most of the code to allow for smoother dist/arch configuration
 - Fixed rsync exclude problem (Bert de Bruijn)
+- Added more rsync options, to limit bandwidth and keep old packages
 
 * 0.4
 - Added noarch by default to all dists

Modified: trunk/tools/yam/README
===================================================================
--- trunk/tools/yam/README	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/README	2004-08-14 13:37:53 UTC (rev 1997)
@@ -1 +1,6 @@
 Placeholder for a real README.
+
+
+---
+Please send me improvements to this document.
+

Modified: trunk/tools/yam/README.dhcpd
===================================================================
--- trunk/tools/yam/README.dhcpd	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/README.dhcpd	2004-08-14 13:37:53 UTC (rev 1997)
@@ -1 +1,5 @@
 Placeholder.
+
+
+---
+Please send me improvements to this document.

Modified: trunk/tools/yam/README.dirs
===================================================================
--- trunk/tools/yam/README.dirs	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/README.dirs	2004-08-14 13:37:53 UTC (rev 1997)
@@ -24,3 +24,6 @@
 	per dist-arch one directory, autogenerated
 	you can remove everything from here and regenerated with Yam
 	please don't add packages here, see /var/yam/local !
+
+---
+Please send me improvements to this document.

Modified: trunk/tools/yam/README.dnsmasq
===================================================================
--- trunk/tools/yam/README.dnsmasq	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/README.dnsmasq	2004-08-14 13:37:53 UTC (rev 1997)
@@ -20,3 +20,6 @@
 	/etc/ethers:
 	00:0B:1C:2D:3E:4F	host1
 	00:0B:1A:29:38:48	host2
+
+---
+Please send me improvements to this document.

Modified: trunk/tools/yam/README.loop
===================================================================
--- trunk/tools/yam/README.loop	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/README.loop	2004-08-14 13:37:53 UTC (rev 1997)
@@ -45,3 +45,6 @@
 	done
 
 You can have up to 256 loop devices mounted.
+
+---
+Please send me improvements to this document.

Modified: trunk/tools/yam/README.naming
===================================================================
--- trunk/tools/yam/README.naming	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/README.naming	2004-08-14 13:37:53 UTC (rev 1997)
@@ -11,3 +11,6 @@
 					generic packageis (dist-independent) have 0 as disttag
 			repotag		dag, fr, dries 
 			arch		noarch, i386, i486, i586, i686, x86_64, ppc, s390, ...
+
+---
+Please send me improvements to this document.

Modified: trunk/tools/yam/TODO
===================================================================
--- trunk/tools/yam/TODO	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/TODO	2004-08-14 13:37:53 UTC (rev 1997)
@@ -24,5 +24,10 @@
 ### Internal python
 + Improve the copy/symlink/rename functions, using exceptions
 
+### Remote installation
++ Generate remote syslinux menu to boot any of the available dists
++ Create small curses tool to manage systems / MAC-addresses / kickstart files
+
 ### Bugs
-+ Rsync --include/--exclude does not work properly
++ Make -d and -a work
++ None ?

Modified: trunk/tools/yam/yam
===================================================================
--- trunk/tools/yam/yam	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/yam	2004-08-14 13:37:53 UTC (rev 1997)
@@ -393,17 +393,19 @@
 	if not os.path.isfile(cf.rsynccmd):
 		die(4, 'rsync command not found as %s' % cf.rsynccmd)
 	mkdir(path)
-	if op.quiet: opts = ' -q'
-	elif op.verbose: opts = ' -v --progress'
-	else: opts = ''
+	opts = ''
 
-	if cf.rsyncexclsrpm: opts = ' --exclude=\\&quot;*.src.rpm\\&quot;' + opts
-	if cf.rsyncexcldebug: opts = ' --exclude=\\&quot;*-debuginfo-*.rpm\\&quot;' + opts
-	if cf.rsyncexclsrpm or cf.rsyncexcldebug: opts = opts + ' --exclude=\\&quot;*.*\\&quot;'
-	if cf.rsynccleanup: opts = opts + ' --delete-after --delete-excluded'
-	if cf.rsyncbwlimit: opts = opts + ' --bwlimit='+cf.rsyncbwlimit
+	if cf.rsyncexclsrpm: opts = ' --exclude=\&quot;*.src.rpm\&quot; --exclude=\&quot;/SRPMS/\&quot;' + opts
+	if cf.rsyncexcldebug: opts = ' --exclude=\&quot;*-debuginfo-*.rpm\&quot; --exclude=\&quot;/debug/\&quot;' + opts 
+	opts = opts + ' --include=\&quot;*.rpm\&quot;'
+	if cf.rsyncexclsrpm or cf.rsyncexcldebug: opts = opts + ' --exclude=\&quot;*.*\&quot;'
+	if cf.rsynccleanup: opts = ' --delete-after --delete-excluded' + opts
+	if cf.rsyncbwlimit: opts = ' --bwlimit='+cf.rsyncbwlimit + opts
+	if op.quiet: opts = + ' -q' + opts
+	elif op.verbose: opts = ' -v --progress' + opts
+	opts = ' --timeout=30' + opts
 
-	opts = opts + ' --timeout=5'
+	print opts
 	os.system('%s -aHL %s %s %s' % (cf.rsynccmd, opts, url, path))
 
 def lftpmirror(url, path):

Modified: trunk/tools/yam/yam-example.conf
===================================================================
--- trunk/tools/yam/yam-example.conf	2004-08-14 10:07:11 UTC (rev 1996)
+++ trunk/tools/yam/yam-example.conf	2004-08-14 13:37:53 UTC (rev 1997)
@@ -45,7 +45,7 @@
 iso=dist$release-$arch-disc?.iso
 updates=<A HREF="rsync://rsync.dist1.org/pub/dist/$release/$arch/updates/">rsync://rsync.dist1.org/pub/dist/$release/$arch/updates/</A>
 
-### Dist2 is synced with a mirror, has multipe archs
+### Dist2 is synced with a mirror, has multiple archs
 [dist2]
 release=2
 arch=i386 i586 i686 x86_64


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000802.html">[SVN] r1996 - trunk/tools/yam
</A></li>
	<LI>Next message: <A HREF="000804.html">[SVN] r1998 - trunk/tools/yam
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#803">[ date ]</a>
              <a href="thread.html#803">[ thread ]</a>
              <a href="subject.html#803">[ subject ]</a>
              <a href="author.html#803">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
