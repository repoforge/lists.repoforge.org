<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r9192 - in /trunk/tools/unoconv: ChangeLog docs/unoconv.1.txt tests/document-example.odt tests/document-resume.odt unoconv unoconv.spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r9192%20-%20in%20/trunk/tools/unoconv%3A%20ChangeLog%20docs/unoconv.1.txt%0A%20tests/document-example.odt%20tests/document-resume.odt%20unoconv%0A%20unoconv.spec&In-Reply-To=%3C201010250846.o9P8kEo4018140%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007975.html">
   <LINK REL="Next"  HREF="007977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r9192 - in /trunk/tools/unoconv: ChangeLog docs/unoconv.1.txt tests/document-example.odt tests/document-resume.odt unoconv unoconv.spec</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r9192%20-%20in%20/trunk/tools/unoconv%3A%20ChangeLog%20docs/unoconv.1.txt%0A%20tests/document-example.odt%20tests/document-resume.odt%20unoconv%0A%20unoconv.spec&In-Reply-To=%3C201010250846.o9P8kEo4018140%40surya.karan.org%3E"
       TITLE="[svn] r9192 - in /trunk/tools/unoconv: ChangeLog docs/unoconv.1.txt tests/document-example.odt tests/document-resume.odt unoconv unoconv.spec">dag at wieers.com
       </A><BR>
    <I>Mon Oct 25 10:46:14 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007975.html">[svn] r9191 - /trunk/rpms/python-django/python-django.spec
</A></li>
        <LI>Next message: <A HREF="007977.html">[svn] r9193 - /trunk/rpms/icinga/icinga.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7976">[ date ]</a>
              <a href="thread.html#7976">[ thread ]</a>
              <a href="subject.html#7976">[ subject ]</a>
              <a href="author.html#7976">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: Mon Oct 25 09:46:13 2010
New Revision: 9192

URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge?rev=9192&amp;view=rev">http://svn.rpmforge.net/viewvc/rpmforge?rev=9192&amp;view=rev</A>
Log:
Change to how -o/--output/--outputpath works (can now output to filenames too)

Removed:
    trunk/tools/unoconv/tests/document-resume.odt
Modified:
    trunk/tools/unoconv/ChangeLog
    trunk/tools/unoconv/docs/unoconv.1.txt
    trunk/tools/unoconv/tests/document-example.odt
    trunk/tools/unoconv/unoconv
    trunk/tools/unoconv/unoconv.spec

Modified: trunk/tools/unoconv/ChangeLog
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/ChangeLog?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/ChangeLog?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff</A>
==============================================================================
--- trunk/tools/unoconv/ChangeLog (original)
+++ trunk/tools/unoconv/ChangeLog Mon Oct 25 09:46:13 2010
@@ -1,3 +1,6 @@
+* 0.4svn - released 25/10/2010
+- Change to how -o/--output/--outputpath works (can now output to filenames too)
+
 * 0.4 - released 20/10/2010
 - Now properly check if there is a GUI attached and terminate() or -unaccept instance
 - Added official OpenOffice path '/opt/openoffice*/program'

Modified: trunk/tools/unoconv/docs/unoconv.1.txt
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/docs/unoconv.1.txt?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/docs/unoconv.1.txt?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff</A>
==============================================================================
--- trunk/tools/unoconv/docs/unoconv.1.txt (original)
+++ trunk/tools/unoconv/docs/unoconv.1.txt Mon Oct 25 09:46:13 2010
@@ -60,8 +60,11 @@
 -l, --listener::
     Start unoconv as listener for unoconv clients to connect to.
 
--o, --outputpath::
-    Directory to put converted documents.
+-o, --output::
+    If the argument is a directory, put the converted documents in this
+    directory. If multiple input files are provided, use it as a 
+    basename (and add output extension). Otherwise use it as the
+    output filename.
 
 --pipe::
     Use a pipe as an alternative connection mechanism to talk to OpenOffice.

Modified: trunk/tools/unoconv/tests/document-example.odt
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/tests/document-example.odt?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/tests/document-example.odt?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff</A>
==============================================================================
Binary files - no diff available.

Removed: trunk/tools/unoconv/tests/document-resume.odt
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/tests/document-resume.odt?rev=9191&amp;view=log">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/tests/document-resume.odt?rev=9191&amp;view=log</A>
==============================================================================
Binary file - no diff available.

Modified: trunk/tools/unoconv/unoconv
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/unoconv?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/unoconv?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff</A>
==============================================================================
--- trunk/tools/unoconv/unoconv (original)
+++ trunk/tools/unoconv/unoconv Mon Oct 25 09:46:13 2010
@@ -105,7 +105,7 @@
 __version__ = &quot;$Revision$&quot;
 # $Source$
 
-VERSION = '0.4'
+VERSION = '0.4svn'
 
 doctypes = ('document', 'graphics', 'presentation', 'spreadsheet')
 
@@ -333,7 +333,7 @@
         self.format = None
         self.importfilter = &quot;&quot;
         self.listener = False
-        self.outputpath = None
+        self.output = None
         self.pipe = None
         self.port = '2002'
         self.server = 'localhost'
@@ -347,9 +347,9 @@
         try:
             opts, args = getopt.getopt (args, 'c:d:e:f:hi:Llo:p:s:t:T:v',
                 ['connection=', 'doctype=', 'export', 'format=', 'help',
-                 'import', 'listener', 'outputpath=', 'pipe=', 'port=',
-                 'server=', 'timeout=', 'show', 'stdout', 'template',
-                 'verbose', 'version'] )
+                 'import', 'listener', 'output=', 'outputpath', 'pipe=',
+                 'port=', 'server=', 'timeout=', 'show', 'stdout',
+                 'template', 'verbose', 'version'] )
         except getopt.error, exc:
             print 'unoconv: %s, try unoconv -h for a list of all the options' % str(exc)
             sys.exit(255)
@@ -382,8 +382,11 @@
                 self.importfilter = arg
             elif opt in ['-l', '--listener']:
                 self.listener = True
-            elif opt in ['-o', '--outputpath']:
-                self.outputpath = arg
+            elif opt in ['-o', '--output']:
+                self.output = arg
+            elif opt in ['--outputpath']:
+                print &gt;&gt;sys.stderr, 'Warning: This option is deprecated by --output.' % arg
+                self.output = arg
             elif opt in ['--pipe']:
                 self.pipe = arg
             elif opt in ['-p', '--port']:
@@ -474,7 +477,7 @@
   -i, --import=string      set import filter option string
                              eg. -i utf8
   -l, --listener           start a listener to use by unoconv clients
-  -o, --outputpath=name    output directory
+  -o, --output=name        output basename, filename or directory
       --pipe=name          alternative method of connection using a pipe
   -p, --port=port          specify the port (default: 2002)
                              to be used by client or listener
@@ -656,10 +659,15 @@
 
             if not op.stdout:
                 (outputfn, ext) = os.path.splitext(inputfn)
-                if not op.outputpath:
+                if not op.output:
                     outputfn = outputfn + os.extsep + outputfmt.extension
+                elif os.path.isdir(op.output):
+                    outputfn = os.path.join(op.output, os.path.basename(outputfn) + os.extsep + outputfmt.extension)
+                elif len(op.filenames) &gt; 1:
+                    outputfn = op.output + os.extsep + outputfmt.extension
                 else:
-                    outputfn = os.path.join(op.outputpath, os.path.basename(outputfn) + os.extsep + outputfmt.extension)
+                    outputfn = op.output
+
                 outputurl = unohelper.absolutize( self.cwd, unohelper.systemPathToFileUrl(outputfn) )
                 doc.storeToURL(outputurl, tuple(outputprops) )
                 info(1, &quot;Output file: %s&quot; % outputfn)

Modified: trunk/tools/unoconv/unoconv.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/unoconv.spec?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/unoconv/unoconv.spec?rev=9192&amp;r1=9191&amp;r2=9192&amp;view=diff</A>
==============================================================================
--- trunk/tools/unoconv/unoconv.spec (original)
+++ trunk/tools/unoconv/unoconv.spec Mon Oct 25 09:46:13 2010
@@ -56,6 +56,9 @@
 %{_bindir}/unoconv
 
 %changelog
+* Mon Oct 25 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4svn-1
+- Updated to release 0.4svn.
+
 * Wed Oct 20 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4-1
 - Updated to release 0.4.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007975.html">[svn] r9191 - /trunk/rpms/python-django/python-django.spec
</A></li>
	<LI>Next message: <A HREF="007977.html">[svn] r9193 - /trunk/rpms/icinga/icinga.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7976">[ date ]</a>
              <a href="thread.html#7976">[ thread ]</a>
              <a href="subject.html#7976">[ subject ]</a>
              <a href="author.html#7976">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
