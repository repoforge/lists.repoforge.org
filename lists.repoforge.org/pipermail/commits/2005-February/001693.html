<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r2892 - trunk/rpms/lighttpd
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2892%20-%20trunk/rpms/lighttpd&In-Reply-To=%3C200502211049.j1LAnusV026433%40lists.rpmforge.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001692.html">
   <LINK REL="Next"  HREF="001694.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r2892 - trunk/rpms/lighttpd</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2892%20-%20trunk/rpms/lighttpd&In-Reply-To=%3C200502211049.j1LAnusV026433%40lists.rpmforge.net%3E"
       TITLE="[SVN] r2892 - trunk/rpms/lighttpd">svn-commits at rpmforge.net
       </A><BR>
    <I>Mon Feb 21 11:49:56 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="001692.html">[SVN] r2891 - in trunk/rpms: . amyedit gift gift-gnutella	gift-openft giftcurs gnuvd linkchecker mathomatic	perl-Class-MethodMaker pgst poedit psi shellsql smb4k smbc	syck tellico wesnoth
</A></li>
        <LI>Next message: <A HREF="001694.html">[SVN] r2893 - in trunk/rpms: . 4g8 BasiliskII ac3dec aldo alevt alsa-lib alsa-utils amsn anjuta apollon bitlbee bluez-libs bluez-utils cadaver devhelp dia distcc dspam easysok eternallands etherape evolution-connector f-spot fampp firefox flac gail gaim gcvs ghc gl-117 glabels glade2 gnochm gnome-netstatus gnomeicu gnubiff gnutls gpdf gpm gstreamer-player gthumb gtkhtml3 gtksourceview gtkspell gwenview intltool iozone iptstate kaffeine kderadiostation kdirstat kflamesaver kftpgrabber kile kmemaid kmuddy kmyirc knoda knowit konserve kssh ksubtile ktechlab kyra lib3ds libdaemon libdv libexif libgcrypt libgsf libidn libmusicbrainz libquicktime libsnack libsoup libtheora libwnck libxclass logwatch memtest86+ micq mozilla mtr ngrep nrh-up2date nxtvepg openobex p0f perl-Apache-ASP perl-BerkeleyDB perl-Convert-ASN1 perl-Convert-UUlib perl-Digest-SHA1 perl-File-Tail perl-IO-Multiplex perl-MailTools perl-Mon perl-Net-DNS perl-Parallel-ForkManager perl-SDL perl-Text-Iconv per! l-TimeDate perl-XML-LibXML perl-XML-LibXML-Common perl-XML-NamespaceSupport perl-XML-Parser perl-XML-SAX planner ptunnel rhythmbox smart smbldap-tools sound-juicer spamassassin speex splint startup-notification tcron thunderbird tinyca valgrind wireless-tools xmms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1693">[ date ]</a>
              <a href="thread.html#1693">[ thread ]</a>
              <a href="subject.html#1693">[ subject ]</a>
              <a href="author.html#1693">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2005-02-21 11:49:55 +0100 (Mon, 21 Feb 2005)
New Revision: 2892

Added:
   trunk/rpms/lighttpd/lighttpd-1.3.11-empty_cgi_handler.patch
Removed:
   trunk/rpms/lighttpd/lighttpd-1.3.10-cleanconf.patch
   trunk/rpms/lighttpd/lighttpd-1.3.10-init.d.patch
Modified:
   trunk/rpms/lighttpd/lighttpd.spec
Log:
Update.


Deleted: trunk/rpms/lighttpd/lighttpd-1.3.10-cleanconf.patch
===================================================================
--- trunk/rpms/lighttpd/lighttpd-1.3.10-cleanconf.patch	2005-02-20 21:28:31 UTC (rev 2891)
+++ trunk/rpms/lighttpd/lighttpd-1.3.10-cleanconf.patch	2005-02-21 10:49:55 UTC (rev 2892)
@@ -1,296 +0,0 @@
-diff -Naupr lighttpd-1.3.10.orig/doc/lighttpd.conf lighttpd-1.3.10/doc/lighttpd.conf
---- lighttpd-1.3.10.orig/doc/lighttpd.conf	2005-01-31 12:36:32.000000000 +0100
-+++ lighttpd-1.3.10/doc/lighttpd.conf	2005-02-17 19:28:41.362088808 +0100
-@@ -1,5 +1,5 @@
- # lighttpd configuration file
--# 
-+#
- # use a it as base for lighttpd 1.0.0 and above
- #
- # $Id: lighttpd.conf,v 1.7 2004/11/03 22:26:05 weigon Exp $
-@@ -11,41 +11,41 @@
- # all other module should only be loaded if really neccesary
- # - saves some time
- # - saves memory
--server.modules              = ( 
--#                               &quot;mod_rewrite&quot;, 
--#                               &quot;mod_redirect&quot;, 
--#				&quot;mod_alias&quot;,
--			        &quot;mod_access&quot;, 
--#				&quot;mod_auth&quot;, 
--#                               &quot;mod_status&quot;, 
--#				&quot;mod_setenv&quot;,
--#				&quot;mod_fastcgi&quot;,
--#				&quot;mod_proxy&quot;,
--#				&quot;mod_simple_vhost&quot;,
--#				&quot;mod_evhost&quot;,
--#				&quot;mod_userdir&quot;,
--#				&quot;mod_cgi&quot;,
--#				&quot;mod_compress&quot;,
-+server.modules              = (
-+#                               &quot;mod_rewrite&quot;,
-+#                               &quot;mod_redirect&quot;,
-+#                               &quot;mod_alias&quot;,
-+                                &quot;mod_access&quot;,
-+#                               &quot;mod_auth&quot;,
-+#                               &quot;mod_status&quot;,
-+#                               &quot;mod_setenv&quot;,
-+#                               &quot;mod_fastcgi&quot;,
-+#                               &quot;mod_proxy&quot;,
-+#                               &quot;mod_simple_vhost&quot;,
-+#                               &quot;mod_evhost&quot;,
-+#                               &quot;mod_userdir&quot;,
-+#                               &quot;mod_cgi&quot;,
-+#                               &quot;mod_compress&quot;,
- #                               &quot;mod_ssi&quot;,
- #                               &quot;mod_usertrack&quot;,
--#				&quot;mod_expire&quot;,
--#				&quot;mod_secdownload&quot;,
--# 				&quot;mod_rrdtool&quot;,
--				&quot;mod_accesslog&quot; )
-+#                               &quot;mod_expire&quot;,
-+#                               &quot;mod_secdownload&quot;,
-+#                               &quot;mod_rrdtool&quot;,
-+                                &quot;mod_accesslog&quot; )
- 
--## a static document-root, for virtual-hosting take look at the 
-+## a static document-root, for virtual-hosting take look at the
- ## server.virtual-* options
--server.document-root             = &quot;/www/pages/&quot;
-+server.document-root        = &quot;/www/pages/&quot;
- 
- ## where to send error-messages to
--server.errorlog            = &quot;/www/logs/lighttpd.error.log&quot;
-+server.errorlog             = &quot;/www/logs/lighttpd.error.log&quot;
- 
- # files to check for if .../ is requested
--server.indexfiles          = ( &quot;index.php&quot;, &quot;index.html&quot;, 
-+server.indexfiles           = ( &quot;index.php&quot;, &quot;index.html&quot;,
-                                 &quot;index.htm&quot;, &quot;default.htm&quot; )
- 
- # mimetype mapping
--mimetype.assign            = (  
-+mimetype.assign             = (
-   &quot;.pdf&quot;          =&gt;      &quot;application/pdf&quot;,
-   &quot;.sig&quot;          =&gt;      &quot;application/pgp-signature&quot;,
-   &quot;.spl&quot;          =&gt;      &quot;application/futuresplash&quot;,
-@@ -95,12 +95,12 @@ mimetype.assign            = (  
-  )
- 
- # Use the &quot;Content-Type&quot; extended attribute to obtain mime type if possible
--# mimetypes.use-xattr = &quot;enable&quot;
-+#mimetypes.use-xattr        = &quot;enable&quot;
- 
- 
- ## send a different Server: header
- ## be nice and keep it at lighttpd
--# server.tag = &quot;lighttpd&quot;
-+#server.tag                 = &quot;lighttpd&quot;
- 
- #### accesslog module
- accesslog.filename          = &quot;/www/logs/access.log&quot;
-@@ -127,41 +127,42 @@ url.access-deny             = ( &quot;~&quot;, &quot;.i
- #server.error-handler-404   = &quot;/error-handler.php&quot;
- 
- ## to help the rc.scripts
--# server.pid-file              = &quot;/var/run/lighttpd.pid&quot;
-+#server.pid-file            = &quot;/var/run/lighttpd.pid&quot;
- 
- 
- ###### virtual hosts
- ##
--##   If you want name-based virtual hosting add the next three settings and load
--##   mod_simple_vhost
-+##  If you want name-based virtual hosting add the next three settings and load
-+##  mod_simple_vhost
- ##
- ## document-root =
--##   virtual-server-root + virtual-server-default-host + virtual-server-docroot or
-+##   virtual-server-root + virtual-server-default-host + virtual-server-docroot
-+## or
- ##   virtual-server-root + http-host + virtual-server-docroot
- ##
--#simple-vhost.server-root         = &quot;/home/weigon/wwwroot/servers/&quot;
--#simple-vhost.default-host        = &quot;grisu.home.kneschke.de&quot;
--#simple-vhost.document-root       = &quot;/pages/&quot;
-+#simple-vhost.server-root   = &quot;/home/weigon/wwwroot/servers/&quot;
-+#simple-vhost.default-host  = &quot;grisu.home.kneschke.de&quot;
-+#simple-vhost.document-root = &quot;/pages/&quot;
- 
- 
--## 
--## Format: &lt;errorfile-prefix&gt;&lt;status&gt;.html
-+##
-+## Format: &lt;errorfile-prefix&gt;&lt;status-code&gt;.html
- ## -&gt; ..../status-404.html for 'File not found'
- #server.errorfile-prefix    = &quot;/home/weigon/projects/lighttpd/doc/status-&quot;
- 
- ## virtual directory listings
--#server.dir-listing          = &quot;enable&quot;
-+#server.dir-listing         = &quot;enable&quot;
- 
- ## enable debugging
--#debug.log-request-header    = &quot;enable&quot;
--#debug.log-response-header   = &quot;enable&quot;
--#debug.log-request-handling  = &quot;enable&quot;
--#debug.log-file-not-found    = &quot;enable&quot;
-+#debug.log-request-header   = &quot;enable&quot;
-+#debug.log-response-header  = &quot;enable&quot;
-+#debug.log-request-handling = &quot;enable&quot;
-+#debug.log-file-not-found   = &quot;enable&quot;
- 
- ### only root can use these options
- #
- # chroot() to directory (default: no chroot() )
--#server.chroot            = &quot;/&quot;
-+#server.chroot              = &quot;/&quot;
- 
- ## change uid to &lt;uid&gt; (default: don't care)
- #server.username            = &quot;wwwrun&quot;
-@@ -170,71 +171,71 @@ url.access-deny             = ( &quot;~&quot;, &quot;.i
- #server.groupname           = &quot;wwwrun&quot;
- 
- #### compress module
--#compress.cache-dir          = &quot;/tmp/lighttpd/cache/compress/&quot;
--#compress.filetype           = (&quot;text/plain&quot;, &quot;text/html&quot;)
-+#compress.cache-dir         = &quot;/tmp/lighttpd/cache/compress/&quot;
-+#compress.filetype          = (&quot;text/plain&quot;, &quot;text/html&quot;)
- 
- #### proxy module
- ## read proxy.txt for more info
--#proxy.server              = ( &quot;.php&quot; =&gt;
--#				( &quot;localhost&quot; =&gt; 
--#				  ( 
--#				    &quot;host&quot; =&gt; &quot;192.168.0.101&quot;,
--#				    &quot;port&quot; =&gt; 80
--#				  )
--#				)
--#			      )
-+#proxy.server               = ( &quot;.php&quot; =&gt;
-+#                               ( &quot;localhost&quot; =&gt;
-+#                                 (
-+#                                   &quot;host&quot; =&gt; &quot;192.168.0.101&quot;,
-+#                                   &quot;port&quot; =&gt; 80
-+#                                 )
-+#                               )
-+#                             )
- 
- #### fastcgi module
- ## read fastcgi.txt for more info
--#fastcgi.server              = ( &quot;.php&quot; =&gt;
--#				( &quot;localhost&quot; =&gt; 
--#				  ( 
--#				    &quot;socket&quot; =&gt; &quot;/tmp/php-fastcgi.socket&quot;,
--#				    &quot;bin-path&quot; =&gt; &quot;/usr/local/bin/php&quot;
--#				  )
--#				)
--#			      )
-+#fastcgi.server             = ( &quot;.php&quot; =&gt;
-+#                               ( &quot;localhost&quot; =&gt;
-+#                                 (
-+#                                   &quot;socket&quot; =&gt; &quot;/tmp/php-fastcgi.socket&quot;,
-+#                                   &quot;bin-path&quot; =&gt; &quot;/usr/local/bin/php&quot;
-+#                                 )
-+#                               )
-+#                            )
- 
- #### CGI module
--#cgi.assign                  = ( &quot;.pl&quot;  =&gt; &quot;/usr/bin/perl&quot;,
--#                                &quot;.cgi&quot; =&gt; &quot;/usr/bin/perl&quot; )
-+#cgi.assign                 = ( &quot;.pl&quot;  =&gt; &quot;/usr/bin/perl&quot;,
-+#                               &quot;.cgi&quot; =&gt; &quot;/usr/bin/perl&quot; )
- #
- 
- #### SSL engine
--#ssl.engine                  = &quot;enable&quot;
--#ssl.pemfile                 = &quot;server.pem&quot;
-+#ssl.engine                 = &quot;enable&quot;
-+#ssl.pemfile                = &quot;server.pem&quot;
- 
- #### status module
--# status.status-url = &quot;/server-status&quot;
--# status.config-url = &quot;/server-config&quot;
-+#status.status-url          = &quot;/server-status&quot;
-+#status.config-url          = &quot;/server-config&quot;
- 
- #### auth module
- ## read authentification.txt for more info
--# auth.backend                = &quot;plain&quot;
--# auth.backend.plain.userfile = &quot;lighttpd.user&quot;
--# auth.backend.plain.groupfile = &quot;lighttpd.group&quot;
--
--# auth.backend.ldap.hostname = &quot;localhost&quot;
--# auth.backend.ldap.base-dn  = &quot;dc=my-domain,dc=com&quot;
--# auth.backend.ldap.filter   = &quot;(uid=$)&quot;
--
--# auth.require                = ( &quot;/server-status&quot; =&gt; 
--#                                ( 
--#				  &quot;method&quot;  =&gt; &quot;digest&quot;,
--#				  &quot;realm&quot;   =&gt; &quot;download archiv&quot;,
--#				  &quot;require&quot; =&gt; &quot;group=www|user=jan|host=192.168.2.10&quot;
--#				),
--#				&quot;/server-info&quot; =&gt; 
--#                                ( 
--#				  &quot;method&quot;  =&gt; &quot;digest&quot;,
--#				  &quot;realm&quot;   =&gt; &quot;download archiv&quot;,
--#				  &quot;require&quot; =&gt; &quot;group=www|user=jan|host=192.168.2.10&quot;
--#				)
--#                              )
-+#auth.backend               = &quot;plain&quot;
-+#auth.backend.plain.userfile = &quot;lighttpd.user&quot;
-+#auth.backend.plain.groupfile = &quot;lighttpd.group&quot;
-+
-+#auth.backend.ldap.hostname = &quot;localhost&quot;
-+#auth.backend.ldap.base-dn  = &quot;dc=my-domain,dc=com&quot;
-+#auth.backend.ldap.filter   = &quot;(uid=$)&quot;
-+
-+#auth.require               = ( &quot;/server-status&quot; =&gt;
-+#                               (
-+#                                 &quot;method&quot;  =&gt; &quot;digest&quot;,
-+#                                 &quot;realm&quot;   =&gt; &quot;download archiv&quot;,
-+#                                 &quot;require&quot; =&gt; &quot;group=www|user=jan|host=192.168.2.10&quot;
-+#                               ),
-+#                               &quot;/server-info&quot; =&gt;
-+#                               (
-+#                                 &quot;method&quot;  =&gt; &quot;digest&quot;,
-+#                                 &quot;realm&quot;   =&gt; &quot;download archiv&quot;,
-+#                                 &quot;require&quot; =&gt; &quot;group=www|user=jan|host=192.168.2.10&quot;
-+#                               )
-+#                             )
- 
- #### url handling modules (rewrite, redirect, access)
--# url.rewrite                 = ( &quot;^/$&quot;             =&gt; &quot;/server-status&quot; )
--# url.redirect                = ( &quot;^/wishlist/(.+)&quot; =&gt; &quot;<A HREF="http://www.123.org/$1">http://www.123.org/$1</A>&quot; )
-+#url.rewrite                = ( &quot;^/$&quot;             =&gt; &quot;/server-status&quot; )
-+#url.redirect               = ( &quot;^/wishlist/(.+)&quot; =&gt; &quot;<A HREF="http://www.123.org/$1">http://www.123.org/$1</A>&quot; )
- 
- #
- # define a pattern for the host url finding
-@@ -245,19 +246,19 @@ url.access-deny             = ( &quot;~&quot;, &quot;.i
- # %3 =&gt; subdomain 1 name
- # %4 =&gt; subdomain 2 name
- #
--# evhost.path-pattern = &quot;/home/storage/dev/www/%3/htdocs/&quot;
-+#evhost.path-pattern        = &quot;/home/storage/dev/www/%3/htdocs/&quot;
- 
- #### expire module
--# expire.url                  = ( &quot;/buggy/&quot; =&gt; &quot;access 2 hours&quot;, &quot;/asdhas/&quot; =&gt; &quot;access plus 1 seconds 2 minutes&quot;)
-+#expire.url                 = ( &quot;/buggy/&quot; =&gt; &quot;access 2 hours&quot;, &quot;/asdhas/&quot; =&gt; &quot;access plus 1 seconds 2 minutes&quot;)
- 
- #### ssi
--# ssi.extension              = ( &quot;.shtml&quot; )
-+#ssi.extension              = ( &quot;.shtml&quot; )
- 
- #### rrdtool
--# rrdtool.binary = &quot;/usr/bin/rrdtool&quot;
--# rrdtool.db-name = &quot;/var/www/lighttpd.rrd&quot;
-+#rrdtool.binary             = &quot;/usr/bin/rrdtool&quot;
-+#rrdtool.db-name            = &quot;/var/www/lighttpd.rrd&quot;
- 
- #### setenv
--# setenv.add-request-header = ( &quot;TRAV_ENV&quot; =&gt; &quot;<A HREF="mysql://user@host/db">mysql://user@host/db</A>&quot; )
--# setenv.add-response-header = ( &quot;X-Secret-Message&quot; =&gt; &quot;42&quot; )
--# 
-+#setenv.add-request-header  = ( &quot;TRAV_ENV&quot; =&gt; &quot;<A HREF="mysql://user@host/db">mysql://user@host/db</A>&quot; )
-+#setenv.add-response-header = ( &quot;X-Secret-Message&quot; =&gt; &quot;42&quot; )
-+

Deleted: trunk/rpms/lighttpd/lighttpd-1.3.10-init.d.patch
===================================================================
--- trunk/rpms/lighttpd/lighttpd-1.3.10-init.d.patch	2005-02-20 21:28:31 UTC (rev 2891)
+++ trunk/rpms/lighttpd/lighttpd-1.3.10-init.d.patch	2005-02-21 10:49:55 UTC (rev 2892)
@@ -1,107 +0,0 @@
-diff -Naupr lighttpd-1.3.10.orig/doc/rc.lighttpd.redhat lighttpd-1.3.10/doc/rc.lighttpd.redhat
---- lighttpd-1.3.10.orig/doc/rc.lighttpd.redhat	2004-04-06 13:13:38.000000000 +0200
-+++ lighttpd-1.3.10/doc/rc.lighttpd.redhat	2005-02-17 19:06:12.429157784 +0100
-@@ -1,13 +1,11 @@
--#! /bin/sh
--
--# lighttpd init file for redhat
-+#!/bin/sh
- #
--# Tue Apr 9 2004 Matthijs van der Klip
-+# lighttpd     Startup script for the lighttpd server
- #
--# chkconfig: 2345 99 01
--# description: Jan Kneschke's lighttpd
-+# chkconfig: - 85 15
-+# description: Lightning fast webserver with light system requirements
- #
--# processname: /usr/sbin/lighttpd
-+# processname: lighttpd
- # config: /etc/lighttpd/lighttpd.conf
- # config: /etc/sysconfig/lighttpd
- # pidfile: /var/run/lighttpd.pid
-@@ -15,39 +13,43 @@
- # Note: pidfile is assumed to be created
- # by lighttpd (config: server.pid-file).
- # If not, uncomment 'pidof' line.
--#
--# source function library
--. /etc/init.d/functions
- 
--RETVAL=0
-+# Source function library
-+. /etc/rc.d/init.d/functions
-+
-+if [ -f /etc/sysconfig/lighttpd ]; then
-+	. /etc/sysconfig/lighttpd
-+fi
-+
-+if [ -z &quot;$LIGHTTPD_CONF_PATH&quot; ]; then
-+	LIGHTTPD_CONF_PATH=&quot;/etc/lighttpd/lighttpd.conf&quot;
-+fi
-+
- prog=&quot;lighttpd&quot;
--pidfile=&quot;/var/run/lighttpd.pid&quot;
--LIGHTTPD_BIN=/usr/sbin/lighttpd
--LIGHTTPD_CONFIG=/etc/sysconfig/lighttpd
--. $LIGHTTPD_CONFIG
-+lighttpd=&quot;/usr/sbin/lighttpd&quot;
-+RETVAL=0
- 
- start() {
--	echo -n &quot;Starting $prog: &quot;
--	daemon $LIGHTTPD_BIN -f $LIGHTTPD_CONF_PATH
-+	echo -n $&quot;Starting $prog: &quot;
-+	daemon $lighttpd -f $LIGHTTPD_CONF_PATH
- 	RETVAL=$?
- 	echo
--	touch /var/lock/subsys/$prog
--	#pidof $prog &gt; $pidfile
-+	[ $RETVAL -eq 0 ] &amp;&amp; touch /var/lock/subsys/$prog
- 	return $RETVAL
- }
- 
- stop() {
--	echo -n &quot;Stopping $prog: &quot;
--	killproc $LIGHTTPD_BIN
-+	echo -n $&quot;Stopping $prog: &quot;
-+	killproc $lighttpd
- 	RETVAL=$?
- 	echo
--	rm -f /var/lock/subsys/$prog
-+	[ $RETVAL -eq 0 ] &amp;&amp; rm -f /var/lock/subsys/$prog
- 	return $RETVAL
- }
- 
- reload() {
--	echo -n &quot;Reloading $prog: &quot;
--	killproc $LIGHTTPD_BIN -HUP
-+	echo -n $&quot;Reloading $prog: &quot;
-+	killproc $lighttpd -HUP
- 	RETVAL=$?
- 	echo
- 	return $RETVAL
-@@ -64,15 +66,21 @@ case &quot;$1&quot; in
- 		stop
- 		start
- 		;;
-+	condrestart)
-+		if [ -f /var/lock/subsys/$prog ]; then
-+			stop
-+			start
-+		fi
-+		;;
- 	reload)
- 		reload
- 		;;
- 	status)
--		status $prog
-+		status $lighttpd
- 		RETVAL=$?
- 		;;
- 	*)
--		echo $&quot;Usage: $0 {start|stop|restart|reload|status}&quot;
-+		echo $&quot;Usage: $0 {start|stop|restart|condrestart|reload|status}&quot;
- 		RETVAL=1
- esac
- 

Added: trunk/rpms/lighttpd/lighttpd-1.3.11-empty_cgi_handler.patch
===================================================================
--- trunk/rpms/lighttpd/lighttpd-1.3.11-empty_cgi_handler.patch	2005-02-20 21:28:31 UTC (rev 2891)
+++ trunk/rpms/lighttpd/lighttpd-1.3.11-empty_cgi_handler.patch	2005-02-21 10:49:55 UTC (rev 2892)
@@ -0,0 +1,25 @@
+from <A HREF="http://trac.lighttpd.net/trac/changeset/35">http://trac.lighttpd.net/trac/changeset/35</A>
+
+--- trunk/src/mod_cgi.c	(revision 34)
++++ trunk/src/mod_cgi.c	(revision 35)
+@@ -690,12 +690,14 @@
+ 	
+ #ifndef __WIN32	
+ 	
+-	/* stat the exec file */
+-	if (-1 == (stat(cgi_handler-&gt;ptr, &amp;st))) {
+-		log_error_write(srv, __FILE__, __LINE__, &quot;sbss&quot;, 
+-				&quot;stat for cgi-handler&quot;, cgi_handler,
+-				&quot;failed:&quot;, strerror(errno));
+-		return -1;
++	if (cgi_handler-&gt;used &gt; 1) {
++		/* stat the exec file */
++		if (-1 == (stat(cgi_handler-&gt;ptr, &amp;st))) {
++			log_error_write(srv, __FILE__, __LINE__, &quot;sbss&quot;, 
++					&quot;stat for cgi-handler&quot;, cgi_handler,
++					&quot;failed:&quot;, strerror(errno));
++			return -1;
++		}
+ 	}
+ 	
+ 	if (pipe(to_cgi_fds)) {

Modified: trunk/rpms/lighttpd/lighttpd.spec
===================================================================
--- trunk/rpms/lighttpd/lighttpd.spec	2005-02-20 21:28:31 UTC (rev 2891)
+++ trunk/rpms/lighttpd/lighttpd.spec	2005-02-21 10:49:55 UTC (rev 2892)
@@ -2,8 +2,8 @@
 
 Summary: Lightning fast webserver with light system requirements
 Name: lighttpd
-Version: 1.3.10
-Release: 0.3
+Version: 1.3.11
+Release: 0
 License: BSD
 Group: System Environment/Daemons
 URL: <A HREF="http://www.lighttpd.net/">http://www.lighttpd.net/</A>
@@ -13,9 +13,8 @@
 Source10: index.html
 Source11: lighttpd.png
 Source12: powered_by_fedora.png
-Patch0: lighttpd-1.3.10-cleanconf.patch
-Patch1: lighttpd-1.3.10-defaultconf.patch
-Patch2: lighttpd-1.3.10-init.d.patch
+Patch0: lighttpd-1.3.10-defaultconf.patch
+Patch1: lighttpd-1.3.11-empty_cgi_handler.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires(pre): /usr/sbin/useradd
 Requires(post): /sbin/chkconfig
@@ -62,9 +61,8 @@
 
 %prep
 %setup
-%patch0 -p1 -b .cleanconf
-%patch1 -p1 -b .defaultconf
-%patch2 -p1 -b .init.d
+%patch0 -p1 -b .defaultconf
+%patch1 -p1 -b .empty_cgi_handler
 
 
 %build
@@ -162,6 +160,11 @@
 
 
 %changelog
+* Mon Feb 21 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.3.11-0
+- Update to 1.3.11.
+- Remove cleanconf and init.d patches (merged upstream).
+- Add empty_cgi_handler patch.
+
 * Fri Feb 18 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.3.10-0
 - Split off -fastcgi sub-package.
 - Include php.d entry to set sane FastCGI defaults.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001692.html">[SVN] r2891 - in trunk/rpms: . amyedit gift gift-gnutella	gift-openft giftcurs gnuvd linkchecker mathomatic	perl-Class-MethodMaker pgst poedit psi shellsql smb4k smbc	syck tellico wesnoth
</A></li>
	<LI>Next message: <A HREF="001694.html">[SVN] r2893 - in trunk/rpms: . 4g8 BasiliskII ac3dec aldo alevt alsa-lib alsa-utils amsn anjuta apollon bitlbee bluez-libs bluez-utils cadaver devhelp dia distcc dspam easysok eternallands etherape evolution-connector f-spot fampp firefox flac gail gaim gcvs ghc gl-117 glabels glade2 gnochm gnome-netstatus gnomeicu gnubiff gnutls gpdf gpm gstreamer-player gthumb gtkhtml3 gtksourceview gtkspell gwenview intltool iozone iptstate kaffeine kderadiostation kdirstat kflamesaver kftpgrabber kile kmemaid kmuddy kmyirc knoda knowit konserve kssh ksubtile ktechlab kyra lib3ds libdaemon libdv libexif libgcrypt libgsf libidn libmusicbrainz libquicktime libsnack libsoup libtheora libwnck libxclass logwatch memtest86+ micq mozilla mtr ngrep nrh-up2date nxtvepg openobex p0f perl-Apache-ASP perl-BerkeleyDB perl-Convert-ASN1 perl-Convert-UUlib perl-Digest-SHA1 perl-File-Tail perl-IO-Multiplex perl-MailTools perl-Mon perl-Net-DNS perl-Parallel-ForkManager perl-SDL perl-Text-Iconv per! l-TimeDate perl-XML-LibXML perl-XML-LibXML-Common perl-XML-NamespaceSupport perl-XML-Parser perl-XML-SAX planner ptunnel rhythmbox smart smbldap-tools sound-juicer spamassassin speex splint startup-notification tcron thunderbird tinyca valgrind wireless-tools xmms
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1693">[ date ]</a>
              <a href="thread.html#1693">[ thread ]</a>
              <a href="subject.html#1693">[ subject ]</a>
              <a href="author.html#1693">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
