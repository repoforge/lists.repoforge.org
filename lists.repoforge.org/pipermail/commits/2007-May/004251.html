<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5452 - trunk/rpms/gstreamer-plugins-bad
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5452%20-%20trunk/rpms/gstreamer-plugins-bad&In-Reply-To=%3C20070531105906.14722944AD1%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004250.html">
   <LINK REL="Next"  HREF="004252.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5452 - trunk/rpms/gstreamer-plugins-bad</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5452%20-%20trunk/rpms/gstreamer-plugins-bad&In-Reply-To=%3C20070531105906.14722944AD1%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5452 - trunk/rpms/gstreamer-plugins-bad">packagers at lists.rpmforge.net
       </A><BR>
    <I>Thu May 31 12:59:06 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004250.html">[svn] r5451 - in trunk/rpms: dkms-ipw3945 ipw3945-firmware
</A></li>
        <LI>Next message: <A HREF="004252.html">[svn] r5453 - trunk/rpms/gstreamer-plugins-ugly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4251">[ date ]</a>
              <a href="thread.html#4251">[ thread ]</a>
              <a href="subject.html#4251">[ subject ]</a>
              <a href="author.html#4251">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2007-05-31 12:59:04 +0200 (Thu, 31 May 2007)
New Revision: 5452

Added:
   trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.4-faad2.patch
Removed:
   trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.3-faad2.patch
Modified:
   trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec
Log:
Update gstreamer-plugins-bad to 0.10.4 for F7.


Deleted: trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.3-faad2.patch
===================================================================
--- trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.3-faad2.patch	2007-05-31 10:58:03 UTC (rev 5451)
+++ trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.3-faad2.patch	2007-05-31 10:59:04 UTC (rev 5452)
@@ -1,266 +0,0 @@
-diff -Naupr gst-plugins-bad-0.10.3.orig/configure gst-plugins-bad-0.10.3/configure
---- gst-plugins-bad-0.10.3.orig/configure	2006-05-04 17:20:18.000000000 +0200
-+++ gst-plugins-bad-0.10.3/configure	2006-05-04 17:20:18.000000000 +0200
-@@ -30382,9 +30382,9 @@ if test x$USE_FAAD = xyes; then
- 
-   HAVE_FAAD=&quot;yes&quot;
- 
--  echo &quot;$as_me:$LINENO: checking for faacDecOpen in -lfaad&quot; &gt;&amp;5
--echo $ECHO_N &quot;checking for faacDecOpen in -lfaad... $ECHO_C&quot; &gt;&amp;6
--if test &quot;${ac_cv_lib_faad_faacDecOpen+set}&quot; = set; then
-+  echo &quot;$as_me:$LINENO: checking for NeAACDecOpen in -lfaad&quot; &gt;&amp;5
-+echo $ECHO_N &quot;checking for NeAACDecOpen in -lfaad... $ECHO_C&quot; &gt;&amp;6
-+if test &quot;${ac_cv_lib_faad_NeAACDecOpen+set}&quot; = set; then
-   echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
- else
-   ac_check_lib_save_LIBS=$LIBS
-@@ -30402,11 +30402,11 @@ extern &quot;C&quot;
- #endif
- /* We use char because int might match the return type of a gcc2
-    builtin and then its argument prototype would still apply.  */
--char faacDecOpen ();
-+char NeAACDecOpen ();
- int
- main ()
- {
--faacDecOpen ();
-+NeAACDecOpen ();
-   ;
-   return 0;
- }
-@@ -30432,20 +30432,20 @@ if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_l
-   ac_status=$?
-   echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
-   (exit $ac_status); }; }; then
--  ac_cv_lib_faad_faacDecOpen=yes
-+  ac_cv_lib_faad_NeAACDecOpen=yes
- else
-   echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
- sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
- 
--ac_cv_lib_faad_faacDecOpen=no
-+ac_cv_lib_faad_NeAACDecOpen=no
- fi
- rm -f conftest.err conftest.$ac_objext \
-       conftest$ac_exeext conftest.$ac_ext
- LIBS=$ac_check_lib_save_LIBS
- fi
--echo &quot;$as_me:$LINENO: result: $ac_cv_lib_faad_faacDecOpen&quot; &gt;&amp;5
--echo &quot;${ECHO_T}$ac_cv_lib_faad_faacDecOpen&quot; &gt;&amp;6
--if test $ac_cv_lib_faad_faacDecOpen = yes; then
-+echo &quot;$as_me:$LINENO: result: $ac_cv_lib_faad_NeAACDecOpen&quot; &gt;&amp;5
-+echo &quot;${ECHO_T}$ac_cv_lib_faad_NeAACDecOpen&quot; &gt;&amp;6
-+if test $ac_cv_lib_faad_NeAACDecOpen = yes; then
-   HAVE_FAAD=yes
- else
-   HAVE_FAAD=no
-diff -Naupr gst-plugins-bad-0.10.3.orig/configure.ac gst-plugins-bad-0.10.3/configure.ac
---- gst-plugins-bad-0.10.3.orig/configure.ac	2006-05-04 17:18:42.000000000 +0200
-+++ gst-plugins-bad-0.10.3/configure.ac	2006-05-04 17:18:42.000000000 +0200
-@@ -397,7 +397,7 @@ dnl **** Free AAC Decoder (FAAD) ****
- translit(dnm, m, l) AM_CONDITIONAL(USE_FAAD, true)
- GST_CHECK_FEATURE(FAAD, [AAC decoder plug-in], faad, [
-   HAVE_FAAD=&quot;yes&quot;
--  GST_CHECK_LIBHEADER(FAAD, faad, faacDecOpen, -lm, faad.h,
-+  GST_CHECK_LIBHEADER(FAAD, faad, NeAACDecOpen, -lm, faad.h,
-     FAAD_LIBS=&quot;-lfaad -lm&quot;, HAVE_FAAD=&quot;no&quot;)
-   if test $HAVE_FAAD = &quot;yes&quot;; then
-     AC_MSG_CHECKING([Checking for FAAD &gt;= 2])
-diff -Naupr gst-plugins-bad-0.10.3.orig/ext/faad/gstfaad.c gst-plugins-bad-0.10.3/ext/faad/gstfaad.c
---- gst-plugins-bad-0.10.3.orig/ext/faad/gstfaad.c	2006-05-03 13:10:12.000000000 +0200
-+++ gst-plugins-bad-0.10.3/ext/faad/gstfaad.c	2007-01-09 12:36:05.000000000 +0100
-@@ -38,14 +38,14 @@
-  * but not all, hence this Truly Evil Hack. This hack will need updating if
-  * upstream ever releases something with the new API.
-  */
--#define faacDecInit faacDecInit_no_definition
--#define faacDecInit2 faacDecInit2_no_definition
-+#define NeAACDecInit NeAACDecInit_no_definition
-+#define NeAACDecInit2 NeAACDecInit2_no_definition
- #include &quot;gstfaad.h&quot;
--#undef faacDecInit
--#undef faacDecInit2
-+#undef NeAACDecInit
-+#undef NeAACDecInit2
- 
--extern long faacDecInit (faacDecHandle, guint8 *, guint32, guint32 *, guint8 *);
--extern int8_t faacDecInit2 (faacDecHandle, guint8 *, guint32,
-+extern long NeAACDecInit (NeAACDecHandle, guint8 *, guint32, guint32 *, guint8 *);
-+extern int8_t NeAACDecInit2 (NeAACDecHandle, guint8 *, guint32,
-     guint32 *, guint8 *);
- 
- GST_DEBUG_CATEGORY_STATIC (faad_debug);
-@@ -275,10 +275,10 @@ gst_faad_setcaps (GstPad * pad, GstCaps 
-     buf = GST_BUFFER (gst_value_get_mini_object (value));
- 
-     /* someone forgot that char can be unsigned when writing the API */
--    if ((gint8) faacDecInit2 (faad-&gt;handle,
-+    if ((gint8) NeAACDecInit2 (faad-&gt;handle,
-             GST_BUFFER_DATA (buf), GST_BUFFER_SIZE (buf), &amp;samplerate,
-             &amp;channels) &lt; 0) {
--      GST_DEBUG (&quot;faacDecInit2() failed&quot;);
-+      GST_DEBUG (&quot;NeAACDecInit2() failed&quot;);
-       return FALSE;
-     }
- 
-@@ -666,11 +666,11 @@ gst_faad_srcconnect (GstPad * pad, const
-   }
- 
-   if (fmt != -1) {
--    faacDecConfiguration *conf;
-+    NeAACDecConfiguration *conf;
- 
--    conf = faacDecGetCurrentConfiguration (faad-&gt;handle);
-+    conf = NeAACDecGetCurrentConfiguration (faad-&gt;handle);
-     conf-&gt;outputFormat = fmt;
--    if (faacDecSetConfiguration (faad-&gt;handle, conf) == 0)
-+    if (NeAACDecSetConfiguration (faad-&gt;handle, conf) == 0)
-       return GST_PAD_LINK_REFUSED;
- 
-     // FIXME: handle return value, how? 
-@@ -949,7 +949,7 @@ gst_faad_src_query (GstPad * pad, GstQue
- 
- 
- static gboolean
--gst_faad_update_caps (GstFaad * faad, faacDecFrameInfo * info,
-+gst_faad_update_caps (GstFaad * faad, NeAACDecFrameInfo * info,
-     GstCaps ** p_caps)
- {
-   GstAudioChannelPosition *pos;
-@@ -1086,7 +1086,7 @@ gst_faad_chain (GstPad * pad, GstBuffer 
-   GstFaad *faad;
-   GstBuffer *outbuf;
-   GstCaps *caps = NULL;
--  faacDecFrameInfo info;
-+  NeAACDecFrameInfo info;
-   void *out;
-   gboolean run_loop = TRUE;
-   guint sync_off;
-@@ -1136,17 +1136,17 @@ gst_faad_chain (GstPad * pad, GstBuffer 
-      * appropriate initialisation info... if not, we use our fake_codec_data
-      */
-     if (looks_like_valid_header (input_data, input_size) || !faad-&gt;packetised) {
--      if (faacDecInit (faad-&gt;handle, input_data, input_size, &amp;rate, &amp;ch) &lt; 0)
-+      if (NeAACDecInit (faad-&gt;handle, input_data, input_size, &amp;rate, &amp;ch) &lt; 0)
-         goto init_failed;
- 
--      GST_DEBUG_OBJECT (faad, &quot;faacDecInit() ok: rate=%u,channels=%u&quot;, rate,
-+      GST_DEBUG_OBJECT (faad, &quot;NeAACDecInit() ok: rate=%u,channels=%u&quot;, rate,
-           ch);
-     } else {
--      if ((gint8) faacDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
-+      if ((gint8) NeAACDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
-               &amp;rate, &amp;ch) &lt; 0) {
-         goto init2_failed;
-       }
--      GST_DEBUG_OBJECT (faad, &quot;faacDecInit2() ok: rate=%u,channels=%u&quot;, rate,
-+      GST_DEBUG_OBJECT (faad, &quot;NeAACDecInit2() ok: rate=%u,channels=%u&quot;, rate,
-           ch);
-     }
- 
-@@ -1179,7 +1179,7 @@ gst_faad_chain (GstPad * pad, GstBuffer 
-       }
-     }
- 
--    out = faacDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
-+    out = NeAACDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
-         input_size - skip_bytes);
- 
-     if (info.error) {
-@@ -1189,23 +1189,23 @@ gst_faad_chain (GstPad * pad, GstBuffer 
-       if (!faad-&gt;packetised)
-         goto decode_error;
- 
--      /* decode error? try again using faacDecInit2 
-+      /* decode error? try again using NeAACDecInit2 
-        * fabricated private codec data from sink caps */
-       gst_faad_close_decoder (faad);
-       if (!gst_faad_open_decoder (faad))
-         goto init2_failed;
- 
--      GST_DEBUG_OBJECT (faad, &quot;decoding error, reopening with faacDecInit2()&quot;);
--      if ((gint8) faacDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
-+      GST_DEBUG_OBJECT (faad, &quot;decoding error, reopening with NeAACDecInit2()&quot;);
-+      if ((gint8) NeAACDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
-               &amp;rate, &amp;ch) &lt; 0) {
-         goto init2_failed;
-       }
- 
--      GST_DEBUG_OBJECT (faad, &quot;faacDecInit2(): rate=%d,channels=%d&quot;, rate, ch);
-+      GST_DEBUG_OBJECT (faad, &quot;NeAACDecInit2(): rate=%d,channels=%d&quot;, rate, ch);
- 
-       /* let's try again */
-       info.error = 0;
--      out = faacDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
-+      out = NeAACDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
-           input_size - skip_bytes);
- 
-       if (info.error)
-@@ -1311,7 +1311,7 @@ init_failed:
- init2_failed:
-   {
-     GST_ELEMENT_ERROR (faad, STREAM, DECODE, (NULL),
--        (&quot;%s() failed&quot;, (faad-&gt;handle) ? &quot;faacDecInit2&quot; : &quot;faacDecOpen&quot;));
-+        (&quot;%s() failed&quot;, (faad-&gt;handle) ? &quot;NeAACDecInit2&quot; : &quot;NeAACDecOpen&quot;));
-     ret = GST_FLOW_ERROR;
-     goto out;
-   }
-@@ -1319,7 +1319,7 @@ init2_failed:
- decode_error:
-   {
-     GST_ELEMENT_ERROR (faad, STREAM, DECODE, (NULL),
--        (&quot;Failed to decode buffer: %s&quot;, faacDecGetErrorMessage (info.error)));
-+        (&quot;Failed to decode buffer: %s&quot;, NeAACDecGetErrorMessage (info.error)));
-     ret = GST_FLOW_ERROR;
-     goto out;
-   }
-@@ -1328,22 +1328,22 @@ decode_error:
- static gboolean
- gst_faad_open_decoder (GstFaad * faad)
- {
--  faacDecConfiguration *conf;
-+  NeAACDecConfiguration *conf;
- 
--  faad-&gt;handle = faacDecOpen ();
-+  faad-&gt;handle = NeAACDecOpen ();
- 
-   if (faad-&gt;handle == NULL) {
--    GST_WARNING_OBJECT (faad, &quot;faacDecOpen() failed&quot;);
-+    GST_WARNING_OBJECT (faad, &quot;NeAACDecOpen() failed&quot;);
-     return FALSE;
-   }
- 
--  conf = faacDecGetCurrentConfiguration (faad-&gt;handle);
-+  conf = NeAACDecGetCurrentConfiguration (faad-&gt;handle);
-   conf-&gt;defObjectType = LC;
-   /* conf-&gt;dontUpSampleImplicitSBR = 1; */
-   conf-&gt;outputFormat = FAAD_FMT_16BIT;
- 
--  if (faacDecSetConfiguration (faad-&gt;handle, conf) == 0) {
--    GST_WARNING_OBJECT (faad, &quot;faacDecSetConfiguration() failed&quot;);
-+  if (NeAACDecSetConfiguration (faad-&gt;handle, conf) == 0) {
-+    GST_WARNING_OBJECT (faad, &quot;NeAACDecSetConfiguration() failed&quot;);
-     return FALSE;
-   }
- 
-@@ -1353,7 +1353,7 @@ gst_faad_open_decoder (GstFaad * faad)
- static void
- gst_faad_close_decoder (GstFaad * faad)
- {
--  faacDecClose (faad-&gt;handle);
-+  NeAACDecClose (faad-&gt;handle);
-   faad-&gt;handle = NULL;
- }
- 
-diff -Naupr gst-plugins-bad-0.10.3.orig/ext/faad/gstfaad.h gst-plugins-bad-0.10.3/ext/faad/gstfaad.h
---- gst-plugins-bad-0.10.3.orig/ext/faad/gstfaad.h	2006-05-02 18:16:31.000000000 +0200
-+++ gst-plugins-bad-0.10.3/ext/faad/gstfaad.h	2007-01-09 12:36:34.000000000 +0100
-@@ -51,7 +51,7 @@ typedef struct _GstFaad {
-   GstBuffer *tempbuf;    /* used to keep input leftovers          */
- 
-   /* FAAD object */
--  faacDecHandle handle;
-+  NeAACDecHandle handle;
-   gboolean init;
- 
-   /* FAAD channel setup */

Added: trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.4-faad2.patch
===================================================================
--- trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.4-faad2.patch	                        (rev 0)
+++ trunk/rpms/gstreamer-plugins-bad/gst-plugins-bad-0.10.4-faad2.patch	2007-05-31 10:59:04 UTC (rev 5452)
@@ -0,0 +1,288 @@
+diff -Naupr gst-plugins-bad-0.10.4.orig/configure gst-plugins-bad-0.10.4/configure
+--- gst-plugins-bad-0.10.4.orig/configure	2006-12-21 16:11:48.000000000 +0100
++++ gst-plugins-bad-0.10.4/configure	2007-05-30 23:03:23.000000000 +0200
+@@ -37333,9 +37333,9 @@ if test x$USE_FAAD = xyes; then
+ 
+   HAVE_FAAD=&quot;yes&quot;
+ 
+-  { echo &quot;$as_me:$LINENO: checking for faacDecOpen in -lfaad&quot; &gt;&amp;5
+-echo $ECHO_N &quot;checking for faacDecOpen in -lfaad... $ECHO_C&quot; &gt;&amp;6; }
+-if test &quot;${ac_cv_lib_faad_faacDecOpen+set}&quot; = set; then
++  { echo &quot;$as_me:$LINENO: checking for NeAACDecOpen in -lfaad&quot; &gt;&amp;5
++echo $ECHO_N &quot;checking for NeAACDecOpen in -lfaad... $ECHO_C&quot; &gt;&amp;6; }
++if test &quot;${ac_cv_lib_faad_NeAACDecOpen+set}&quot; = set; then
+   echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
+ else
+   ac_check_lib_save_LIBS=$LIBS
+@@ -37353,11 +37353,11 @@ cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+ #ifdef __cplusplus
+ extern &quot;C&quot;
+ #endif
+-char faacDecOpen ();
++char NeAACDecOpen ();
+ int
+ main ()
+ {
+-return faacDecOpen ();
++return NeAACDecOpen ();
+   ;
+   return 0;
+ }
+@@ -37396,21 +37396,21 @@ eval &quot;echo \&quot;\$as_me:$LINENO: $ac_try_ec
+   ac_status=$?
+   echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+   (exit $ac_status); }; }; then
+-  ac_cv_lib_faad_faacDecOpen=yes
++  ac_cv_lib_faad_NeAACDecOpen=yes
+ else
+   echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+ sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+ 
+-	ac_cv_lib_faad_faacDecOpen=no
++	ac_cv_lib_faad_NeAACDecOpen=no
+ fi
+ 
+ rm -f core conftest.err conftest.$ac_objext \
+       conftest$ac_exeext conftest.$ac_ext
+ LIBS=$ac_check_lib_save_LIBS
+ fi
+-{ echo &quot;$as_me:$LINENO: result: $ac_cv_lib_faad_faacDecOpen&quot; &gt;&amp;5
+-echo &quot;${ECHO_T}$ac_cv_lib_faad_faacDecOpen&quot; &gt;&amp;6; }
+-if test $ac_cv_lib_faad_faacDecOpen = yes; then
++{ echo &quot;$as_me:$LINENO: result: $ac_cv_lib_faad_NeAACDecOpen&quot; &gt;&amp;5
++echo &quot;${ECHO_T}$ac_cv_lib_faad_NeAACDecOpen&quot; &gt;&amp;6; }
++if test $ac_cv_lib_faad_NeAACDecOpen = yes; then
+   HAVE_FAAD=yes
+ else
+   HAVE_FAAD=no
+diff -Naupr gst-plugins-bad-0.10.4.orig/configure.ac gst-plugins-bad-0.10.4/configure.ac
+--- gst-plugins-bad-0.10.4.orig/configure.ac	2006-12-21 16:10:47.000000000 +0100
++++ gst-plugins-bad-0.10.4/configure.ac	2007-05-30 23:04:18.000000000 +0200
+@@ -429,7 +429,7 @@ dnl **** Free AAC Decoder (FAAD) ****
+ translit(dnm, m, l) AM_CONDITIONAL(USE_FAAD, true)
+ GST_CHECK_FEATURE(FAAD, [AAC decoder plug-in], faad, [
+   HAVE_FAAD=&quot;yes&quot;
+-  GST_CHECK_LIBHEADER(FAAD, faad, faacDecOpen, -lm, faad.h,
++  GST_CHECK_LIBHEADER(FAAD, faad, NeAACDecOpen, -lm, faad.h,
+     FAAD_LIBS=&quot;-lfaad -lm&quot;, HAVE_FAAD=&quot;no&quot;)
+   if test $HAVE_FAAD = &quot;yes&quot;; then
+     AC_MSG_CHECKING([Checking for FAAD &gt;= 2])
+diff -Naupr gst-plugins-bad-0.10.4.orig/ext/faad/gstfaad.c gst-plugins-bad-0.10.4/ext/faad/gstfaad.c
+--- gst-plugins-bad-0.10.4.orig/ext/faad/gstfaad.c	2006-10-06 17:49:39.000000000 +0200
++++ gst-plugins-bad-0.10.4/ext/faad/gstfaad.c	2007-05-30 23:03:52.000000000 +0200
+@@ -38,14 +38,14 @@
+  * but not all, hence this Truly Evil Hack. This hack will need updating if
+  * upstream ever releases something with the new API.
+  */
+-#define faacDecInit faacDecInit_no_definition
+-#define faacDecInit2 faacDecInit2_no_definition
++#define NeAACDecInit NeAACDecInit_no_definition
++#define NeAACDecInit2 NeAACDecInit2_no_definition
+ #include &quot;gstfaad.h&quot;
+-#undef faacDecInit
+-#undef faacDecInit2
++#undef NeAACDecInit
++#undef NeAACDecInit2
+ 
+-extern long faacDecInit (faacDecHandle, guint8 *, guint32, guint32 *, guint8 *);
+-extern int8_t faacDecInit2 (faacDecHandle, guint8 *, guint32,
++extern long NeAACDecInit (NeAACDecHandle, guint8 *, guint32, guint32 *, guint8 *);
++extern int8_t NeAACDecInit2 (NeAACDecHandle, guint8 *, guint32,
+     guint32 *, guint8 *);
+ 
+ GST_DEBUG_CATEGORY_STATIC (faad_debug);
+@@ -305,7 +305,7 @@ gst_faad_setcaps (GstPad * pad, GstCaps 
+       goto wrong_length;
+ 
+     /* someone forgot that char can be unsigned when writing the API */
+-    if ((gint8) faacDecInit2 (faad-&gt;handle, cdata, csize, &amp;samplerate,
++    if ((gint8) NeAACDecInit2 (faad-&gt;handle, cdata, csize, &amp;samplerate,
+             &amp;channels) &lt; 0)
+       goto init_failed;
+ 
+@@ -365,7 +365,7 @@ wrong_length:
+   }
+ init_failed:
+   {
+-    GST_DEBUG_OBJECT (faad, &quot;faacDecInit2() failed&quot;);
++    GST_DEBUG_OBJECT (faad, &quot;NeAACDecInit2() failed&quot;);
+     return FALSE;
+   }
+ }
+@@ -705,11 +705,11 @@ gst_faad_srcconnect (GstPad * pad, const
+   }
+ 
+   if (fmt != -1) {
+-    faacDecConfiguration *conf;
++    NeAACDecConfiguration *conf;
+ 
+-    conf = faacDecGetCurrentConfiguration (faad-&gt;handle);
++    conf = NeAACDecGetCurrentConfiguration (faad-&gt;handle);
+     conf-&gt;outputFormat = fmt;
+-    if (faacDecSetConfiguration (faad-&gt;handle, conf) == 0)
++    if (NeAACDecSetConfiguration (faad-&gt;handle, conf) == 0)
+       return GST_PAD_LINK_REFUSED;
+ 
+     // FIXME: handle return value, how? 
+@@ -993,7 +993,7 @@ gst_faad_src_query (GstPad * pad, GstQue
+ 
+ 
+ static gboolean
+-gst_faad_update_caps (GstFaad * faad, faacDecFrameInfo * info)
++gst_faad_update_caps (GstFaad * faad, NeAACDecFrameInfo * info)
+ {
+   GstAudioChannelPosition *pos;
+   gboolean ret;
+@@ -1177,7 +1177,7 @@ gst_faad_chain (GstPad * pad, GstBuffer 
+   guchar *input_data;
+   GstFaad *faad;
+   GstBuffer *outbuf;
+-  faacDecFrameInfo info;
++  NeAACDecFrameInfo info;
+   void *out;
+   gboolean run_loop = TRUE;
+   guint sync_off;
+@@ -1228,17 +1228,17 @@ gst_faad_chain (GstPad * pad, GstBuffer 
+      * appropriate initialisation info... if not, we use our fake_codec_data
+      */
+     if (looks_like_valid_header (input_data, input_size) || !faad-&gt;packetised) {
+-      if (faacDecInit (faad-&gt;handle, input_data, input_size, &amp;rate, &amp;ch) &lt; 0)
++      if (NeAACDecInit (faad-&gt;handle, input_data, input_size, &amp;rate, &amp;ch) &lt; 0)
+         goto init_failed;
+ 
+-      GST_DEBUG_OBJECT (faad, &quot;faacDecInit() ok: rate=%u,channels=%u&quot;, rate,
++      GST_DEBUG_OBJECT (faad, &quot;NeAACDecInit() ok: rate=%u,channels=%u&quot;, rate,
+           ch);
+     } else {
+-      if ((gint8) faacDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
++      if ((gint8) NeAACDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
+               &amp;rate, &amp;ch) &lt; 0) {
+         goto init2_failed;
+       }
+-      GST_DEBUG_OBJECT (faad, &quot;faacDecInit2() ok: rate=%u,channels=%u&quot;, rate,
++      GST_DEBUG_OBJECT (faad, &quot;NeAACDecInit2() ok: rate=%u,channels=%u&quot;, rate,
+           ch);
+     }
+ 
+@@ -1271,7 +1271,7 @@ gst_faad_chain (GstPad * pad, GstBuffer 
+       }
+     }
+ 
+-    out = faacDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
++    out = NeAACDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
+         input_size - skip_bytes);
+ 
+     if (info.error &gt; 0) {
+@@ -1279,30 +1279,30 @@ gst_faad_chain (GstPad * pad, GstBuffer 
+       guint8 ch;
+ 
+       GST_DEBUG_OBJECT (faad, &quot;decoding error: %s&quot;,
+-          faacDecGetErrorMessage (info.error));
++          NeAACDecGetErrorMessage (info.error));
+ 
+       goto out;
+ 
+       if (!faad-&gt;packetised)
+         goto decode_error;
+ 
+-      /* decode error? try again using faacDecInit2 
++      /* decode error? try again using NeAACDecInit2 
+        * fabricated private codec data from sink caps */
+       gst_faad_close_decoder (faad);
+       if (!gst_faad_open_decoder (faad))
+         goto init2_failed;
+ 
+-      GST_DEBUG_OBJECT (faad, &quot;decoding error, reopening with faacDecInit2()&quot;);
+-      if ((gint8) faacDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
++      GST_DEBUG_OBJECT (faad, &quot;decoding error, reopening with NeAACDecInit2()&quot;);
++      if ((gint8) NeAACDecInit2 (faad-&gt;handle, faad-&gt;fake_codec_data, 2,
+               &amp;rate, &amp;ch) &lt; 0) {
+         goto init2_failed;
+       }
+ 
+-      GST_DEBUG_OBJECT (faad, &quot;faacDecInit2(): rate=%d,channels=%d&quot;, rate, ch);
++      GST_DEBUG_OBJECT (faad, &quot;NeAACDecInit2(): rate=%d,channels=%d&quot;, rate, ch);
+ 
+       /* let's try again */
+       info.error = 0;
+-      out = faacDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
++      out = NeAACDecDecode (faad-&gt;handle, &amp;info, input_data + skip_bytes,
+           input_size - skip_bytes);
+ 
+       if (info.error) {
+@@ -1311,7 +1311,7 @@ gst_faad_chain (GstPad * pad, GstBuffer 
+           goto decode_error;
+         GST_DEBUG_OBJECT (faad,
+             &quot;Failed to decode buffer: %s, count = %d, trying to resync&quot;,
+-            faacDecGetErrorMessage (info.error), faad-&gt;error_count);
++            NeAACDecGetErrorMessage (info.error), faad-&gt;error_count);
+         continue;
+       }
+ 
+@@ -1420,14 +1420,14 @@ init_failed:
+ init2_failed:
+   {
+     GST_ELEMENT_ERROR (faad, STREAM, DECODE, (NULL),
+-        (&quot;%s() failed&quot;, (faad-&gt;handle) ? &quot;faacDecInit2&quot; : &quot;faacDecOpen&quot;));
++        (&quot;%s() failed&quot;, (faad-&gt;handle) ? &quot;NeAACDecInit2&quot; : &quot;NeAACDecOpen&quot;));
+     ret = GST_FLOW_ERROR;
+     goto out;
+   }
+ decode_error:
+   {
+     GST_ELEMENT_ERROR (faad, STREAM, DECODE, (NULL),
+-        (&quot;Failed to decode buffer: %s&quot;, faacDecGetErrorMessage (info.error)));
++        (&quot;Failed to decode buffer: %s&quot;, NeAACDecGetErrorMessage (info.error)));
+     ret = GST_FLOW_ERROR;
+     goto out;
+   }
+@@ -1436,22 +1436,22 @@ decode_error:
+ static gboolean
+ gst_faad_open_decoder (GstFaad * faad)
+ {
+-  faacDecConfiguration *conf;
++  NeAACDecConfiguration *conf;
+ 
+-  faad-&gt;handle = faacDecOpen ();
++  faad-&gt;handle = NeAACDecOpen ();
+ 
+   if (faad-&gt;handle == NULL) {
+-    GST_WARNING_OBJECT (faad, &quot;faacDecOpen() failed&quot;);
++    GST_WARNING_OBJECT (faad, &quot;NeAACDecOpen() failed&quot;);
+     return FALSE;
+   }
+ 
+-  conf = faacDecGetCurrentConfiguration (faad-&gt;handle);
++  conf = NeAACDecGetCurrentConfiguration (faad-&gt;handle);
+   conf-&gt;defObjectType = LC;
+   /* conf-&gt;dontUpSampleImplicitSBR = 1; */
+   conf-&gt;outputFormat = FAAD_FMT_16BIT;
+ 
+-  if (faacDecSetConfiguration (faad-&gt;handle, conf) == 0) {
+-    GST_WARNING_OBJECT (faad, &quot;faacDecSetConfiguration() failed&quot;);
++  if (NeAACDecSetConfiguration (faad-&gt;handle, conf) == 0) {
++    GST_WARNING_OBJECT (faad, &quot;NeAACDecSetConfiguration() failed&quot;);
+     return FALSE;
+   }
+ 
+@@ -1462,7 +1462,7 @@ static void
+ gst_faad_close_decoder (GstFaad * faad)
+ {
+   if (faad-&gt;handle) {
+-    faacDecClose (faad-&gt;handle);
++    NeAACDecClose (faad-&gt;handle);
+     faad-&gt;handle = NULL;
+   }
+ }
+diff -Naupr gst-plugins-bad-0.10.4.orig/ext/faad/gstfaad.h gst-plugins-bad-0.10.4/ext/faad/gstfaad.h
+--- gst-plugins-bad-0.10.4.orig/ext/faad/gstfaad.h	2006-05-31 21:26:24.000000000 +0200
++++ gst-plugins-bad-0.10.4/ext/faad/gstfaad.h	2007-05-30 23:04:13.000000000 +0200
+@@ -51,7 +51,7 @@ typedef struct _GstFaad {
+   GstBuffer *tempbuf;    /* used to keep input leftovers          */
+ 
+   /* FAAD object */
+-  faacDecHandle handle;
++  NeAACDecHandle handle;
+   gboolean init;
+ 
+   /* FAAD channel setup */

Modified: trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec
===================================================================
--- trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec	2007-05-31 10:58:03 UTC (rev 5451)
+++ trunk/rpms/gstreamer-plugins-bad/gstreamer-plugins-bad.spec	2007-05-31 10:59:04 UTC (rev 5452)
@@ -7,18 +7,18 @@
 %define majorminor   0.10
 %define gstreamer    gstreamer
 
-%define gst_minver   0.10.2
-%define gstpb_minver 0.10.2
+%define gst_minver   0.10.10.1
+%define gstpb_minver 0.10.10.1
 
 Summary: GStreamer streaming media framework &quot;bad&quot; plug-ins
 Name: gstreamer-plugins-bad
-Version: 0.10.3
-Release: 3
+Version: 0.10.4
+Release: 1
 License: LGPL
 Group: Applications/Multimedia
 URL: <A HREF="http://gstreamer.freedesktop.org/">http://gstreamer.freedesktop.org/</A>
 Source: <A HREF="http://gstreamer.freedesktop.org/src/gst-plugins-bad/gst-plugins-bad-%{version">http://gstreamer.freedesktop.org/src/gst-plugins-bad/gst-plugins-bad-%{version</A>}.tar.bz2
-Patch0: gst-plugins-bad-0.10.3-faad2.patch
+Patch0: gst-plugins-bad-0.10.4-faad2.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: %{gstreamer} &gt;= %{gst_minver}
 BuildRequires: %{gstreamer}-devel &gt;= %{gst_minver}
@@ -26,7 +26,6 @@
 
 BuildRequires: gcc-c++
 BuildRequires: gettext-devel
-BuildRequires: gtk-doc
 BuildRequires: PyXML
 Buildrequires: libXt-devel
 
@@ -39,14 +38,18 @@
 BuildRequires: libmpcdec-devel
 BuildRequires: SDL-devel
 BuildRequires: soundtouch-devel
-BuildRequires: swfdec-devel
-#Buildrequires: wavpack-devel
+#BuildRequires: swfdec-devel
+Buildrequires: wavpack-devel
 BuildRequires: xvidcore-devel
 BuildRequires: bzip2-devel
 BuildRequires: mesa-libGLU-devel
 BuildRequires: neon-devel
 BuildRequires: libmms-devel
 BuildRequires: libmusicbrainz-devel
+BuildRequires: libcdaudio-devel
+BuildRequires: jack-audio-connection-kit-devel
+BuildRequires: ladspa-devel
+BuildRequires: mjpegtools-devel
 
 %description
 GStreamer is a streaming media framework, based on graphs of elements which
@@ -56,34 +59,19 @@
 well enough, or the code is not of good enough quality.
 
 
-%package devel
-Summary: Development files for GStreamer Bad Plugins
-Group: Development/Libraries
-Requires: %{name} = %{version}-%{release}
-
-%description devel
-GStreamer is a streaming media framework, based on graphs of elements which
-operate on media data.
-
-This package contains plug-ins that have licensing issues, aren't tested
-well enough, or the code is not of good enough quality.
-
-This package contains development files and documentation.
-
-
 %prep
 %setup -q -n gst-plugins-bad-%{version}
 %patch0 -p1 -b .faad2
-
 ### Use correct soundtouch pkgconfig package name
 %{__perl} -pi.orig -e 's|libSoundTouch|soundtouch-1.0|g' configure
 
+
 %build
 %configure \
     --with-package-name=&quot;gst-plugins-bad %{desktop_vendor} rpm&quot; \
     --with-package-origin=&quot;<A HREF="http://www.rpmforge.net/">http://www.rpmforge.net/</A>&quot; \
     --enable-debug \
-    --disable-gtk-doc
+    --disable-static
 %{__make} %{?_smp_mflags}
 
 
@@ -93,8 +81,8 @@
 %find_lang gst-plugins-bad-%{majorminor}
 
 # Clean out files that should not be part of the rpm.
-%{__rm} -f %{buildroot}%{_libdir}/gstreamer-%{majorminor}/*.{a,la}
-%{__rm} -f %{buildroot}%{_libdir}/*.{a,la}
+%{__rm} -f %{buildroot}%{_libdir}/gstreamer-%{majorminor}/*.la
+%{__rm} -f %{buildroot}%{_libdir}/*.la
 
 
 %clean
@@ -102,44 +90,65 @@
 
 
 %files -f gst-plugins-bad-%{majorminor}.lang
-%defattr(-, root, root, 0755)
+%defattr(-,root,root,-)
 %doc AUTHORS COPYING README REQUIREMENTS
-
 # Plugins without external dependencies
 %{_libdir}/gstreamer-%{majorminor}/libgstcdxaparse.so
+%{_libdir}/gstreamer-%{majorminor}/libgstdeinterlace.so
+%{_libdir}/gstreamer-%{majorminor}/libgstfilter.so
 %{_libdir}/gstreamer-%{majorminor}/libgstfreeze.so
+%{_libdir}/gstreamer-%{majorminor}/libgsth264parse.so
 %{_libdir}/gstreamer-%{majorminor}/libgstmodplug.so
+%{_libdir}/gstreamer-%{majorminor}/libgstmultifile.so
+%{_libdir}/gstreamer-%{majorminor}/libgstnsf.so
+%{_libdir}/gstreamer-%{majorminor}/libgstnuvdemux.so
 %{_libdir}/gstreamer-%{majorminor}/libgstqtdemux.so
+%{_libdir}/gstreamer-%{majorminor}/libgstreplaygain.so
+%{_libdir}/gstreamer-%{majorminor}/libgstspectrum.so
 %{_libdir}/gstreamer-%{majorminor}/libgstspeed.so
 %{_libdir}/gstreamer-%{majorminor}/libgsttrm.so
 %{_libdir}/gstreamer-%{majorminor}/libgsttta.so
+%{_libdir}/gstreamer-%{majorminor}/libgstvideocrop.so
+%{_libdir}/gstreamer-%{majorminor}/libgstvideoparse.so
 %{_libdir}/gstreamer-%{majorminor}/libgstxingheader.so
-
 # Plugins with external dependencies
+%{_libdir}/gstreamer-%{majorminor}/libgstalsaspdif.so
 %{_libdir}/gstreamer-%{majorminor}/libgstbz2.so
+%{_libdir}/gstreamer-%{majorminor}/libgstcdaudio.so
 %{_libdir}/gstreamer-%{majorminor}/libgstdfbvideosink.so
 %{_libdir}/gstreamer-%{majorminor}/libgstdtsdec.so
+%{_libdir}/gstreamer-%{majorminor}/libgstdvbsrc.so
 %{_libdir}/gstreamer-%{majorminor}/libgstfaac.so
 %{_libdir}/gstreamer-%{majorminor}/libgstfaad.so
 %{_libdir}/gstreamer-%{majorminor}/libgstglimagesink.so
 %{_libdir}/gstreamer-%{majorminor}/libgstgsm.so
+%{_libdir}/gstreamer-%{majorminor}/libgstjack.so
+%{_libdir}/gstreamer-%{majorminor}/libgstladspa.so
 %{_libdir}/gstreamer-%{majorminor}/libgstmms.so
 %{_libdir}/gstreamer-%{majorminor}/libgstmusepack.so
 %{_libdir}/gstreamer-%{majorminor}/libgstneonhttpsrc.so
 %{_libdir}/gstreamer-%{majorminor}/libgstpitch.so
+%{_libdir}/gstreamer-%{majorminor}/libgstrfbsrc.so
 %{_libdir}/gstreamer-%{majorminor}/libgstsdlvideosink.so
-%{_libdir}/gstreamer-%{majorminor}/libgstswfdec.so
-%{_libdir}/gstreamer-%{majorminor}/libgstvideo4linux2.so
-#%{_libdir}/gstreamer-%{majorminor}/libgstwavpack.so
+#%{_libdir}/gstreamer-%{majorminor}/libgstswfdec.so
+%{_libdir}/gstreamer-%{majorminor}/libgstwavpack.so
 %{_libdir}/gstreamer-%{majorminor}/libgstxvid.so
+%{_libdir}/gstreamer-%{majorminor}/libgsty4menc.so
 
 
-%files devel
-%defattr(-, root, root, 0755)
-#doc %{_datadir}/gtk-doc/html/gst-plugins-bad-plugins-%{majorminor}/
+%changelog
+* Wed Mar 30 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.10.4-1
+- Update to 0.10.4 for F7.
+- Disable swfdec... does anything/anyone even use it here? Once it stabilizes
+  somewhat more, maybe then it'll be worth re-enabling.
+- Re-enable wavpack, it works again now.
+- Enable libcdaudio support.
+- Enable jack support.
+- Enable ladspa support.
+- Enable mpeg2enc (mjpegtools) support.
+- Remove no longer present libgstvideo4linux2.so and add all new plugins.
+- Remove all gtk-doc references (all gone...?) and devel package too.
 
-
-%changelog
 * Tue Jan  9 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.10.3-3
 - Update faad2 patch to also update the plugin sources, not just configure.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004250.html">[svn] r5451 - in trunk/rpms: dkms-ipw3945 ipw3945-firmware
</A></li>
	<LI>Next message: <A HREF="004252.html">[svn] r5453 - trunk/rpms/gstreamer-plugins-ugly
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4251">[ date ]</a>
              <a href="thread.html#4251">[ thread ]</a>
              <a href="subject.html#4251">[ subject ]</a>
              <a href="author.html#4251">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
