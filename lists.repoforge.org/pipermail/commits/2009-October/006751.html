<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r7955 - in trunk/rpms: cvs2svn nautilus-python perl-AnyEvent	perl-CGI-FormBuilder perl-Image-Info perl-Jifty	perl-Jifty-Plugin-OpenID perl-LWPx-ParanoidAgent	perl-Lingua-Romana-Perligata perl-SQL-Abstract	perl-SQL-Statement perl-SQL-Translator	perl-Spreadsheet-ParseExcel perl-Switch perl-Sys-Filesystem	perl-Test-Compile perl-Test-Differences perl-Test-Script	perl-Test-WWW-Selenium perl-Text-CSV perl-Text-CSV_XS	perl-URI-ParseSearchString perl-Variable-Magic	perl-WebService-Prowl perl-XML-LibXML perl-XML-RSS	perl-Yahoo-Marketing perl-lib-abs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7955%20-%20in%20trunk/rpms%3A%20cvs2svn%20nautilus-python%20perl-AnyEvent%0A%09perl-CGI-FormBuilder%20perl-Image-Info%20perl-Jifty%0A%09perl-Jifty-Plugin-OpenID%20perl-LWPx-ParanoidAgent%0A%09perl-Lingua-Romana-Perligata%20perl-SQL-Abstract%0A%09perl-SQL-Statement%20perl-SQL-Translator%0A%09perl-Spreadsheet-ParseExcel%20perl-Switch%20perl-Sys-Filesystem%0A%09perl-Test-Compile%20perl-Test-Differences%20perl-Test-Script%0A%09perl-Test-WWW-Selenium%20perl-Text-CSV%20perl-Text-CSV_XS%0A%09perl-URI-ParseSearchString%20perl-Variable-Magic%0A%09perl-WebService-Prowl%20perl-XML-LibXML%20perl-XML-RSS%0A%09perl-Yahoo-Marketing%20perl-lib-abs&In-Reply-To=%3C200910261757.n9QHv29b011771%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006750.html">
   <LINK REL="Next"  HREF="006752.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r7955 - in trunk/rpms: cvs2svn nautilus-python perl-AnyEvent	perl-CGI-FormBuilder perl-Image-Info perl-Jifty	perl-Jifty-Plugin-OpenID perl-LWPx-ParanoidAgent	perl-Lingua-Romana-Perligata perl-SQL-Abstract	perl-SQL-Statement perl-SQL-Translator	perl-Spreadsheet-ParseExcel perl-Switch perl-Sys-Filesystem	perl-Test-Compile perl-Test-Differences perl-Test-Script	perl-Test-WWW-Selenium perl-Text-CSV perl-Text-CSV_XS	perl-URI-ParseSearchString perl-Variable-Magic	perl-WebService-Prowl perl-XML-LibXML perl-XML-RSS	perl-Yahoo-Marketing perl-lib-abs</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7955%20-%20in%20trunk/rpms%3A%20cvs2svn%20nautilus-python%20perl-AnyEvent%0A%09perl-CGI-FormBuilder%20perl-Image-Info%20perl-Jifty%0A%09perl-Jifty-Plugin-OpenID%20perl-LWPx-ParanoidAgent%0A%09perl-Lingua-Romana-Perligata%20perl-SQL-Abstract%0A%09perl-SQL-Statement%20perl-SQL-Translator%0A%09perl-Spreadsheet-ParseExcel%20perl-Switch%20perl-Sys-Filesystem%0A%09perl-Test-Compile%20perl-Test-Differences%20perl-Test-Script%0A%09perl-Test-WWW-Selenium%20perl-Text-CSV%20perl-Text-CSV_XS%0A%09perl-URI-ParseSearchString%20perl-Variable-Magic%0A%09perl-WebService-Prowl%20perl-XML-LibXML%20perl-XML-RSS%0A%09perl-Yahoo-Marketing%20perl-lib-abs&In-Reply-To=%3C200910261757.n9QHv29b011771%40surya.karan.org%3E"
       TITLE="[svn] r7955 - in trunk/rpms: cvs2svn nautilus-python perl-AnyEvent	perl-CGI-FormBuilder perl-Image-Info perl-Jifty	perl-Jifty-Plugin-OpenID perl-LWPx-ParanoidAgent	perl-Lingua-Romana-Perligata perl-SQL-Abstract	perl-SQL-Statement perl-SQL-Translator	perl-Spreadsheet-ParseExcel perl-Switch perl-Sys-Filesystem	perl-Test-Compile perl-Test-Differences perl-Test-Script	perl-Test-WWW-Selenium perl-Text-CSV perl-Text-CSV_XS	perl-URI-ParseSearchString perl-Variable-Magic	perl-WebService-Prowl perl-XML-LibXML perl-XML-RSS	perl-Yahoo-Marketing perl-lib-abs">packagers at lists.rpmforge.net
       </A><BR>
    <I>Mon Oct 26 18:57:02 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006750.html">[svn] r7954 - trunk/rpms/icinga
</A></li>
        <LI>Next message: <A HREF="006752.html">[svn] r7956 - trunk/rpms/ndoutils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6751">[ date ]</a>
              <a href="thread.html#6751">[ thread ]</a>
              <a href="subject.html#6751">[ subject ]</a>
              <a href="author.html#6751">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: shuff
Date: 2009-10-26 17:57:00 +0000 (Mon, 26 Oct 2009)
New Revision: 7955

Modified:
   trunk/rpms/cvs2svn/cvs2svn.spec
   trunk/rpms/nautilus-python/nautilus-python.spec
   trunk/rpms/perl-AnyEvent/perl-AnyEvent.spec
   trunk/rpms/perl-CGI-FormBuilder/perl-CGI-FormBuilder.spec
   trunk/rpms/perl-Image-Info/perl-Image-Info.spec
   trunk/rpms/perl-Jifty-Plugin-OpenID/perl-Jifty-Plugin-OpenID.spec
   trunk/rpms/perl-Jifty/perl-Jifty.spec
   trunk/rpms/perl-LWPx-ParanoidAgent/perl-LWPx-ParanoidAgent.spec
   trunk/rpms/perl-Lingua-Romana-Perligata/perl-Lingua-Romana-Perligata.spec
   trunk/rpms/perl-SQL-Abstract/perl-SQL-Abstract.spec
   trunk/rpms/perl-SQL-Statement/perl-SQL-Statement.spec
   trunk/rpms/perl-SQL-Translator/perl-SQL-Translator.spec
   trunk/rpms/perl-Spreadsheet-ParseExcel/perl-Spreadsheet-ParseExcel.spec
   trunk/rpms/perl-Switch/perl-Switch.spec
   trunk/rpms/perl-Sys-Filesystem/perl-Sys-Filesystem.spec
   trunk/rpms/perl-Test-Compile/perl-Test-Compile.spec
   trunk/rpms/perl-Test-Differences/perl-Test-Differences.spec
   trunk/rpms/perl-Test-Script/perl-Test-Script.spec
   trunk/rpms/perl-Test-WWW-Selenium/perl-Test-WWW-Selenium.spec
   trunk/rpms/perl-Text-CSV/perl-Text-CSV.spec
   trunk/rpms/perl-Text-CSV_XS/perl-Text-CSV_XS.spec
   trunk/rpms/perl-URI-ParseSearchString/perl-URI-ParseSearchString.spec
   trunk/rpms/perl-Variable-Magic/perl-Variable-Magic.spec
   trunk/rpms/perl-WebService-Prowl/perl-WebService-Prowl.spec
   trunk/rpms/perl-XML-LibXML/perl-XML-LibXML.spec
   trunk/rpms/perl-XML-RSS/perl-XML-RSS.spec
   trunk/rpms/perl-Yahoo-Marketing/perl-Yahoo-Marketing.spec
   trunk/rpms/perl-lib-abs/perl-lib-abs.spec
Log:
hardcoded filter macros so that these packages will build on buildsystems without rpm-macros-rpmforge installed; once rpm-macros-rpmforge is installed on all buildsystems, revert this change


Modified: trunk/rpms/cvs2svn/cvs2svn.spec
===================================================================
--- trunk/rpms/cvs2svn/cvs2svn.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/cvs2svn/cvs2svn.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 
 %define python_sitearch %(%{__python} -c 'from distutils import sysconfig; print sysconfig.get_python_lib(1)')
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 Summary: converts CVS repository to Subversion
 Name: cvs2svn
 Version: 2.3.0
@@ -20,7 +54,7 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildRequires: python &gt;= 2.4, python-devel &gt;= 2.4
-BuildRequires: rpm-macros-rpmforge
+#BuildRequires: rpm-macros-rpmforge
 Requires: coreutils
 Requires: cvs
 Requires: gdbm

Modified: trunk/rpms/nautilus-python/nautilus-python.spec
===================================================================
--- trunk/rpms/nautilus-python/nautilus-python.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/nautilus-python/nautilus-python.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -9,6 +9,40 @@
 %define python_version %(%{__python} -c 'from distutils import sysconfig; print sysconfig.get_python_version()')
 %define nautilus_extensiondir %(pkg-config --variable=extensiondir libnautilus-extension)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 Summary: Python bindings for Nautilus
 Name: nautilus-python
 Version: 0.5.0
@@ -27,7 +61,7 @@
 BuildRequires: pkgconfig &gt;= 0.9.0
 BuildRequires: pygtk2-devel &gt;= 2.8
 BuildRequires: python-devel &gt;= 2.3
-BuildRequires: rpm-macros-rpmforge
+#BuildRequires: rpm-macros-rpmforge
 BuildRequires: /bin/sed
 BuildRequires: /usr/bin/find
 BuildRequires: /usr/bin/xargs

Modified: trunk/rpms/perl-AnyEvent/perl-AnyEvent.spec
===================================================================
--- trunk/rpms/perl-AnyEvent/perl-AnyEvent.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-AnyEvent/perl-AnyEvent.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -6,6 +6,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name AnyEvent
 
 Summary: Framework for multiple event loops

Modified: trunk/rpms/perl-CGI-FormBuilder/perl-CGI-FormBuilder.spec
===================================================================
--- trunk/rpms/perl-CGI-FormBuilder/perl-CGI-FormBuilder.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-CGI-FormBuilder/perl-CGI-FormBuilder.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name CGI-FormBuilder
 
 Summary: Easily generate and process stateful forms
@@ -26,7 +60,7 @@
 BuildRequires: perl(HTML::Template) &gt;= 2.06
 BuildRequires: perl(Template) &gt;= 2.08
 BuildRequires: perl(Text::Template) &gt;= 1.43
-BuildRequires: rpm-macros-rpmforge
+# BuildRequires: rpm-macros-rpmforge
 Requires: perl
 Requires: perl(CGI)
 Requires: perl(CGI::FastTemplate) &gt;= 1.09

Modified: trunk/rpms/perl-Image-Info/perl-Image-Info.spec
===================================================================
--- trunk/rpms/perl-Image-Info/perl-Image-Info.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Image-Info/perl-Image-Info.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Image-Info
 
 Summary: Extract meta information from image files
@@ -21,7 +55,7 @@
 BuildArch: noarch
 BuildRequires: perl &gt;= 1:5.6.2
 BuildRequires: perl(ExtUtils::MakeMaker)
-BuildRequires: rpm-macros-rpmforge
+# BuildRequires: rpm-macros-rpmforge
 #BuildRequires: perl(Test::More) &gt;= 0.62
 Requires: perl &gt;= 1:5.6.2
 

Modified: trunk/rpms/perl-Jifty/perl-Jifty.spec
===================================================================
--- trunk/rpms/perl-Jifty/perl-Jifty.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Jifty/perl-Jifty.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Jifty
 
 Summary: Perl package that implements an application framework
@@ -143,7 +177,7 @@
 BuildRequires: perl(version)
 BuildRequires: perl(YAML) &gt;= 0.35
 BuildRequires: perl(YAML::Syck) &gt;= 0.71
-BuildRequires: rpm-macros-rpmforge
+# BuildRequires: rpm-macros-rpmforge
 Requires: perl &gt;= 2:5.8.3
 Requires: perl(Cache::Simple::TimedExpiry)
 Requires: perl(Number::RecordLocator)

Modified: trunk/rpms/perl-Jifty-Plugin-OpenID/perl-Jifty-Plugin-OpenID.spec
===================================================================
--- trunk/rpms/perl-Jifty-Plugin-OpenID/perl-Jifty-Plugin-OpenID.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Jifty-Plugin-OpenID/perl-Jifty-Plugin-OpenID.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Jifty-Plugin-OpenID
 
 Summary: Provides OpenID authentication for your jifty app
@@ -25,7 +59,7 @@
 BuildRequires: perl(Jifty)
 BuildRequires: perl(LWPx::ParanoidAgent)
 BuildRequires: perl(Net::OpenID::Consumer)
-BuildRequires: rpm-macros-rpmforge
+# BuildRequires: rpm-macros-rpmforge
 
 # we don't want to either provide or require anything from _docdir, per policy
 %filter_provides_in %{_docdir}

Modified: trunk/rpms/perl-LWPx-ParanoidAgent/perl-LWPx-ParanoidAgent.spec
===================================================================
--- trunk/rpms/perl-LWPx-ParanoidAgent/perl-LWPx-ParanoidAgent.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-LWPx-ParanoidAgent/perl-LWPx-ParanoidAgent.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name LWPx-ParanoidAgent
 
 Summary: subclass of LWP::UserAgent that protects you from harm
@@ -23,7 +57,7 @@
 BuildRequires: perl(LWP::UserAgent)
 BuildRequires: perl(Net::DNS)
 BuildRequires: perl(Time::HiRes)
-BuildRequires: rpm-macros-rpmforge
+# BuildRequires: rpm-macros-rpmforge
 
 # we don't want to either provide or require anything from _docdir, per policy
 %filter_provides_in %{_docdir}

Modified: trunk/rpms/perl-Lingua-Romana-Perligata/perl-Lingua-Romana-Perligata.spec
===================================================================
--- trunk/rpms/perl-Lingua-Romana-Perligata/perl-Lingua-Romana-Perligata.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Lingua-Romana-Perligata/perl-Lingua-Romana-Perligata.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Lingua-Romana-Perligata
 
 Summary: Perl in Latin
@@ -22,7 +56,7 @@
 BuildRequires: perl
 BuildRequires: perl(ExtUtils::MakeMaker)
 BuildRequires: perl(Filter::Util::Call)
-BuildRequires: rpm-macros-rpmforge
+# BuildRequires: rpm-macros-rpmforge
 Requires: perl
 Requires: perl(Filter::Util::Call)
 

Modified: trunk/rpms/perl-SQL-Abstract/perl-SQL-Abstract.spec
===================================================================
--- trunk/rpms/perl-SQL-Abstract/perl-SQL-Abstract.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-SQL-Abstract/perl-SQL-Abstract.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -4,6 +4,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name SQL-Abstract
 
 Name: perl-SQL-Abstract

Modified: trunk/rpms/perl-SQL-Statement/perl-SQL-Statement.spec
===================================================================
--- trunk/rpms/perl-SQL-Statement/perl-SQL-Statement.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-SQL-Statement/perl-SQL-Statement.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name SQL-Statement
 
 Summary: SQL parsing and processing engine

Modified: trunk/rpms/perl-SQL-Translator/perl-SQL-Translator.spec
===================================================================
--- trunk/rpms/perl-SQL-Translator/perl-SQL-Translator.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-SQL-Translator/perl-SQL-Translator.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name SQL-Translator
 
 Summary: SQL DDL transformations and more

Modified: trunk/rpms/perl-Spreadsheet-ParseExcel/perl-Spreadsheet-ParseExcel.spec
===================================================================
--- trunk/rpms/perl-Spreadsheet-ParseExcel/perl-Spreadsheet-ParseExcel.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Spreadsheet-ParseExcel/perl-Spreadsheet-ParseExcel.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Spreadsheet-ParseExcel
 
 Summary: Get information from Excel file

Modified: trunk/rpms/perl-Switch/perl-Switch.spec
===================================================================
--- trunk/rpms/perl-Switch/perl-Switch.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Switch/perl-Switch.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Switch
 
 Summary: Perl module that implements a switch statement

Modified: trunk/rpms/perl-Sys-Filesystem/perl-Sys-Filesystem.spec
===================================================================
--- trunk/rpms/perl-Sys-Filesystem/perl-Sys-Filesystem.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Sys-Filesystem/perl-Sys-Filesystem.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Sys-Filesystem
 
 Summary: Interface to filesystem names and their properties

Modified: trunk/rpms/perl-Test-Compile/perl-Test-Compile.spec
===================================================================
--- trunk/rpms/perl-Test-Compile/perl-Test-Compile.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Test-Compile/perl-Test-Compile.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Test-Compile
 
 Summary: check whether Perl module files compile correctly

Modified: trunk/rpms/perl-Test-Differences/perl-Test-Differences.spec
===================================================================
--- trunk/rpms/perl-Test-Differences/perl-Test-Differences.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Test-Differences/perl-Test-Differences.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Test-Differences
 
 Summary: Test strings and data structures and show differences if not ok

Modified: trunk/rpms/perl-Test-Script/perl-Test-Script.spec
===================================================================
--- trunk/rpms/perl-Test-Script/perl-Test-Script.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Test-Script/perl-Test-Script.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Test-Script
 
 Summary: Cross-platform basic tests for scripts

Modified: trunk/rpms/perl-Test-WWW-Selenium/perl-Test-WWW-Selenium.spec
===================================================================
--- trunk/rpms/perl-Test-WWW-Selenium/perl-Test-WWW-Selenium.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Test-WWW-Selenium/perl-Test-WWW-Selenium.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Test-WWW-Selenium
 
 Summary: Test applications using Selenium Remote Control

Modified: trunk/rpms/perl-Text-CSV/perl-Text-CSV.spec
===================================================================
--- trunk/rpms/perl-Text-CSV/perl-Text-CSV.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Text-CSV/perl-Text-CSV.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Text-CSV
 
 Summary: comma-separated values manipulator (using XS or PurePerl)

Modified: trunk/rpms/perl-Text-CSV_XS/perl-Text-CSV_XS.spec
===================================================================
--- trunk/rpms/perl-Text-CSV_XS/perl-Text-CSV_XS.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Text-CSV_XS/perl-Text-CSV_XS.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Text-CSV_XS
 
 Summary: Comma-separated values manipulation routines

Modified: trunk/rpms/perl-URI-ParseSearchString/perl-URI-ParseSearchString.spec
===================================================================
--- trunk/rpms/perl-URI-ParseSearchString/perl-URI-ParseSearchString.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-URI-ParseSearchString/perl-URI-ParseSearchString.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name URI-ParseSearchString
 
 Summary: Parse Apache referer logs and extract search engine query strings

Modified: trunk/rpms/perl-Variable-Magic/perl-Variable-Magic.spec
===================================================================
--- trunk/rpms/perl-Variable-Magic/perl-Variable-Magic.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Variable-Magic/perl-Variable-Magic.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Variable-Magic
 
 Summary: Associate user-defined magic to variables from Perl

Modified: trunk/rpms/perl-WebService-Prowl/perl-WebService-Prowl.spec
===================================================================
--- trunk/rpms/perl-WebService-Prowl/perl-WebService-Prowl.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-WebService-Prowl/perl-WebService-Prowl.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name WebService-Prowl
 
 Summary: a interface to Prowl Public API

Modified: trunk/rpms/perl-XML-LibXML/perl-XML-LibXML.spec
===================================================================
--- trunk/rpms/perl-XML-LibXML/perl-XML-LibXML.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-XML-LibXML/perl-XML-LibXML.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -8,6 +8,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name XML-LibXML
 
 Summary: Interface to Gnome libxml2 xml parsing and DOM library

Modified: trunk/rpms/perl-XML-RSS/perl-XML-RSS.spec
===================================================================
--- trunk/rpms/perl-XML-RSS/perl-XML-RSS.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-XML-RSS/perl-XML-RSS.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name XML-RSS
 
 Summary: Creates and updates RSS files

Modified: trunk/rpms/perl-Yahoo-Marketing/perl-Yahoo-Marketing.spec
===================================================================
--- trunk/rpms/perl-Yahoo-Marketing/perl-Yahoo-Marketing.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-Yahoo-Marketing/perl-Yahoo-Marketing.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -5,6 +5,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name Yahoo-Marketing
 
 Summary: Interface for Yahoo! Search Marketing's Web Services

Modified: trunk/rpms/perl-lib-abs/perl-lib-abs.spec
===================================================================
--- trunk/rpms/perl-lib-abs/perl-lib-abs.spec	2009-10-26 16:12:02 UTC (rev 7954)
+++ trunk/rpms/perl-lib-abs/perl-lib-abs.spec	2009-10-26 17:57:00 UTC (rev 7955)
@@ -7,6 +7,40 @@
 %define perl_vendorlib %(eval &quot;`%{__perl} -V:installvendorlib`&quot;; echo $installvendorlib)
 %define perl_vendorarch %(eval &quot;`%{__perl} -V:installvendorarch`&quot;; echo $installvendorarch)
 
+### BEGIN KLUDGE
+## temporary fix until package builders install rpm-macros-rpmforge in their
+## build environments; once that's done, remove the kludge
+## 2009-10-26 shuff
+
+# prevent anything matching from being scanned for provides
+%define filter_provides_in(P) %{expand: \
+%global __filter_prov_cmd %{?__filter_prov_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# prevent anything matching from being scanned for requires
+%define filter_requires_in(P) %{expand: \
+%global __filter_req_cmd %{?__filter_req_cmd} %{__grep} -v %{-P} '%*' | \
+}
+
+# filter anything matching out of the provides stream
+%define filter_from_provides() %{expand: \
+%global __filter_from_prov %{?__filter_from_prov} | %{__sed} -e '%*' \
+}
+
+# filter anything matching out of the requires stream
+%define filter_from_requires() %{expand: \
+%global __filter_from_req %{?__filter_from_req} | %{__sed} -e '%*' \
+}
+
+# actually set up the filtering bits 
+%define filter_setup %{expand: \
+%global _use_internal_dependency_generator 0 \
+%global __deploop() while read FILE; do /usr/lib/rpm/rpmdeps -%{1} ${FILE}; done | /bin/sort -u \
+%global __find_provides /bin/sh -c &quot;%{?__filter_prov_cmd} %{__deploop P} %{?__filter_from_prov}&quot; \
+%global __find_requires /bin/sh -c &quot;%{?__filter_req_cmd}  %{__deploop R} %{?__filter_from_req}&quot; \
+}
+### END KLUDGE
+
 %define real_name lib-abs
 
 Summary: The same as C&lt;lib&gt;, but makes relative path absolute
@@ -25,7 +59,7 @@
 BuildRequires: perl(ExtUtils::MakeMaker)
 BuildRequires: perl(Test::More)
 BuildRequires: perl(Cwd) &gt;= 3.12
-BuildRequires: rpm-macros-rpmforge
+# BuildRequires: rpm-macros-rpmforge
 
 %filter_from_requires /^perl(module2)/d
 %filter_setup


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006750.html">[svn] r7954 - trunk/rpms/icinga
</A></li>
	<LI>Next message: <A HREF="006752.html">[svn] r7956 - trunk/rpms/ndoutils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6751">[ date ]</a>
              <a href="thread.html#6751">[ thread ]</a>
              <a href="subject.html#6751">[ subject ]</a>
              <a href="author.html#6751">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
