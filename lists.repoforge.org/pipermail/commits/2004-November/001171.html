<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r2365 - in trunk/rpms: distcc dnsmasq doodle jpegpixi	keepalived lftp liferea mixxx subversion ucarp webmin yam
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2365%20-%20in%20trunk/rpms%3A%20distcc%20dnsmasq%20doodle%20jpegpixi%0A%09keepalived%20lftp%20liferea%20mixxx%20subversion%20ucarp%20webmin%20yam&In-Reply-To=%3C20041101043409.2056017F74%40web22.us.megagiga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001170.html">
   <LINK REL="Next"  HREF="001172.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r2365 - in trunk/rpms: distcc dnsmasq doodle jpegpixi	keepalived lftp liferea mixxx subversion ucarp webmin yam</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2365%20-%20in%20trunk/rpms%3A%20distcc%20dnsmasq%20doodle%20jpegpixi%0A%09keepalived%20lftp%20liferea%20mixxx%20subversion%20ucarp%20webmin%20yam&In-Reply-To=%3C20041101043409.2056017F74%40web22.us.megagiga.com%3E"
       TITLE="[SVN] r2365 - in trunk/rpms: distcc dnsmasq doodle jpegpixi	keepalived lftp liferea mixxx subversion ucarp webmin yam">svn-commits at rpmforge.net
       </A><BR>
    <I>Mon Nov  1 05:34:09 CET 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001170.html">[SVN] r2364 - in trunk/rpms: dillo gaim galeon putty tvtime
</A></li>
        <LI>Next message: <A HREF="001172.html">[SVN] r2366 - trunk/rpms/clamav
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1171">[ date ]</a>
              <a href="thread.html#1171">[ thread ]</a>
              <a href="subject.html#1171">[ subject ]</a>
              <a href="author.html#1171">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2004-11-01 05:34:07 +0100 (Mon, 01 Nov 2004)
New Revision: 2365

Modified:
   trunk/rpms/distcc/distcc.spec
   trunk/rpms/dnsmasq/dnsmasq.spec
   trunk/rpms/doodle/doodle.spec
   trunk/rpms/jpegpixi/jpegpixi.spec
   trunk/rpms/keepalived/keepalived.spec
   trunk/rpms/lftp/lftp.spec
   trunk/rpms/liferea/liferea.spec
   trunk/rpms/mixxx/mixxx.spec
   trunk/rpms/subversion/subversion.spec
   trunk/rpms/ucarp/ucarp.spec
   trunk/rpms/webmin/webmin.spec
   trunk/rpms/yam/yam.spec
Log:
Updated to new release.

Modified: trunk/rpms/distcc/distcc.spec
===================================================================
--- trunk/rpms/distcc/distcc.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/distcc/distcc.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -18,7 +18,7 @@
 
 Summary: Distributed C/C++ compilation client program
 Name: distcc
-Version: 2.17
+Version: 2.18
 Release: 1
 License: GPL
 Group: Development/Tools
@@ -30,13 +30,12 @@
 Source: <A HREF="http://samba.org/ftp/distcc/distcc-%{version">http://samba.org/ftp/distcc/distcc-%{version</A>}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
-%{!?_without_gtk2:BuildRequires: gtk2-devel &gt;= 2.0}
+%{!?_without_gtk2:BuildRequires: gtk2-devel &gt;= 2.0, libgnome-devel, libgnomeui-devel}
 Requires: gcc, gcc-c++
 %{?fc2:Requires: compat-gcc, compat-gcc-c++, gcc34}
 %{?fc1:Requires: compat-gcc, compat-gcc-c++, gcc32}
 %{?rh9:Requires: compat-gcc, compat-gcc-c++}
 %{?rh8:Requires: compat-gcc, compat-gcc-c++}
-BuildRequires: libgnome-devel, libgnomeui-devel
 %{!?_without_freedesktop:BuildRequires: desktop-file-utils}
 
 %description
@@ -254,7 +253,7 @@
 %if %{!?_without_gtk2:1}0
 	%{__install} -D -m0644 gnome/distccmon-gnome-icon.png %{buildroot}%{_datadir}/pixmaps/distccmon-gnome.png
 	%{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-	desktop-file-install --vendor gnome                \
+	desktop-file-install --vendor %{desktop_vendor}    \
 		--add-category X-Red-Hat-Base              \
 		--dir %{buildroot}%{_datadir}/applications \
 		distccmon-gnome.desktop
@@ -322,6 +321,9 @@
 %endif
 
 %changelog
+* Mon Nov 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2.18-1
+- Updated to release 2.18.
+
 * Sun Aug 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2.17-1
 - Updated to release 2.17.
 

Modified: trunk/rpms/dnsmasq/dnsmasq.spec
===================================================================
--- trunk/rpms/dnsmasq/dnsmasq.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/dnsmasq/dnsmasq.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -4,7 +4,7 @@
 
 Summary: Lightweight caching nameserver with integrated DHCP server
 Name: dnsmasq
-Version: 2.15
+Version: 2.16
 Release: 1
 License: GPL
 Group: System Environment/Daemons
@@ -156,6 +156,9 @@
 %{_localstatedir}/lib/misc/
 
 %changelog
+* Mon Nov 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2.16-1
+- Updated to release 2.16.
+
 * Wed Sep 22 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2.15-1
 - Updated to release 2.15.
 

Modified: trunk/rpms/doodle/doodle.spec
===================================================================
--- trunk/rpms/doodle/doodle.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/doodle/doodle.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -3,7 +3,7 @@
 
 Summary: Searches your hard drive for files using pattern matching on meta-data
 Name: doodle
-Version: 0.4.0
+Version: 0.5.0
 Release: 1
 License: GPL
 Group: Applications/File
@@ -44,11 +44,12 @@
 %install
 %{__rm} -rf %{buildroot}
 %makeinstall
+%find_lang %{name}
 
 %clean
 %{__rm} -rf %{buildroot}
 
-%files
+%files -f %{name}.lang
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog COPYING INSTALL NEWS README
 %doc %{_mandir}/man1/doodle.1*
@@ -63,6 +64,9 @@
 %exclude %{_libdir}/libdoodle.la
 
 %changelog
+* Sun Oct 10 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.5.0-1
+- Updated to release 0.5.0.
+
 * Wed Sep 22 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4.0-1
 - Updated to release 0.4.0.
 

Modified: trunk/rpms/jpegpixi/jpegpixi.spec
===================================================================
--- trunk/rpms/jpegpixi/jpegpixi.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/jpegpixi/jpegpixi.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -4,7 +4,7 @@
 
 Summary: JPEG pixel interpolator
 Name: jpegpixi
-Version: 1.0.1
+Version: 1.0.3
 Release: 1
 License: GPL
 Group: Applications/Multimedia
@@ -41,10 +41,16 @@
 %files -f %{name}.lang
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog COPYING NEWS README*
-%doc %{_mandir}/man?/*
-%{_bindir}/*
+%doc %{_mandir}/man1/jpeg*.1*
+%{_bindir}/jpeg*
 
 %changelog
+* Mon Nov 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0.3-1
+- Updated to release 1.0.3.
+
+* Sat Oct 09 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0.2-1
+- Updated to release 1.0.2.
+
 * Tue Oct 05 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0.1-1
 - Updated to release 1.0.1.
 

Modified: trunk/rpms/keepalived/keepalived.spec
===================================================================
--- trunk/rpms/keepalived/keepalived.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/keepalived/keepalived.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -2,11 +2,12 @@
 # Authority: dag
 
 %{?dist: %{expand: %%define %dist 1}}
+%{!?kernel:%define kernel %(rpm --quiet -q kernel-source --qf '%{RPMTAG_VERSION}-%{RPMTAG_RELEASE}' | tail -1)}
 
 Summary: HA monitor built upon LVS, VRRP and services poller
 Name: keepalived
 Version: 1.1.7
-Release: 1
+Release: 2
 License: GPL
 Group: Applications/System
 URL: <A HREF="http://keepalived.sourceforge.net/">http://keepalived.sourceforge.net/</A>
@@ -44,7 +45,8 @@
 %{?rh9:export CPPFLAGS=&quot;-I/usr/kerberos/include&quot;}
 %configure \
 %{?el3:--includedir=&quot;/usr/kerberos/include&quot;} \
-%{?rh9:--includedir=&quot;/usr/kerberos/include&quot;}
+%{?rh9:--includedir=&quot;/usr/kerberos/include&quot;} \
+	--with-kernel-dir=&quot;/lib/modules/%{kernel}/build&quot;
 %{__make} %{?_smp_mflags}
 
 %install
@@ -77,6 +79,9 @@
 %{_sbindir}/keepalived
 
 %changelog
+* Sun Oct 17 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.7-2
+- Fixes to build with kernel IPVS support. (Tim Verhoeven)
+
 * Fri Sep 24 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.7-1
 - Updated to release 1.1.7. (Mathieu Lubrano)
 

Modified: trunk/rpms/lftp/lftp.spec
===================================================================
--- trunk/rpms/lftp/lftp.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/lftp/lftp.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -7,7 +7,7 @@
 
 Summary: Sophisticated file transfer program
 Name: lftp
-Version: 3.0.9
+Version: 3.0.10
 Release: 1
 License: GPL
 Group: Applications/Internet
@@ -61,6 +61,9 @@
 %{_libdir}/lftp/
 
 %changelog
+* Sun Oct 31 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 3.0.10-1
+- Updated to release 3.0.10.
+
 * Wed Sep 22 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 3.0.9-1
 - Updated to release 3.0.9.
 

Modified: trunk/rpms/liferea/liferea.spec
===================================================================
--- trunk/rpms/liferea/liferea.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/liferea/liferea.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -5,7 +5,7 @@
 
 Summary: RSS/RDF feed reader
 Name: liferea
-Version: 0.6.0
+Version: 0.6.1
 Release: 1
 License: GPL
 Group: Applications/Internet
@@ -28,7 +28,7 @@
 using GtkHTML.
 
 %prep
-%setup -n %{name}-%{version}
+%setup -n liferea-%{version}
 
 %{__cat} &lt;&lt;'EOF' &gt;liferea.sh
 #!/bin/bash
@@ -39,6 +39,7 @@
 [ -f &quot;$MOZILLA_FIVE_HOME/chrome/comm.jar&quot; ] || export MOZILLA_FIVE_HOME=&quot;%{_libdir}/mozilla-1.6&quot;
 [ -f &quot;$MOZILLA_FIVE_HOME/chrome/comm.jar&quot; ] || export MOZILLA_FIVE_HOME=&quot;%{_libdir}/mozilla-1.7&quot;
 [ -f &quot;$MOZILLA_FIVE_HOME/chrome/comm.jar&quot; ] || export MOZILLA_FIVE_HOME=&quot;%{_libdir}/mozilla-1.7.2&quot;
+[ -f &quot;$MOZILLA_FIVE_HOME/chrome/comm.jar&quot; ] || export MOZILLA_FIVE_HOME=&quot;%{_libdir}/mozilla-1.7.3&quot;
 [ -f &quot;$MOZILLA_FIVE_HOME/chrome/comm.jar&quot; ] || export MOZILLA_FIVE_HOME=&quot;%{_libdir}/mozilla-1.8&quot;
 [ -f &quot;$MOZILLA_FIVE_HOME/chrome/comm.jar&quot; ] || export MOZILLA_FIVE_HOME=&quot;%{_libdir}/mozilla&quot;
 
@@ -88,6 +89,9 @@
 %{_libdir}/liferea/*.so*
 
 %changelog
+* Mon Nov 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.6.1-1
+- Updated to release 0.6.1.
+
 * Wed Sep 22 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.6.0-1
 - Updated to release 0.6.0.
 

Modified: trunk/rpms/mixxx/mixxx.spec
===================================================================
--- trunk/rpms/mixxx/mixxx.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/mixxx/mixxx.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -8,10 +8,12 @@
 %{?rh7:%define _without_alsa 1}
 %{?el2:%define _without_alsa 1}
 
+%define desktop_vendor rpmforge
+
 Summary: DJ software emulating an analog mixer with two playback devices
 Name: mixxx
-Version: 1.3.2
-Release: 0
+Version: 1.4.2
+Release: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://mixxx.sourceforge.net/">http://mixxx.sourceforge.net/</A>
@@ -22,7 +24,7 @@
 Source: <A HREF="http://dl.sf.net/mixxx/mixxx-%{version">http://dl.sf.net/mixxx/mixxx-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
-BuildRequires: glibc-devel, XFree86-devel, qt3-devel, glib-devel
+BuildRequires: glibc-devel, XFree86-devel, qt-devel &gt;= 3.0, glib-devel
 BuildRequires: audiofile-devel, libmad-devel, libid3tag-devel
 BuildRequires: libvorbis-devel, libogg-devel, libsndfile-devel
 BuildRequires: portaudio, fftw-devel
@@ -75,13 +77,14 @@
 
 %{__install} -D -m0644 src/icon.png %{buildroot}%{_datadir}/pixmaps/mixxx.png
 
-%if %{!?_without_freedesktop:1}0
+%if %{?_without_freedesktop:1}0
+	%{__install} -D -m0644 mixxx.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/mixxx.desktop
+%else
 	%{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-	desktop-file-install --vendor net \
+	desktop-file-install --vendor %{desktop_vendor}    \
+		--add-category X-Red-Hat-Base              \
 		--dir %{buildroot}%{_datadir}/applications \
 		mixxx.desktop
-%else
-	%{__install} -D -m0644 mixxx.desktop %{buildroot}%{_datadir}/gnome/apps/Multimedia/mixxx.desktop
 %endif
 
 %clean
@@ -90,13 +93,19 @@
 %files
 %defattr(-, root, root, 0755)
 %doc COPYING LICENSE README Mixxx-Manual.pdf
-%{_bindir}/*
+%{_bindir}/mixxx
 %{_datadir}/mixxx/
 %{_datadir}/pixmaps/mixxx.png
-%{!?_without_freedesktop:%{_datadir}/applications/net-mixxx.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-mixxx.desktop}
 %{?_without_freedesktop:%{_datadir}/gnome/apps/Multimedia/mixxx.desktop}
 
 %changelog
+* Mon Nov 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; -  1.4.2-1
+- Updated to release 1.4.2.
+
+* Tue Oct 12 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.4-1
+- Update to 1.4.
+
 * Mon Jun 14 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.3.2-0
 - Update to 1.3.2.
 

Modified: trunk/rpms/subversion/subversion.spec
===================================================================
--- trunk/rpms/subversion/subversion.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/subversion/subversion.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -10,7 +10,7 @@
 
 Summary: Modern Version Control System designed to replace CVS
 Name: subversion
-Version: 1.0.8
+Version: 1.0.9
 Release: 1
 License: BSD
 Group: Development/Tools
@@ -196,6 +196,9 @@
 %{_mandir}/man*/*::*
 
 %changelog
+* Mon Nov 01 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0.9-1
+- Updated to release 1.0.9.
+
 * Thu Sep 23 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0.8-1
 - Updated to release 1.0.8.
 

Modified: trunk/rpms/ucarp/ucarp.spec
===================================================================
--- trunk/rpms/ucarp/ucarp.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/ucarp/ucarp.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -2,7 +2,7 @@
 
 Summary: Common Address Redundancy Protocol (CARP) for Unix
 Name: ucarp
-Version: 1.0
+Version: 1.1
 Release: 1
 License: BSD
 Group: System Environment/Daemons
@@ -90,14 +90,17 @@
 %files -f %{name}.lang
 %defattr(-, root, root, 0755)
 %doc AUTHORS COPYING ChangeLog NEWS README examples/linux/*.sh
-/etc/rc.d/init.d/carp
-/etc/sysconfig/carp/vip-001.conf.example
-%attr(0700, root, root) %config(noreplace) /etc/sysconfig/carp/vip-up
-%attr(0700, root, root) %config(noreplace) /etc/sysconfig/carp/vip-down
+%config %{_initrddir}/carp
+%{_sysconfdir}/sysconfig/carp/vip-001.conf.example
+%attr(0700, root, root) %config(noreplace) %{_sysconfdir}/sysconfig/carp/vip-up
+%attr(0700, root, root) %config(noreplace) %{_sysconfdir}/sysconfig/carp/vip-down
 %{_sbindir}/ucarp
 
 
 %changelog
+* Sun Oct 17 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1-1
+- Updated to release 1.1.
+
 * Fri Jul  9 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-1
 - Initial RPM release.
 

Modified: trunk/rpms/webmin/webmin.spec
===================================================================
--- trunk/rpms/webmin/webmin.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/webmin/webmin.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -26,9 +26,8 @@
 BuildArch: noarch
 AutoReq: 0
 BuildRequires: perl, perl-Net-SSLeay, perl(CGI), perl(Mon::Client)
-BuildRequires: perl(Compress::Zlib)
 Requires: perl, perl(Net::SSLeay), perl(CGI), perl(Mon::Client)
-Requires: perl(Compress::Zlib)
+Requires(post): openssl
 
 %description
 A web-based administration interface for Unix systems. Using Webmin you can
@@ -65,17 +64,21 @@
 
 echo &quot;rpm&quot; &gt;%{buildroot}%{_libexecdir}/webmin/install-type
 
-### Prepare configuration
-export os_type=&quot;redhat-linux&quot;
-export real_os_type=&quot;Redhat Linux&quot;
-%{?fc2:export oscheck=&quot;Redhat Linux Fedora 2&quot;;	export os_version=&quot;11.0&quot;;	export real_os_version=&quot;11.0&quot;}
-%{?fc1:export oscheck=&quot;Redhat Linux Fedora 1&quot;;	export os_version=&quot;10.0&quot;;	export real_os_version=&quot;10.0&quot;}
-%{?el3:export oscheck=&quot;Redhat Linux 3.0AS&quot;;	export os_version=&quot;9.0&quot;;	export real_os_version=&quot;3.0AS&quot;}
-%{?rh9:export oscheck=&quot;Redhat Linux 9&quot;;		export os_version=&quot;9.0&quot;;	export real_os_version=&quot;9.0&quot;}
-%{?rh8:export oscheck=&quot;Redhat Linux 8.0&quot;;	export os_version=&quot;8.0&quot;;	export real_os_version=&quot;8.0&quot;}
-%{?rh7:export oscheck=&quot;Redhat Linux 7.3&quot;;	export os_version=&quot;7.3&quot;;	export real_os_version=&quot;7.3&quot;}
-%{?el2:export oscheck=&quot;Redhat Linux 2.1AS&quot;;	export os_version=&quot;7.2&quot;;	export real_os_version=&quot;2.1AS&quot;}
-%{?rh6:export oscheck=&quot;Redhat Linux 6.2&quot;;	export os_version=&quot;6.2&quot;;	export real_os_version=&quot;6.2&quot;}
+### Prepare configuration (see os_list.txt)
+os_type=&quot;redhat-linux&quot;
+%{?fc3:os_version=&quot;12.0&quot;; real_os_type=&quot;Fedora Core&quot;;      real_os_version=&quot;3&quot;}
+%{?fc2:os_version=&quot;11.0&quot;; real_os_type=&quot;Fedora Core&quot;;      real_os_version=&quot;2&quot;}
+%{?fc1:os_version=&quot;10.0&quot;; real_os_type=&quot;Fedora Core&quot;;      real_os_version=&quot;1&quot;}
+%{?el3:os_version=&quot;9.0&quot;;  real_os_type=&quot;Red Hat Enterprise Linux&quot;; real_os_version=&quot;3&quot;}
+%{?rh9:os_version=&quot;9.0&quot;;  real_os_type=&quot;Red Hat Linux&quot;;    real_os_version=&quot;9&quot;}
+%{?rh8:os_version=&quot;8.0&quot;;  real_os_type=&quot;Red Hat Linux&quot;;    real_os_version=&quot;8.0&quot;}
+%{?rh7:os_version=&quot;7.3&quot;;  real_os_type=&quot;Red Hat Linux&quot;;    real_os_version=&quot;7.3&quot;}
+%{?el2:os_version=&quot;7.2&quot;;  real_os_type=&quot;Red Hat Enterprise Linux&quot;; real_os_version=&quot;2.1&quot;}
+%{?rh6:os_version=&quot;6.2&quot;;  real_os_type=&quot;Red Hat Linux&quot;;    real_os_version=&quot;6.2&quot;}
+%{?yd4:os_version=&quot;11.0&quot;; real_os_type=&quot;Yellow Dog Linux&quot;; real_os_version=&quot;4.0&quot;}
+%{?yd3:os_version=&quot;9.0&quot;;  real_os_type=&quot;Yellow Dog Linux&quot;; real_os_version=&quot;3.0&quot;}
+%{?yd2:os_version=&quot;8.0&quot;;  real_os_type=&quot;Yellow Dog Linux&quot;; real_os_version=&quot;2.3&quot;}
+export os_type os_version real_os_type real_os_version
 
 export config_dir=&quot;%{buildroot}%{_sysconfdir}/webmin&quot;
 export var_dir=&quot;%{_localstatedir}/webmin&quot;
@@ -97,26 +100,24 @@
 %{buildroot}%{_libexecdir}/webmin/setup.sh
 
 ### Clean up buildroot
-%{__perl} -pi -e 's|%{buildroot}||g' %{buildroot}/etc/webmin/{miniserv.conf,start,stop}
+%{__perl} -pi -e 's|%{buildroot}||g' %{buildroot}/etc/webmin/{miniserv.conf,restart,start,stop}
 %{__rm} -f %{buildroot}%{_libexecdir}/webmin/{LICENCE*,README*}
 %{__rm} -f %{buildroot}%{_libexecdir}/setup.sh
+#%{__rm} -f %{buildroot}%{_sysconfdir}/webmin/miniserv.pem
 
 %clean
 %{__rm} -rf %{buildroot}
 
-%files
-%defattr(-, root, root, 0755)
-%doc LICENCE* README*
-%config %{_initrddir}/webmin
-%config %{_sysconfdir}/pam.d/webmin
-%config %{_sysconfdir}/webmin/
-%config(noreplace) %{_sysconfdir}/sysconfig/daemons/webmin
-%config(noreplace) %{_sysconfdir}/webmin/config/
-%config(noreplace) %{_sysconfdir}/webmin/miniserv.*
-%dir %{_localstatedir}/webmin/
-%{_libexecdir}/webmin
-
 %post
+echo -e &quot;.\n.\n.\nWebmin Webserver on $(hostname)\n.\n*\nroot@$(hostname)&quot; | \
+openssl req -newkey rsa:512 -x509 -nodes -days 1825 -set_serial $(date +%s) -out %{_tmppath}/cert -keyout %{_tmppath}/key &amp;&gt;/dev/null
+if [ $? -eq 0 ]; then
+	PEMFILE=&quot;%{_sysconfdir}/webmin/miniserv.pem&quot;
+	if [ -f &quot;$PEMFILE&quot; ]; then PEMFILE=&quot;$PEMFILE.rpmnew&quot;; fi
+	%{__cat} %{_tmppath}/{cert,key} &gt;&quot;$PEMFILE&quot;
+	%{__rm} -f %{_tmppath}/{cert,key}
+	%{__chmod} 0600 &quot;$PEMFILE&quot;
+fi
 /sbin/chkconfig --add webmin
 /sbin/service webmin start &amp;&gt;/dev/null || :
 
@@ -129,9 +130,29 @@
 %postun
 /sbin/service webmin condrestart &amp;&gt;/dev/null || :
 
+%files
+%defattr(-, root, root, 0755)
+%doc LICENCE* README*
+%config %{_initrddir}/webmin
+%config %{_sysconfdir}/pam.d/webmin
+%config %{_sysconfdir}/webmin/
+%config(noreplace) %{_sysconfdir}/sysconfig/daemons/webmin
+%config(noreplace) %{_sysconfdir}/webmin/config/
+%config(noreplace) %{_sysconfdir}/webmin/miniserv.*
+%ghost %{_sysconfdir}/webmin/miniserv.pem
+%ghost %{_sysconfdir}/webmin/module.infos.cache
+%dir %{_localstatedir}/webmin/
+%{_libexecdir}/webmin
+
 %changelog
+* Sun Oct 10 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - ?
+- Updated to release ?
+- Added -set_serial to openssl. (Donavan Nelson)
+
 * Sat Oct 09 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.160-1
 - Updated to release 1.160.
+- Cleaned up buildroot artifacts in restart script. (Bill Thompson)
+- Removed locally build certificate. (Christopher V. Browne)
 
 * Sun Jun 06 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.150-1
 - Updated to release 1.150.

Modified: trunk/rpms/yam/yam.spec
===================================================================
--- trunk/rpms/yam/yam.spec	2004-11-01 04:17:37 UTC (rev 2364)
+++ trunk/rpms/yam/yam.spec	2004-11-01 04:34:07 UTC (rev 2365)
@@ -4,7 +4,7 @@
 
 Summary: Tool to set up a Yum/Apt mirror from various sources (ISO, rsync, http, ftp, ...)
 Name: yam
-Version: 0.6.1
+Version: 0.7
 Release: 1
 License: GPL
 Group: System Environment/Base
@@ -17,6 +17,7 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildArch: noarch
+BuildRequires: /usr/bin/python2
 Requires: python &gt;= 2.0
 
 %description
@@ -58,6 +59,9 @@
 %{_localstatedir}/www/yam/
 
 %changelog
+* Sun Oct 10 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7-1
+- Updated to release 0.7.
+
 * Fri Aug 27 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.6.1-1
 - Updated to release 0.6.1.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001170.html">[SVN] r2364 - in trunk/rpms: dillo gaim galeon putty tvtime
</A></li>
	<LI>Next message: <A HREF="001172.html">[SVN] r2366 - trunk/rpms/clamav
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1171">[ date ]</a>
              <a href="thread.html#1171">[ thread ]</a>
              <a href="subject.html#1171">[ subject ]</a>
              <a href="author.html#1171">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
