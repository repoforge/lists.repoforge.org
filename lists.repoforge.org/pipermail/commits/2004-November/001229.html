<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r2423 - in trunk/rpms: . Gtk-Perl Hermes a52dec anjuta bbkeys	boa conglomerate cue2toc directfb djvulibre epydoc ffmpeg	frozen-bubble gnome-alsamixer gstreamer-monkeysaudio	gtk2-engine-smooth gtkmm2 gtkpod gxmame hardlink++ id3lib	imlib2 js kannel kernel-module-adm8211 kernel-module-pwcx	kernel-module-qc-usb lame libcaca libmpeg3 libquicktime	libsamplerate libsigc++ libsndfile lirc lzo mach mixxx	mplayer ogmtools perl-IPC-ShareLite perl-SDL	perl-Video-DVDRip perl-libintl plib plib16 portaudio psi	python-imaging rrdtool rte scons smpeg sqlite swfdec synaptic	torcs videolan-client wxGTK xine-lib xmms-speex xosd xvidcore	zapping
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2423%20-%20in%20trunk/rpms%3A%20.%20Gtk-Perl%20Hermes%20a52dec%20anjuta%20bbkeys%0A%09boa%20conglomerate%20cue2toc%20directfb%20djvulibre%20epydoc%20ffmpeg%0A%09frozen-bubble%20gnome-alsamixer%20gstreamer-monkeysaudio%0A%09gtk2-engine-smooth%20gtkmm2%20gtkpod%20gxmame%20hardlink%2B%2B%20id3lib%0A%09imlib2%20js%20kannel%20kernel-module-adm8211%20kernel-module-pwcx%0A%09kernel-module-qc-usb%20lame%20libcaca%20libmpeg3%20libquicktime%0A%09libsamplerate%20libsigc%2B%2B%20libsndfile%20lirc%20lzo%20mach%20mixxx%0A%09mplayer%20ogmtools%20perl-IPC-ShareLite%20perl-SDL%0A%09perl-Video-DVDRip%20perl-libintl%20plib%20plib16%20portaudio%20psi%0A%09python-imaging%20rrdtool%20rte%20scons%20smpeg%20sqlite%20swfdec%20synaptic%0A%09torcs%20videolan-client%20wxGTK%20xine-lib%20xmms-speex%20xosd%20xvidcore%0A%09zapping&In-Reply-To=%3C20041105115009.8220817F81%40web22.us.megagiga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001228.html">
   <LINK REL="Next"  HREF="001230.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r2423 - in trunk/rpms: . Gtk-Perl Hermes a52dec anjuta bbkeys	boa conglomerate cue2toc directfb djvulibre epydoc ffmpeg	frozen-bubble gnome-alsamixer gstreamer-monkeysaudio	gtk2-engine-smooth gtkmm2 gtkpod gxmame hardlink++ id3lib	imlib2 js kannel kernel-module-adm8211 kernel-module-pwcx	kernel-module-qc-usb lame libcaca libmpeg3 libquicktime	libsamplerate libsigc++ libsndfile lirc lzo mach mixxx	mplayer ogmtools perl-IPC-ShareLite perl-SDL	perl-Video-DVDRip perl-libintl plib plib16 portaudio psi	python-imaging rrdtool rte scons smpeg sqlite swfdec synaptic	torcs videolan-client wxGTK xine-lib xmms-speex xosd xvidcore	zapping</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2423%20-%20in%20trunk/rpms%3A%20.%20Gtk-Perl%20Hermes%20a52dec%20anjuta%20bbkeys%0A%09boa%20conglomerate%20cue2toc%20directfb%20djvulibre%20epydoc%20ffmpeg%0A%09frozen-bubble%20gnome-alsamixer%20gstreamer-monkeysaudio%0A%09gtk2-engine-smooth%20gtkmm2%20gtkpod%20gxmame%20hardlink%2B%2B%20id3lib%0A%09imlib2%20js%20kannel%20kernel-module-adm8211%20kernel-module-pwcx%0A%09kernel-module-qc-usb%20lame%20libcaca%20libmpeg3%20libquicktime%0A%09libsamplerate%20libsigc%2B%2B%20libsndfile%20lirc%20lzo%20mach%20mixxx%0A%09mplayer%20ogmtools%20perl-IPC-ShareLite%20perl-SDL%0A%09perl-Video-DVDRip%20perl-libintl%20plib%20plib16%20portaudio%20psi%0A%09python-imaging%20rrdtool%20rte%20scons%20smpeg%20sqlite%20swfdec%20synaptic%0A%09torcs%20videolan-client%20wxGTK%20xine-lib%20xmms-speex%20xosd%20xvidcore%0A%09zapping&In-Reply-To=%3C20041105115009.8220817F81%40web22.us.megagiga.com%3E"
       TITLE="[SVN] r2423 - in trunk/rpms: . Gtk-Perl Hermes a52dec anjuta bbkeys	boa conglomerate cue2toc directfb djvulibre epydoc ffmpeg	frozen-bubble gnome-alsamixer gstreamer-monkeysaudio	gtk2-engine-smooth gtkmm2 gtkpod gxmame hardlink++ id3lib	imlib2 js kannel kernel-module-adm8211 kernel-module-pwcx	kernel-module-qc-usb lame libcaca libmpeg3 libquicktime	libsamplerate libsigc++ libsndfile lirc lzo mach mixxx	mplayer ogmtools perl-IPC-ShareLite perl-SDL	perl-Video-DVDRip perl-libintl plib plib16 portaudio psi	python-imaging rrdtool rte scons smpeg sqlite swfdec synaptic	torcs videolan-client wxGTK xine-lib xmms-speex xosd xvidcore	zapping">svn-commits at rpmforge.net
       </A><BR>
    <I>Fri Nov  5 12:50:09 CET 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001228.html">[SVN] r2422 - trunk/docs
</A></li>
        <LI>Next message: <A HREF="001230.html">[SVN] r2424 - in trunk/rpms: alsa-driver alsa-utils amavisd-new	amule bzflag camE diradmin gaim-meanwhile gdesklets-diskmount	gdesklets-rdgborder gdesklets-rssgrab gpa gregexp gstreamer	gstreamer-plugins icu latex-xft-fonts python-sqlite rrdutils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1229">[ date ]</a>
              <a href="thread.html#1229">[ thread ]</a>
              <a href="subject.html#1229">[ subject ]</a>
              <a href="author.html#1229">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dude
Date: 2004-11-05 12:50:06 +0100 (Fri, 05 Nov 2004)
New Revision: 2423

Added:
   trunk/rpms/_build-fr.txt
   trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-nostrip.patch
   trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-pic.patch
   trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-sharedppfix.patch
   trunk/rpms/mach/fedora-3-i386
   trunk/rpms/mach/fedora-3-x86_64
Modified:
   trunk/rpms/Gtk-Perl/Gtk-Perl.spec
   trunk/rpms/Hermes/Hermes.spec
   trunk/rpms/a52dec/a52dec.spec
   trunk/rpms/anjuta/anjuta.spec
   trunk/rpms/bbkeys/bbkeys.spec
   trunk/rpms/boa/boa.spec
   trunk/rpms/conglomerate/conglomerate.spec
   trunk/rpms/cue2toc/cue2toc.spec
   trunk/rpms/directfb/directfb.spec
   trunk/rpms/djvulibre/djvulibre.spec
   trunk/rpms/epydoc/epydoc.spec
   trunk/rpms/ffmpeg/ffmpeg.spec
   trunk/rpms/frozen-bubble/frozen-bubble.spec
   trunk/rpms/gnome-alsamixer/gnome-alsamixer.spec
   trunk/rpms/gstreamer-monkeysaudio/gstreamer-monkeysaudio.spec
   trunk/rpms/gtk2-engine-smooth/gtk2-engine-smooth.spec
   trunk/rpms/gtkmm2/gtkmm2.spec
   trunk/rpms/gtkpod/gtkpod.spec
   trunk/rpms/gxmame/gxmame.spec
   trunk/rpms/hardlink++/hardlink++.spec
   trunk/rpms/id3lib/id3lib.spec
   trunk/rpms/imlib2/imlib2.spec
   trunk/rpms/js/js.spec
   trunk/rpms/kannel/kannel.spec
   trunk/rpms/kernel-module-adm8211/kernel-module-adm8211.spec
   trunk/rpms/kernel-module-pwcx/kernel-module-pwcx.spec
   trunk/rpms/kernel-module-qc-usb/kernel-module-qc-usb.spec
   trunk/rpms/lame/lame.spec
   trunk/rpms/libcaca/libcaca.spec
   trunk/rpms/libmpeg3/libmpeg3.spec
   trunk/rpms/libquicktime/libquicktime.spec
   trunk/rpms/libsamplerate/libsamplerate.spec
   trunk/rpms/libsigc++/libsigc++.spec
   trunk/rpms/libsndfile/libsndfile.spec
   trunk/rpms/lirc/lirc.spec
   trunk/rpms/lzo/lzo.spec
   trunk/rpms/mach/mach.spec
   trunk/rpms/mixxx/mixxx.spec
   trunk/rpms/mplayer/mplayer.spec
   trunk/rpms/ogmtools/ogmtools.spec
   trunk/rpms/perl-IPC-ShareLite/perl-IPC-ShareLite.spec
   trunk/rpms/perl-SDL/perl-SDL.spec
   trunk/rpms/perl-Video-DVDRip/perl-Video-DVDRip.spec
   trunk/rpms/perl-libintl/perl-libintl.spec
   trunk/rpms/plib/plib.spec
   trunk/rpms/plib16/plib16.spec
   trunk/rpms/portaudio/portaudio.spec
   trunk/rpms/psi/psi.spec
   trunk/rpms/python-imaging/python-imaging.spec
   trunk/rpms/rrdtool/rrdtool.spec
   trunk/rpms/rte/rte.spec
   trunk/rpms/scons/scons.spec
   trunk/rpms/smpeg/smpeg.spec
   trunk/rpms/sqlite/sqlite.spec
   trunk/rpms/swfdec/swfdec.spec
   trunk/rpms/synaptic/synaptic.spec
   trunk/rpms/torcs/torcs.spec
   trunk/rpms/videolan-client/videolan-client.spec
   trunk/rpms/wxGTK/wxGTK.spec
   trunk/rpms/xine-lib/xine-lib.spec
   trunk/rpms/xmms-speex/xmms-speex.spec
   trunk/rpms/xosd/xosd.spec
   trunk/rpms/xvidcore/xvidcore.spec
   trunk/rpms/zapping/zapping.spec
Log:
MANY, MANY small tweaks and fixes, thanks mostly to rpmlint.


Modified: trunk/rpms/Gtk-Perl/Gtk-Perl.spec
===================================================================
--- trunk/rpms/Gtk-Perl/Gtk-Perl.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/Gtk-Perl/Gtk-Perl.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -74,8 +74,9 @@
 
 ### Clean up buildroot
 %{__rm} -rf %{buildroot}%{_libdir}/perl5/*/*-linux-thread-multi/
+%{__rm} -f `find %{buildroot}%{_libdir}/perl5/vendor_perl/*/*-linux*/ \
+    -name .packlist -o -name '*.bs'`
 
-
 %clean 
 %{__rm} -rf %{buildroot}
 

Modified: trunk/rpms/Hermes/Hermes.spec
===================================================================
--- trunk/rpms/Hermes/Hermes.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/Hermes/Hermes.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -4,7 +4,7 @@
 Summary: Pixel format conversion library
 Name: Hermes
 Version: 1.3.3
-Release: 3
+Release: 4
 License: LGPL
 Group: System Environment/Libraries
 URL: <A HREF="http://clanlib.org/hermes/">http://clanlib.org/hermes/</A>
@@ -42,7 +42,8 @@
 
 
 %build
-%configure
+%configure \
+    --with-pic
 %{__make} %{?_smp_mflags}
 
 
@@ -77,6 +78,9 @@
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.3.3-4
+- Added --with-pic configure option, doesn't seem to help much, though.
+
 * Tue May 18 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.3.3-3
 - Rebuild for Fedora Core 2.
 

Added: trunk/rpms/_build-fr.txt
===================================================================
--- trunk/rpms/_build-fr.txt	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/_build-fr.txt	2004-11-05 11:50:06 UTC (rev 2423)
@@ -0,0 +1,196 @@
+# Packages to build, in order, to populate freshrpms.net
+# * : Built earlier because of a dependency
+# x : Build fails, with (reason)
+# # : No longer relevant, usually now included at the latest version
+# o : Shared across all distributions and releases, noarch
+compface
+gpgme
+unrar
+a52dec
+aalib
+advancecomp
+advancescan
+* libid3tag
+* libmad
+* libsndfile
+* xosd
+alsaplayer
+* cryptopp x (gcc 3.4 incompatibility)
+amule x (cryptopp)
+anjuta
+apg
+apt
+armagetron x (c++)
+armagetron-moviepack o
+* wxGTK
+audacity
+bbkeys
+blackbox x (gcc)
+bluefish
+boa x (doc)
+# bzflag
+cabextract
+* imlib2
+* giblib
+camE
+celestia x (c++)
+compface
+conglomerate
+createrepo o
+csmash
+d4x
+diradmin
+djvulibre
+* id3lib
+easytag
+epydoc
+faac
+faad2
+* lame
+* xvidcore
+ffmpeg
+fftw
+flumotion
+* SDL_ttf
+* smpeg
+* perl-SDL
+frozen-bubble
+gcombust
+gentoo
+gkrellm
+gkrellm-plugins
+gkrellm-themes o
+gnome-alsamixer
+gnuboy
+gpgme
+# grip
+gsm
+gstreamer-ffmpeg x (mmx)
+gstreamer-monkeysaudio
+gstreamer-plugins-extra x (TODO)
+gstreamer-python
+gtetrinet
+# gthumb
+Gtk-Perl
+* libsigc++
+gtkmm2
+gtkpod
+gtktalog
+gtweakui
+gxmame
+hackedbox x (same as blackbox)
+hardlink++
+hercules
+Hermes
+i8kutils
+ipw2100-firmware o
+ipw2200-firmware o
+jhead
+js
+kannel x (.depend failure)
+* libsamplerate
+* libquicktime
+kino
+ladspa
+lbreakout2
+libcaca
+libdvbpsi
+libdvdcss
+libdvdnav
+* libdvdread
+libdvdplay
+libebml
+libfame
+libmatroska
+libmpeg3
+liboil
+libshout
+libsidplay x (c++)
+# libtheora
+linux_logo
+lirc
+lmarbles
+ltris
+lzo
+mach
+* scons
+madman x (c++)
+metakit
+* portaudio
+mixxx
+mjpegtools x (asm/mmx then compile error)
+mpeg2dec
+mpg321
+mplayer
+mplayer-fonts o
+mplayer-skins o
+neverball
+# nmap
+ogle
+ogle_gui
+ogmtools
+oidentd
+pearpc
+perl-Cache-Cache
+perl-Error
+perl-IPC-ShareLite
+perl-Video-DVDRip
+perl-libintl
+php-mmcache
+php-pear-excel
+php-pear-ole
+php-pecl-mailparse
+php-pecl-sqlite
+plib
+plib16
+powermanga
+proftpd
+psi
+python-imaging
+python-twisted
+rar o
+# rhythmbox
+* xine-lib
+rhythmbox-xine
+rpmlint
+rrdtool
+rte
+sqlite
+starfighter
+subtitleripper
+swfdec
+# sylpheed
+sylpheed-claws
+synaptic
+synergy
+thttpd
+torcs
+torcs-data o
+totem
+transcode
+ucarp
+unrar
+vcdimager
+videolan-client
+* zziplib
+viruskiller
+xine
+xine-skins o
+xmame
+xmame-roms o
+xmms
+xmms-acme
+xmms-crossfade
+# xmms-itouch (unmaintained, xmms-acme is better)
+xmms-lirc
+xmms-musepack
+xmms-speex
+xmms-wma
+xmule
+xplanet
+xplanet-maps o
+xrick
+xvattr
+# yum
+* zvbi
+zapping

Modified: trunk/rpms/a52dec/a52dec.spec
===================================================================
--- trunk/rpms/a52dec/a52dec.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/a52dec/a52dec.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -11,10 +11,8 @@
 Source: <A HREF="http://liba52.sf.net/files/a52dec-%{version">http://liba52.sf.net/files/a52dec-%{version</A>}.tar.gz
 Patch: a52dec-0.7.4-PIC.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-%ifnarch %{ix86}
-BuildRequires: autoconf, automake, libtool
-%endif
 BuildRequires: gcc-c++
+BuildRequires: autoconf, automake, libtool
 
 %description
 liba52 is a free library for decoding ATSC A/52 streams. It is released
@@ -40,18 +38,14 @@
 
 %prep
 %setup
-%ifnarch %{ix86}
 %patch -p1 -b .PIC
-%endif
 
 
 %build
-%ifnarch %{ix86}
 %{__libtoolize} --force
 %{__aclocal}
 %{__automake} -a
 %{__autoconf}
-%endif
 %configure --enable-shared
 %{__make} %{?_smp_mflags}
 
@@ -89,6 +83,9 @@
 
 
 %changelog
+* Thu Nov  4 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.7.4-7
+- Enable -fPIC on all architectures.
+
 * Sat May 29 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.4-7
 - Added -fPIC patch for non ix86 architectures.
 

Modified: trunk/rpms/anjuta/anjuta.spec
===================================================================
--- trunk/rpms/anjuta/anjuta.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/anjuta/anjuta.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -13,7 +13,6 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: libgnome &gt;= 2.0.2, libglade2 &gt;= 2.0.0, libgnomeui &gt;= 2.0.2
 Requires: libgnomeprintui22 &gt;= 2.0.1
-Requires: vte, pcre, libxml2
 BuildRequires: libgnome-devel &gt;= 2.0.2, libglade2-devel &gt;= 2.0.0
 BuildRequires: libgnomeui-devel &gt;= 2.0.2, libgnomeprintui22-devel &gt;= 2.0.1
 BuildRequires: vte-devel, pcre-devel, libxml2-devel, gettext, gcc-c++
@@ -65,6 +64,7 @@
 %doc doc/ScintillaDoc.html
 %{_bindir}/anjuta*
 %{_libdir}/anjuta/
+%exclude %{_libdir}/anjuta/*.a
 %{_datadir}/anjuta/
 %{_datadir}/applications/anjuta.desktop
 %{_datadir}/gnome/help/anjuta/

Modified: trunk/rpms/bbkeys/bbkeys.spec
===================================================================
--- trunk/rpms/bbkeys/bbkeys.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/bbkeys/bbkeys.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -16,7 +16,7 @@
 bbkeys is a configurable key-grabber designed for the blackbox window manager
 which is written by Brad Hughes.  It is based on the bbtools object code
 created by John Kennis and re-uses some of the blackbox window manager classes
-as well.  bbkeys is easily configurable via directly hand-editting the user's
+as well.  bbkeys is easily configurable via directly hand-editing the user's
 ~/.bbkeysrc file, or by using the GUI total blackbox configurator, bbconf.
 
 

Modified: trunk/rpms/boa/boa.spec
===================================================================
--- trunk/rpms/boa/boa.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/boa/boa.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -8,6 +8,9 @@
 Name: boa
 Version: 0.94.14
 Release: %{?rcver:0.%{rcver}.}1
+Group: System Environment/Daemons
+License: GPL
+URL: <A HREF="http://www.boa.org/">http://www.boa.org/</A>
 Source0: <A HREF="http://www.boa.org/%{name">http://www.boa.org/%{name</A>}-%{version}%{?rcver}.tar.bz2
 Source1: boa.init
 Source2: boa.sysconfig
@@ -15,14 +18,11 @@
 Source11: boa_logo_pasi2.png
 Source12: button-freshrpms.png
 Patch: boa-0.94.14rc17-config.patch
-URL: <A HREF="http://www.boa.org/">http://www.boa.org/</A>
-License: GPL
-Group: System Environment/Daemons
 BuildRoot: %{_tmppath}/%{name}-%{version}-root
+Requires: /etc/mime.types
 BuildRequires: tetex, texinfo
-%{!?_without_gunzip:Requires: gzip}
-%{!?_without_gunzip:BuildRequires: gzip}
-Requires: /etc/mime.types
+%{!?_without_gzip:Requires: gzip}
+%{!?_without_gzip:BuildRequires: gzip}
 Provides: webserver
 
 %description
@@ -38,11 +38,11 @@
 
 Available rpmbuild rebuild options :
 --with : debug access poll
---without : gunzip sendfile
+--without : gzip sendfile
 
 
 %prep
-%setup -q -n %{name}-%{version}%{?rcver}
+%setup -n %{name}-%{version}%{?rcver}
 %patch -p1 -b .config
 
 
@@ -51,7 +51,7 @@
     %{!?_with_debug:      --disable-debug} \
     %{?_with_access:      --enable-access-control} \
     %{?_with_poll:        --with-poll} \
-    %{?_without_gunzip:   --disable-gunzip} \
+    %{?_without_gzip  :   --disable-gunzip} \
     %{?_without_sendfile: --disable-sendfile}
 %{__make} %{?_smp_mflags}
 %{__make} -C docs
@@ -66,7 +66,7 @@
 %{__install} -m 644 -D examples/boa.conf %{buildroot}%{_sysconfdir}/boa/boa.conf
 %{__install} -m 644 -D contrib/redhat/boa.logrotate \
     %{buildroot}%{_sysconfdir}/logrotate.d/boa
-%{__install} -m 755 -D %{SOURCE1} %{buildroot}%{_initrddir}/boa
+%{__install} -m 755 -D %{SOURCE1} %{buildroot}%{_sysconfdir}/rc.d/init.d/boa
 %{__install} -m 755 -D %{SOURCE2} %{buildroot}%{_sysconfdir}/sysconfig/boa
 
 %{__mkdir_p} %{buildroot}/%{webroot}/html
@@ -87,39 +87,40 @@
     -d %{webroot} -M -r -g www boa 2&gt;/dev/null || :
 
 %post
-if [ $1 -eq 1 ]; then
-    /sbin/chkconfig --add boa
-fi
+/sbin/chkconfig --add boa
 
 %preun
 if [ $1 -eq 0 ]; then
-    /sbin/service boa stop &gt;/dev/null 2&gt;&amp;1 || :
+    /sbin/service boa stop &gt;/dev/null || :
     /sbin/chkconfig --del boa
 fi
 
 %postun
 if [ $1 -ge 1 ]; then
-    /sbin/service boa condrestart &gt;/dev/null 2&gt;&amp;1 || :
+    /sbin/service boa condrestart &gt;/dev/null || :
 fi
 
 
 %files
 %defattr(-, root, root, 0755)
 %doc docs/*.{html,png,txt} COPYING CREDITS README examples/
-%dir %{_sysconfdir}/boa
+%dir %{_sysconfdir}/boa/
 %config(noreplace) %{_sysconfdir}/boa/boa.conf
 %config(noreplace) %{_sysconfdir}/logrotate.d/boa
 %config(noreplace) %{_sysconfdir}/sysconfig/boa
-%{_initrddir}/boa
-%dir %{_libdir}/boa
+%{_sysconfdir}/rc.d/init.d/boa
+%dir %{_libdir}/boa/
 %{_libdir}/boa/boa_indexer
 %{_sbindir}/boa
-%{webroot}
-%dir %{_localstatedir}/log/boa
+%{webroot}/
+%dir %{_localstatedir}/log/boa/
 %{_mandir}/man8/*
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; - 0.94.14-0.rc20.1
+- Minor spec tweaks.
+
 * Thu Jul 15 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; - 0.94.14-0.rc20.1
 - Update to 0.94.14rc20.
 

Modified: trunk/rpms/conglomerate/conglomerate.spec
===================================================================
--- trunk/rpms/conglomerate/conglomerate.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/conglomerate/conglomerate.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -10,9 +10,6 @@
 Group: Applications/Text
 URL: <A HREF="http://www.conglomerate.org/">http://www.conglomerate.org/</A>
 
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="http://dl.sf.net/conglomerate/conglomerate-%{version">http://dl.sf.net/conglomerate/conglomerate-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
@@ -38,9 +35,9 @@
 
 %build
 %configure \
-	--enable-optimization \
- 	--enable-printing \
-	--disable-schemas-install
+    --enable-optimization \
+    --enable-printing \
+    --disable-schemas-install
 %{__make} %{?_smp_mflags}
 
 %install

Modified: trunk/rpms/cue2toc/cue2toc.spec
===================================================================
--- trunk/rpms/cue2toc/cue2toc.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/cue2toc/cue2toc.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -1,5 +1,6 @@
 # $Id$
 # Authority: matthias
+# Upstream: Matthias Czapla &lt;dermatsch$gmx,de&gt;
 
 Summary: Convert files in CUE format to cdrdao's TOC format
 Name: cue2toc

Modified: trunk/rpms/directfb/directfb.spec
===================================================================
--- trunk/rpms/directfb/directfb.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/directfb/directfb.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -41,7 +41,7 @@
 
 
 %prep
-%setup -q -n DirectFB-%{version}
+%setup -n DirectFB-%{version}
 
 
 %build
@@ -122,7 +122,7 @@
 
 
 %changelog
-* Tue Nov 11 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; - 0.9.20-1
+* Tue Nov 11 2003 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.9.20-1
 - Update to 0.9.20.
 - Rebuild for Fedora Core 1.
 

Modified: trunk/rpms/djvulibre/djvulibre.spec
===================================================================
--- trunk/rpms/djvulibre/djvulibre.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/djvulibre/djvulibre.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -12,12 +12,15 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: XFree86-devel, qt-devel, libjpeg-devel
 BuildRequires: libstdc++-devel, gcc-c++, mozilla
+# Provide these here, they're so small, it's not worth splitting them out
+Provides: mozilla-djvulibre = %{version}-%{release}
+Provides: djvulibre-devel = %{version}-%{release}
 
 %description 
 DjVu is a web-centric format and software platform for distributing documents
 and images.  DjVu content downloads faster, displays and renders faster, looks
 nicer on a screen, and consume less client resources than competing formats.
-DjVu was originally developped at AT&amp;T Labs-Research by Leon Bottou, Yann
+DjVu was originally developed at AT&amp;T Labs-Research by Leon Bottou, Yann
 LeCun, Patrick Haffner, and many others.  In March 2000, AT&amp;T sold DjVu to
 LizardTech Inc. who now distributes Windows/Mac plug-ins, and commercial
 encoders (mostly on Windows)
@@ -41,11 +44,14 @@
 %install
 %{__rm} -rf %{buildroot}
 %makeinstall
-#%{__mkdir_p} %{buildroot}%{_libdir}/mozilla/plugins
-#%{__ln_s} ../../netscape/plugins/nsdejavu.so \
-#    %{buildroot}%{_libdir}/mozilla/plugins/
+%{__mkdir_p} %{buildroot}%{_libdir}/mozilla/plugins
+%{__ln_s} ../../netscape/plugins/nsdejavu.so \
+    %{buildroot}%{_libdir}/mozilla/plugins/
 
+# Fix for the libs to get stripped correctly (debuginfo)
+find %{buildroot}%{_libdir} -name '*.so*' | xargs %{__chmod} +x
 
+
 %clean
 %{__rm} -rf %{buildroot}
 
@@ -78,6 +84,13 @@
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 3.5.14-2
+- Re-enable the lib/mozilla/ symlink to the plugin.
+- Add source of /etc/profile.d/qt.sh to fix weird detection problem on FC3...
+  ...doesn't fix it, some lib required by qt is probably installed after and
+  ldconfig not run.
+- Added lib +x chmod'ing to get proper stripping and debuginfo package.
+
 * Sat Oct 16 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 3.5.14-2
 - Added update-desktop-database scriplet calls.
 

Modified: trunk/rpms/epydoc/epydoc.spec
===================================================================
--- trunk/rpms/epydoc/epydoc.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/epydoc/epydoc.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -3,13 +3,14 @@
 Summary: Edward Loper's Python API documentation generation tool
 Name: epydoc
 Version: 2.1
-Release: 1
+Release: 2
 Group: Development/Tools
 License: MIT
 URL: <A HREF="http://epydoc.sourceforge.net/">http://epydoc.sourceforge.net/</A>
 Source: <A HREF="http://dl.sf.net/epydoc/epydoc-%{version">http://dl.sf.net/epydoc/epydoc-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: python
+BuildArch: noarch
 
 %description
 Epydoc  is a tool for generating API documentation for Python modules,
@@ -32,7 +33,6 @@
 %install
 %{__rm} -rf %{buildroot}
 %{__python} setup.py install --root=%{buildroot}
-
 # Also install the man pages
 %{__install} -D man/epydoc.1    %{buildroot}%{_mandir}/man1/epydoc.1
 %{__install} -D man/epydocgui.1 %{buildroot}%{_mandir}/man1/epydocgui.1
@@ -53,6 +53,9 @@
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.1-2
+- Make the package noarch as it contains no binaries.
+
 * Thu Oct 21 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.1-1
 - Picked up and rebuilt.
 - Added doc and man pages.

Added: trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-nostrip.patch
===================================================================
--- trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-nostrip.patch	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-nostrip.patch	2004-11-05 11:50:06 UTC (rev 2423)
@@ -0,0 +1,63 @@
+diff -Naru ffmpeg-0.4.9-pre1.orig/libavcodec/libpostproc/Makefile ffmpeg-0.4.9-pre1/libavcodec/libpostproc/Makefile
+--- ffmpeg-0.4.9-pre1.orig/libavcodec/libpostproc/Makefile	2003-05-11 14:26:35.000000000 +0300
++++ ffmpeg-0.4.9-pre1/libavcodec/libpostproc/Makefile	2004-07-29 14:27:29.471838988 +0300
+@@ -50,7 +50,7 @@
+ install: all
+ ifeq ($(SHARED_PP),yes)
+ 	install -d $(prefix)/lib
+-	install -s -m 755 $(SPPLIB) $(prefix)/lib/$(SPPLIB).$(SPPVERSION)
++	install -m 755 $(SPPLIB) $(prefix)/lib/$(SPPLIB).$(SPPVERSION)
+ 	ln -sf $(SPPLIB).$(SPPVERSION) $(prefix)/lib/$(SPPLIB)
+ 	ldconfig || true
+ 	mkdir -p $(prefix)/include/postproc
+diff -Naru ffmpeg-0.4.9-pre1.orig/libavcodec/Makefile ffmpeg-0.4.9-pre1/libavcodec/Makefile
+--- ffmpeg-0.4.9-pre1.orig/libavcodec/Makefile	2004-06-18 16:11:15.000000000 +0300
++++ ffmpeg-0.4.9-pre1/libavcodec/Makefile	2004-07-29 14:27:35.447923035 +0300
+@@ -266,10 +266,10 @@
+ ifeq ($(BUILD_SHARED),yes)
+ install: all install-headers
+ ifeq ($(CONFIG_WIN32),yes)
+-	install -s -m 755 $(SLIB) &quot;$(prefix)&quot;
++	install -m 755 $(SLIB) &quot;$(prefix)&quot;
+ else
+ 	install -d $(prefix)/lib
+-	install -s -m 755 $(SLIB) $(prefix)/lib/libavcodec-$(VERSION).so
++	install -m 755 $(SLIB) $(prefix)/lib/libavcodec-$(VERSION).so
+ 	ln -sf libavcodec-$(VERSION).so $(prefix)/lib/libavcodec.so
+ 	ldconfig || true
+ endif
+diff -Naru ffmpeg-0.4.9-pre1.orig/libavformat/Makefile ffmpeg-0.4.9-pre1/libavformat/Makefile
+--- ffmpeg-0.4.9-pre1.orig/libavformat/Makefile	2004-04-24 18:16:23.000000000 +0300
++++ ffmpeg-0.4.9-pre1/libavformat/Makefile	2004-07-29 14:27:24.069570995 +0300
+@@ -102,10 +102,10 @@
+ ifeq ($(BUILD_SHARED),yes)
+ install: all install-headers
+ ifeq ($(CONFIG_WIN32),yes)
+-	install -s -m 755 $(SLIB) &quot;$(prefix)&quot;
++	install -m 755 $(SLIB) &quot;$(prefix)&quot;
+ else
+ 	install -d $(prefix)/lib
+-	install -s -m 755 $(SLIB) $(prefix)/lib/libavformat-$(VERSION).so
++	install -m 755 $(SLIB) $(prefix)/lib/libavformat-$(VERSION).so
+ 	ln -sf libavformat-$(VERSION).so $(prefix)/lib/libavformat.so
+ 	ldconfig || true
+ endif
+diff -Naru ffmpeg-0.4.9-pre1.orig/Makefile ffmpeg-0.4.9-pre1/Makefile
+--- ffmpeg-0.4.9-pre1.orig/Makefile	2004-07-08 14:02:04.000000000 +0300
++++ ffmpeg-0.4.9-pre1/Makefile	2004-07-29 14:26:49.039802320 +0300
+@@ -89,7 +89,6 @@
+ 
+ ffmpeg$(EXESUF): ffmpeg_g$(EXESUF)
+ 	cp -p $&lt; $@
+-	$(STRIP) $@
+ 
+ ffserver$(EXESUF): ffserver.o .libs
+ 	$(CC) $(LDFLAGS) $(FFSLDFLAGS) -o $@ ffserver.o $(FFLIBS) $(EXTRALIBS) 
+@@ -99,7 +98,6 @@
+ 
+ ffplay$(EXESUF): ffplay_g$(EXESUF)
+ 	cp -p $&lt; $@
+-	$(STRIP) $@
+ 
+ output_example$(EXESUF): output_example.o .libs
+ 	$(CC) $(LDFLAGS) -o $@ output_example.o $(FFLIBS) $(EXTRALIBS)

Added: trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-pic.patch
===================================================================
--- trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-pic.patch	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-pic.patch	2004-11-05 11:50:06 UTC (rev 2423)
@@ -0,0 +1,45 @@
+diff -Naupr ffmpeg-0.4.9-pre1.orig/libavcodec/i386/dsputil_mmx.c ffmpeg-0.4.9-pre1/libavcodec/i386/dsputil_mmx.c
+--- ffmpeg-0.4.9-pre1.orig/libavcodec/i386/dsputil_mmx.c	2004-06-08 04:13:44.000000000 +0200
++++ ffmpeg-0.4.9-pre1/libavcodec/i386/dsputil_mmx.c	2004-10-29 16:12:45.849678584 +0200
+@@ -57,7 +57,7 @@ static const uint64_t ff_pb_FC attribute
+     &quot;pcmpeqd %%&quot; #regd &quot;, %%&quot; #regd &quot; \n\t&quot;\
+     &quot;paddb %%&quot; #regd &quot;, %%&quot; #regd &quot; \n\t&quot; ::)
+ 
+-#ifndef PIC
++#ifndef __PIC__
+ #define MOVQ_BONE(regd)  __asm __volatile (&quot;movq %0, %%&quot; #regd &quot; \n\t&quot; ::&quot;m&quot;(mm_bone))
+ #define MOVQ_WTWO(regd)  __asm __volatile (&quot;movq %0, %%&quot; #regd &quot; \n\t&quot; ::&quot;m&quot;(mm_wtwo))
+ #else
+diff -Naupr ffmpeg-0.4.9-pre1.orig/libavcodec/i386/dsputil_mmx_rnd.h ffmpeg-0.4.9-pre1/libavcodec/i386/dsputil_mmx_rnd.h
+--- ffmpeg-0.4.9-pre1.orig/libavcodec/i386/dsputil_mmx_rnd.h	2004-05-18 19:09:46.000000000 +0200
++++ ffmpeg-0.4.9-pre1/libavcodec/i386/dsputil_mmx_rnd.h	2004-10-29 16:13:06.325565776 +0200
+@@ -96,7 +96,7 @@ static void DEF(put, pixels8_l2)(uint8_t
+ 	&quot;addl	%5, %3			\n\t&quot;
+ 	&quot;subl	$4, %0			\n\t&quot;
+ 	&quot;jnz	1b			\n\t&quot;
+-#ifdef PIC //Note &quot;+bm&quot; and &quot;+mb&quot; are buggy too (with gcc 3.2.2 at least) and cant be used
++#ifdef __PIC__ //Note &quot;+bm&quot; and &quot;+mb&quot; are buggy too (with gcc 3.2.2 at least) and cant be used
+         :&quot;+m&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
+ #else
+         :&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
+@@ -191,7 +191,7 @@ static void DEF(put, pixels16_l2)(uint8_
+ 	&quot;addl	$32, %2			\n\t&quot;
+ 	&quot;subl	$2, %0			\n\t&quot;
+ 	&quot;jnz	1b			\n\t&quot;
+-#ifdef PIC //Note &quot;+bm&quot; and &quot;+mb&quot; are buggy too (with gcc 3.2.2 at least) and cant be used
++#ifdef __PIC__ //Note &quot;+bm&quot; and &quot;+mb&quot; are buggy too (with gcc 3.2.2 at least) and cant be used
+ 	:&quot;+m&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
+ #else
+ 	:&quot;+b&quot;(h), &quot;+a&quot;(src1), &quot;+c&quot;(src2), &quot;+d&quot;(dst)
+diff -Naupr ffmpeg-0.4.9-pre1.orig/libavcodec/msmpeg4.c ffmpeg-0.4.9-pre1/libavcodec/msmpeg4.c
+--- ffmpeg-0.4.9-pre1.orig/libavcodec/msmpeg4.c	2004-05-25 20:07:24.000000000 +0200
++++ ffmpeg-0.4.9-pre1/libavcodec/msmpeg4.c	2004-10-29 16:13:30.652867464 +0200
+@@ -716,7 +716,7 @@ static inline int msmpeg4_pred_dc(MpegEn
+        necessitate to modify mpegvideo.c. The problem comes from the
+        fact they decided to store the quantized DC (which would lead
+        to problems if Q could vary !) */
+-#if defined ARCH_X86 &amp;&amp; !defined PIC
++#if defined ARCH_X86 &amp;&amp; !defined __PIC__
+     asm volatile(
+         &quot;movl %3, %%eax		\n\t&quot;
+ 	&quot;shrl $1, %%eax		\n\t&quot;

Added: trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-sharedppfix.patch
===================================================================
--- trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-sharedppfix.patch	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/ffmpeg/ffmpeg-0.4.9-pre1-sharedppfix.patch	2004-11-05 11:50:06 UTC (rev 2423)
@@ -0,0 +1,25 @@
+diff -Naru ffmpeg-0.4.9-pre1.orig/libavcodec/Makefile ffmpeg-0.4.9-pre1/libavcodec/Makefile
+--- ffmpeg-0.4.9-pre1.orig/libavcodec/Makefile	2004-06-18 16:11:15.000000000 +0300
++++ ffmpeg-0.4.9-pre1/libavcodec/Makefile	2004-08-31 21:35:15.922873172 +0300
+@@ -89,7 +89,7 @@
+ 
+ ifeq ($(CONFIG_PP),yes)
+ ifeq ($(SHARED_PP),yes)
+-EXTRALIBS += -lpostproc
++EXTRALIBS += -Llibpostproc -lpostproc
+ else
+ # LIBS += libpostproc/libpostproc.a ... should be fixed
+ OBJS += libpostproc/postprocess.o
+diff -Naru ffmpeg-0.4.9-pre1.orig/Makefile ffmpeg-0.4.9-pre1/Makefile
+--- ffmpeg-0.4.9-pre1.orig/Makefile	2004-07-08 14:02:04.000000000 +0300
++++ ffmpeg-0.4.9-pre1/Makefile	2004-08-31 21:34:43.092347004 +0300
+@@ -77,6 +77,9 @@
+ OBJS = ffmpeg.o ffserver.o cmdutils.o ffplay.o
+ SRCS = $(OBJS:.o=.c) $(ASM_OBJS:.o=.s)
+ FFLIBS = -L./libavformat -lavformat -L./libavcodec -lavcodec
++ifeq ($(SHARED_PP),yes)
++FFLIBS += -L./libavcodec/libpostproc -lpostproc
++endif
+ 
+ all: lib $(PROG) $(PROGTEST) $(VHOOK) $(QTFASTSTART) $(DOC)
+ 

Modified: trunk/rpms/ffmpeg/ffmpeg.spec
===================================================================
--- trunk/rpms/ffmpeg/ffmpeg.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/ffmpeg/ffmpeg.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -1,27 +1,35 @@
 # $Id$
 # Authority: matthias
 
-#define date   2003-11-07
-#define sqdate %(echo %{date} | tr -d '-')
+%define date   2004-11-02
+#define prever pre1
+%{?date: %define sqdate %(echo %{date} | tr -d '-')}
 
 Summary: Hyper fast MPEG1/MPEG4/H263/RV and AC3/MPEG audio encoder and decoder
 Name: ffmpeg
-Version: 0.4.8
-Release: 3%{?date:.%{sqdate}}
+Version: 0.4.9
+Release: %{?date:0.%{sqdate}.}%{?prever:0.%{prever}.}1
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://ffmpeg.sourceforge.net/">http://ffmpeg.sourceforge.net/</A>
 %if %{?date:0}%{!?date:1}
-Source: <A HREF="http://dl.sf.net/ffmpeg/ffmpeg-%{version">http://dl.sf.net/ffmpeg/ffmpeg-%{version</A>}.tar.gz
+Source: <A HREF="http://dl.sf.net/ffmpeg/ffmpeg-%{version">http://dl.sf.net/ffmpeg/ffmpeg-%{version</A>}%{?prever:-%{prever}}.tar.gz
 %else
 Source: <A HREF="http://ffmpeg.sourceforge.net/cvs/%{name">http://ffmpeg.sourceforge.net/cvs/%{name</A>}-cvs-%{date}.tar.gz
 %endif
+Patch0: ffmpeg-0.4.9-pre1-sharedppfix.patch
+Patch2: ffmpeg-0.4.9-pre1-pic.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: imlib2-devel, SDL-devel, freetype-devel, zlib-devel
+BuildRequires: tetex
 %{!?_without_lame:BuildRequires: lame-devel}
 %{!?_without_vorbis:BuildRequires: libogg-devel, libvorbis-devel}
 %{!?_without_faad:BuildRequires: faad2-devel}
+%{!?_without_faac:BuildRequires: faac-devel}
+%{!?_without_xvid:BuildRequires: xvidcore-devel}
 %{!?_without_a52dec:BuildRequires: a52dec-devel}
+# We need those as autoreqprov adds them as a requirement to the package
+# (0.4.8, still true in 0.4.9-pre1)
 Provides: libavcodec.so, libavformat.so
 
 %description
@@ -34,7 +42,7 @@
 quality polyphase filter.
 
 Available rpmbuild rebuild options :
---without : lame vorbis faad a52dec altivec
+--without : lame vorbis faad faac xvid a52dec altivec
 
 
 %package devel
@@ -45,6 +53,8 @@
 %{!?_without_lame:Requires: lame-devel}
 %{!?_without_vorbis:Requires: libogg-devel, libvorbis-devel}
 %{!?_without_faad:Requires: faad2-devel}
+%{!?_without_faac:Requires: faac-devel}
+%{!?_without_xvid:Requires: xvidcore-devel}
 %{!?_without_a52dec:Requires: a52dec-devel}
 
 %description devel
@@ -59,35 +69,59 @@
 Install this package if you want to compile apps with ffmpeg support.
 
 
+%package -n libpostproc
+Summary: Video postprocessing library from ffmpeg
+Group: System Environment/Libraries
+# We need to override version here... when libpostproc was built from
+# MPlayer, it got up to 1.0-0.11.x) - mach barfs! :-(
+#Version: 1.0.1
+Provides: libpostproc-devel = %{version}-%{release}
+
+%description -n libpostproc
+FFmpeg is a very fast video and audio converter. It can also grab from a
+live audio/video source.
+
+This package contains only ffmpeg's libpostproc post-processing library which
+other projects such as transcode may use. Install this package if you intend
+to use MPlayer, transcode or other similar programs.
+
+
 %prep
-%setup -n %{name}-%{?date:cvs-%{date}}%{!?date:%{version}}
+%setup -n %{name}-%{?date:cvs-%{date}}%{!?date:%{version}%{?prever:-%{prever}}}
+#patch0 -p1 -b .sharedpp
+#patch2 -p1 -b .pic
 
 ### FIXME: Make Makefile use autotool directory standard. (Please fix upstream)
-%{__perl} -pi -e 's|\$\(prefix\)/lib|\$(libdir)|' Makefile */Makefile
-%{__perl} -pi -e 's|\$\(prefix\)/include|\$(includedir)|' Makefile */Makefile
+%{__perl} -pi -e 's|\$\(prefix\)/lib|\$(libdir)|g;
+                  s|\$\(prefix\)/include|\$(includedir)|g' \
+                  Makefile */Makefile */*/Makefile
 
 
 %build
 %configure \
-    --enable-shared \
-    --enable-pp \
-%ifarch %{ix86}
-     --disable-mmx \
-%endif
-%ifarch ppc
-    %{?_without_altivec: --disable-altivec} \
-%endif
     %{!?_without_lame: --enable-mp3lame} \
     %{!?_without_vorbis: --enable-vorbis} \
     %{!?_without_faad: --enable-faad} \
-    %{!?_without_a52dec: --enable-a52}
-%{__make} %{?_smp_mflags} \
-    OPTFLAGS=&quot;-fPIC %{optflags}&quot; \
-    SHFLAGS=&quot;-shared -Wl,-soname -Wl,\$@&quot;
+    %{!?_without_faac: --enable-faac} \
+    %{!?_without_xvid: --enable-xvid} \
+    --enable-pp \
+    --enable-shared-pp \
+    --enable-shared \
+    --enable-gpl \
+    --extra-cflags=&quot;%{optflags}&quot; \
+    --disable-strip
+#   %{!?_without_a52: --enable-a52} \
+# Make!
+%{__make} %{?_smp_mflags} -C libavcodec/libpostproc
+%{__make} %{?_smp_mflags}
+%{__make} documentation
+# Leftover, for reference :
+# OPTFLAGS=&quot;-fPIC -fomit-frame-pointer %{optflags} -UUSE_FASTMEMCPY&quot;
 
 
 %install
 %{__rm} -rf %{buildroot}
+%makeinstall -C libavcodec/libpostproc
 %makeinstall
 
 ### Make installlib is broken in 0.4.6-8, so we do it by hand
@@ -96,13 +130,8 @@
 %{__install} -D -m0644 libavformat/libavformat.a \
     %{buildroot}%{_libdir}/libavformat.a
 
-### Create compat symlink
-%{__install} -d -m0755 %{buildroot}%{_libdir}/{libavcodec,libavformat}/
-%{__ln_s} -f ../libavcodec.a %{buildroot}%{_libdir}/libavcodec/libavcodec.a
-%{__ln_s} -f ../libavformat.a %{buildroot}%{_libdir}/libavformat/libavformat.a
-
 ### Remove from the included docs
-%{__rm} -f doc/Makefile doc/*.1
+%{__rm} -rf doc/{CVS,Makefile}
 
 
 %clean
@@ -110,29 +139,57 @@
 
 
 %post
-/sbin/ldconfig 2&gt;/dev/null
+/sbin/ldconfig
 
 %postun
-/sbin/ldconfig 2&gt;/dev/null
+/sbin/ldconfig
 
+%post -n libpostproc
+/sbin/ldconfig
 
+%postun -n libpostproc
+/sbin/ldconfig
+
+
 %files
 %defattr(-, root, root, 0755)
-%doc Changelog COPYING CREDITS README doc/
-%doc %{_mandir}/man1/*
+%doc Changelog COPYING CREDITS README
 %{_bindir}/*
 %{_libdir}/*.so
 %{_libdir}/vhook/
+%{_mandir}/man1/*
 
 %files devel
 %defattr(-, root, root, 0755)
+%doc doc/*
 %{_includedir}/ffmpeg/
 %{_libdir}/*.a
-%{_libdir}/libavcodec/
-%{_libdir}/libavformat/
 
+%files -n libpostproc
+%defattr(-, root, root, 0755)
+%{_includedir}/postproc/
+%{_libdir}/libpostproc.so*
 
+
 %changelog
+* Tue Nov  2 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.4.9-0.20041102.1
+- Update to 20040926 CVS to fix FC3 compilation problems... not!
+- Moved OPTFLAGS to --extra-cflags configure option... no better!
+- Add HAVE_LRINTF workaround to fix compile failure... yeah, one less.
+- Disable -fPIC, libpostproc breaks with it enabled... argh :-(
+- ...I give up, disable a52 for now.
+
+* Mon Sep 27 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.4.9-0.pre1.1
+- Update to 0.4.9-pre1.
+- Enable GPL, pp, shared and shared-pp!
+- Add sharedpp and nostrip patches from livna.org rpm.
+- Add PIC vs. __PIC__ patch.
+- Re-enable MMX.
+- Add mandatory -fomit-frame-pointer flag to not bomb on compile.
+- Added man pages.
+- Added -UUSE_FASTMEMCPY for libpostproc, otherwise we get :
+  libpostproc.so.0: undefined reference to `fast_memcpy'
+
 * Mon Aug  2 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.4.8-3
 - Removed explicit binary dependencies.
 - Removed faac support, it doesn't exist.

Modified: trunk/rpms/frozen-bubble/frozen-bubble.spec
===================================================================
--- trunk/rpms/frozen-bubble/frozen-bubble.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/frozen-bubble/frozen-bubble.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -75,7 +75,10 @@
 # Quick fix in order to not have rpm pick up perl(Gimp) as a dependency
 %{__chmod} -x %{buildroot}%{_prefix}/share/%{name}/gfx/shoot/create.pl
 
+# Clean up the installed perl files
+%{__rm} -f `find %{buildroot} -name '*.bs' -o -name .packlist`
 
+
 %clean
 %{__rm} -rf %{buildroot}
 
@@ -99,6 +102,7 @@
 %changelog
 * Tue Nov  2 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.0-7
 - Added perl-SDL.patch to fix running against recent releases.
+- Remove .bs and .packlist temp perl files from the packaged files.
 
 * Wed May 19 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.0-6
 - Updated the source location.

Modified: trunk/rpms/gnome-alsamixer/gnome-alsamixer.spec
===================================================================
--- trunk/rpms/gnome-alsamixer/gnome-alsamixer.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/gnome-alsamixer/gnome-alsamixer.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -58,7 +58,7 @@
 
 %files
 %defattr(-, root, root, 0755)
-%doc AUTHORS COPYING ChangeLog NEWS README TODO
+%doc AUTHORS COPYING ChangeLog
 %{_bindir}/%{name}
 %{_datadir}/applications/*%{name}.desktop
 %{_datadir}/pixmaps/%{name}

Modified: trunk/rpms/gstreamer-monkeysaudio/gstreamer-monkeysaudio.spec
===================================================================
--- trunk/rpms/gstreamer-monkeysaudio/gstreamer-monkeysaudio.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/gstreamer-monkeysaudio/gstreamer-monkeysaudio.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -10,7 +10,7 @@
 Summary: 	GStreamer Monkey's Audio Plugin
 
 Group: 		Applications/Multimedia
-License: 	Free To Use (Monkey's Audio License)
+License: 	Freeware
 URL:		<A HREF="http://gstreamer.net/">http://gstreamer.net/</A>
 Source: 	<A HREF="http://freedesktop.org/~gstreamer/src/gst-monkeysaudio/gst-monkeysaudio-%{version">http://freedesktop.org/~gstreamer/src/gst-monkeysaudio/gst-monkeysaudio-%{version</A>}.tar.gz
 BuildRoot:	%{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
@@ -19,9 +19,9 @@
 Requires(post):	%{_bindir}/gst-register-%{majorminor}
 Requires:	%{gstreamer}-plugins &gt;= %{gstp_minver}
 
-BuildRequires: 	%{gstreamer}-devel &gt;= %{gst_minver}
-BuildRequires: 	%{gstreamer}-plugins-devel &gt;= %{gst_minver}
-BuildRequires: 	gcc-c++
+BuildRequires:	%{gstreamer}-devel &gt;= %{gst_minver}
+BuildRequires:	%{gstreamer}-plugins-devel &gt;= %{gst_minver}
+BuildRequires:	gcc-c++
 
 %description
 GStreamer is a streaming-media framework, based on graphs of filters which

Modified: trunk/rpms/gtk2-engine-smooth/gtk2-engine-smooth.spec
===================================================================
--- trunk/rpms/gtk2-engine-smooth/gtk2-engine-smooth.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/gtk2-engine-smooth/gtk2-engine-smooth.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -52,6 +52,7 @@
 
 %files
 %defattr(-, root, root, 0755)
+%doc AUTHORS COPYING NEWS README
 %{_libdir}/gtk/themes/engines/libsmooth.*
 %{_libdir}/gtk-2.0/2.4.0/engines/libsmooth.*
 %{_datadir}/themes/*

Modified: trunk/rpms/gtkmm2/gtkmm2.spec
===================================================================
--- trunk/rpms/gtkmm2/gtkmm2.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/gtkmm2/gtkmm2.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -37,7 +37,7 @@
 
 
 %prep
-%setup -q -n gtkmm-%{version}
+%setup -n gtkmm-%{version}
 
 
 %build

Modified: trunk/rpms/gtkpod/gtkpod.spec
===================================================================
--- trunk/rpms/gtkpod/gtkpod.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/gtkpod/gtkpod.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -25,7 +25,7 @@
 
 
 %prep
-%setup -q -n %{name}-%{version}-%{extrarelease}
+%setup -n %{name}-%{version}-%{extrarelease}
 %patch -p0
 
 # Create a desktop menu entry
@@ -75,7 +75,7 @@
 
 %files -f %{name}.lang
 %defattr(-, root, root, 0755)
-%doc AUTHORS COPYING NEWS README
+%doc AUTHORS COPYING README
 %{_bindir}/gtkpod
 %{_datadir}/gtkpod/
 %{_datadir}/pixmaps/gtkpod.png

Modified: trunk/rpms/gxmame/gxmame.spec
===================================================================
--- trunk/rpms/gxmame/gxmame.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/gxmame/gxmame.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -20,7 +20,7 @@
 the same GUI than mame32. For the moment it will just have the same gui, the
 final goal is to be able to share config files with Mame32k (or any version
 of mame32 that writes config files instead of saving data into windows
-registery) allowing dual booter to have the same environement (favorite,
+registery) allowing dual booter to have the same environment (favorite,
 times played, last game selected, gui preference...) under windows and Linux.
 
 

Modified: trunk/rpms/hardlink++/hardlink++.spec
===================================================================
--- trunk/rpms/hardlink++/hardlink++.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/hardlink++/hardlink++.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -19,7 +19,7 @@
 
 
 %prep
-%setup -q
+%setup
 %patch -p1 -b .stdio
 
 

Modified: trunk/rpms/id3lib/id3lib.spec
===================================================================
--- trunk/rpms/id3lib/id3lib.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/id3lib/id3lib.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -47,7 +47,8 @@
 %makeinstall
 # Clean docs for inclusion
 %{__rm} -f doc/{Doxyfile*,Makefile*,*.in}
-%{__rm} -rf examples/{Makefile*,.deps/,.libs/}
+%{__rm} -rf examples/{Makefile*,.deps/,.libs/,*.o}
+%{__rm} -rf examples/{id3convert,id3cp,id3info,id3tag}
 
 
 %clean
@@ -77,6 +78,9 @@
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 3.8.3-7
+- Removed binary stuff from the included examples, leave only source.
+
 * Mon Aug 16 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 3.8.3-7
 - Fix linking problem at last by overriding LDFLAGS manually, thanks to
   Pedro Lopez for the tip.

Modified: trunk/rpms/imlib2/imlib2.spec
===================================================================
--- trunk/rpms/imlib2/imlib2.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/imlib2/imlib2.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -43,6 +43,7 @@
 
 %build
 %configure \
+    --with-pic \
 %ifarch %{ix86}
     --enable-mmx
 %else
@@ -96,8 +97,9 @@
 
 
 %changelog
-* Tue Nov  2 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.1.2-2
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.1.2-2
 - Added bzip2 support.
+- Add --with-pic configure option, but lib still seems to have non-pic code.
 
 * Sat Sep 25 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.2-1
 - Updated to release 1.1.2. (Antti Markus)

Modified: trunk/rpms/js/js.spec
===================================================================
--- trunk/rpms/js/js.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/js/js.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -11,10 +11,6 @@
 License: MPL
 Group: Development/Languages
 URL: <A HREF="http://www.mozilla.org/js/">http://www.mozilla.org/js/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="http://ftp.mozilla.org/pub/mozilla.org/js/js-%{real_version">http://ftp.mozilla.org/pub/mozilla.org/js/js-%{real_version</A>}.tar.gz
 Patch0: js-make.patch
 Patch1: js-shlib.patch
@@ -43,14 +39,14 @@
 
 %build
 BUILD_OPT=&quot;1&quot; %{__make} -C src -f Makefile.ref \
-	XCFLAGS=&quot;%{optflags} -fPIC&quot; \
-	BUILD_OPT=&quot;1&quot;
+    XCFLAGS=&quot;%{optflags} -fPIC&quot; \
+    BUILD_OPT=&quot;1&quot;
 
 %install
 %{__rm} -rf %{buildroot}
 %{__install} -d -m0755 %{buildroot}%{_bindir} \
-			%{buildroot}%{_libdir} \
-			%{buildroot}%{_includedir}/js/
+                       %{buildroot}%{_libdir} \
+                       %{buildroot}%{_includedir}/js/
 %{__install} -m0755 src/Linux_All_OPT.OBJ/js %{buildroot}%{_bindir}
 %{__install} -m0755 src/Linux_All_OPT.OBJ/jscpucfg %{buildroot}%{_bindir}
 %{__install} -m0755 src/Linux_All_OPT.OBJ/libjs.so %{buildroot}%{_libdir}/libjs.so.1

Modified: trunk/rpms/kannel/kannel.spec
===================================================================
--- trunk/rpms/kannel/kannel.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/kannel/kannel.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -8,14 +8,20 @@
 Summary: WAP and SMS gateway
 Name: kannel
 Version: 1.3.2
-Release: 3
+Release: 4
 License: Kannel
 Group: System Environment/Daemons
 URL: <A HREF="http://www.kannel.org/">http://www.kannel.org/</A>
 Source: <A HREF="http://www.kannel.org/download/%{version">http://www.kannel.org/download/%{version</A>}/gateway-%{version}.tar.bz2
 Patch: mblox_optionals_0.1.diff
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+BuildRequires: bison, byacc, flex, ImageMagick
 BuildRequires: libxml2-devel, openssl-devel, zlib-devel
+BuildRequires: pcre-devel
+# DB backends
+BuildRequires: sqlite-devel
+# For the docs... I think we need transfig too, so disable for now.
+#BuildRequires: jadetex, tetex-dvips, docbook-dtds, docbook-style-dsssl
 
 %description
 The Kannel Open Source WAP and SMS gateway works as both an SMS gateway, for
@@ -52,7 +58,8 @@
 # Fix for the openssl THREADS check, which should be OPENSSL_THREADS
 %{!?_without_newsslcheck: %{__perl} -pi.orig -e 's|(defined\()THREADS\)|$1OPENSSL_THREADS)|g' configure}
 %configure \
-    --enable-start-stop-daemon
+    --enable-start-stop-daemon \
+    --with-sqlite
 %{__make} %{?_smp_mflags}
 
 
@@ -98,6 +105,10 @@
 
 
 %changelog
+* Thu Nov  4 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.3.2-4
+- Added pcre support, doc building (almost) and sqlite backend...
+  it still fails with a corrupt first line of .depend on FC3, though.
+
 * Mon Sep 20 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.3.2-3
 - Added mblox_optionals_0.1.diff patch.
 

Modified: trunk/rpms/kernel-module-adm8211/kernel-module-adm8211.spec
===================================================================
--- trunk/rpms/kernel-module-adm8211/kernel-module-adm8211.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/kernel-module-adm8211/kernel-module-adm8211.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -68,7 +68,7 @@
 
 
 %prep
-%setup -q -n adm8211
+%setup -n adm8211
 %patch -p1
 
 

Modified: trunk/rpms/kernel-module-pwcx/kernel-module-pwcx.spec
===================================================================
--- trunk/rpms/kernel-module-pwcx/kernel-module-pwcx.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/kernel-module-pwcx/kernel-module-pwcx.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -66,7 +66,7 @@
 
 
 %prep
-%setup -q -n pwcx-9.0-beta-2
+%setup -n pwcx-9.0-beta-2
 %patch -p2
 
 

Modified: trunk/rpms/kernel-module-qc-usb/kernel-module-qc-usb.spec
===================================================================
--- trunk/rpms/kernel-module-qc-usb/kernel-module-qc-usb.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/kernel-module-qc-usb/kernel-module-qc-usb.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -77,7 +77,7 @@
 
 
 %prep
-%setup -q -n qc-usb-%{version}
+%setup -n qc-usb-%{version}
 %patch -p1
 
 

Modified: trunk/rpms/lame/lame.spec
===================================================================
--- trunk/rpms/lame/lame.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/lame/lame.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -5,14 +5,14 @@
 Summary: LAME Ain't an MP3 Encoder... but it's the best of all
 Name: lame
 Version: 3.96.1
-Release: 1
+Release: 2
 License: LGPL
 Group: Applications/Multimedia
 URL: <A HREF="http://lame.sourceforge.net/">http://lame.sourceforge.net/</A>
 Source: <A HREF="http://dl.sf.net/lame/lame-%{version">http://dl.sf.net/lame/lame-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: ncurses-devel, gcc-c++
-%ifarch %{ix86}
+%ifarch %{ix86} x86_64
 BuildRequires: nasm
 %endif
 Provides: mp3encoder
@@ -44,33 +44,18 @@
 
 
 %build
-### We want to be optimized to the bone!
-### You know what? This i386 stuff is as good as if it was only i686 and
-### the MMX code is enabled at runtime if found! So this is gooooood :-)
-%ifarch i386
-    export CC_OPTS=&quot;-O3 -march=i386 -mcpu=i686 -fomit-frame-pointer -fno-strength-reduce -malign-functions=4 -funroll-loops -ffast-math&quot;
-%else
-    # Vague and ix86 inspired (but working) ppc optimizations
-    %ifarch ppc
-        export CC_OPTS=&quot;-O3 -fsigned-char -fomit-frame-pointer -fno-strength-reduce -funroll-loops -ffast-math&quot;
-    %else
-        export CC_OPTS=&quot;-O3 -fomit-frame-pointer -fno-strength-reduce -funroll-loops -ffast-math&quot;
-    %endif
-%endif
-
 %configure \
     --program-prefix=%{?_program_prefix} \
-%ifarch %{ix86}
+%ifarch %{ix86} x86_64
     --enable-nasm \
 %endif
     --enable-decoder \
     --with-vorbis \
     --enable-analyser=&quot;no&quot; \
     --enable-brhist
+%{__make} %{?_smp_mflags} test CFLAGS=&quot;%{optflags}&quot;
 
-%{__make} %{?_smp_mflags} test CFLAGS=&quot;${CC_OPTS}&quot;
 
-
 %install
 %{__rm} -rf %{buildroot}
 %makeinstall
@@ -95,7 +80,7 @@
 
 %files
 %defattr (-, root, root, 0755)
-%doc ChangeLog COPYING README TODO USAGE doc/html
+%doc ChangeLog COPYING README TODO USAGE doc/html/
 %{_bindir}/*
 %{_libdir}/*.so.*
 %{_mandir}/man1/*
@@ -105,11 +90,14 @@
 %doc API HACKING STYLEGUIDE
 %{_includedir}/*
 %{_libdir}/*.a
-%{_libdir}/*.so
 %exclude %{_libdir}/*.la
+%{_libdir}/*.so
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 3.96.1-2
+- Remove complex CFLAGS, recent compilers already do a grrreat job.
+
 * Mon Sep  6 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 3.96.1-1
 - Update to 3.96.1.
 

Modified: trunk/rpms/libcaca/libcaca.spec
===================================================================
--- trunk/rpms/libcaca/libcaca.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/libcaca/libcaca.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -84,7 +84,7 @@
 %files devel
 %defattr(-, root, root, 0755)
 %doc COPYING %{name}-devel-docs/*
-%{_libdir}/*
+%{_libdir}/*.a
 %{_bindir}/caca-config
 %{_includedir}/*
 %{_mandir}/man1/caca-config.1*
@@ -109,6 +109,7 @@
 %changelog
 * Wed Nov  3 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.9-4
 - Disable man3 pages, they don't build on FC3, this needs fixing.
+- Fix to not get the debuginfo files go into the devel package.
 
 * Wed May 19 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.9-3
 - Rebuild for Fedora Core 2.

Modified: trunk/rpms/libmpeg3/libmpeg3.spec
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/libmpeg3/libmpeg3.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -12,6 +12,7 @@
 Source: <A HREF="http://dl.sf.net/heroines/libmpeg3-%{version">http://dl.sf.net/heroines/libmpeg3-%{version</A>}-src.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: nasm
+Provides: %{name}-devel = %{version}-%{release}
 
 %description
 LibMPEG3 decodes the many many derivatives of MPEG standards into
@@ -58,7 +59,7 @@
 %defattr(-, root, root, 0755)
 %doc COPYING docs/
 %{_bindir}/*
-%{_libdir}/*
+%{_libdir}/*.*
 %{_includedir}/*.h
 
 %changelog
@@ -66,6 +67,8 @@
 - Remove unneeded /usr/bin fix, since we don't use &quot;make install&quot;.
 - Replace -O? with -O1 in optflags since build fails with O2 and gcc 3.4.
 - Make nasm mandatory : The configure script won't run without it anyway.
+- Use libdir/*.* in order to not catch all debuginfo files too.
+- Added -devel provides for now.
 
 * Sat Jun 26 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5.4-2
 - Fixes for x86_64.

Modified: trunk/rpms/libquicktime/libquicktime.spec
===================================================================
--- trunk/rpms/libquicktime/libquicktime.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/libquicktime/libquicktime.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -95,7 +95,7 @@
 
 %files
 %defattr(-, root, root, 0755)
-%doc AUTHORS ChangeLog COPYING NEWS README TODO
+%doc COPYING README TODO
 %{_bindir}/lqtplay
 %{_bindir}/lqt_transcode
 %{_bindir}/qt*

Modified: trunk/rpms/libsamplerate/libsamplerate.spec
===================================================================
--- trunk/rpms/libsamplerate/libsamplerate.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/libsamplerate/libsamplerate.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -12,13 +12,8 @@
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://www.mega-nerd.com/SRC/">http://www.mega-nerd.com/SRC/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="http://www.mega-nerd.com/SRC/libsamplerate-%{version">http://www.mega-nerd.com/SRC/libsamplerate-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-
 BuildRequires: libsndfile-devel &gt;= 1.0.2
 BuildRequires: pkgconfig, fftw-devel, gcc-c++
 
@@ -30,14 +25,14 @@
 also vary with time for speeding up and slowing down effects.
 
 %package devel
-Summary: Header files, libraries and development documentation for %{name}.
+Summary: Header files, libraries and development docs for %{name}
 Group: Development/Libraries
 Requires: %{name} = %{version}-%{release}
 
 %description devel
 This package contains the header files, static libraries and development
-documentation for %{name}. If you like to develop programs using %{name},
-you will need to install %{name}-devel.
+documentation for %{name}. If you like to develop programs using
+%{name}, you will need to install %{name}-devel.
 
 %prep
 %setup
@@ -70,9 +65,9 @@
 %doc doc/*.css doc/*.html doc/*.png
 %{_includedir}/samplerate.h
 %{_libdir}/*.a
+%exclude %{_libdir}/*.la
 %{_libdir}/*.so
 %{_libdir}/pkgconfig/*.pc
-%exclude %{_libdir}/*.la
 
 %changelog
 * Fri Sep 17 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.1.2-1

Modified: trunk/rpms/libsigc++/libsigc++.spec
===================================================================
--- trunk/rpms/libsigc++/libsigc++.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/libsigc++/libsigc++.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -20,7 +20,7 @@
 %description
 This library implements a full callback system for use in widget libraries,
 abstract interfaces, and general programming. Originally part of the Gtk--
-widget set, libsigc++ is now a seperate library to provide for more general
+widget set, libsigc++ is now a separate library to provide for more general
 use. It is the most complete library of its kind with the ablity to connect
 an abstract callback to a class method, function, or function object. It
 contains adaptor classes for connection of dissimilar callbacks and has an

Modified: trunk/rpms/libsndfile/libsndfile.spec
===================================================================
--- trunk/rpms/libsndfile/libsndfile.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/libsndfile/libsndfile.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -45,7 +45,7 @@
 %{__rm} -rf %{buildroot} _docs
 %makeinstall htmldocdir=&quot;`pwd`/_docs&quot;
 # Clean up examples for inclusion in docs
-%{__rm} -rf examples/.libs/
+%{__rm} -rf examples/{.deps,.libs/,*.o}
 
 
 %clean

Modified: trunk/rpms/lirc/lirc.spec
===================================================================
--- trunk/rpms/lirc/lirc.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/lirc/lirc.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -22,7 +22,7 @@
 #%%if %{kmodule}
 #Release: fr1_%{krelver}
 #%%else
-Release: 3
+Release: 4
 #%%endif
 License: GPL
 Group: System Environment/Daemons
@@ -31,12 +31,13 @@
 Source1: lircd.init
 Source2: lircd.logrotate
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-PreReq: /sbin/chkconfig, /sbin/service
+Requires: /sbin/chkconfig, /sbin/service
 BuildRequires: perl
 #%%if %{kmodule}
 #Requires: kernel = %{kver}
 #BuildRequires: kernel-source = %{kver}
 #%%endif
+Provides: lirc-devel = %{version}-%{release}
 
 %description
 LIRC is the Linux Infrared Remote Control package.
@@ -65,15 +66,20 @@
 %install
 %{__rm} -rf %{buildroot}
 %{__make} install DESTDIR=%{buildroot}
-%{__install} -m 755 -D %{SOURCE1} %{buildroot}/etc/init.d/lircd
-%{__install} -m 644 -D %{SOURCE2} %{buildroot}/etc/logrotate.d/lircd
-%{__perl} -pi -e 's|\@SBINDIR\@|%{_sbindir}|g' %{buildroot}/etc/init.d/lircd
-%{__rm} -f doc/Makefile*
+%{__install} -m 755 -D %{SOURCE1} %{buildroot}%{_sysconfdir}/rc.d/init.d/lircd
+%{__install} -m 644 -D %{SOURCE2} %{buildroot}%{_sysconfdir}/logrotate.d/lircd
+%{__perl} -pi -e 's|\@SBINDIR\@|%{_sbindir}|g' \
+    %{buildroot}%{_sysconfdir}/rc.d/init.d/lircd
+%{__rm} -rf doc/{Makefile*,man2html*,.deps,.libs}
 %{__mkdir_p} %{buildroot}/dev
 %{__ln_s} -f ttyS0 %{buildroot}/dev/lirc
-touch %{buildroot}/etc/lircd.conf
-touch %{buildroot}/etc/lircmd.conf
+touch %{buildroot}%{_sysconfdir}/lircd.conf
+touch %{buildroot}%{_sysconfdir}/lircmd.conf
 
+%clean
+%{__rm} -rf %{buildroot}
+
+
 %post
 /sbin/ldconfig
 /sbin/chkconfig --add lircd
@@ -90,17 +96,15 @@
     /sbin/service lircd condrestart &gt;/dev/null 2&gt;&amp;1 || :
 fi
 
-%clean
-%{__rm} -rf %{buildroot}
 
 %files
 %defattr(-, root, root, 0755)
-%doc ANNOUNCE AUTHORS ChangeLog COPYING NEWS README TODO doc remotes
+%doc ANNOUNCE AUTHORS ChangeLog COPYING NEWS README TODO doc/ remotes
 %doc contrib/*.conf contrib/irman2lirc contrib/lircrc contrib/lircs
-/etc/init.d/lircd
-/etc/logrotate.d/lircd
-%ghost %config(noreplace) /etc/lircd.conf
-%ghost %config(noreplace) /etc/lircmd.conf
+%{_sysconfdir}/rc.d/init.d/lircd
+%config %{_sysconfdir}/logrotate.d/lircd
+%ghost %config(noreplace) %{_sysconfdir}/lircd.conf
+%ghost %config(noreplace) %{_sysconfdir}/lircmd.conf
 %{_bindir}/*
 %{_sbindir}/*
 %{_includedir}/lirc
@@ -113,7 +117,12 @@
 /dev/lirc
 %endif
 
+
 %changelog
+* Mon Aug 30 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.6.6-4
+- Add an lirc-devel provides for now.
+- Other minor tweaks... but a major rework is still needed here!
+
 * Mon Aug 30 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.6.6-3
 - Added missing /sbin/ldconfig calls.
 

Modified: trunk/rpms/lzo/lzo.spec
===================================================================
--- trunk/rpms/lzo/lzo.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/lzo/lzo.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -9,15 +9,10 @@
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://www.oberhumer.com/opensource/lzo/">http://www.oberhumer.com/opensource/lzo/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="http://www.oberhumer.com/opensource/lzo/download/lzo-%{version">http://www.oberhumer.com/opensource/lzo/download/lzo-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-
 BuildRequires: zlib-devel
-%ifarch %{ix86}
+%ifarch %{ix86} x86_64
 BuildRequires: nasm
 %endif
 Requires: zlib &gt;= 1.0.0
@@ -44,7 +39,7 @@
 
 %build
 %configure \
-	--enable-shared
+    --enable-shared
 %{__make} %{?_smp_mflags}
 
 %install
@@ -94,3 +89,4 @@
 - added -q parameter to %setup
 - added striping of the library
 - removed COPYING file from %doc, copyright is in the header
+

Added: trunk/rpms/mach/fedora-3-i386
===================================================================
--- trunk/rpms/mach/fedora-3-i386	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/mach/fedora-3-i386	2004-11-05 11:50:06 UTC (rev 2423)
@@ -0,0 +1,80 @@
+# mach dist configuration                                        -*- python -*-
+
+# fedora-3-i386: configuration for Fedora 3
+
+# each distro flavour has an aptsources line describing where to get each
+# kind of package from
+# each actual dist has a packages dict for bootstrap packages and
+# a sourceslist dict referencing aptsources lines to use
+
+### Fedora Core 3 flavours
+aptsources['fedora-3-i386'] = {
+    'core':             'rpm ' + fedora      + ' 3/i386 core',
+    'updates':          'rpm ' + fedora      + ' 3/i386 updates',
+    'gstreamer':        'rpm ' + gstreamer   + ' fedora/3/i386 gst',
+    'gstreamer-build':  'rpm ' + gstreamer   + ' fedora/3/i386 build',
+    'gstreamer-deps':   'rpm ' + gstreamer   + ' fedora/3/i386 deps',
+    'freshrpms':        'rpm ' + freshrpmsfd + ' 3/i386 freshrpms',
+    'jpackage-generic': 'rpm ' + jpackage    + ' generic free',
+    'jpackage-fc3':     'rpm ' + jpackage    + ' fedora-3 free',
+    'jpackage-nonfree': 'rpm ' + jpackagenf  + ' generic non-free',
+}
+
+# Fedora Core 3
+packages['fedora-3-i386-core'] = {
+    'dir':      'fedoracore-3-i386',
+    'minimal':  'bash glibc',
+    'base':     'coreutils findutils openssh-server',
+    'build':    'dev rpm-devel rpm-build make gcc tar gzip patch ' +
+                'unzip bzip2 diffutils cpio elfutils',
+}
+sourceslist['fedora-3-i386-core'] = {
+    'fedora-3-i386': ('core', )
+}
+config['fedora-3-i386-core'] = {}
+aliases['fedora-3-i386-core'] = ('f3c', 'fc3', )
+
+# Fedora Core 3 with updates
+packages['fedora-3-i386-updates'] = packages['fedora-3-i386-core']
+sourceslist['fedora-3-i386-updates'] = {
+    'fedora-3-i386': ('core', 'updates', )
+}
+config['fedora-3-i386-updates'] = {}
+aliases['fedora-3-i386-updates'] = ('f3u', )
+
+# Fedora Core 3 with GStreamer
+packages['fedora-3-i386-gstreamer'] = packages['fedora-3-i386-core']
+sourceslist['fedora-3-i386-gstreamer'] = {
+    'fedora-3-i386': ('core', 'gstreamer-deps', 'gstreamer-build', 'gstreamer')
+}
+config['fedora-3-i386-gstreamer'] = { 'release': '3' }
+aliases['fedora-3-i386-gstreamer'] = ('f3g', )
+
+packages['fedora-3-i386-gstreamer-deps'] = packages['fedora-3-i386-core']
+sourceslist['fedora-3-i386-gstreamer-deps'] = {
+    'fedora-3-i386': ('core', 'gstreamer-deps')
+}
+config['fedora-3-i386-gstreamer-deps'] = { 'release': '3' }
+aliases['fedora-3-i386-gstreamer-deps'] = ('f3gd', )
+
+# Fedora Core 3 with freshrpms
+packages['fedora-3-i386-freshrpms'] = packages['fedora-3-i386-updates']
+packages['fedora-3-i386-freshrpms']['build'] = packages['fedora-3-i386-updates']['build'] + ' gcc-c++ elfutils redhat-rpm-config'
+sourceslist['fedora-3-i386-freshrpms'] = {
+    'fedora-3-i386': ('core', 'updates', 'freshrpms', )
+}
+config['fedora-3-i386-freshrpms'] = { 'release': '1.fc3.fr' }
+aliases['fedora-3-i386-freshrpms'] = ('f3fr', )
+
+# Fedora Core 3 with JPackage
+packages['fedora-3-i386-jpackage'] = packages['fedora-3-i386-updates'].copy()
+packages['fedora-3-i386-jpackage']['base'] = packages['fedora-3-i386-updates']['base'] + ' java-1.4.2-sun'
+packages['fedora-3-i386-jpackage']['build'] = packages['fedora-3-i386-updates']['build'] + ' gcc-c++ redhat-rpm-config java-1.4.2-sun-devel'
+sourceslist['fedora-3-i386-jpackage'] = {
+    'fedora-3-i386':
+    sourceslist['fedora-3-i386-updates']['fedora-3-i386'] +
+    ('jpackage-generic', 'jpackage-fc3', 'jpackage-nonfree', ),
+}
+config['fedora-3-i386-jpackage'] = {}
+aliases['fedora-3-i386-jpackage'] = ('fc3jpp', )
+

Added: trunk/rpms/mach/fedora-3-x86_64
===================================================================
--- trunk/rpms/mach/fedora-3-x86_64	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/mach/fedora-3-x86_64	2004-11-05 11:50:06 UTC (rev 2423)
@@ -0,0 +1,46 @@
+# mach dist configuration                                        -*- python -*-
+
+# fedora-3-x86_64: configuration for Fedora 3
+
+# each distro flavour has an aptsources line describing where to get each
+# kind of package from
+# each actual dist has a packages dict for bootstrap packages and
+# a sourceslist dict referencing aptsources lines to use
+
+### Fedora Core 3 flavours
+aptsources['fedora-3-x86_64'] = {
+    'core':             'rpm ' + fedora      + ' 3/x86_64 core',
+    'updates':          'rpm ' + fedora      + ' 3/x86_64 updates',
+    'freshrpms':        'rpm ' + freshrpmsfd + ' 3/x86_64 freshrpms',
+}
+
+# Fedora Core 3
+packages['fedora-3-x86_64-core'] = {
+    'dir':      'fedoracore-3-x86_64',
+    'minimal':  'bash glibc',
+    'base':     'coreutils findutils openssh-server',
+    'build':    'dev rpm-devel rpm-build make gcc gcc-c++ tar gzip patch ' +
+                'unzip bzip2 diffutils cpio elfutils redhat-rpm-config',
+}
+sourceslist['fedora-3-x86_64-core'] = {
+    'fedora-3-x86_64': ('core', )
+}
+config['fedora-3-x86_64-core'] = {}
+aliases['fedora-3-x86_64-core'] = ('f3cx', 'fc3x', )
+
+# Fedora Core 3 with updates
+packages['fedora-3-x86_64-updates'] = packages['fedora-3-x86_64-core']
+sourceslist['fedora-3-x86_64-updates'] = {
+    'fedora-3-x86_64': ('core', 'updates', )
+}
+config['fedora-3-x86_64-updates'] = {}
+aliases['fedora-3-x86_64-updates'] = ('f3ux', )
+
+# Fedora Core 3 with freshrpms
+packages['fedora-3-x86_64-freshrpms'] = packages['fedora-3-x86_64-core']
+sourceslist['fedora-3-x86_64-freshrpms'] = {
+    'fedora-3-x86_64': ('core', 'updates', 'freshrpms', )
+}
+config['fedora-3-x86_64-freshrpms'] = {}
+aliases['fedora-3-x86_64-freshrpms'] = ('f3frx', )
+

Modified: trunk/rpms/mach/mach.spec
===================================================================
--- trunk/rpms/mach/mach.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/mach/mach.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -12,15 +12,16 @@
 Summary: Make A CHroot
 Name: mach
 Version: 0.4.6
-Release: 1
+Release: 2
 Group: Applications/System
 License: GPL
 URL: <A HREF="http://thomas.apestaart.org/projects/mach/">http://thomas.apestaart.org/projects/mach/</A>
 Source: <A HREF="http://thomas.apestaart.org/download/mach/mach-%{version">http://thomas.apestaart.org/download/mach/mach-%{version</A>}.tar.bz2
 Source1: fedora-2-x86_64
+Source2: fedora-3-i386
+Source3: fedora-3-x86_64
 Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: %{python} &gt;= 2.0.0
-
 Requires: rpm-python, apt, sed, cpio, python &gt;= 2.0
 
 %description
@@ -52,8 +53,9 @@
 %{__install} -d -m 775 %{buildroot}%{_localstatedir}/cache/mach/packages
 %{__install} -d -m 775 %{buildroot}%{_localstatedir}/cache/mach/archives
 
-# Additionnal x86_64 Fedora Core 2 config
-%{__install} -m 0644 %{SOURCE1} %{buildroot}%{_sysconfdir}/mach/dist.d/
+# Additionnal config files
+%{__install} -m 0644 %{SOURCE1} %{SOURCE2} %{SOURCE3} \
+    %{buildroot}%{_sysconfdir}/mach/dist.d/
 
 
 %clean
@@ -91,20 +93,23 @@
 %files
 %defattr(-, root, root, -)
 %doc ChangeLog COPYING README AUTHORS BUGS TODO FORGETMENOT RELEASE
-%dir %{_sysconfdir}/mach
+%dir %{_sysconfdir}/mach/
 %config %{_sysconfdir}/mach/conf
 %config %{_sysconfdir}/mach/location
-%config %{_sysconfdir}/mach/dist.d
+%config %{_sysconfdir}/mach/dist.d/
 %{_bindir}/mach
 %attr(04750, root, mach) %{_sbindir}/mach-helper
-%attr(-, mach, mach) %dir %{_localstatedir}/lib/mach
-%attr(-, mach, mach) %dir %{_localstatedir}/lib/mach/states
-%attr(-, mach, mach) %dir %{_localstatedir}/lib/mach/roots
-%attr(-, mach, mach) %dir %{_localstatedir}/cache/mach/packages
-%attr(-, mach, mach) %dir %{_localstatedir}/cache/mach/archives
+%attr(-, mach, mach) %dir %{_localstatedir}/lib/mach/
+%attr(-, mach, mach) %dir %{_localstatedir}/lib/mach/states/
+%attr(-, mach, mach) %dir %{_localstatedir}/lib/mach/roots/
+%attr(-, mach, mach) %dir %{_localstatedir}/cache/mach/packages/
+%attr(-, mach, mach) %dir %{_localstatedir}/cache/mach/archives/
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net">http://freshrpms.net</A>&gt; 0.4.6-2
+- Added Fedora Core 3 files for i386 and x86_64.
+
 * Sun Jul 11 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net">http://freshrpms.net</A>&gt; 0.4.6-1
 - Update to 0.4.6.
 

Modified: trunk/rpms/mixxx/mixxx.spec
===================================================================
--- trunk/rpms/mixxx/mixxx.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/mixxx/mixxx.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -17,13 +17,8 @@
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://mixxx.sourceforge.net/">http://mixxx.sourceforge.net/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="http://dl.sf.net/mixxx/mixxx-%{version">http://dl.sf.net/mixxx/mixxx-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-
 BuildRequires: glibc-devel, XFree86-devel, qt-devel &gt;= 3.0, glib-devel
 BuildRequires: audiofile-devel, libmad-devel, libid3tag-devel
 BuildRequires: libvorbis-devel, libogg-devel, libsndfile-devel

Modified: trunk/rpms/mplayer/mplayer.spec
===================================================================
--- trunk/rpms/mplayer/mplayer.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/mplayer/mplayer.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -214,7 +214,10 @@
     %makeinstall -C libavcodec/libpostproc
 fi
 
+# Clean the docs we'll include
+%{__rm} -f `find DOCS -name .cvsignore`
 
+
 %post
 /sbin/ldconfig
 update-desktop-database %{_datadir}/applications &gt;/dev/null 2&gt;&amp;1 || :

Modified: trunk/rpms/ogmtools/ogmtools.spec
===================================================================
--- trunk/rpms/ogmtools/ogmtools.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/ogmtools/ogmtools.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -11,7 +11,6 @@
 URL: <A HREF="http://www.bunkus.org/videotools/ogmtools/">http://www.bunkus.org/videotools/ogmtools/</A>
 Source: <A HREF="http://www.bunkus.org/videotools/ogmtools/ogmtools-%{version">http://www.bunkus.org/videotools/ogmtools/ogmtools-%{version</A>}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-Requires: libdvdread, libogg, libvorbis
 BuildRequires: gcc-c++, libdvdread-devel, libogg-devel, libvorbis-devel
 
 %description

Modified: trunk/rpms/perl-IPC-ShareLite/perl-IPC-ShareLite.spec
===================================================================
--- trunk/rpms/perl-IPC-ShareLite/perl-IPC-ShareLite.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/perl-IPC-ShareLite/perl-IPC-ShareLite.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -48,7 +48,7 @@
 
 ### Clean up buildroot
 %{__rm} -rf %{buildroot}%{_libdir}/perl5/*/*-linux-thread-multi/
-%{__rm} -f %{buildroot}%{_libdir}/perl5/vendor_perl/*/*-linux-thread-multi/auto/*{,/*}/.packlist
+%{__rm} -f %{buildroot}%{_libdir}/perl5/vendor_perl/*/*-linux-thread-multi/auto/*{,/*}/{.packlist,*.bs}
 
 
 %clean 

Modified: trunk/rpms/perl-SDL/perl-SDL.spec
===================================================================
--- trunk/rpms/perl-SDL/perl-SDL.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/perl-SDL/perl-SDL.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -10,8 +10,6 @@
 URL: <A HREF="http://sdlperl.org/">http://sdlperl.org/</A>
 Source: <A HREF="ftp://sdlperl.org/SDL_perl/SDL_perl-%{version">ftp://sdlperl.org/SDL_perl/SDL_perl-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-Requires: SDL &gt;= 1.2.3, SDL_mixer &gt;= 1.0.5, SDL_image &gt;= 1.0.0, SDL_net
-Requires: SDL_ttf, libjpeg, libpng, smpeg, perl
 BuildRequires: SDL-devel, SDL_mixer-devel, SDL_image-devel, SDL_net-devel
 BuildRequires: SDL_ttf-devel, libjpeg-devel, libpng-devel, smpeg-devel
 # This is to pull in missing libs, to fix the &quot;undefined symbol: _Znwj&quot; problem
@@ -39,7 +37,8 @@
 eval `%{__perl} '-V:installarchlib'`
 %{__mkdir_p} %{buildroot}${installarchlib}
 %makeinstall
-%{__rm} -f `/usr/bin/find %{buildroot} -type f -name perllocal.pod -o -name .packlist`
+%{__rm} -f `/usr/bin/find %{buildroot} -type f \
+    -name perllocal.pod -o -name .packlist -o -name '*.bs'`
 
 # Build the file list to include
 find %{buildroot}%{_prefix} -type f -print | \

Modified: trunk/rpms/perl-Video-DVDRip/perl-Video-DVDRip.spec
===================================================================
--- trunk/rpms/perl-Video-DVDRip/perl-Video-DVDRip.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/perl-Video-DVDRip/perl-Video-DVDRip.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -80,7 +80,7 @@
 
 %files
 %defattr(-, root, root, 0755)
-%{_bindir}/*
+%attr(0755, root, root) %{_bindir}/*
 %lang(cs) %{perl_sitelib}/LocaleData/cs/LC_MESSAGES/video.dvdrip.mo
 %lang(de) %{perl_sitelib}/LocaleData/de/LC_MESSAGES/video.dvdrip.mo
 %lang(es) %{perl_sitelib}/LocaleData/es/LC_MESSAGES/video.dvdrip.mo

Modified: trunk/rpms/perl-libintl/perl-libintl.spec
===================================================================
--- trunk/rpms/perl-libintl/perl-libintl.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/perl-libintl/perl-libintl.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -22,7 +22,7 @@
 
 
 %prep
-%setup -q -n libintl-perl-%{version}
+%setup -n libintl-perl-%{version}
 
 
 %build

Modified: trunk/rpms/plib/plib.spec
===================================================================
--- trunk/rpms/plib/plib.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/plib/plib.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -52,7 +52,7 @@
 
 %files devel
 %defattr(-, root, root, 0755)
-%doc AUTHORS COPYING ChangeLog NOTICE NEWS README
+%doc AUTHORS COPYING ChangeLog NOTICE README
 %{_includedir}/*
 %{_libdir}/*.a
 

Modified: trunk/rpms/plib16/plib16.spec
===================================================================
--- trunk/rpms/plib16/plib16.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/plib16/plib16.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -54,7 +54,7 @@
 
 %files devel
 %defattr(-, root, root, 0755)
-%doc AUTHORS COPYING ChangeLog NOTICE NEWS README
+%doc AUTHORS COPYING ChangeLog NOTICE README
 %{_includedir}/*
 %{_libdir}/*.a
 

Modified: trunk/rpms/portaudio/portaudio.spec
===================================================================
--- trunk/rpms/portaudio/portaudio.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/portaudio/portaudio.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -4,19 +4,16 @@
 
 %define rversion v18_1
 
-Summary: Free, cross platform, open-source, audio I/O library.
+Summary: Free, cross platform, open-source, audio I/O library
 Name: portaudio
 Version: 18.1
-Release: 1
+Release: 2
 License: BSD-like
 Group: System Environment/Libraries
 URL: <A HREF="http://www.portaudio.com/">http://www.portaudio.com/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="http://www.portaudio.com/archives/portaudio_%{rversion">http://www.portaudio.com/archives/portaudio_%{rversion</A>}.zip
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+Provides: %{name}-devel = %{version}-%{release}
 
 %description
 PortAudio is a portable audio I/O library designed for cross-platform
@@ -27,27 +24,34 @@
 %prep
 %setup -n %{name}_%{rversion} 
 
-%{__perl} -pi.orig -e 's|^(LIBINST) = /usr/local/lib|$1 = %{_libdir}|' Makefile.linux
+%{__perl} -pi.orig -e 's|^(LIBINST) = /usr/local/lib|$1 = %{_libdir}|' \
+    Makefile.linux
 
 %build
 %{__make} %{?_smp_mflags} -f Makefile.linux sharedlib \
-	CFLAGS=&quot;-fPIC&quot;
+    CFLAGS=&quot;-fPIC&quot;
 
 %install
 %{__rm} -rf %{buildroot}
-%{__install} -D -m0755 pa_unix_oss/libportaudio.so %{buildroot}%{_libdir}/libportaudio.so
-%{__install} -D -m0644 pa_common/portaudio.h %{buildroot}%{_includedir}/portaudio.h
+%{__install} -D -m0755 pa_unix_oss/libportaudio.so \
+    %{buildroot}%{_libdir}/libportaudio.so
+%{__install} -D -m0644 pa_common/portaudio.h \
+    %{buildroot}%{_includedir}/portaudio.h
 
 %clean
 %{__rm} -rf %{buildroot}
 
 %files
-%defattr(0644, root, root, 0755)
+%defattr(-, root, root, 0755)
 %doc LICENSE.txt README.txt docs/
 %{_libdir}/*.so
 %{_includedir}/*.h
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.18-2
+- Add -devel provides.
+- Fix .so 644 mode (overidden in defattr).
+
 * Thu Jun 10 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 18.1-1
 - Added -fPIC for x86_64.
 

Modified: trunk/rpms/psi/psi.spec
===================================================================
--- trunk/rpms/psi/psi.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/psi/psi.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -21,10 +21,6 @@
 License: GPL
 Group: Applications/Communications
 URL: <A HREF="http://psi.affinix.com/">http://psi.affinix.com/</A>
-
-Packager: Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt;
-Vendor: Dries Apt/Yum Repository <A HREF="http://dries.ulyssis.org/ayo/">http://dries.ulyssis.org/ayo/</A>
-
 Source0: <A HREF="http://dl.sf.net/psi/psi-%{version">http://dl.sf.net/psi/psi-%{version</A>}.tar.bz2
 Source1: <A HREF="http://psi.affinix.com/beta/%{tls_plugin">http://psi.affinix.com/beta/%{tls_plugin</A>}.tar.bz2
 Source20: psi_ca.qm
@@ -41,7 +37,6 @@
 Source31: psi_sk.qm
 Source32: psi_zh.qm
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-
 BuildRequires: XFree86-devel, kdelibs-devel, openssl-devel, gcc-c++
 %{!?_without_freedesktop:BuildRequires: desktop-file-utils}
 Obsoletes: psi-iconsets &lt; 0.9.1

Modified: trunk/rpms/python-imaging/python-imaging.spec
===================================================================
--- trunk/rpms/python-imaging/python-imaging.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/python-imaging/python-imaging.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -17,10 +17,6 @@
 License: Distributable
 Group: Development/Libraries
 URL: <A HREF="http://www.pythonware.com/products/pil/">http://www.pythonware.com/products/pil/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="http://effbot.org/downloads/Imaging-%{version">http://effbot.org/downloads/Imaging-%{version</A>}.tar.gz
 Patch: python-imaging-1.1.4-setup.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root

Modified: trunk/rpms/rrdtool/rrdtool.spec
===================================================================
--- trunk/rpms/rrdtool/rrdtool.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/rrdtool/rrdtool.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -112,6 +112,8 @@
 %{__rm} -f contrib/Makefile*
 # This is so rpm doesn't pick up perl module dependencies automatically
 find examples/ contrib/ -type f -exec chmod 0644 {} \;
+# And this, to clean up what will be included
+find examples/ contrib/ -type d -name CVS -o -name .libs | xargs %{__rm} -rf
 
 # Put man pages back into place...
 #%{__mkdir_p} %{buildroot}%{_mandir}/

Modified: trunk/rpms/rte/rte.spec
===================================================================
--- trunk/rpms/rte/rte.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/rte/rte.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -42,7 +42,7 @@
 
 %build
 # In 0.5.2, configure has an exit status of 1...
-%configure || :
+%configure --with-pic || :
 %{__make} %{?_smp_mflags}
 
 

Modified: trunk/rpms/scons/scons.spec
===================================================================
--- trunk/rpms/scons/scons.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/scons/scons.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -4,17 +4,16 @@
 Summary: Software CONStruction tool, next-generation build tool
 Name: scons
 Version: 0.96.1
-Release: 1
+Release: 2
 License: MIT
 Group: Development/Tools
 URL: <A HREF="http://www.scons.org/">http://www.scons.org/</A>
-Source: <A HREF="http://dl.sf.net/scons/%{name">http://dl.sf.net/scons/%{name</A>}-%{version}.tar.gz
+Source: <A HREF="http://dl.sf.net/scons/scons-%{version">http://dl.sf.net/scons/scons-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: python
 BuildRequires: python, python-devel
+BuildArch: noarch
 
-Packager: Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt;
-Vendor: Dries Apt/Yum Repository <A HREF="http://dries.ulyssis.org/ayo/">http://dries.ulyssis.org/ayo/</A>
 
 %description
 SCons is an Open Source software construction tool--that is, a
@@ -35,8 +34,8 @@
 %install
 %{__rm} -rf %{buildroot}
 %{__python} setup.py install --root=%{buildroot}
-%{__install} -D -m 644 scons.1 %{buildroot}/%{_mandir}/man1/scons.1
-%{__install} -D -m 644 sconsign.1 %{buildroot}/%{_mandir}/man1/sconsign.1
+%{__install} -D -m 0644 scons.1 %{buildroot}/%{_mandir}/man1/scons.1
+%{__install} -D -m 0644 sconsign.1 %{buildroot}/%{_mandir}/man1/sconsign.1
 
 
 %clean
@@ -47,11 +46,14 @@
 %defattr(-, root, root, 0755)
 %doc CHANGES.txt LICENSE.txt README.txt RELEASE.txt 
 %{_prefix}/bin/*
-%{_prefix}/lib/scons
+%{_prefix}/lib/scons/
 %{_mandir}/man1/*
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.96.1-2
+- Make the package noarch as it always should have been.
+
 * Tue Aug 24 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.96.1-1
 - Update to 0.96.1.
 

Modified: trunk/rpms/smpeg/smpeg.spec
===================================================================
--- trunk/rpms/smpeg/smpeg.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/smpeg/smpeg.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -8,20 +8,13 @@
 License: LGPL
 Group: System Environment/Libraries
 URL: <A HREF="http://icculus.org/smpeg/">http://icculus.org/smpeg/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source: <A HREF="ftp://sunsite.dk/pub/os/linux/loki/open-source/smpeg/smpeg-%{version">ftp://sunsite.dk/pub/os/linux/loki/open-source/smpeg/smpeg-%{version</A>}.tar.gz
 Patch0: smpeg-0.4.4-gcc32.patch
 Patch1: smpeg-0.4.4-fixes.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+BuildRequires: SDL-devel, gtk+-devel, gcc-c++
+BuildRequires: autoconf, automake, automake14
 
-
-BuildRequires: SDL-devel, gtk+-devel
-BuildRequires: automake14, gcc-c++
-BuildRequires: automake, autoconf
-
 %description
 SMPEG is based on UC Berkeley's mpeg_play software MPEG decoder
 and SPLAY, an mpeg audio decoder created by Woo-jae Jung. SMPEG has
@@ -31,7 +24,7 @@
 %package devel
 Summary: Header files, libraries and development documentation for %{name}
 Group: Development/Libraries
-Requires: %{name} = %{version}-%{release}
+Requires: %{name} = %{version}
 
 %description devel
 This package contains the header files, static libraries and development
@@ -47,17 +40,13 @@
 %{__automake} -a || %{__automake}-1.4 -a
 %{__autoconf}
 %configure \
-	--disable-debug \
-	--disable-opengl-player
+    --disable-opengl-player
 %{__make} %{?_smp_mflags}
 
 %install
 %{__rm} -rf %{buildroot}
 %makeinstall
 
-### Clean up buildroot
-%{__rm} -f %{buildroot}%{_libdir}/*.la
-
 %clean
 %{__rm} -rf %{buildroot}
 
@@ -70,20 +59,21 @@
 %files
 %defattr(-, root, root, 0755)
 %doc CHANGES COPYING README TODO
-%doc %{_mandir}/man[^3]/*
 %{_bindir}/plaympeg
 %{_bindir}/gtv
 %{_libdir}/*.so.*
+%{_mandir}/man1/*
 
 %files devel
 %defattr(-, root, root, 0755)
 %{_bindir}/smpeg-config
+%{_includedir}/*
 %{_libdir}/*.a
+%exclude %{_libdir}/*.la
 %{_libdir}/*.so
-%{_datadir}/aclocal/smpeg.m4
-%{_includedir}/*
-#exclude %{_libdir}/*.la
+%{_datadir}/aclocal/*.m4
 
 %changelog
 * Thu Sep 04 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4.4-0
 - Initial package. (using DAR)
+

Modified: trunk/rpms/sqlite/sqlite.spec
===================================================================
--- trunk/rpms/sqlite/sqlite.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/sqlite/sqlite.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -11,10 +11,6 @@
 License: LGPL
 Group: Applications/Databases
 URL: <A HREF="http://www.sqlite.org/">http://www.sqlite.org/</A>
-
-Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
-Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
-
 Source:	<A HREF="http://www.sqlite.org/sqlite-%{version">http://www.sqlite.org/sqlite-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
@@ -54,7 +50,6 @@
 
 %prep
 %setup -n %{name}
-
 ### FIXME: Make Makefile use autotool directory standard. (Please fix upstream)
 %{__perl} -pi.orig -e 's|\$\(exec_prefix\)/lib|\$(libdir)|g' Makefile.in
 

Modified: trunk/rpms/swfdec/swfdec.spec
===================================================================
--- trunk/rpms/swfdec/swfdec.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/swfdec/swfdec.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -8,10 +8,8 @@
 License: LGPL
 Group: System Environment/Libraries
 URL: <A HREF="http://swfdec.sourceforge.net/">http://swfdec.sourceforge.net/</A>
-
 Source: <A HREF="http://www.schleef.org/swfdec/download/swfdec-%{version">http://www.schleef.org/swfdec/download/swfdec-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-
 BuildRequires: mozilla-devel, libart_lgpl-devel, gtk2-devel &gt;= 2.1.2
 BuildRequires: libmad-devel, SDL-devel, gdk-pixbuf-devel, gcc-c++
 BuildRequires: gimp-devel &gt;= 2.0, liboil-devel
@@ -75,7 +73,7 @@
 
 %files 
 %defattr(-, root, root, 0755)
-%doc AUTHORS COPYING NEWS README TODO 
+%doc AUTHORS COPYING README TODO 
 %exclude %{_sysconfdir}/gtk-2.0/gdk-pixbuf.loaders
 %{_bindir}/*
 %{_libdir}/*.so.*

Modified: trunk/rpms/synaptic/synaptic.spec
===================================================================
--- trunk/rpms/synaptic/synaptic.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/synaptic/synaptic.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -4,7 +4,7 @@
 
 Summary: Graphical package management program using apt
 Name: synaptic
-Version: 0.52
+Version: 0.55.1
 Release: 1
 License: GPL
 Group: Applications/System
@@ -112,6 +112,9 @@
 
 
 %changelog
+* Thu Nov  4 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.55.1-1
+- Update to 0.55.1.
+
 * Thu Jul 22 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.52-1
 - Updated to release 0.52.
 - Merged with my SPEC file.

Modified: trunk/rpms/torcs/torcs.spec
===================================================================
--- trunk/rpms/torcs/torcs.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/torcs/torcs.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -6,7 +6,7 @@
 Summary: The Open Racing Car Simulator
 Name: torcs
 Version: 1.2.2
-Release: 3
+Release: 4
 License: GPL
 Group: Amusements/Games
 URL: <A HREF="http://torcs.org/">http://torcs.org/</A>
@@ -79,7 +79,10 @@
     --dir %{buildroot}%{_datadir}/applications \
     %{name}.desktop
 
+# We need this for proper automatic stripping to take place
+find %{buildroot}%{_libdir}/%{name} -name '*.so' | xargs %{__chmod} +x
 
+
 %clean
 %{__rm} -rf %{buildroot}
 
@@ -117,6 +120,9 @@
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.2.2-4
+- Add +x chmod'ing to .so files in order to get them stripped properly.
+
 * Mon Oct 25 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.2.2-3
 - Remove un-needed /sbin/ldconfig calls.
 

Modified: trunk/rpms/videolan-client/videolan-client.spec
===================================================================
--- trunk/rpms/videolan-client/videolan-client.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/videolan-client/videolan-client.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -250,22 +250,26 @@
 %doc AUTHORS COPYING ChangeLog MAINTAINERS README THANKS
 %doc installed-docs/*
 %{_bindir}/*vlc
-%{_libdir}/vlc
+%{_libdir}/vlc/
+%exclude %{_libdir}/vlc/*.a
 %{_datadir}/applications/%{desktop_vendor}-%{name}.desktop
 %{_datadir}/pixmaps/vlc.png
-%{_datadir}/vlc
+%{_datadir}/vlc/
 
 %files devel
 %defattr(-, root, root, 0755)
 %doc HACKING 
 %{_bindir}/vlc-config
-%{_includedir}/vlc
+%{_includedir}/vlc/
+%dir %{_libdir}/vlc/
+%{_libdir}/vlc/*.a
 %{_libdir}/libvlc.a
 
 
 %changelog
 * Thu Nov  4 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.0-1
 - Update to 0.8.0 final and ffmpeg 20041101 snapshot.
+- Move lib/vlc/*.a files to devel package.
 
 * Fri Oct  1 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.0-0.test2.1
 - Update to 0.8.0-test2 and ffmpeg 20041001 snapshot.

Modified: trunk/rpms/wxGTK/wxGTK.spec
===================================================================
--- trunk/rpms/wxGTK/wxGTK.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/wxGTK/wxGTK.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -4,7 +4,7 @@
 Summary: The GTK port of the wxWindows library
 Name: wxGTK
 Version: 2.4.2
-Release: 4
+Release: 5
 License: Other
 Group: System Environment/Libraries
 URL: <A HREF="http://www.wxwindows.org/">http://www.wxwindows.org/</A>
@@ -26,7 +26,8 @@
 %package devel
 Summary: Develoment files of the GTK port of the wxWindows library
 Group: Development/Libraries
-Requires: %{name} = %{version}, gtk+-devel, pkgconfig
+Requires: %{name} = %{version}, %{name}-gl, %{name}-xrc, %{name}-stc
+Requires: gtk+-devel, pkgconfig
 Requires: libpng-devel, libjpeg-devel, libtiff-devel
 
 %description devel
@@ -126,7 +127,7 @@
 %files -f wxstd.lang
 %defattr(-, root, root, 0755)
 %doc COPYING.LIB *.txt
-%{_libdir}/libwx_gtk-*
+%{_libdir}/libwx_gtk-*.so.*
 %{_datadir}/wx/
 
 %files devel
@@ -134,22 +135,26 @@
 %{_bindir}/*-config
 %{_includedir}/wx/
 %{_libdir}/wx/
+%{_libdir}/libwx_*.so
 %{_datadir}/aclocal/*.m4
 
 %files gl
 %defattr(-, root, root, 0755)
-%{_libdir}/libwx_gtk_gl-*
+%{_libdir}/libwx_gtk_gl-*.so.*
 
 %files xrc
 %defattr(-, root, root, 0755)
-%{_libdir}/libwx_gtk_xrc-*
+%{_libdir}/libwx_gtk_xrc-*.so.*
 
 %files stc
 %defattr(-, root, root, 0755)
-%{_libdir}/libwx_gtk_stc-*
+%{_libdir}/libwx_gtk_stc-*.so.*
 
 
 %changelog
+* Fri Nov 5  2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.4.2-5
+- Moved .so symlinks to devel and require all other sub-libs.
+
 * Tue May 18 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.4.2-4
 - Rebuilt for Fedora Core 2.
 

Modified: trunk/rpms/xine-lib/xine-lib.spec
===================================================================
--- trunk/rpms/xine-lib/xine-lib.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/xine-lib/xine-lib.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -42,16 +42,6 @@
 Source: <A HREF="http://dl.sf.net/xine/xine-lib-%{libver">http://dl.sf.net/xine/xine-lib-%{libver</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: libdvdcss
-%{?_with_rte:Requires: rte}
-%{?_with_ext-dvdnav:Requires: libdvdnav &gt;= 0.1.4}
-%{!?_without_alsa:Requires: alsa-lib}
-%{!?_without_esound:Requires: esound}
-%{!?_without_aalib:Requires: aalib}
-%{!?_without_flac:Requires: flac}
-%{!?_without_libfame:Requires: libfame}
-%{!?_without_arts:Requires: arts}
-%{!?_without_gnomevfs2:Requires: gnome-vfs2}
-%{!?_without_speex:Requires: speex}
 BuildRequires: gcc-c++, pkgconfig, XFree86-devel, zlib-devel
 BuildRequires: libvorbis-devel, SDL-devel
 # BUG : libmng-devel should apparently require libjpeg-devel for includes
@@ -147,21 +137,23 @@
 %{_libdir}/xine/
 %{_datadir}/xine/
 
-
 %files devel
 %defattr(-, root, root, 0755)
 %doc doc/hackersguide/*.sgml
 %{_bindir}/*
 %{_includedir}/xine.h
 %{_includedir}/xine/
+%exclude %{_libdir}/*.la
 %{_libdir}/*.so
 %{_libdir}/pkgconfig/*
 %{_datadir}/aclocal/*.m4
-%exclude %{_libdir}/*.la
 %{_mandir}/man?/*
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.0-0.15.rc6a
+- Removed most explicit deps, only libdvdcss is really needed.
+
 * Tue Oct 12 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0.0-0.15.rc6a
 - Build against newer flac-1.1.1.
 

Modified: trunk/rpms/xmms-speex/xmms-speex.spec
===================================================================
--- trunk/rpms/xmms-speex/xmms-speex.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/xmms-speex/xmms-speex.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -13,7 +13,7 @@
 Source: <A HREF="http://jzb.rapanden.dk/pub/speex-xmms-%{version">http://jzb.rapanden.dk/pub/speex-xmms-%{version</A>}.tar.gz
 Patch: speex-xmms-0.9.1.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-Requires: xmms &gt;= 1.0.0, glib &gt;= 1.2.7, gtk+ &gt;= 1.2.7, speex, libogg
+Requires: xmms &gt;= 1.0.0, glib &gt;= 1.2.7, gtk+ &gt;= 1.2.7
 BuildRequires: xmms-devel, gtk+-devel, speex-devel, libogg-devel
 
 
@@ -27,7 +27,7 @@
 
 
 %build
-%{__make} %{?_smp_mflags} CFLAGS=&quot;%{optflags} -fPIC -Wall&quot;
+%{__make} %{?_smp_mflags} CFLAGS=&quot;%{optflags} -fPIC&quot;
 
 
 %install

Modified: trunk/rpms/xosd/xosd.spec
===================================================================
--- trunk/rpms/xosd/xosd.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/xosd/xosd.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -75,7 +75,7 @@
 
 %files
 %defattr(-, root, root, 0755)
-%doc AUTHORS ChangeLog COPYING NEWS README
+%doc AUTHORS ChangeLog COPYING README
 %{_bindir}/osd_cat
 %{_libdir}/*.so.*
 %{_datadir}/xosd/

Modified: trunk/rpms/xvidcore/xvidcore.spec
===================================================================
--- trunk/rpms/xvidcore/xvidcore.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/xvidcore/xvidcore.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -2,11 +2,13 @@
 # Authority: matthias
 
 #define prever rc4
+%define somaj  4
+%define somin  0
 
 Summary: Free reimplementation of the OpenDivX video codec
 Name: xvidcore
 Version: 1.0.2
-Release: %{?prever:0.%{prever}.}1
+Release: %{?prever:0.%{prever}.}2
 License: XviD
 Group: System Environment/Libraries
 URL: <A HREF="http://www.xvid.org/">http://www.xvid.org/</A>
@@ -53,9 +55,10 @@
 pushd build/generic
     %makeinstall
 popd
-# Make a .so symlink to the so.x.x file
+# Make .so and .so.x symlinks to the so.x.y file
 pushd %{buildroot}%{_libdir}
-    %{__ln_s} lib%{name}.so* lib%{name}.so
+    %{__ln_s} lib%{name}.so.%{somaj}.%{somin} lib%{name}.so.%{somaj}
+    %{__ln_s} lib%{name}.so.%{somaj}.%{somin} lib%{name}.so
 popd
 # Remove unwanted files from the docs
 %{__rm} -f doc/Makefile
@@ -87,6 +90,9 @@
 
 
 %changelog
+* Fri Nov  5 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.2-2
+- Further manually symlink libs to get things back to &quot;ldconfig style&quot;.
+
 * Wed Oct 13 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0.2-1
 - Update to 1.0.2.
 

Modified: trunk/rpms/zapping/zapping.spec
===================================================================
--- trunk/rpms/zapping/zapping.spec	2004-11-05 10:45:24 UTC (rev 2422)
+++ trunk/rpms/zapping/zapping.spec	2004-11-05 11:50:06 UTC (rev 2423)
@@ -13,7 +13,6 @@
 URL: <A HREF="http://zapping.sourceforge.net/">http://zapping.sourceforge.net/</A>
 Source: <A HREF="http://dl.sf.net/zapping/zapping-%{version">http://dl.sf.net/zapping/zapping-%{version</A>}%{?prever}.tar.bz2
 Buildroot: %{_tmppath}/%{name}-%{version}-%{release}-root
-Requires: libgnomeui, libglade2, zvbi, arts, rte, lirc
 BuildRequires: libgnomeui-devel, libglade2-devel, gtk2-devel &gt;= 2.4
 BuildRequires: scrollkeeper, gettext, libjpeg-devel, libpng-devel
 BuildRequires: zvbi-devel, arts-devel, rte-devel &gt;= 0.5, lirc
@@ -36,24 +35,17 @@
 
 
 %build
-%configure \
-    --disable-schemas-install
-
-%{__perl} -pi.orig -e 's|/usr/lib/|%{_libdir}/|g' \
-    configure Makefile* */Makefile* */*/Makefile*
-
+%configure
+# Workaround
+%{__perl} -pi.orig -e 's|/usr/lib/|%{_libdir}/|g' configure {,*/,*/*/}Makefile*
 %{__make} %{?_smp_mflags}
 
 %install
 %{__rm} -rf %{buildroot}
 export GCONF_DISABLE_MAKEFILE_SCHEMA_INSTALL=&quot;1&quot;
-%{__make} install \
-    DESTDIR=&quot;%{buildroot}&quot;
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 %find_lang %{name}
 
-# Fix buggy symlinks (point into the %{buildroot})
-#%{__ln_s} -f zapping %{buildroot}%{_bindir}/zapzilla
-
 # It's still a GNOME 1 type desktop file
 %{__mkdir_p} %{buildroot}%{_datadir}/applications
 desktop-file-install --vendor %{desktop_vendor} --delete-original \
@@ -80,13 +72,13 @@
 %config %{_sysconfdir}/pam.d/zapping_setup_fb
 %config %{_sysconfdir}/security/console.apps/zapping_setup_fb
 %{_bindir}/*
-%{_libdir}/%{name}
+%{_libdir}/%{name}/
 %{_sbindir}/*
 %{_datadir}/applications/%{desktop_vendor}-%{name}.desktop
-%{_datadir}/gnome/help/%{name}
-%{_datadir}/omf/%{name}
-%{_datadir}/pixmaps/%{name}
-%{_datadir}/%{name}
+%{_datadir}/gnome/help/%{name}/
+%{_datadir}/omf/%{name}/
+%{_datadir}/pixmaps/%{name}/
+%{_datadir}/%{name}/
 %{_mandir}/man1/*
 
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001228.html">[SVN] r2422 - trunk/docs
</A></li>
	<LI>Next message: <A HREF="001230.html">[SVN] r2424 - in trunk/rpms: alsa-driver alsa-utils amavisd-new	amule bzflag camE diradmin gaim-meanwhile gdesklets-diskmount	gdesklets-rdgborder gdesklets-rssgrab gpa gregexp gstreamer	gstreamer-plugins icu latex-xft-fonts python-sqlite rrdutils
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1229">[ date ]</a>
              <a href="thread.html#1229">[ thread ]</a>
              <a href="subject.html#1229">[ subject ]</a>
              <a href="author.html#1229">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
