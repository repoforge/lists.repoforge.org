<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5793 - trunk/rpms/audacious
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5793%20-%20trunk/rpms/audacious&In-Reply-To=%3C20070830213415.86734944B5A%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004591.html">
   <LINK REL="Next"  HREF="004593.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5793 - trunk/rpms/audacious</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5793%20-%20trunk/rpms/audacious&In-Reply-To=%3C20070830213415.86734944B5A%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5793 - trunk/rpms/audacious">packagers at lists.rpmforge.net
       </A><BR>
    <I>Thu Aug 30 23:34:15 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004591.html">[svn] r5792 - trunk/rpms/audacious
</A></li>
        <LI>Next message: <A HREF="004593.html">[svn] r5794 - trunk/rpms/rpm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4592">[ date ]</a>
              <a href="thread.html#4592">[ thread ]</a>
              <a href="subject.html#4592">[ subject ]</a>
              <a href="author.html#4592">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: hadams
Date: 2007-08-30 23:34:11 +0200 (Thu, 30 Aug 2007)
New Revision: 5793

Added:
   trunk/rpms/audacious/audacious-1.2.1-relative-links.patch
   trunk/rpms/audacious/audacious-1.2.1-shaded-skin.patch
   trunk/rpms/audacious/audacious-1.3.1-default-skin.patch
   trunk/rpms/audacious/audacious-1.3.1-xmms-skins.patch
   trunk/rpms/audacious/audacious.spec
Log:
updated to version 1.3.2

Added: trunk/rpms/audacious/audacious-1.2.1-relative-links.patch
===================================================================
--- trunk/rpms/audacious/audacious-1.2.1-relative-links.patch	                        (rev 0)
+++ trunk/rpms/audacious/audacious-1.2.1-relative-links.patch	2007-08-30 21:34:11 UTC (rev 5793)
@@ -0,0 +1,13 @@
+diff -uNr audacious-1.2.1-orig/libaudacious/Makefile audacious-1.2.1/libaudacious/Makefile
+--- audacious-1.2.1-orig/libaudacious/Makefile	2006-10-29 11:35:12.000000000 +0100
++++ audacious-1.2.1/libaudacious/Makefile	2006-10-29 11:35:50.000000000 +0100
+@@ -47,7 +47,7 @@
+ 
+ install-posthook:
+ 	@mv ${DESTDIR}/${LIBDIR}/libaudacious$(SHARED_SUFFIX) ${DESTDIR}/${LIBDIR}/libaudacious$(SHARED_SUFFIX).4.0.0
+-	@ln -sf ${LIBDIR}/libaudacious$(SHARED_SUFFIX).4.0.0 \
++	@ln -sf libaudacious$(SHARED_SUFFIX).4.0.0 \
+ 		${DESTDIR}/${LIBDIR}/libaudacious$(SHARED_SUFFIX).4
+-	@ln -sf ${LIBDIR}/libaudacious$(SHARED_SUFFIX).4 \
++	@ln -sf libaudacious$(SHARED_SUFFIX).4 \
+ 		${DESTDIR}/${LIBDIR}/libaudacious$(SHARED_SUFFIX)

Added: trunk/rpms/audacious/audacious-1.2.1-shaded-skin.patch
===================================================================
--- trunk/rpms/audacious/audacious-1.2.1-shaded-skin.patch	                        (rev 0)
+++ trunk/rpms/audacious/audacious-1.2.1-shaded-skin.patch	2007-08-30 21:34:11 UTC (rev 5793)
@@ -0,0 +1,12 @@
+diff -uNr audacious-1.2.1-orig/audacious/widgets/skin.c audacious-1.2.1/audacious/widgets/skin.c
+--- audacious-1.2.1-orig/audacious/widgets/skin.c	2006-10-29 11:35:14.000000000 +0100
++++ audacious-1.2.1/audacious/widgets/skin.c	2006-10-29 12:40:56.000000000 +0100
+@@ -1795,7 +1795,7 @@
+                          (i * 25) + 25, 0, 25, 14);
+ 
+     /* right corner */
+-    skin_draw_pixmap(skin, drawable, gc, SKIN_PLEDIT, 99, focus ? 57 : 42,
++    skin_draw_pixmap(skin, drawable, gc, SKIN_PLEDIT, 99, focus ? 42 : 57,
+                      width - 50, 0, 50, 14);
+ }
+ 

Added: trunk/rpms/audacious/audacious-1.3.1-default-skin.patch
===================================================================
--- trunk/rpms/audacious/audacious-1.3.1-default-skin.patch	                        (rev 0)
+++ trunk/rpms/audacious/audacious-1.3.1-default-skin.patch	2007-08-30 21:34:11 UTC (rev 5793)
@@ -0,0 +1,12 @@
+diff -Nurip audacious-1.3.1-orig/src/audacious/main.c audacious-1.3.1/src/audacious/main.c
+--- audacious-1.3.1-orig/src/audacious/main.c	2007-03-04 07:34:27.000000000 +0100
++++ audacious-1.3.1/src/audacious/main.c	2007-03-14 21:03:25.000000000 +0100
+@@ -159,7 +159,7 @@ BmpConfig bmp_default_config = {
+     0.0,                        /* equalizer preamp */
+     {0, 0, 0, 0, 0,             /* equalizer bands */
+      0, 0, 0, 0, 0},
+-    NULL,                       /* skin */
++    &quot;/usr/share/xmms/Skins/Bluecurve-xmms.zip&quot;, /* skin */
+     NULL,                       /* output plugin */
+     NULL,                       /* file selector path */
+     NULL,                       /* playlist path */

Added: trunk/rpms/audacious/audacious-1.3.1-xmms-skins.patch
===================================================================
--- trunk/rpms/audacious/audacious-1.3.1-xmms-skins.patch	                        (rev 0)
+++ trunk/rpms/audacious/audacious-1.3.1-xmms-skins.patch	2007-08-30 21:34:11 UTC (rev 5793)
@@ -0,0 +1,19 @@
+diff -Nurip audacious-1.3.1-orig/src/audacious/ui_skinselector.c audacious-1.3.1/src/audacious/ui_skinselector.c
+--- audacious-1.3.1-orig/src/audacious/ui_skinselector.c	2007-01-13 18:19:52.000000000 +0100
++++ audacious-1.3.1/src/audacious/ui_skinselector.c	2007-03-14 20:58:59.000000000 +0100
+@@ -249,11 +249,15 @@ void
+ skinlist_update(void)
+ {
+     gchar *skinsdir;
++    gchar xmmsskinsdir[] = &quot;/usr/share/xmms/Skins&quot;;
+ 
+     skinlist_clear();
+ 
+     scan_skindir(bmp_paths[BMP_PATH_USER_SKIN_DIR]);
+     scan_skindir(DATA_DIR G_DIR_SEPARATOR_S &quot;Skins&quot;);
++    if (g_file_test(xmmsskinsdir, G_FILE_TEST_IS_DIR)) {
++        scan_skindir( xmmsskinsdir );
++    }
+ 
+     skinsdir = getenv(&quot;SKINSDIR&quot;);
+     if (skinsdir) {

Added: trunk/rpms/audacious/audacious.spec
===================================================================
--- trunk/rpms/audacious/audacious.spec	                        (rev 0)
+++ trunk/rpms/audacious/audacious.spec	2007-08-30 21:34:11 UTC (rev 5793)
@@ -0,0 +1,244 @@
+# $Id$
+# Authority:    hadams
+
+Name:           audacious
+Version:        1.3.2
+Release:        2
+Summary:        A GTK2 based media player similar to xmms
+
+Group:          Applications/Multimedia
+License:        GPL
+URL:            <A HREF="http://audacious-media-player.org/">http://audacious-media-player.org/</A>
+
+Source0:        <A HREF="http://static.audacious-media-player.org/release/audacious-%{version">http://static.audacious-media-player.org/release/audacious-%{version</A>}.tgz
+Patch0:         audacious-1.3.1-xmms-skins.patch
+Patch1:         audacious-1.3.1-default-skin.patch
+# Patch2:         audacious-1.1.0-no-rpath.patch
+Patch3:         audacious-1.2.1-relative-links.patch
+# Patch4:         audacious-1.1.0-quoting.patch
+# Patch5:         audacious-1.1.0-amidi-backend.patch
+Patch6:         audacious-1.2.1-shaded-skin.patch
+# Patch7:         audacious-1.1.1-controlsocket-name.patch
+# Patch8:         audacious-1.1.1-playlist-twenty.patch
+BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
+
+BuildRequires:  gtk2-devel &gt;= 2.6
+BuildRequires:  zlib-devel, desktop-file-utils &gt;= 0.9
+BuildRequires:  libglade2-devel &gt;= 2.4
+BuildRequires:  GConf2-devel
+BuildRequires:  gettext
+BuildRequires:  mcs-devel &gt;= 0.1
+
+Requires:       audacious-plugins &gt;= 1.3.0
+
+Requires(post):   desktop-file-utils &gt;= 0.9
+Requires(postun): desktop-file-utils &gt;= 0.9
+
+Obsoletes:      bmp &lt;= 0.9.7.1
+Provides:       bmp = 0.9.7.1
+
+%description
+Audacious is a media player that currently uses a skinned
+user interface based on Winamp 2.x skins. It is based on (&quot;forked off&quot;)
+BMP.
+
+
+%package        libs
+Summary:        Library files for Audacious
+Group:          System Environment/Libraries
+
+%description    libs
+Library files for Audacious
+
+
+%package        devel
+Summary:        Development files for Audacious
+Group:          Development/Libraries
+Requires:       %{name}-libs = %{version}-%{release}
+Requires:       glib2-devel, gtk2-devel &gt;= 2.6, GConf2-devel, libglade2-devel &gt;= 2.4
+Requires:       mcs-devel &gt;= 0.1
+Requires:       pkgconfig
+
+Requires(post):   /sbin/ldconfig
+Requires(postun): /sbin/ldconfig
+
+Obsoletes:      bmp-devel &lt;= 0.9.7.1
+Provides:       bmp-devel = 0.9.7.1
+
+%description    devel
+Development files for Audacious
+
+
+%prep
+%setup -q
+
+# Read xmms skins directory
+%patch0 -p1 -b .xmms-skins
+
+# Use bluecurve as default skin
+%patch1 -p1 -b .default-skin
+
+# No rpath in binaries
+# %patch2 -p1 -b .no-rpath
+
+# Relative symlink paths
+# %patch3 -p1 -b .relative-links
+
+# Filename quoting
+# %patch4 -p1 -b .quoting
+
+# Amidi backends path
+# %patch5 -p1 -b .amidi-backend
+
+# Shaded playlist window decorations
+# %patch6 -p1 -b .shaded-skin
+
+# Controlsocket named &quot;xmms&quot; instead of &quot;audacious&quot;
+# %patch7 -p1 -b controlsocket-name
+
+# Fix &quot;%20&quot; in playlist entries
+# %patch8 -p1 -b playlist-twenty
+
+%build
+%configure \
+    --disable-rpath \
+    --enable-gconf \
+    --disable-gnome-vfs \
+    --enable-chardet \
+    --disable-dependency-tracking
+make V=1 %{?_smp_mflags}
+
+
+%install
+rm -rf $RPM_BUILD_ROOT
+make install DESTDIR=$RPM_BUILD_ROOT
+%find_lang %{name}
+
+desktop-file-install --vendor fedora \
+    --dir $RPM_BUILD_ROOT%{_datadir}/applications   \
+    --delete-original \
+    --remove-mime-type audio/x-scpls \
+    --remove-mime-type audio/x-mpegurl \
+    --remove-mime-type audio/mpegurl \
+    --remove-mime-type audio/mp3 \
+    --remove-mime-type audio/x-mp3 \
+    --remove-mime-type audio/mpeg \
+    --remove-mime-type audio/x-mpeg \
+    --remove-mime-type audio/x-wav \
+    --remove-mime-type application/x-ogg \
+    --remove-category Application \
+    $RPM_BUILD_ROOT%{_datadir}/applications/audacious.desktop
+
+install -m 755 -d $RPM_BUILD_ROOT%{_datadir}/icons/hicolor/48x48/apps
+mv $RPM_BUILD_ROOT%{_datadir}/pixmaps/audacious.png $RPM_BUILD_ROOT%{_datadir}/icons/hicolor/48x48/apps
+
+find $RPM_BUILD_ROOT -type f -name &quot;*.la&quot; -exec rm -f {} ';'
+
+%clean
+rm -rf $RPM_BUILD_ROOT
+
+
+%post
+update-desktop-database %{_datadir}/applications
+touch --no-create %{_datadir}/icons/hicolor || :
+if [ -x %{_bindir}/gtk-update-icon-cache ]; then
+    %{_bindir}/gtk-update-icon-cache --quiet %{_datadir}/icons/hicolor || :
+fi
+
+
+%postun
+update-desktop-database %{_datadir}/applications
+touch --no-create %{_datadir}/icons/hicolor || :
+if [ -x %{_bindir}/gtk-update-icon-cache ]; then
+    %{_bindir}/gtk-update-icon-cache --quiet %{_datadir}/icons/hicolor || :
+fi
+
+%post libs -p /sbin/ldconfig
+
+%postun libs -p /sbin/ldconfig
+
+
+%files -f %{name}.lang
+%defattr(-,root,root,-)
+%doc AUTHORS COPYING ChangeLog NEWS README
+%{_bindir}/audacious
+%{_bindir}/audtool
+%{_datadir}/audacious
+%{_mandir}/man[^3]/*
+%{_datadir}/applications/*
+%{_datadir}/icons/hicolor/48x48/apps/*
+
+%files libs
+%defattr(-,root,root,-)
+%{_libdir}/audacious
+%{_libdir}/*.so.*
+
+%files devel
+%defattr(-,root,root,-)
+%{_includedir}/audacious
+%{_libdir}/*.so
+%{_libdir}/pkgconfig/*
+
+
+%changelog
+* Thu Aug 30 2007 Heiko Adams &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">info at fedora-blog.de</A>&gt; 1.3.2-2
+- rebuild for rpmforge
+
+* Mon Apr 16 2007 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.3.2-1.fc6
+- Update to 1.3.2
+
+* Sun Dec 24 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.2.2-2.fc6
+- Remove audacious-1.1.1-controlsocket-name.patch due to request
+  from upstream, xmms and audacious are not entirely compatible
+
+* Sun Nov 30 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.2.2-1.fc6
+- Update to 1.2.2
+- Split off libaudacious into a separate package to handle the
+  (now externally provided and built) plugins better
+
+* Tue Nov 7 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.2-4.fc6
+- Disable gnome-vfs, it causes too much trouble
+- Add --enable-chardet
+
+* Wed Oct 18 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.2-2.fc6
+- Add Obsoletes/Provides for BMP
+
+* Wed Sep 06 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.2-1.fc6
+- Update to 1.1.2
+
+* Thu Aug 17 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.1-6.fc6
+- Another go at the %%20 problem
+
+* Mon Aug 14 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.1-4.fc6
+- Fix %%20 in playlist entries
+
+* Sun Jul 30 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.1-3.fc6
+- Bump for rebuild
+
+* Sun Jul 30 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.1-2.fc6
+- Change the name of the control socket to &quot;xmms&quot; instead of
+  audacious. This makes programs that remote control xmms
+  (and compatibles) work.
+
+* Sun Jul 30 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.1-1.fc6
+- Update to 1.1.1
+- Drop amidi path patch
+- Add shaded playlist skin patch (seems like audacious needs it,
+  too)
+
+* Fri Jul 21 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.0-1.fc6
+- Update to 1.1.0 final
+- Rediff some patches
+
+* Sun Jul 9 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.0-0.2.dr2.fc6
+- Fix quoting of filenames
+
+* Thu Jun 29 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.0-0.1.dr2.fc6
+- Fixed version for Extras review
+  - Build OSS, arts and jack output plugins
+  - Split esd, arts and jack into separate packages
+  - Fix rpath issue
+  - Fix absolute symlinks
+
+* Sat Jun 24 2006 Ralf Ertzinger &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">ralf at skytale.net</A>&gt; 1.1.0-0.0.dr2.fc6
+- Initial build for Fedora Extras


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004591.html">[svn] r5792 - trunk/rpms/audacious
</A></li>
	<LI>Next message: <A HREF="004593.html">[svn] r5794 - trunk/rpms/rpm
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4592">[ date ]</a>
              <a href="thread.html#4592">[ thread ]</a>
              <a href="subject.html#4592">[ subject ]</a>
              <a href="author.html#4592">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
