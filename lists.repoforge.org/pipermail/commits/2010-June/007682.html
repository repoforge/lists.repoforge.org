<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r8888 - in /trunk/rpms/xine: xine-ui-0.99.3-shared-lirc.patch xine-ui-0.99.6-fix-help-crash.patch xine-ui-0.99.6-shared-lirc.patch xine.spec
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8888%20-%20in%20/trunk/rpms/xine%3A%20xine-ui-0.99.3-shared-lirc.patch%0A%20xine-ui-0.99.6-fix-help-crash.patch%20xine-ui-0.99.6-shared-lirc.patch%0A%20xine.spec&In-Reply-To=%3C201006141825.o5EIPgNU021729%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007681.html">
   <LINK REL="Next"  HREF="007683.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r8888 - in /trunk/rpms/xine: xine-ui-0.99.3-shared-lirc.patch xine-ui-0.99.6-fix-help-crash.patch xine-ui-0.99.6-shared-lirc.patch xine.spec</H1>
    <B>Yury V. Zaytsev</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8888%20-%20in%20/trunk/rpms/xine%3A%20xine-ui-0.99.3-shared-lirc.patch%0A%20xine-ui-0.99.6-fix-help-crash.patch%20xine-ui-0.99.6-shared-lirc.patch%0A%20xine.spec&In-Reply-To=%3C201006141825.o5EIPgNU021729%40surya.karan.org%3E"
       TITLE="[svn] r8888 - in /trunk/rpms/xine: xine-ui-0.99.3-shared-lirc.patch xine-ui-0.99.6-fix-help-crash.patch xine-ui-0.99.6-shared-lirc.patch xine.spec">yury at shurup.com
       </A><BR>
    <I>Mon Jun 14 20:25:42 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007681.html">[svn] r8887 - /trunk/rpms/filezilla/filezilla.spec
</A></li>
        <LI>Next message: <A HREF="007683.html">[svn] r8889 - in /trunk/rpms/mfs: ./ mfs.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7682">[ date ]</a>
              <a href="thread.html#7682">[ thread ]</a>
              <a href="subject.html#7682">[ subject ]</a>
              <a href="author.html#7682">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: yury
Date: Mon Jun 14 19:25:41 2010
New Revision: 8888

URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge?rev=8888&amp;view=rev">http://svn.rpmforge.net/viewvc/rpmforge?rev=8888&amp;view=rev</A>
Log:
Updated xine-ui to the latest version.


Added:
    trunk/rpms/xine/xine-ui-0.99.6-fix-help-crash.patch
    trunk/rpms/xine/xine-ui-0.99.6-shared-lirc.patch
Removed:
    trunk/rpms/xine/xine-ui-0.99.3-shared-lirc.patch
Modified:
    trunk/rpms/xine/xine.spec

Removed: trunk/rpms/xine/xine-ui-0.99.3-shared-lirc.patch
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine-ui-0.99.3-shared-lirc.patch?rev=8887&amp;view=log">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine-ui-0.99.3-shared-lirc.patch?rev=8887&amp;view=log</A>
==============================================================================
--- trunk/rpms/xine/xine-ui-0.99.3-shared-lirc.patch (original)
+++ trunk/rpms/xine/xine-ui-0.99.3-shared-lirc.patch (removed)
@@ -1,16 +1,0 @@
---- m4/_xine.m4~	2003-12-24 15:04:09.000000000 +0200
-+++ m4/_xine.m4	2005-07-10 21:43:53.000000000 +0300
-@@ -37,11 +37,4 @@
- 
--        if test x&quot;$LIRC_PREFIX&quot; != &quot;x&quot;; then
--           lirc_libprefix=&quot;$LIRC_PREFIX/lib&quot;
--  	   LIRC_INCLUDE=&quot;-I$LIRC_PREFIX/include&quot;
--        fi
--        for llirc in $lirc_libprefix /lib /usr/lib /usr/local/lib; do
--          AC_CHECK_FILE([&quot;$llirc/liblirc_client.a&quot;],
--             [LIRC_LIBS=&quot;$llirc/liblirc_client.a&quot;]
--             AC_DEFINE([HAVE_LIRC],,[Define this if you have LIRC (liblir_client) installed]),,)
--        done
-+        AC_DEFINE([HAVE_LIRC],,[Define this if you have LIRC (liblirc_client) installed])
-+        LIRC_LIBS=-llirc_client
-      else

Added: trunk/rpms/xine/xine-ui-0.99.6-fix-help-crash.patch
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine-ui-0.99.6-fix-help-crash.patch?rev=8888&amp;view=markup">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine-ui-0.99.6-fix-help-crash.patch?rev=8888&amp;view=markup</A>
==============================================================================
--- trunk/rpms/xine/xine-ui-0.99.6-fix-help-crash.patch (added)
+++ trunk/rpms/xine/xine-ui-0.99.6-fix-help-crash.patch Mon Jun 14 19:25:41 2010
@@ -1,0 +1,11 @@
+--- src/xitk/lang.c	2009-12-19 01:34:22.000000000 +0100
++++ src/xitk/lang.c.old	2010-05-02 14:29:01.000000000 +0200
+@@ -502,7 +502,7 @@
+   
+   if(lcmsg) {
+     const langs_t *l;
+-    for(l = _langs; l-&gt;lang != NULL; l++) {
++    for(l = _langs; l-&gt;lang[0]; l++) {
+       if(!strncasecmp(l-&gt;lang, lcmsg, strlen(lcmsg))) {
+ 	return l;
+       }

Added: trunk/rpms/xine/xine-ui-0.99.6-shared-lirc.patch
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine-ui-0.99.6-shared-lirc.patch?rev=8888&amp;view=markup">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine-ui-0.99.6-shared-lirc.patch?rev=8888&amp;view=markup</A>
==============================================================================
--- trunk/rpms/xine/xine-ui-0.99.6-shared-lirc.patch (added)
+++ trunk/rpms/xine/xine-ui-0.99.6-shared-lirc.patch Mon Jun 14 19:25:41 2010
@@ -1,0 +1,96 @@
+diff -Naur a/m4/_xine.m4 b/m4/_xine.m4
+--- a/m4/_xine.m4	2009-12-19 02:14:27.000000000 +0300
++++ b/m4/_xine.m4	2010-06-14 18:32:55.000000000 +0400
+@@ -28,31 +28,11 @@
+      [  --disable-lirc          Turn off LIRC support.],
+      [], enable_lirc=yes)
+ 
+-  found_lirc=no
++  found_lirc=yes
+   if test x&quot;$enable_lirc&quot; = xyes; then
+     have_lirc=yes
+-    PKG_CHECK_MODULES(LIRC, liblircclient0, [found_lirc=yes], [])
+-    if test &quot;$LIRC_CFLAGS&quot; != ''; then
+-      LIRC_INCLUDE=&quot;$LIRC_CFLAGS&quot;
+-    else
+-     AC_REQUIRE_CPP
+-     AC_CHECK_LIB(lirc_client,lirc_init,
+-           [AC_CHECK_HEADER(lirc/lirc_client.h, true, have_lirc=no)], have_lirc=no)
+-     if test &quot;$have_lirc&quot; = &quot;yes&quot;; then
+-
+-        if test x&quot;$LIRC_PREFIX&quot; != &quot;x&quot;; then
+-           lirc_libprefix=&quot;$LIRC_PREFIX/lib&quot;
+-  	   LIRC_INCLUDE=&quot;-I$LIRC_PREFIX/include&quot;
+-        fi
+-        for llirc in $lirc_libprefix /lib /usr/lib /usr/local/lib; do
+-          AC_CHECK_FILE([&quot;$llirc/liblirc_client.a&quot;],
+-            [LIRC_LIBS=&quot;$llirc/liblirc_client.a&quot;
+-             found_lirc=yes],,)
+-        done
+-     else
+-         AC_MSG_RESULT([*** LIRC client support not available, LIRC support will be disabled ***]);
+-     fi
+-    fi
++    LIRC_INCLUDE=&quot; -I/usr/include/lirc &quot;
++    LIRC_LIBS=&quot; -llirc_client &quot;
+   fi
+      if test &quot;$found_lirc&quot; = yes; then
+ 	AC_DEFINE([HAVE_LIRC],,[Define this if you have LIRC (liblirc_client) installed])
+diff -Naur a/src/fb/lirc.c b/src/fb/lirc.c
+--- a/src/fb/lirc.c	2009-12-19 03:34:22.000000000 +0300
++++ b/src/fb/lirc.c	2010-06-14 18:30:03.000000000 +0400
+@@ -28,7 +28,7 @@
+ #include &lt;pthread.h&gt;
+ #include &lt;signal.h&gt;
+ 
+-#include &lt;lirc/lirc_client.h&gt;
++#include &lt;lirc_client.h&gt;
+ 
+ #include &quot;main.h&quot;
+ #include &quot;keys.h&quot;
+diff -Naur a/src/fb/Makefile.am b/src/fb/Makefile.am
+--- a/src/fb/Makefile.am	2009-12-19 02:14:36.000000000 +0300
++++ b/src/fb/Makefile.am	2010-06-14 18:18:05.000000000 +0400
+@@ -1,9 +1,9 @@
+-AM_CFLAGS = @XINE_CFLAGS@ $(X_CFLAGS) -DFONTDIR=\&quot;$(XINE_SKINDIR)/../fonts/\&quot;
++AM_CFLAGS = @XINE_CFLAGS@ @LIRC_INCLUDE@ $(X_CFLAGS) -DFONTDIR=\&quot;$(XINE_SKINDIR)/../fonts/\&quot;
+ 
+ bin_PROGRAMS = fbxine 
+ 
+ fbxine_DEPENDENCIES = $(top_builddir)/src/common/libcommon.a
+-fbxine_LDADD = @XINE_LIBS@ $(LIRC_LIBS) -lm $(THREAD_LIBS) $(top_builddir)/src/common/libcommon.a
++fbxine_LDADD = @XINE_LIBS@ @LIRC_LIBS@ -lm $(THREAD_LIBS) $(top_builddir)/src/common/libcommon.a
+ 
+ fbxine_SOURCES = main.c actions.c keys.c options.c callback.c stdctl.c post.c osd.c
+ noinst_HEADERS = main.h actions.h keys.h options.h callback.h stdctl.h post.h osd.h
+diff -Naur a/src/xitk/lirc.c b/src/xitk/lirc.c
+--- a/src/xitk/lirc.c	2010-01-26 21:31:55.000000000 +0300
++++ b/src/xitk/lirc.c	2010-06-14 18:29:54.000000000 +0400
+@@ -39,6 +39,7 @@
+ #define LIRC_VERBOSE 0
+ #endif
+ 
++#include &lt;lirc_client.h&gt;
+ 
+ extern _panel_t        *panel;
+ 
+diff -Naur a/src/xitk/Makefile.am b/src/xitk/Makefile.am
+--- a/src/xitk/Makefile.am	2009-12-19 02:14:33.000000000 +0300
++++ b/src/xitk/Makefile.am	2010-06-14 18:18:43.000000000 +0400
+@@ -1,6 +1,6 @@
+ SUBDIRS = Imlib-light xine-toolkit skins oxine .
+ 
+-AM_CFLAGS = @X_CFLAGS@ @XINE_CFLAGS@ @CURL_CFLAGS@ @NVTVSIMPLE_CFLAGS@ @READLINE_INCLUDES@ -I$(top_srcdir)/src/xitk/xine-toolkit
++AM_CFLAGS =  @LIRC_INCLUDE@ @X_CFLAGS@ @XINE_CFLAGS@ @CURL_CFLAGS@ @NVTVSIMPLE_CFLAGS@ @READLINE_INCLUDES@ -I$(top_srcdir)/src/xitk/xine-toolkit
+ 
+ if HAVE_READLINE
+ remote = xine-remote
+@@ -71,7 +71,7 @@
+ 	     $(top_builddir)/src/xitk/oxine/liboxine.a \
+ 	     $(top_builddir)/src/common/libcommon.a \
+              $(top_builddir)/src/common/libcommonx.a \
+-	     $(X_PRE_LIBS) $(LIRC_LIBS) $(XFT_LIBS) \
++	     $(X_PRE_LIBS) @LIRC_LIBS@ $(XFT_LIBS) \
+ 	     $(X_LIBS) $(XTEST_LIBS) $(CURL_LIBS) $(NVTVSIMPLE_LIBS) \
+ 	     -lX11 -lXext -lm $(DBG_LIBS) $(XV_LIB) $(LIBPNG_LIBS) $(INTLLIBS) \
+ 	     $(THREAD_LIBS)

Modified: trunk/rpms/xine/xine.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine.spec?rev=8888&amp;r1=8887&amp;r2=8888&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/rpms/xine/xine.spec?rev=8888&amp;r1=8887&amp;r2=8888&amp;view=diff</A>
==============================================================================
--- trunk/rpms/xine/xine.spec (original)
+++ trunk/rpms/xine/xine.spec Mon Jun 14 19:25:41 2010
@@ -1,13 +1,6 @@
 # $Id$
 # Authority: matthias
 
-%{?fedora: %{expand: %%define fc%{fedora} 1}}
-
-%{!?dtag:%define _with_moles 1}
-%{?fc7: %define _with_moles 1}
-%{?fc6: %define _with_moles 1}
-%{?fc5: %define _with_moles 1}
-
 %{?el4:%define _without_modxorg 1}
 %{?el3:%define _without_modxorg 1}
 
@@ -15,29 +8,42 @@
 
 Summary: Free multimedia player
 Name: xine
-Version: 0.99.5
+Version: 0.99.6
 Release: 1%{?dist}
 License: GPL
 Group: Applications/Multimedia
-URL: <A HREF="http://xinehq.de/">http://xinehq.de/</A>
-
-Source0: <A HREF="http://dl.sf.net/xine/xine-ui-%{version">http://dl.sf.net/xine/xine-ui-%{version</A>}.tar.gz
+URL: <A HREF="http://www.xine-project.org/">http://www.xine-project.org/</A>
+
+Source0: <A HREF="http://dl.sf.net/xine/xine-ui/%{version">http://dl.sf.net/xine/xine-ui/%{version</A>}/xine-ui-%{version}.tar.bz2
 Source1: xine.png
 Source2: <A HREF="http://www.bluebeamentertainment.com/xine/smokeyglass_splash.png">http://www.bluebeamentertainment.com/xine/smokeyglass_splash.png</A>
 Source3: <A HREF="http://www.bluebeamentertainment.com/xine/smokeyglass_logo.m1v">http://www.bluebeamentertainment.com/xine/smokeyglass_logo.m1v</A>
-Patch0: xine-ui-0.99.3-shared-lirc.patch
+Patch0: xine-ui-0.99.6-shared-lirc.patch
+Patch1: xine-ui-0.99.6-fix-help-crash.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
-%{!?_with_moles:Requires: xine-lib &gt;= 1.1.2}
-%{?_with_moles:Requires: xine-lib-moles &gt;= 1.1.2}
-BuildRequires: gcc-c++, gettext, libpng-devel &gt;= 2:1.2.8, xine-lib-devel &gt;= 1.0.0
-BuildRequires: curl-devel, libidn-devel, libtermcap-devel, readline-devel
+BuildRequires: aalib-devel
+BuildRequires: curl-devel
+BuildRequires: gcc-c++
+BuildRequires: gettext
+BuildRequires: libidn-devel
+BuildRequires: libpng-devel &gt;= 2:1.2.8
+BuildRequires: libtermcap-devel
 BuildRequires: pkgconfig, /usr/bin/find
+BuildRequires: readline-devel
+BuildRequires: xine-lib-devel &gt;= 1.0.0
+
 # Required by autogen.sh
-Buildrequires: autoconf, automake, libtool
+Buildrequires: autoconf
+Buildrequires: automake
+Buildrequires: libtool
+
 # Required to overwrite the ugly icons
 BuildRequires: ImageMagick
 BuildRequires: desktop-file-utils
+
+%{!?_with_moles:Requires: xine-lib &gt;= 1.1.2}
+%{?_with_moles:Requires: xine-lib-moles &gt;= 1.1.2}
 %{!?_without_modxorg:BuildRequires: libXt-devel, libXv-devel, libXinerama-devel, libXtst-devel, libXxf86vm-devel, libXext-devel, libXft-devel}
 %{?_without_modxorg:BuildRequires: XFree86-devel}
 %{!?_without_caca:BuildRequires: libcaca-devel}
@@ -58,7 +64,8 @@
 
 %prep
 %setup -n xine-ui-%{version}
-%patch0 -p0 -b .shared-lirc
+%patch0 -p1 -b .shared-lirc
+%patch1 -p0 -b .help
 
 # Required by the shared-lirc patch
 ./autogen.sh
@@ -109,10 +116,13 @@
 
 
 %build
+
 %configure \
     --x-libraries=&quot;%{_prefix}/X11R6/%{_lib}&quot; \
+    --with-aalib \
 %{?_without_lirc:--disable-lirc} \
 %{?_without_caca:--without-caca}
+
 %{__make} %{?_smp_mflags}
 
 
@@ -160,6 +170,7 @@
 %doc %lang(fr)%{_mandir}/fr/man1/*.1*
 %doc %lang(pl)%{_mandir}/pl/man1/*.1*
 %{!?_without_caca:%{_bindir}/cacaxine}
+%{_bindir}/aaxine
 %{_bindir}/fbxine
 %{_bindir}/xine
 %{_bindir}/xine-bugreport
@@ -168,10 +179,16 @@
 %{_datadir}/application-registry/xine.applications
 %{_datadir}/applications/%{desktop_vendor}-xine.desktop
 %{_datadir}/icons/hicolor/*/apps/xine.png
+%{_datadir}/mime/packages/xine-ui.xml
 %{_datadir}/pixmaps/xine.png
 %{_datadir}/xine/
 
 %changelog
+* Mon Jun 14 2010 Yury V. Zaytsev &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">yury at shurup.com</A>&gt; - 0.99.6-1
+- Rebuild against aalib.
+- Rebuild against latest libcaca.
+- Updated to xine 0.99.6.
+
 * Fri May  4 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.99.5-1
 - Update to 0.99.5.
 - Remove no longer needed patches.


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007681.html">[svn] r8887 - /trunk/rpms/filezilla/filezilla.spec
</A></li>
	<LI>Next message: <A HREF="007683.html">[svn] r8889 - in /trunk/rpms/mfs: ./ mfs.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7682">[ date ]</a>
              <a href="thread.html#7682">[ thread ]</a>
              <a href="subject.html#7682">[ subject ]</a>
              <a href="author.html#7682">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
