<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r8883 - in /trunk/tools/dstat: ./ docs/ plugins/
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8883%20-%20in%20/trunk/tools/dstat%3A%20./%20docs/%20plugins/&In-Reply-To=%3C201006140848.o5E8maax001141%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007676.html">
   <LINK REL="Next"  HREF="007678.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r8883 - in /trunk/tools/dstat: ./ docs/ plugins/</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8883%20-%20in%20/trunk/tools/dstat%3A%20./%20docs/%20plugins/&In-Reply-To=%3C201006140848.o5E8maax001141%40surya.karan.org%3E"
       TITLE="[svn] r8883 - in /trunk/tools/dstat: ./ docs/ plugins/">dag at wieers.com
       </A><BR>
    <I>Mon Jun 14 10:48:36 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007676.html">[svn] r8882 - /trunk/rpms/ffmpeg/ffmpeg.spec
</A></li>
        <LI>Next message: <A HREF="007678.html">[svn] r8884 - in /trunk/tools/unoconv: ChangeLog Makefile TODO docs/headless.txt docs/unoconv.1 tests/Makefile tests/document-example.odt unoconv unoconv.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7677">[ date ]</a>
              <a href="thread.html#7677">[ thread ]</a>
              <a href="subject.html#7677">[ subject ]</a>
              <a href="author.html#7677">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: Mon Jun 14 09:48:36 2010
New Revision: 8883

URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge?rev=8883&amp;view=rev">http://svn.rpmforge.net/viewvc/rpmforge?rev=8883&amp;view=rev</A>
Log:
Documentation improvements.

Modified:
    trunk/tools/dstat/ChangeLog
    trunk/tools/dstat/docs/dstat-paper.html
    trunk/tools/dstat/docs/dstat-paper.txt
    trunk/tools/dstat/docs/dstat.1
    trunk/tools/dstat/docs/dstat.1.html
    trunk/tools/dstat/docs/dstat.1.txt
    trunk/tools/dstat/dstat.spec
    trunk/tools/dstat/plugins/dstat_disk_tps.py
    trunk/tools/dstat/plugins/dstat_dstat.py
    trunk/tools/dstat/plugins/dstat_dstat_cpu.py
    trunk/tools/dstat/plugins/dstat_dstat_ctxt.py
    trunk/tools/dstat/plugins/dstat_dstat_mem.py
    trunk/tools/dstat/plugins/dstat_squid.py
    trunk/tools/dstat/plugins/dstat_test.py
    trunk/tools/dstat/plugins/dstat_top_cputime_avg.py

Modified: trunk/tools/dstat/ChangeLog
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/ChangeLog?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/ChangeLog?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/ChangeLog (original)
+++ trunk/tools/dstat/ChangeLog Mon Jun 14 09:48:36 2010
@@ -1,4 +1,4 @@
-* 0.7.2 - Real soon now - release 10/06/2010
+* 0.7.2 - Real soon now - release 14/06/2010
 - Added external dstat_disk_tps plugin to show transactions per second
 - Added support for filtering /dev/vdaX devices (KVM virtio)
 - Added external dstat_squid plugin to show squid counters (Jason Friedland)
@@ -18,6 +18,7 @@
 - Make top-plugins free memory for processes that no longer exist
 - Added external dstat_top_int plugin to show most frequent interrupt by name
 - Fixed python 2.6 string exception issue (Dbt 585219)
+- Documentation improvements
 
 * 0.7.1 - Just the three of us - release 22/02/2010
 - Fix external plugins on python 2.2 and older (eg. RHEL3)

Modified: trunk/tools/dstat/docs/dstat-paper.html
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat-paper.html?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat-paper.html?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/docs/dstat-paper.html (original)
+++ trunk/tools/dstat/docs/dstat-paper.html Mon Jun 14 09:48:36 2010
@@ -4,7 +4,7 @@
 &lt;head&gt;
 &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
 &lt;meta name=&quot;generator&quot; content=&quot;AsciiDoc 8.5.3&quot; /&gt;
-&lt;title&gt;Dstat: plugin-based real-time monitoring&lt;/title&gt;
+&lt;title&gt;Dstat: pluggable real-time monitoring&lt;/title&gt;
 &lt;style type=&quot;text/css&quot;&gt;
 /* Debug borders */
 p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
@@ -551,12 +551,19 @@
 &lt;/head&gt;
 &lt;body&gt;
 &lt;div id=&quot;header&quot;&gt;
-&lt;h1&gt;Dstat: plugin-based real-time monitoring&lt;/h1&gt;
+&lt;h1&gt;Dstat: pluggable real-time monitoring&lt;/h1&gt;
 &lt;span id=&quot;author&quot;&gt;Dag Wieers&lt;/span&gt;&lt;br /&gt;
 &lt;span id=&quot;email&quot;&gt;&lt;tt&gt;&amp;lt;&lt;a href=&quot;mailto:<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&quot;&gt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&lt;/a&gt;&amp;gt;&lt;/tt&gt;&lt;/span&gt;&lt;br /&gt;
 &lt;span id=&quot;revdate&quot;&gt;$Id$&lt;/span&gt;
 &lt;/div&gt;
 &lt;div id=&quot;content&quot;&gt;
+&lt;div id=&quot;preamble&quot;&gt;
+&lt;div class=&quot;sectionbody&quot;&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;&lt;em&gt;This Dstat paper was originally written for LinuxConf Europe that was
+held together with the Linux Kernel summit at the University in Cambridge,
+UK in August 2007.&lt;/em&gt;&lt;/p&gt;&lt;/div&gt;
+&lt;/div&gt;
+&lt;/div&gt;
 &lt;h2 id=&quot;_introduction&quot;&gt;Introduction&lt;/h2&gt;
 &lt;div class=&quot;sectionbody&quot;&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Many tools exist to monitor hardware resources and software behaviour, but few
@@ -595,7 +602,7 @@
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;After the project was finished I was able to correlate system resources with
 network throughput, TCP information, Samba sessions, GPFS throughput,
 accumulated block device throughput, HBA throughput, all within a single
-interval.&lt;/p&gt;&lt;/div&gt;
+interval on one screen for the complete cluster.&lt;/p&gt;&lt;/div&gt;
 &lt;/div&gt;
 &lt;h2 id=&quot;_dstat_characteristics&quot;&gt;Dstat characteristics&lt;/h2&gt;
 &lt;div class=&quot;sectionbody&quot;&gt;
@@ -603,11 +610,13 @@
 serves to list all of them. Not all of them may appeal to the task you&amp;#8217;re
 doing, but the combination may make it an appealing proposition nevertheless.&lt;/p&gt;&lt;/div&gt;
 &lt;h3 id=&quot;_history_of_counters&quot;&gt;History of counters&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;An important characteristic in tools like vmstat, iostat or ifstat is the fact
-that you can compare historical collected data with new data. This allows you
-to have a good feeling of how something is evolving.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;An important characteristic in line-based tools like vmstat, iostat or
+ifstat is the fact that you can compare historical collected data with
+new data. This allows you to have a good feeling of how something is
+evolving.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Compare this to tools like top or nmon, where data is often being refreshed
-and you loose historical information.&lt;/p&gt;&lt;/div&gt;
+and you loose historical information (but in return can provide you with
+a lot more information at the same time).&lt;/p&gt;&lt;/div&gt;
 &lt;h3 id=&quot;_adding_unit_indication&quot;&gt;Adding unit indication&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;It was very important that when numbers were compared, they were in the same
 unit, and not eg. a different power exponent. The human mind sometimes works
@@ -877,11 +886,36 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+disk-tps: disk transactions counters
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 disk-util: disk utilization percentage
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+dstat: dstat cputime consumption and latency
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+dstat-cpu: dstat advanced cpu usage
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+dstat-ctxt: dstat context switches
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+dstat-mem: dstat advanced memory usage
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 fan: Fan speed
 &lt;/p&gt;
 &lt;/li&gt;
@@ -917,11 +951,6 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-innodb-keys: innodb key operation counters
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
 innodb-ops: innodb operations counters
 &lt;/p&gt;
 &lt;/li&gt;
@@ -967,12 +996,22 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+net-mackets: number of packets received and transmitted
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+nfs3: NFS3 client counters
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 nfs3-ops: NFS3 client operations counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-nfs3: NFS3 client counters
+nfsd3: NFS3 server counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -982,11 +1021,6 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-nfsd3: NFS3 server counters
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
 ntp: NTP time counters
 &lt;/p&gt;
 &lt;/li&gt;
@@ -1002,16 +1036,26 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+proc-count: total number of processes
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+qmail: qmail queue sizes
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+rpc: RPC client counters
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 rpcd: RPC server counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-rpc: RPC client counters
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
 sendmail: sendmail queue counters
 &lt;/p&gt;
 &lt;/li&gt;
@@ -1022,6 +1066,11 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+squid: squid usage statistics
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 thermal: Thermal counters
 &lt;/p&gt;
 &lt;/li&gt;
@@ -1032,11 +1081,21 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+top-bio-adv: most expensive block I/O process (advanced)
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 top-cpu: most expensive cpu process
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+top-cpu-adv: most expensive CPU process (advanced)
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 top-cputime: process using the most CPU time
 &lt;/p&gt;
 &lt;/li&gt;
@@ -1047,11 +1106,21 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+top-int: most frequent interrupt
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 top-io: most expensive I/O process
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+top-io-adv: most expensive I/O process (advanced)
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 top-latency: process with the highest total latency
 &lt;/p&gt;
 &lt;/li&gt;
@@ -1077,6 +1146,11 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+vm-memctl: VMware guest memory counters
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 vmk-hba: VMware kernel HBA counters
 &lt;/p&gt;
 &lt;/li&gt;
@@ -1092,12 +1166,12 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-vm-memctl: VMware guest memory counters
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
 vz-cpu: OpenVZ CPU counters
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+vz-io: I/O usage per OpenVZ guest
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -1311,15 +1385,6 @@
 dstat -tn --top-x 120&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Leave it running during the night and in the morning you can see the light.&lt;/p&gt;&lt;/div&gt;
-&lt;h3 id=&quot;_what_device_is_slowing_down_my_system&quot;&gt;What device is slowing down my system ?&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Many devices generate interrupts, especially when used at maximum capacity.
-Sometimes too many interrupts can slow down a system. If you want to correlate
-bad performance with hardware interrupts, you can run a command like:&lt;/p&gt;&lt;/div&gt;
-&lt;div class=&quot;listingblock&quot;&gt;
-&lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;dstat -tyif
-dstat -tyi -I 12,58,iwlagn -f 5&lt;/tt&gt;&lt;/pre&gt;
-&lt;/div&gt;&lt;/div&gt;
 &lt;h3 id=&quot;_how_much_ticks_per_second_on_my_kernel&quot;&gt;How much ticks per second on my kernel ?&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;In some cases it can be useful to see how many ticks (timer interrupts) your
 kernel is producing. With older kernels this is a fixed number (usually 100,
@@ -1333,12 +1398,20 @@
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Dstat nowadays can also detect lost ticks (when the number of ticks do not
 match the time progress. This is useful to correlate VM issues with other
 problems.&lt;/p&gt;&lt;/div&gt;
-&lt;h3 id=&quot;_what_device_is_slowing_down_my_system_2&quot;&gt;What device is slowing down my system ?&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
+&lt;h3 id=&quot;_what_device_is_slowing_down_my_system&quot;&gt;What device is slowing down my system ?&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;A nice feature of Dstat is that it can show how many interrupts each of your
 devices is generating. The &lt;em&gt;cpu&lt;/em&gt; stats already show this in percentage as
 &lt;em&gt;hard interrupt&lt;/em&gt; and &lt;em&gt;soft interrupt&lt;/em&gt;, and the &lt;em&gt;sys&lt;/em&gt; stats shows the total
 number of interrupts, but the &lt;em&gt;int&lt;/em&gt; stats go into detail. And you can specify
 exactly what IRQs you want to watch.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Many devices generate interrupts, especially when used at maximum capacity.
+Sometimes too many interrupts can slow down a system. If you want to correlate
+bad performance with hardware interrupts, you can run a command like:&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;listingblock&quot;&gt;
+&lt;div class=&quot;content&quot;&gt;
+&lt;pre&gt;&lt;tt&gt;dstat -tyif
+dstat -tyi -I 12,58,iwlagn -f 5&lt;/tt&gt;&lt;/pre&gt;
+&lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Much like &lt;tt&gt;watch -n1 -d cat /proc/interrupts&lt;/tt&gt; on steroids.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;content&quot;&gt;
@@ -1381,6 +1454,19 @@
 &lt;div class=&quot;content&quot;&gt;
 &lt;pre&gt;&lt;tt&gt;dstat -t -y -i -I 12,58,185 -f 5&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Another possibility is to use the &lt;tt&gt;--top-int&lt;/tt&gt; plugin, showing you the most
+frequent plugin on your system:&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;listingblock&quot;&gt;
+&lt;div class=&quot;content&quot;&gt;
+&lt;pre&gt;&lt;tt&gt;[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> ~]# dstat -t --top-int
+----system---- ---most-frequent----
+     time     |     interrupt
+11-06 08:34:53|ahci              5
+11-06 08:34:54|i8042            69
+11-06 08:34:55|i8042            45
+11-06 08:34:56|ehci/usb2        12
+11-06 08:34:57|&lt;/tt&gt;&lt;/pre&gt;
+&lt;/div&gt;&lt;/div&gt;
 &lt;h3 id=&quot;_how_does_my_wifi_signal_evolve_when_i_move_my_laptop_or_ap_through_the_house&quot;&gt;How does my WIFI signal evolve when I move my laptop or AP through the house ?&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Something I was looking into when trying to find the optimal location for the
 WIFI access point. However I must say that another tool I wrote &lt;em&gt;Dwscan&lt;/em&gt; is
@@ -1411,17 +1497,19 @@
 &lt;div class=&quot;title&quot;&gt;The dstat_helloworld plugin in its full glory.&lt;/div&gt;
 &lt;div class=&quot;content&quot;&gt;
 &lt;pre&gt;&lt;tt&gt;class dstat_helloworld(dstat):
+    ``&quot;
+    Example &quot;Hello world!&quot; output plugin for aspiring Dstat developers.
+    ``&quot;
     def __init__(self):
         self.name = 'plugin title'          &lt;b&gt;&amp;lt;1&amp;gt;&lt;/b&gt;
-        self.type = 's'                     &lt;b&gt;&amp;lt;2&amp;gt;&lt;/b&gt;
-        self.width = 12                     &lt;b&gt;&amp;lt;3&amp;gt;&lt;/b&gt;
-        self.scale = 100                    &lt;b&gt;&amp;lt;4&amp;gt;&lt;/b&gt;
-        self.nick = ('counter',)            &lt;b&gt;&amp;lt;5&amp;gt;&lt;/b&gt;
-        self.vars = ('text',)               &lt;b&gt;&amp;lt;6&amp;gt;&lt;/b&gt;
-        self.init(self.vars, 1)             &lt;b&gt;&amp;lt;7&amp;gt;&lt;/b&gt;
+        self.nick = ('counter',)            &lt;b&gt;&amp;lt;2&amp;gt;&lt;/b&gt;
+        self.vars = ('text',)               &lt;b&gt;&amp;lt;3&amp;gt;&lt;/b&gt;
+        self.type = 's'                     &lt;b&gt;&amp;lt;4&amp;gt;&lt;/b&gt;
+        self.width = 12                     &lt;b&gt;&amp;lt;5&amp;gt;&lt;/b&gt;
+        self.scale = 0                      &lt;b&gt;&amp;lt;6&amp;gt;&lt;/b&gt;
 
     def extract(self):
-        self.val['text'] = 'Hello world!'   &lt;b&gt;&amp;lt;8&amp;gt;&lt;/b&gt;&lt;/tt&gt;&lt;/pre&gt;
+        self.val['text'] = 'Hello world!'   &lt;b&gt;&amp;lt;7&amp;gt;&lt;/b&gt;&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;In this example, there are several components:&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;olist arabic&quot;&gt;&lt;ol class=&quot;arabic&quot;&gt;
@@ -1432,6 +1520,16 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+&lt;tt&gt;self.nick&lt;/tt&gt; is a list of the counter names
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+&lt;tt&gt;self.vars&lt;/tt&gt; is a list of the variable names for each counter
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 &lt;tt&gt;self.type&lt;/tt&gt; defines the counter type: string, percentage, integer, float
 &lt;/p&gt;
 &lt;/li&gt;
@@ -1443,22 +1541,6 @@
 &lt;li&gt;
 &lt;p&gt;
 &lt;tt&gt;self.scale&lt;/tt&gt; influences the coloring and unit type
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
-&lt;tt&gt;self.nick&lt;/tt&gt; is a list of the counter names
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
-&lt;tt&gt;self.vars&lt;/tt&gt; is a list of the variable names for each counter
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
-&lt;tt&gt;self.init()&lt;/tt&gt; is a function that initialises the counter structures
-   (&lt;tt&gt;self.cn1&lt;/tt&gt;, &lt;tt&gt;self.cn2&lt;/tt&gt; and &lt;tt&gt;self.val&lt;/tt&gt;)
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -1474,40 +1556,29 @@
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;title&quot;&gt;The dstat_postfix plugin&lt;/div&gt;
 &lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;global glob                                                                &lt;b&gt;&amp;lt;1&amp;gt;&lt;/b&gt;
-import glob
-
-class dstat_postfix(dstat):
+&lt;pre&gt;&lt;tt&gt;class dstat_postfix(dstat):
     def __init__(self):
         self.name = 'postfix'
-        self.type = 'd'                                                    &lt;b&gt;&amp;lt;2&amp;gt;&lt;/b&gt;
+        self.nick = ('inco', 'actv', 'dfrd', 'bnce', 'defr')
+        self.vars = ('incoming', 'active', 'deferred', 'bounce', 'defer')
+        self.type = 'd'                                                    &lt;b&gt;&amp;lt;1&amp;gt;&lt;/b&gt;
         self.width = 4
         self.scale = 100
-        self.vars = ('incoming', 'active', 'deferred', 'bounce', 'defer')
-        self.nick = ('inco', 'actv', 'dfrd', 'bnce', 'defr')
-        self.init(self.vars, 1)
-
-    def check(self):                                                       &lt;b&gt;&amp;lt;3&amp;gt;&lt;/b&gt;
+
+    def check(self):                                                       &lt;b&gt;&amp;lt;2&amp;gt;&lt;/b&gt;
         if not os.access('/var/spool/postfix/active', os.R_OK):
             raise Exception, 'Cannot access postfix queues'
-        return True
 
     def extract(self):
-        for item in self.vars:                                             &lt;b&gt;&amp;lt;4&amp;gt;&lt;/b&gt;
+        for item in self.vars:                                             &lt;b&gt;&amp;lt;3&amp;gt;&lt;/b&gt;
             self.val[item] = len(glob.glob('/var/spool/postfix/'+item+'/*/*')&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;This example shows the following items:&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;olist arabic&quot;&gt;&lt;ol class=&quot;arabic&quot;&gt;
 &lt;li&gt;
 &lt;p&gt;
-Since the plugin is imported at runtime, it is important that these are
-   are included in the global scope to reuse them
-&lt;/p&gt;
-&lt;/li&gt;
-&lt;li&gt;
-&lt;p&gt;
 type, width and scale specify decimal, column width a,d coloring based on
-   multiplication of 100
+    multiplication of 100
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -1518,7 +1589,7 @@
 &lt;li&gt;
 &lt;p&gt;
 To make processing easier we have opted to use as value names (&lt;tt&gt;self.vars&lt;/tt&gt;)
-   the name of the postfix queues and store counts in &lt;tt&gt;self.val&lt;/tt&gt;
+    the name of the postfix queues and store counts in &lt;tt&gt;self.val&lt;/tt&gt;
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;/ol&gt;&lt;/div&gt;
@@ -1539,6 +1610,20 @@
 &lt;h2 id=&quot;_known_issues&quot;&gt;Known issues&lt;/h2&gt;
 &lt;div class=&quot;sectionbody&quot;&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;There are some known issues that are important to understand when using Dstat.&lt;/p&gt;&lt;/div&gt;
+&lt;h3 id=&quot;_writing_dstat_and_plugins_in_c&quot;&gt;Writing Dstat and plugins in C&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;It makes sense to reimplement Dstat or some of its plugins in C and still
+allow the writing of Python (or even Perl) plugins. Tests have shown that for
+example processing &lt;em&gt;/proc/pid&lt;/em&gt; in C makes the plugin 3 times faster. And this
+did not take into account the processing of the results and displaying the
+output.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;So rewriting in C makes a lot of sense, but it is also much more complicated.&lt;/p&gt;&lt;/div&gt;
+&lt;h3 id=&quot;_python_1_5&quot;&gt;Python 1.5&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;There used to be a Python 1.5 version of Dstat, but with RHEL2 going out of
+support in 2009 I decided to no longer spend the extra effort to sync and test
+the Dstat15 version.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Leaving Python 1.5 behind means that plugins do not longer have to be
+compatible with Python 1.5 either. It is no coincedence that after this event
+a major overhaul was made to the plugin interface.&lt;/p&gt;&lt;/div&gt;
 &lt;h3 id=&quot;_counter_rollovers&quot;&gt;Counter rollovers&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Unfortunately Dstat is susceptible for counters that &amp;#8220;rollover&amp;#8221;. This means
 that a counter gets bigger than its maximum value the data-structure is capable
@@ -1551,14 +1636,11 @@
 limit, this would happen every 1.6 seconds.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Since &lt;em&gt;/proc&lt;/em&gt; is updated every second, this would be impossible for Dstat to
 catch. Currently if Dstat encounters a negative difference for an interval it
-displays a dash.&lt;/p&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Obviously, if Dstat were know what the counter&amp;#8217;s maximum value is, it could
-recalculate the difference. However that is currently not implemented and does
-not guarantee a correct result either, since a negative value could be the
-result of 2 or more rollovers.&lt;/p&gt;&lt;/div&gt;
+assumes a single rollover has happened and compensates for it. If that
+assumption is wrong, the user is working with wrong counters nonetheless.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;If you suspect that the behaviour of your system is susceptible of counter
 rollovers, make sure you take this into account when using Dstat (or any other
-tool that uses these counters for that matter)&lt;/p&gt;&lt;/div&gt;
+tool that uses these counters for that matter).&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;admonitionblock&quot;&gt;
 &lt;table&gt;&lt;tr&gt;
 &lt;td class=&quot;icon&quot;&gt;
@@ -1570,11 +1652,13 @@
 changes to improve handling them.&lt;/td&gt;
 &lt;/tr&gt;&lt;/table&gt;
 &lt;/div&gt;
-&lt;h3 id=&quot;_dstat_performance&quot;&gt;Dstat performance&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
+&lt;/div&gt;
+&lt;h2 id=&quot;_dstat_performance&quot;&gt;Dstat performance&lt;/h2&gt;
+&lt;div class=&quot;sectionbody&quot;&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;As mentioned several times now, Dstat is written in python. There are various
-reasons that Python was chosen and the most important reason is that it
-simplifies writing plugins, processing counters and lowers the bar for
-people to contribute changes.&lt;/p&gt;&lt;/div&gt;
+reasons that Python was chosen and the most important reason is that we target
+system engineers and users, so we need to simplify writing plugins, processing
+counters and lowers the bar for people to contribute changes.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;The downside of choosing a scripting language is that it is slower than if it
 would be written in C, obviously. &lt;strong&gt;Dstat is not optimised for performance.&lt;/strong&gt;&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;admonitionblock&quot;&gt;
@@ -1584,22 +1668,108 @@
 &lt;/td&gt;
 &lt;td class=&quot;content&quot;&gt;This may seem ironic: a performance monitoring tool that is not
 optimised for performance, but rather for flexibility. However the ease of
-writing plugins and prototyping gets precedence over performance at this time.&lt;/td&gt;
+writing plugins and prototyping gets precedence over performance at this time.
+On the other hand we have pretty good tools to measure the overhead of a
+single plugin and profiling infrastructure to counter any excuses for sloppy
+plugin development.&lt;/td&gt;
 &lt;/tr&gt;&lt;/table&gt;
 &lt;/div&gt;
-&lt;h4 id=&quot;_plugin_performance&quot;&gt;Plugin performance&lt;/h4&gt;
+&lt;h3 id=&quot;_plugin_performance&quot;&gt;Plugin performance&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;If we look at the basic plugins, there are no real performance issues with
-Dstat. Loading Dstat takes longer than eg. vmstat, but once running, Dstat&amp;#8217;s
-performance for the same functionality is up to par with vmstat, ifstat and
-other similar tools.&lt;/p&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;However there are plugins that are much more resource intensive than others
-and the selection of plugins determines Dstat&amp;#8217;s performance in a major way.&lt;/p&gt;&lt;/div&gt;
-&lt;h4 id=&quot;_debugging_dstat&quot;&gt;Debugging Dstat&lt;/h4&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Dstat comes with a &lt;tt&gt;--debug&lt;/tt&gt; option that helps to find the cost of running
-plugins. The &lt;tt&gt;--debug&lt;/tt&gt; option show how long it takes Dstat to process the
-selected plugins.&lt;/p&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;You can see the cost of Dstat itself by simply using the &lt;tt&gt;dstat_time&lt;/tt&gt; plugin
-together with the &lt;tt&gt;--debug&lt;/tt&gt; option.&lt;/p&gt;&lt;/div&gt;
+Dstat. Loading Dstat takes longer to start than eg. vmstat, but once running,
+Dstat&amp;#8217;s performance for the same functionality is up to par with vmstat,
+ifstat and other similar tools.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;However there are &lt;strong&gt;some plugins that are much more resource intensive than
+others&lt;/strong&gt; and the selection of plugins determines Dstat&amp;#8217;s performance in a major
+way.&lt;/p&gt;&lt;/div&gt;
+&lt;h3 id=&quot;_performance_monitoring_dstat&quot;&gt;Performance monitoring Dstat&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Dstat comes with some plugins (starting with &lt;tt&gt;dstat_&lt;/tt&gt;) to check the overhead
+of itself, this together with the selection of plugins makes it very
+convenient to measure the overhead of individual plugins. The following
+options exist (as plugins):&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;dlist&quot;&gt;&lt;dl&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--dstat
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+Provides cputime and latency information for Dstat. This plugin can help you
+determine how accurate and how much overhead Dstat has with its current
+plugins enabled.
+&lt;/p&gt;
+&lt;/dd&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--dstat-cpu
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+Provides cpu utilization (user-space and kernel-space) statistics for Dstat.
+This plugin can help determine where there is some room for improvement for
+individual plugins (or Dstat itself).
+&lt;/p&gt;
+&lt;/dd&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--dstat-ctxt
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+Provides context switch information for Dstat. Both voluntary as well ass
+involuntary context switches are shown, providing you with some idea of how
+the system is providing timeslices and how Dstat is returning the cpu to the
+system.
+&lt;/p&gt;
+&lt;/dd&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--dstat-mem
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+Provides memory information about the Dstat process. This plugin enables
+plugin developers to determine whether Dstat is increasing its memory usage
+and therefor is &lt;em&gt;leaking&lt;/em&gt; memory over time. This plugin proved very useful in
+optimizing memory usage of the top-plugins, which typically scan all
+processes.
+&lt;/p&gt;
+&lt;/dd&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--snooze
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+This plugin shows in milliseconds how much time is deviating from the previous
+run. Which is influenced by the time it takes for earlier stats to be
+calculated. So the output of this plugin is very dependant on the location on
+the command-line.
+&lt;/p&gt;
+&lt;/dd&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--debug
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+This option is not a plugin, but internal to Dstat. It will cause Dstat to
+show the actual time in milliseconds from start to end at the end of each
+line. This should be more or less close to the output of the &lt;tt&gt;dstat_dstat&lt;/tt&gt; and
+&lt;tt&gt;dstat_dstat_cpu&lt;/tt&gt; plugins.
+&lt;/p&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;It also influences the internal &lt;tt&gt;dstat_time&lt;/tt&gt; plugin to show milliseconds
+instead of seconds, which may help showing the accuracy of Dstat itself.&lt;/p&gt;&lt;/div&gt;
+&lt;/dd&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--profile
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+Ths option is also not a plugin, but internal to Dstat. It provides you with
+detailed profiling information at the end of each run. The default settings
+can be changed inside Dstat (or a copy) to tweak the output you are looking
+for. It creates a termporary profiling file in the current directory when
+running, but will clean it up after exit.
+&lt;/p&gt;
+&lt;/dd&gt;
+&lt;/dl&gt;&lt;/div&gt;
+&lt;h3 id=&quot;_measuring_plugins&quot;&gt;Measuring plugins&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Here is a small example of how one can measure the impact of a plugin.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;title&quot;&gt;The cost of running the timer plugin&lt;/div&gt;
 &lt;div class=&quot;content&quot;&gt;
@@ -1658,26 +1828,6 @@
 information (eg. communicating with the mysql client, or processing the mail
 queue) may not actually use any local resources, but the latency causes
 Dstat to slow down processing other counters.&lt;/p&gt;&lt;/div&gt;
-&lt;h4 id=&quot;_writing_dstat_and_plugins_in_c&quot;&gt;Writing Dstat and plugins in C&lt;/h4&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;It makes sense to reimplement Dstat or some of its plugins in C and still
-allow the writing of Python (or even Perl) plugins. Tests have shown that for
-example processing &lt;em&gt;/proc/pid&lt;/em&gt; in C makes the plugin 3 times faster. And this
-did not take into account the processing of the results and displaying the
-output.&lt;/p&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;So rewriting in C makes a lot of sense, but it is also much more complicated.&lt;/p&gt;&lt;/div&gt;
-&lt;h3 id=&quot;_python_1_5&quot;&gt;Python 1.5&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Dstat works with python 2.0, however there is also a Dstat15 version that
-still works on python 1.5. The downside of having Dstat work on python 1.5 is
-that the external plugins cannot use the newer and more flexible python 2.0
-syntax and the differences between python 1.5 and 2.0 are considerable.&lt;/p&gt;&lt;/div&gt;
-&lt;div class=&quot;admonitionblock&quot;&gt;
-&lt;table&gt;&lt;tr&gt;
-&lt;td class=&quot;icon&quot;&gt;
-&lt;div class=&quot;title&quot;&gt;Note&lt;/div&gt;
-&lt;/td&gt;
-&lt;td class=&quot;content&quot;&gt;Not all plugins work properly on Python 1.5.&lt;/td&gt;
-&lt;/tr&gt;&lt;/table&gt;
-&lt;/div&gt;
 &lt;/div&gt;
 &lt;h2 id=&quot;_future_development&quot;&gt;Future development&lt;/h2&gt;
 &lt;div class=&quot;sectionbody&quot;&gt;
@@ -1692,7 +1842,6 @@
 &lt;li&gt;
 &lt;p&gt;
 Changes in how Dstat colours digits within a value (the 6 in 6134B)
-   *
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;/ul&gt;&lt;/div&gt;
@@ -1737,12 +1886,6 @@
 Redesign Dstat
 &lt;/p&gt;
 &lt;div class=&quot;ulist&quot;&gt;&lt;ul&gt;
-&lt;li&gt;
-&lt;p&gt;
-Work on the plugin infrastructure, make the API more simple and
-     straightforward
-&lt;/p&gt;
-&lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
 Create an object-model and namespace for plugins and counters so that
@@ -1777,7 +1920,7 @@
 &lt;div id=&quot;footnotes&quot;&gt;&lt;hr /&gt;&lt;/div&gt;
 &lt;div id=&quot;footer&quot;&gt;
 &lt;div id=&quot;footer-text&quot;&gt;
-Last updated 2009-11-25 13:04:13 CEST
+Last updated 2010-06-14 10:43:26 CEST
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/body&gt;

Modified: trunk/tools/dstat/docs/dstat-paper.txt
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat-paper.txt?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat-paper.txt?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/docs/dstat-paper.txt (original)
+++ trunk/tools/dstat/docs/dstat-paper.txt Mon Jun 14 09:48:36 2010
@@ -1,6 +1,11 @@
-= Dstat: plugin-based real-time monitoring
+= Dstat: pluggable real-time monitoring
 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 $Id$
+
+'This Dstat paper was originally written for LinuxConf Europe that was
+held together with the Linux Kernel summit at the University in Cambridge,
+UK in August 2007.'
+
 
 == Introduction
 Many tools exist to monitor hardware resources and software behaviour, but few
@@ -46,7 +51,7 @@
 After the project was finished I was able to correlate system resources with
 network throughput, TCP information, Samba sessions, GPFS throughput,
 accumulated block device throughput, HBA throughput, all within a single
-interval.
+interval on one screen for the complete cluster.
 
 
 == Dstat characteristics
@@ -56,12 +61,14 @@
 
 
 === History of counters
-An important characteristic in tools like vmstat, iostat or ifstat is the fact
-that you can compare historical collected data with new data. This allows you
-to have a good feeling of how something is evolving.
+An important characteristic in line-based tools like vmstat, iostat or
+ifstat is the fact that you can compare historical collected data with
+new data. This allows you to have a good feeling of how something is
+evolving.
 
 Compare this to tools like top or nmon, where data is often being refreshed
-and you loose historical information.
+and you loose historical information (but in return can provide you with
+a lot more information at the same time).
 
 
 === Adding unit indication
@@ -217,7 +224,12 @@
     - battery-remain: remaining battery time
     - cpufreq: CPU frequency
     - dbus: DBUS connections
+    - disk-tps: disk transactions counters
     - disk-util: disk utilization percentage
+    - dstat: dstat cputime consumption and latency
+    - dstat-cpu: dstat advanced cpu usage
+    - dstat-ctxt: dstat context switches
+    - dstat-mem: dstat advanced memory usage
     - fan: Fan speed
     - freespace: free space on filesystems
     - gpfs: GPFS IO counters
@@ -225,7 +237,6 @@
     - helloworld: Hello world dispenser
     - innodb-buffer: innodb buffer counters
     - innodb-io: innodb I/O counters
-    - innodb-keys: innodb key operation counters
     - innodb-ops: innodb operations counters
     - lustre: lustre throughput counters
     - memcache-hits: Memcache hit counters
@@ -235,33 +246,42 @@
     - mysql5-keys: MySQL keys counters
     - mysql-io: MySQL I/O counters
     - mysql-ops: MySQL operations counters
+    - net-mackets: number of packets received and transmitted
+    - nfs3: NFS3 client counters
     - nfs3-ops: NFS3 client operations counters
-    - nfs3: NFS3 client counters
+    - nfsd3: NFS3 server counters
     - nfsd3-ops: NFS3 server operations counters
-    - nfsd3: NFS3 server counters
     - ntp: NTP time counters
     - postfix: postfix queue counters
     - power: Power usage counters
+    - proc-count: total number of processes
+    - qmail: qmail queue sizes
+    - rpc: RPC client counters
     - rpcd: RPC server counters
-    - rpc: RPC client counters
     - sendmail: sendmail queue counters
     - snooze: Dstat time delay counters
+    - squid: squid usage statistics
     - thermal: Thermal counters
     - top-bio: most expensive block I/O process
+    - top-bio-adv: most expensive block I/O process (advanced)
     - top-cpu: most expensive cpu process
+    - top-cpu-adv: most expensive CPU process (advanced)
     - top-cputime: process using the most CPU time
     - top-cputime-avg: process having the highest average CPU time
+    - top-int: most frequent interrupt
     - top-io: most expensive I/O process
+    - top-io-adv: most expensive I/O process (advanced)
     - top-latency: process with the highest total latency
     - top-latency-avg: process with the highest average latency
     - top-mem: most expensive memory process
     - top-oom: process first shot by OOM killer
     - utmp: utmp counters
+    - vm-memctl: VMware guest memory counters
     - vmk-hba: VMware kernel HBA counters
     - vmk-int: VMware kernel interrupt counters
     - vmk-nic: VMware kernel NIC counters
-    - vm-memctl: VMware guest memory counters
     - vz-cpu: OpenVZ CPU counters
+    - vz-io: I/O usage per OpenVZ guest
     - vz-ubc: OpenVZ user beancounters
     - wifi: WIFI quality information
 
@@ -370,12 +390,12 @@
 ----
 [<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> dag]$ dstat -taf
 -----time----- -------cpu0-usage------ --dsk/sda-----dsk/sr0-- --net/eth1- ---paging-- ---system--
-  date/time   |usr sys idl wai hiq siq| read  writ: read  writ| recv  send|  in   out | int   csw
-02-08 02:42:48| 10   2  85   2   0   0|  22k   23k: 1.8B    0 |   0     0 |2588B 2952B| 558   580
-02-08 02:42:49|  4   3  93   0   0   0|   0     0 :   0     0 |   0     0 |   0     0 |1116   962
-02-08 02:42:50|  5   2  90   0   2   1|   0    28k:   0     0 |   0     0 |   0     0 |1380  1136
-02-08 02:42:51| 11   6  82   0   1   0|   0     0 :   0     0 |   0     0 |   0     0 |1277  1340
-02-08 02:42:52|  3   3  93   0   1   0|   0    84k:   0     0 |   0     0 |   0     0 |1311  1034
+  date/time   |usr sys idl wai hiq siq| read  writ: read  writ| recv  send|  in   out | int   csw 
+02-08 02:42:48| 10   2  85   2   0   0|  22k   23k: 1.8B    0 |   0     0 |2588B 2952B| 558   580 
+02-08 02:42:49|  4   3  93   0   0   0|   0     0 :   0     0 |   0     0 |   0     0 |1116   962 
+02-08 02:42:50|  5   2  90   0   2   1|   0    28k:   0     0 |   0     0 |   0     0 |1380  1136 
+02-08 02:42:51| 11   6  82   0   1   0|   0     0 :   0     0 |   0     0 |   0     0 |1277  1340 
+02-08 02:42:52|  3   3  93   0   1   0|   0    84k:   0     0 |   0     0 |   0     0 |1311  1034 
 ----
 
 NOTE: The +-t+ here is completely optional and generally wastes space. But
@@ -429,16 +449,6 @@
 
 Leave it running during the night and in the morning you can see the light.
 
-=== What device is slowing down my system ?
-Many devices generate interrupts, especially when used at maximum capacity.
-Sometimes too many interrupts can slow down a system. If you want to correlate
-bad performance with hardware interrupts, you can run a command like:
-
-----
-dstat -tyif
-dstat -tyi -I 12,58,iwlagn -f 5
-----
-
 === How much ticks per second on my kernel ?
 In some cases it can be useful to see how many ticks (timer interrupts) your
 kernel is producing. With older kernels this is a fixed number (usually 100,
@@ -473,11 +483,19 @@
 
 === What device is slowing down my system ?
 A nice feature of Dstat is that it can show how many interrupts each of your
-devices is generating. The 'cpu' stats already show this in percentage as 
+devices is generating. The 'cpu' stats already show this in percentage as
 'hard interrupt' and 'soft interrupt', and the 'sys' stats shows the total
 number of interrupts, but the 'int' stats go into detail. And you can specify
 exactly what IRQs you want to watch.
 
+Many devices generate interrupts, especially when used at maximum capacity.
+Sometimes too many interrupts can slow down a system. If you want to correlate
+bad performance with hardware interrupts, you can run a command like:
+
+----
+dstat -tyif
+dstat -tyi -I 12,58,iwlagn -f 5
+----
 Much like +watch -n1 -d cat /proc/interrupts+ on steroids.
 
 ----
@@ -524,9 +542,23 @@
 dstat -t -y -i -I 12,58,185 -f 5
 ----
 
+Another possibility is to use the +--top-int+ plugin, showing you the most
+frequent plugin on your system:
+
+----
+[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> ~]# dstat -t --top-int
+----system---- ---most-frequent----
+     time     |     interrupt      
+11-06 08:34:53|ahci              5 
+11-06 08:34:54|i8042            69 
+11-06 08:34:55|i8042            45 
+11-06 08:34:56|ehci/usb2        12 
+11-06 08:34:57|                    
+----
+
 === How does my WIFI signal evolve when I move my laptop or AP through the house ?
 Something I was looking into when trying to find the optimal location for the
-WIFI access point. However I must say that another tool I wrote 'Dwscan' is 
+WIFI access point. However I must say that another tool I wrote 'Dwscan' is
 currently more sophisticated.
 
 ----
@@ -556,30 +588,30 @@
 .The dstat_helloworld plugin in its full glory.
 ----
 class dstat_helloworld(dstat):
+    ``&quot;
+    Example &quot;Hello world!&quot; output plugin for aspiring Dstat developers.
+    ``&quot;
     def __init__(self):
         self.name = 'plugin title'          &lt;1&gt;
-        self.type = 's'                     &lt;2&gt;
-        self.width = 12                     &lt;3&gt;
-        self.scale = 100                    &lt;4&gt;
-        self.nick = ('counter',)            &lt;5&gt;
-        self.vars = ('text',)               &lt;6&gt;
-        self.init(self.vars, 1)             &lt;7&gt;
+        self.nick = ('counter',)            &lt;2&gt;
+        self.vars = ('text',)               &lt;3&gt;
+        self.type = 's'                     &lt;4&gt;
+        self.width = 12                     &lt;5&gt;
+        self.scale = 0                      &lt;6&gt;
 
     def extract(self):
-        self.val['text'] = 'Hello world!'   &lt;8&gt;
+        self.val['text'] = 'Hello world!'   &lt;7&gt;
 ----
 
 In this example, there are several components:
 
- . +self.name+ contains the plugin's visible title.
- . +self.type+ defines the counter type: string, percentage, integer, float
- . +self.width+ defines the column width
- . +self.scale+ influences the coloring and unit type
- . +self.nick+ is a list of the counter names
- . +self.vars+ is a list of the variable names for each counter
- . +self.init()+ is a function that initialises the counter structures
-   (+self.cn1+, +self.cn2+ and +self.val+)
- . +self.val+ contains the counter values that are being displayed
+ 1. +self.name+ contains the plugin's visible title.
+ 2. +self.nick+ is a list of the counter names
+ 3. +self.vars+ is a list of the variable names for each counter
+ 4. +self.type+ defines the counter type: string, percentage, integer, float
+ 5. +self.width+ defines the column width
+ 6. +self.scale+ influences the coloring and unit type
+ 7. +self.val+ contains the counter values that are being displayed
 
 
 === Parsing counters
@@ -589,38 +621,31 @@
 
 .The dstat_postfix plugin
 ----
-global glob                                                                &lt;1&gt;
-import glob
-
 class dstat_postfix(dstat):
     def __init__(self):
         self.name = 'postfix'
-        self.type = 'd'                                                    &lt;2&gt;
+        self.nick = ('inco', 'actv', 'dfrd', 'bnce', 'defr')
+        self.vars = ('incoming', 'active', 'deferred', 'bounce', 'defer')
+        self.type = 'd'                                                    &lt;1&gt;
         self.width = 4
         self.scale = 100
-        self.vars = ('incoming', 'active', 'deferred', 'bounce', 'defer')
-        self.nick = ('inco', 'actv', 'dfrd', 'bnce', 'defr')
-        self.init(self.vars, 1)
-
-    def check(self):                                                       &lt;3&gt;
+
+    def check(self):                                                       &lt;2&gt;
         if not os.access('/var/spool/postfix/active', os.R_OK):
             raise Exception, 'Cannot access postfix queues'
-        return True
 
     def extract(self):
-        for item in self.vars:                                             &lt;4&gt;
+        for item in self.vars:                                             &lt;3&gt;
             self.val[item] = len(glob.glob('/var/spool/postfix/'+item+'/*/*')
 ----
 
 This example shows the following items:
 
- . Since the plugin is imported at runtime, it is important that these are 
-   are included in the global scope to reuse them
- . type, width and scale specify decimal, column width a,d coloring based on
-   multiplication of 100
- . The +check()+ method tests conditions and bails out of they are not met
- . To make processing easier we have opted to use as value names (+self.vars+)
-   the name of the postfix queues and store counts in +self.val+
+ 1. type, width and scale specify decimal, column width a,d coloring based on
+    multiplication of 100
+ 2. The +check()+ method tests conditions and bails out of they are not met
+ 3. To make processing easier we have opted to use as value names (+self.vars+)
+    the name of the postfix queues and store counts in +self.val+
 
 
 === Opening files
@@ -644,6 +669,26 @@
 == Known issues
 There are some known issues that are important to understand when using Dstat.
 
+=== Writing Dstat and plugins in C
+It makes sense to reimplement Dstat or some of its plugins in C and still
+allow the writing of Python (or even Perl) plugins. Tests have shown that for
+example processing _/proc/pid_ in C makes the plugin 3 times faster. And this
+did not take into account the processing of the results and displaying the
+output.
+
+So rewriting in C makes a lot of sense, but it is also much more complicated.
+
+
+=== Python 1.5
+There used to be a Python 1.5 version of Dstat, but with RHEL2 going out of
+support in 2009 I decided to no longer spend the extra effort to sync and test
+the Dstat15 version.
+
+Leaving Python 1.5 behind means that plugins do not longer have to be
+compatible with Python 1.5 either. It is no coincedence that after this event
+a major overhaul was made to the plugin interface.
+
+
 === Counter rollovers
 Unfortunately Dstat is susceptible for counters that ``rollover''. This means
 that a counter gets bigger than its maximum value the data-structure is capable
@@ -659,16 +704,12 @@
 
 Since _/proc_ is updated every second, this would be impossible for Dstat to
 catch. Currently if Dstat encounters a negative difference for an interval it
-displays a dash.
-
-Obviously, if Dstat were know what the counter's maximum value is, it could
-recalculate the difference. However that is currently not implemented and does
-not guarantee a correct result either, since a negative value could be the
-result of 2 or more rollovers.
+assumes a single rollover has happened and compensates for it. If that
+assumption is wrong, the user is working with wrong counters nonetheless.
 
 If you suspect that the behaviour of your system is susceptible of counter
 rollovers, make sure you take this into account when using Dstat (or any other
-tool that uses these counters for that matter)
+tool that uses these counters for that matter).
 
 TIP: Shipped with the Dstat documentation there is a document
 (_counter-rollovers.txt_) that goes deeper into counter rollovers. If this
@@ -676,11 +717,11 @@
 changes to improve handling them.
 
 
-=== Dstat performance
+== Dstat performance
 As mentioned several times now, Dstat is written in python. There are various
-reasons that Python was chosen and the most important reason is that it
-simplifies writing plugins, processing counters and lowers the bar for
-people to contribute changes.
+reasons that Python was chosen and the most important reason is that we target
+system engineers and users, so we need to simplify writing plugins, processing
+counters and lowers the bar for people to contribute changes.
 
 The downside of choosing a scripting language is that it is slower than if it
 would be written in C, obviously. *Dstat is not optimised for performance.*
@@ -688,32 +729,83 @@
 NOTE: This may seem ironic: a performance monitoring tool that is not
 optimised for performance, but rather for flexibility. However the ease of
 writing plugins and prototyping gets precedence over performance at this time.
-
-
-==== Plugin performance
+On the other hand we have pretty good tools to measure the overhead of a
+single plugin and profiling infrastructure to counter any excuses for sloppy
+plugin development.
+
+
+=== Plugin performance
 If we look at the basic plugins, there are no real performance issues with
-Dstat. Loading Dstat takes longer than eg. vmstat, but once running, Dstat's
-performance for the same functionality is up to par with vmstat, ifstat and
-other similar tools.
-
-However there are plugins that are much more resource intensive than others
-and the selection of plugins determines Dstat's performance in a major way.
-
-
-==== Debugging Dstat
-Dstat comes with a +--debug+ option that helps to find the cost of running
-plugins. The +--debug+ option show how long it takes Dstat to process the
-selected plugins.
-
-You can see the cost of Dstat itself by simply using the +dstat_time+ plugin
-together with the +--debug+ option.
+Dstat. Loading Dstat takes longer to start than eg. vmstat, but once running,
+Dstat's performance for the same functionality is up to par with vmstat,
+ifstat and other similar tools.
+
+However there are *some plugins that are much more resource intensive than
+others* and the selection of plugins determines Dstat's performance in a major
+way.
+
+
+=== Performance monitoring Dstat
+Dstat comes with some plugins (starting with +dstat_+) to check the overhead
+of itself, this together with the selection of plugins makes it very
+convenient to measure the overhead of individual plugins. The following
+options exist (as plugins):
+
+--dstat::
+Provides cputime and latency information for Dstat. This plugin can help you
+determine how accurate and how much overhead Dstat has with its current
+plugins enabled.
+
+--dstat-cpu::
+Provides cpu utilization (user-space and kernel-space) statistics for Dstat.
+This plugin can help determine where there is some room for improvement for
+individual plugins (or Dstat itself).
+
+--dstat-ctxt::
+Provides context switch information for Dstat. Both voluntary as well ass
+involuntary context switches are shown, providing you with some idea of how
+the system is providing timeslices and how Dstat is returning the cpu to the
+system.
+
+--dstat-mem::
+Provides memory information about the Dstat process. This plugin enables
+plugin developers to determine whether Dstat is increasing its memory usage
+and therefor is 'leaking' memory over time. This plugin proved very useful in
+optimizing memory usage of the top-plugins, which typically scan all
+processes.
+
+--snooze::
+This plugin shows in milliseconds how much time is deviating from the previous
+run. Which is influenced by the time it takes for earlier stats to be
+calculated. So the output of this plugin is very dependant on the location on
+the command-line.
+
+--debug::
+This option is not a plugin, but internal to Dstat. It will cause Dstat to
+show the actual time in milliseconds from start to end at the end of each
+line. This should be more or less close to the output of the +dstat_dstat+ and
++dstat_dstat_cpu+ plugins.
++
+It also influences the internal +dstat_time+ plugin to show milliseconds
+instead of seconds, which may help showing the accuracy of Dstat itself.
+
+--profile::
+Ths option is also not a plugin, but internal to Dstat. It provides you with
+detailed profiling information at the end of each run. The default settings
+can be changed inside Dstat (or a copy) to tweak the output you are looking
+for. It creates a termporary profiling file in the current directory when
+running, but will clean it up after exit.
+
+// FIXME: Please improve the examples by using the --dstat plugins
+=== Measuring plugins
+Here is a small example of how one can measure the impact of a plugin.
 
 .The cost of running the timer plugin
 ----
 [<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> dag]$ dstat -t --debug
 Module dstat_time
 -----time-----
-  date/time
+  date/time   
 19-08 20:34:21  5.90ms
 19-08 20:34:22  0.17ms
 19-08 20:34:23  0.18ms
@@ -744,7 +836,7 @@
 [<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> dstat]$ dstat --top-cpu --debug
 Module dstat_top_cpu
 -most-expensive-
-  cpu process
+  cpu process   
 Xorg           2 43.82ms
 Xorg           1 33.23ms
 firefox-bin    2 33.54ms
@@ -764,24 +856,7 @@
 queue) may not actually use any local resources, but the latency causes
 Dstat to slow down processing other counters.
 
-
-==== Writing Dstat and plugins in C
-It makes sense to reimplement Dstat or some of its plugins in C and still
-allow the writing of Python (or even Perl) plugins. Tests have shown that for
-example processing _/proc/pid_ in C makes the plugin 3 times faster. And this
-did not take into account the processing of the results and displaying the
-output.
-
-So rewriting in C makes a lot of sense, but it is also much more complicated.
-
-
-=== Python 1.5
-Dstat works with python 2.0, however there is also a Dstat15 version that
-still works on python 1.5. The downside of having Dstat work on python 1.5 is
-that the external plugins cannot use the newer and more flexible python 2.0
-syntax and the differences between python 1.5 and 2.0 are considerable.
-
-NOTE: Not all plugins work properly on Python 1.5.
+// FIXME: Write about profiling infrastructure
 
 
 == Future development
@@ -790,7 +865,6 @@
 
  - Output
    * Changes in how Dstat colours digits within a value (the 6 in 6134B)
-   * 
  - Exporting information
    * Connecting Dstat with rrdtool
    * Exporting to syslog or remote syslog (a way to transport counters ?)
@@ -799,8 +873,6 @@
      benefit)
    * Add more plugins
  - Redesign Dstat
-   * Work on the plugin infrastructure, make the API more simple and
-     straightforward
    * Create an object-model and namespace for plugins and counters so that
      other tools can be based on Dstat
 

Modified: trunk/tools/dstat/docs/dstat.1
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat.1?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat.1?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/docs/dstat.1 (original)
+++ trunk/tools/dstat/docs/dstat.1 Mon Jun 14 09:48:36 2010
@@ -2,7 +2,7 @@
 .\&quot; It was generated using the DocBook XSL Stylesheets (version 1.69.1).
 .\&quot; Instead of manually editing it, you probably should edit the DocBook XML
 .\&quot; source for it and then use the DocBook XSL Stylesheets to regenerate it.
-.TH &quot;DSTAT&quot; &quot;1&quot; &quot;06/10/2010&quot; &quot;\  0.7.0&quot; &quot;\ &quot;
+.TH &quot;DSTAT&quot; &quot;1&quot; &quot;06/14/2010&quot; &quot;\  0.7.0&quot; &quot;\ &quot;
 .\&quot; disable hyphenation
 .nh
 .\&quot; disable justification (adjust text to left margin only)
@@ -316,6 +316,9 @@
 .TP
 \-\-top\-cputime\-avg
 show process with the highest average timeslice (in ms)
+.TP
+\-\-top\-int
+show most frequent interrupt
 .TP
 \-\-top\-io
 show most expensive I/O process

Modified: trunk/tools/dstat/docs/dstat.1.html
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat.1.html?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat.1.html?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/docs/dstat.1.html (original)
+++ trunk/tools/dstat/docs/dstat.1.html Mon Jun 14 09:48:36 2010
@@ -1360,6 +1360,14 @@
 &lt;dd&gt;
 &lt;p&gt;
     show process with the highest average timeslice (in ms)
+&lt;/p&gt;
+&lt;/dd&gt;
+&lt;dt class=&quot;hdlist1&quot;&gt;
+--top-int
+&lt;/dt&gt;
+&lt;dd&gt;
+&lt;p&gt;
+    show most frequent interrupt
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1622,7 +1630,7 @@
 &lt;div id=&quot;footer&quot;&gt;
 &lt;div id=&quot;footer-text&quot;&gt;
 Version 0.7.0&lt;br /&gt;
-Last updated 2010-06-10 00:42:38 CEST
+Last updated 2010-06-11 08:20:28 CEST
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/body&gt;

Modified: trunk/tools/dstat/docs/dstat.1.txt
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat.1.txt?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/docs/dstat.1.txt?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/docs/dstat.1.txt (original)
+++ trunk/tools/dstat/docs/dstat.1.txt Mon Jun 14 09:48:36 2010
@@ -323,6 +323,9 @@
 
 --top-cputime-avg::
     show process with the highest average timeslice (in ms)
+
+--top-int::
+    show most frequent interrupt
 
 --top-io::
     show most expensive I/O process

Modified: trunk/tools/dstat/dstat.spec
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/dstat.spec?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/dstat.spec?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/dstat.spec (original)
+++ trunk/tools/dstat/dstat.spec Mon Jun 14 09:48:36 2010
@@ -52,7 +52,7 @@
 %{_datadir}/dstat/
 
 %changelog
-* Thu Jun 10 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.2-1
+* Mon Jun 14 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.2-1
 - Updated to release 0.7.2.
 
 * Mon Feb 22 2010 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.1-1

Modified: trunk/tools/dstat/plugins/dstat_disk_tps.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_disk_tps.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_disk_tps.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_disk_tps.py (original)
+++ trunk/tools/dstat/plugins/dstat_disk_tps.py Mon Jun 14 09:48:36 2010
@@ -2,11 +2,9 @@
 
 class dstat_plugin(dstat):
     &quot;&quot;&quot;
-    Percentage of bandwidth utilization for block devices.
+    Number of read and write transactions per device.
 
-    Displays percentage of CPU time during which I/O requests were issued
-    to the device (bandwidth utilization for the device). Device saturation
-    occurs when this value is close to 100%.
+    Displays the number of read and write I/O transactions per device.
     &quot;&quot;&quot;
 
     def __init__(self):

Modified: trunk/tools/dstat/plugins/dstat_dstat.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_dstat.py (original)
+++ trunk/tools/dstat/plugins/dstat_dstat.py Mon Jun 14 09:48:36 2010
@@ -6,7 +6,8 @@
 
     The dstat cputime is the total cputime dstat requires per second. On a
     system with one cpu and one core, the total cputime is 1000ms. On a system
-    with 2 cores the total is 2000ms.
+    with 2 cores the total is 2000ms. It may help to vizualise the performance
+    of Dstat and its selection of plugins.
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'dstat'

Modified: trunk/tools/dstat/plugins/dstat_dstat_cpu.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat_cpu.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat_cpu.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_dstat_cpu.py (original)
+++ trunk/tools/dstat/plugins/dstat_dstat_cpu.py Mon Jun 14 09:48:36 2010
@@ -2,11 +2,14 @@
 
 class dstat_plugin(dstat):
     &quot;&quot;&quot;
-    Provide memory information related to the dstat process.
+    Provide CPU information related to the dstat process.
 
-    The various values provide information about the memory usage of the
-    dstat process. This plugin gives you the possibility to follow memory
-    usage changes of dstat over time.
+    This plugin shows the CPU utilization for the dstat process itself,
+    including the user-space and system-space (kernel) utilization and
+    a total of both. On a system with one cpu and one core, the total
+    cputime is 1000ms. On a system with 2 cores the total is 2000ms.
+    It may help to vizualise the performance of Dstat and its selection
+    of plugins.
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'dstat cpu'

Modified: trunk/tools/dstat/plugins/dstat_dstat_ctxt.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat_ctxt.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat_ctxt.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_dstat_ctxt.py (original)
+++ trunk/tools/dstat/plugins/dstat_dstat_ctxt.py Mon Jun 14 09:48:36 2010
@@ -2,11 +2,11 @@
 
 class dstat_plugin(dstat):
     &quot;&quot;&quot;
-    Provide memory information related to the dstat process.
+    Provide Dstat's number of voluntary and involuntary context switches.
 
-    The various values provide information about the memory usage of the
-    dstat process. This plugin gives you the possibility to follow memory
-    usage changes of dstat over time.
+    This plugin provides a unique view of the number of voluntary and
+    involuntary context switches of the Dstat process itself. It may help
+    to vizualise the performance of Dstat and its selection of plugins.
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'contxt sw'

Modified: trunk/tools/dstat/plugins/dstat_dstat_mem.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat_mem.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_dstat_mem.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_dstat_mem.py (original)
+++ trunk/tools/dstat/plugins/dstat_dstat_mem.py Mon Jun 14 09:48:36 2010
@@ -6,7 +6,8 @@
 
     The various values provide information about the memory usage of the
     dstat process. This plugin gives you the possibility to follow memory
-    usage changes of dstat over time.
+    usage changes of dstat over time. It may help to vizualise the
+    performance of Dstat and its selection of plugins.
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'dstat memory usage'

Modified: trunk/tools/dstat/plugins/dstat_squid.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_squid.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_squid.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_squid.py (original)
+++ trunk/tools/dstat/plugins/dstat_squid.py Mon Jun 14 09:48:36 2010
@@ -1,6 +1,5 @@
-# Dstat plugin for measuring various squid statistics.
-# Author: Jason Friedland &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">thesuperjason at gmail.com</A>&gt;
-#
+### Authority: Jason Friedland &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">thesuperjason at gmail.com</A>&gt;
+
 # This plugin has been tested with:
 # - Dstat 0.6.7
 # - CentOS release 5.4 (Final)
@@ -11,6 +10,9 @@
 squidclient_options = os.getenv('DSTAT_SQUID_OPTS') # -p 8080
  
 class dstat_plugin(dstat):
+    '''
+    Provides various Squid statistics.
+    '''
     def __init__(self):
         self.name = 'squid status'
         self.type = 's'

Modified: trunk/tools/dstat/plugins/dstat_test.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_test.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_test.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_test.py (original)
+++ trunk/tools/dstat/plugins/dstat_test.py Mon Jun 14 09:48:36 2010
@@ -1,6 +1,9 @@
 ### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
 class dstat_plugin(dstat):
+    '''
+    Provides a test playground to test syntax and structure.
+    '''
     def __init__(self):
         self.name = 'test'
         self.nick = ( 'f1', 'f2' )

Modified: trunk/tools/dstat/plugins/dstat_top_cputime_avg.py
URL: <A HREF="http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_top_cputime_avg.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff">http://svn.rpmforge.net/viewvc/rpmforge/trunk/tools/dstat/plugins/dstat_top_cputime_avg.py?rev=8883&amp;r1=8882&amp;r2=8883&amp;view=diff</A>
==============================================================================
--- trunk/tools/dstat/plugins/dstat_top_cputime_avg.py (original)
+++ trunk/tools/dstat/plugins/dstat_top_cputime_avg.py Mon Jun 14 09:48:36 2010
@@ -1,6 +1,3 @@
-### Dstat most expensive I/O process plugin
-### Displays the name of the most expensive I/O process
-###
 ### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
 
 ### For more information, see:


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007676.html">[svn] r8882 - /trunk/rpms/ffmpeg/ffmpeg.spec
</A></li>
	<LI>Next message: <A HREF="007678.html">[svn] r8884 - in /trunk/tools/unoconv: ChangeLog Makefile TODO docs/headless.txt docs/unoconv.1 tests/Makefile tests/document-example.odt unoconv unoconv.spec
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7677">[ date ]</a>
              <a href="thread.html#7677">[ thread ]</a>
              <a href="subject.html#7677">[ subject ]</a>
              <a href="author.html#7677">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
