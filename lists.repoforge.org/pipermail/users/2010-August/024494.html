<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [suggest] nagios-3.2.1-5.el4.rf.i386.rpm pid path problem
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20nagios-3.2.1-5.el4.rf.i386.rpm%20pid%20path%20problem&In-Reply-To=%3C1283089586.26849.51.camel%40l3f8946.financial.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024487.html">
   <LINK REL="Next"  HREF="027883.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[suggest] nagios-3.2.1-5.el4.rf.i386.rpm pid path problem</H1>
    <B>Christoph Maser</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20nagios-3.2.1-5.el4.rf.i386.rpm%20pid%20path%20problem&In-Reply-To=%3C1283089586.26849.51.camel%40l3f8946.financial.com%3E"
       TITLE="[suggest] nagios-3.2.1-5.el4.rf.i386.rpm pid path problem">cmaser at gmx.de
       </A><BR>
    <I>Sun Aug 29 15:46:26 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="024487.html">[suggest] nagios-3.2.1-5.el4.rf.i386.rpm pid path problem
</A></li>
        <LI>Next message: <A HREF="027883.html">[users] Voicechatter 1.4.2 patches.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24494">[ date ]</a>
              <a href="thread.html#24494">[ thread ]</a>
              <a href="subject.html#24494">[ subject ]</a>
              <a href="author.html#24494">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am Mittwoch, den 18.08.2010, 08:49 +0200 schrieb Christoph Maser: 
&gt;<i> Am Dienstag, den 17.08.2010, 16:14 -0700 schrieb Mark D. Nagel:
</I>&gt;<i> &gt; The path to nagios.pid was changed from /var/run/nagios.pid to
</I>&gt;<i> &gt; /var/nagios/nagios.pid between the 3.2.0 and 3.2.1 RPM release.  This
</I>&gt;<i> &gt; would be fine if the killproc function from /etc/init.d/functions in EL4
</I>&gt;<i> &gt; supported the -p flag as used in the init script, but this is not
</I>&gt;<i> &gt; available in EL4.  Thus, using the init script to restart or stop in EL4
</I>&gt;<i> &gt; is broken, generating all manner of errors due to invalid calls to pidof
</I>&gt;<i> &gt; and such.  Seems like the simplest fix would be to revert to the 3.2.0
</I>&gt;<i> &gt; init script for EL4, which works just fine, or keep the new script but
</I>&gt;<i> &gt; place the pid file back into /var/run for EL4.  The alternative would be
</I>&gt;<i> &gt; to roll your own replacement for killproc that behaves like the EL5
</I>&gt;<i> &gt; killproc.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Regards,
</I>&gt;<i> &gt; Mark
</I>&gt;<i> &gt; 
</I>&gt;<i> 
</I>&gt;<i> Mark
</I>&gt;<i> 
</I>&gt;<i> thank you for reporting. The reason why i switched the pid location is
</I>&gt;<i> that at startup i now use --user in the daemon-function. So now the pid
</I>&gt;<i> file must be in a location where nagios can create it. I did change the
</I>&gt;<i> startup call to use --daemon to make things more robust since there is
</I>&gt;<i> some error in nagios drop-privilege code. 
</I>&gt;<i> I will rethink the whole thing.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> +C
</I>
Hi Mark

I submitted an update dropping the pid-file parameter when calling
killproc. This works correctly on el4 and el5 at least in my tests.

+C


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024487.html">[suggest] nagios-3.2.1-5.el4.rf.i386.rpm pid path problem
</A></li>
	<LI>Next message: <A HREF="027883.html">[users] Voicechatter 1.4.2 patches.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#24494">[ date ]</a>
              <a href="thread.html#24494">[ thread ]</a>
              <a href="subject.html#24494">[ subject ]</a>
              <a href="author.html#24494">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
