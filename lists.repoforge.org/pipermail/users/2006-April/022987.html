<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [suggest] patch for vobcopy
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20patch%20for%20vobcopy&In-Reply-To=%3C20060426144013.19e421d2%40aud.vb.futz.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="024987.html">
   <LINK REL="Next"  HREF="022988.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[suggest] patch for vobcopy</H1>
    <B>Robert Story</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20patch%20for%20vobcopy&In-Reply-To=%3C20060426144013.19e421d2%40aud.vb.futz.org%3E"
       TITLE="[suggest] patch for vobcopy">rstory-l at 2006.revelstone.com
       </A><BR>
    <I>Wed Apr 26 20:40:13 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="024987.html">[users] dvd::rip update
</A></li>
        <LI>Next message: <A HREF="022988.html">[suggest] patch for vobcopy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22987">[ date ]</a>
              <a href="thread.html#22987">[ thread ]</a>
              <a href="subject.html#22987">[ subject ]</a>
              <a href="author.html#22987">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I've had a patch for vobcopy sitting around for a while, and the 1.0 release
motivated me to dig it up and send it in.

I had a problem where I was extracting a dvd to a nfs mount. Apparently the
write/close calls do not return an error if the filesystem fills up.

The patch simply adds a fdatasync() call before closing files. This will give
an error and exit if all the data was not written.

I took the easy route, and only called the sync before the close. Upstream may
want to consider calling it more frequently during the copy loops, or checking
for free space before starting the extraction.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: datasync.pat
Type: application/octet-stream
Size: 1985 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.repoforge.org/pipermail/users/attachments/20060426/f48a07fa/attachment-0004.obj">http://lists.repoforge.org/pipermail/users/attachments/20060426/f48a07fa/attachment-0004.obj</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="024987.html">[users] dvd::rip update
</A></li>
	<LI>Next message: <A HREF="022988.html">[suggest] patch for vobcopy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#22987">[ date ]</a>
              <a href="thread.html#22987">[ thread ]</a>
              <a href="subject.html#22987">[ subject ]</a>
              <a href="author.html#22987">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
