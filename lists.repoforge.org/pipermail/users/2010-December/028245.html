<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [users] Nagios 3.2.3
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Nagios%203.2.3&In-Reply-To=%3C1ACBC8405CD6E64792FC497D33313B0108ECD213%40mse10be2.mse10.exchange.ms%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="028244.html">
   <LINK REL="Next"  HREF="028246.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[users] Nagios 3.2.3</H1>
    <B>Scott Reese</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Nagios%203.2.3&In-Reply-To=%3C1ACBC8405CD6E64792FC497D33313B0108ECD213%40mse10be2.mse10.exchange.ms%3E"
       TITLE="[users] Nagios 3.2.3">sreese at bluelock.com
       </A><BR>
    <I>Tue Dec 21 16:02:46 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="028244.html">[users] anyone know howto solve this ploblem?
</A></li>
        <LI>Next message: <A HREF="028246.html">[users] Nagios 3.2.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28245">[ date ]</a>
              <a href="thread.html#28245">[ thread ]</a>
              <a href="subject.html#28245">[ subject ]</a>
              <a href="author.html#28245">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Greetings:

I am trying to use the latest Nagios 3.2.3 packages on a CentOS 5.5 64-bit virtual machine.  I started with an up to date CentOS 5.5 install, added the rpmforge repo, and then installed the nagios, nagios-plugins, and nagios-plugins-setuid packages.

I am using the default nagios.cfg that came with the package for testing.  My problem is that the nagios service won't start using the normal tools.  When I try start the service using &quot;service nagios start&quot;, I get an error back saying &quot;Configuration validation failed&quot;.

What's unusual about this is that if I validate the configuration by hand &quot;nagios -v /etc/nagios/nagios.cfg&quot;, it returns as valid, with 0 warnings and 0 errors.  I also tried a manual verification as the nagios user &quot;su - nagios; nagios -v /etc/nagios/nagios.cfg&quot;, and that validates correctly as well.  Additionally, if I start the service manually &quot;su - nagios; nagios -d /etc/nagios/nagios.cfg&quot;, nagios starts up and runs properly.  Once I have manually started the service, things like &quot;service nagios status&quot; and &quot;service nagios stop&quot; all work properly, but once the service is stopped, you can't use the service command to start it again.

As part of my troubleshooting, I modified the /etc/init.d/nagios file's check_config() function so that instead of piping the output of the config check to /dev/null, it printed it out on the screen.  When I run the modified service start, it reports that there is an error in the configuration file at line 465, and that the directory is not valid.  Line 465 in the default configuration file is &quot;check_result_path=/var/nagios/spool/checkresults&quot;.  I have verified that the specified directory exists, is owned by nagios:nagios, and has appropriate permissions (755), and that there are no SELinux denies being generated.

It seems that there is something different about the environment that /etc/init.d/nagios runs in than the normal environment.  I don't know enough about the CentOS startup scripts to really go beyond that.

If it's not too much trouble, could someone try installing nagios and see if they get the same behavior with the default config files?  And any pointers as to how the environment that /etc/init.d/nagios gets run in differs from a normal environment would be appreciated.

Thanks for your time.

-Scott
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="http://lists.repoforge.org/pipermail/users/attachments/20101221/e1239a65/attachment-0004.html">http://lists.repoforge.org/pipermail/users/attachments/20101221/e1239a65/attachment-0004.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="028244.html">[users] anyone know howto solve this ploblem?
</A></li>
	<LI>Next message: <A HREF="028246.html">[users] Nagios 3.2.3
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#28245">[ date ]</a>
              <a href="thread.html#28245">[ thread ]</a>
              <a href="subject.html#28245">[ subject ]</a>
              <a href="author.html#28245">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
