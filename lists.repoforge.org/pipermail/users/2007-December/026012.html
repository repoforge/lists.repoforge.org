<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [users] Failing in updating to clamav and clamav-db
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Failing%20in%20updating%20to%20clamav%20and%20clamav-db&In-Reply-To=%3C20071223235216.M43570%40npgx.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026010.html">
   <LINK REL="Next"  HREF="026007.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[users] Failing in updating to clamav and clamav-db</H1>
    <B>Michael Mansour</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Failing%20in%20updating%20to%20clamav%20and%20clamav-db&In-Reply-To=%3C20071223235216.M43570%40npgx.com.au%3E"
       TITLE="[users] Failing in updating to clamav and clamav-db">mic at npgx.com.au
       </A><BR>
    <I>Mon Dec 24 01:02:22 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="026010.html">[users] Failing in updating to clamav and clamav-db
</A></li>
        <LI>Next message: <A HREF="026007.html">[users] Bittorrent 5.2 stable.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26012">[ date ]</a>
              <a href="thread.html#26012">[ thread ]</a>
              <a href="subject.html#26012">[ subject ]</a>
              <a href="author.html#26012">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dag,

&gt;<i> On Sat, 22 Dec 2007, Michael Mansour wrote:
</I>&gt;<i> 
</I>&gt;<i> &gt; &gt; Michael Mansour wrote:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; I'm trying to update to the latest clamav and clamav-db and keep
</I>getting the
&gt;<i> &gt; &gt; &gt; following dependency problem:
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; # yum --enablerepo=dag -y update clamav clamav-db
</I>&gt;<i> &gt; &gt; &gt; Loading &quot;kernel-module&quot; plugin
</I>&gt;<i> &gt; &gt; &gt; Setting up Update Process
</I>&gt;<i> &gt; &gt; &gt; Setting up repositories
</I>&gt;<i> &gt; &gt; &gt; dag                       100% |=========================|  951 B    00:00
</I>&gt;<i> &gt; &gt; &gt; sl-errata                 100% |=========================|  951 B    00:00
</I>&gt;<i> &gt; &gt; &gt; sl-base                   100% |=========================|  951 B    00:00
</I>&gt;<i> &gt; &gt; &gt; Reading repository metadata in from local files
</I>&gt;<i> &gt; &gt; &gt; primary.xml.gz            100% |=========================| 2.7 MB    00:00
</I>&gt;<i> &gt; &gt; &gt; dag       : ################################################## 8097/8097
</I>&gt;<i> &gt; &gt; &gt; Added 8097 new packages, deleted 0 old in 114.50 seconds
</I>&gt;<i> &gt; &gt; &gt; primary.xml.gz            100% |=========================| 227 kB    00:00
</I>&gt;<i> &gt; &gt; &gt; sl-errata : ################################################## 641/641
</I>&gt;<i> &gt; &gt; &gt; Added 641 new packages, deleted 0 old in 9.43 seconds
</I>&gt;<i> &gt; &gt; &gt; primary.xml.gz            100% |=========================| 665 kB    00:00
</I>&gt;<i> &gt; &gt; &gt; sl-base   : ################################################## 1750/1750
</I>&gt;<i> &gt; &gt; &gt; Added 1750 new packages, deleted 0 old in 24.39 seconds
</I>&gt;<i> &gt; &gt; &gt; Resolving Dependencies
</I>&gt;<i> &gt; &gt; &gt; --&gt; Populating transaction set with selected packages. Please wait.
</I>&gt;<i> &gt; &gt; &gt; ---&gt; Downloading header for clamav-db to pack into transaction set.
</I>&gt;<i> &gt; &gt; &gt; clamav-db-0.92-1.el4.rf.i 100% |=========================| 3.3 kB    00:00
</I>&gt;<i> &gt; &gt; &gt; ---&gt; Package clamav-db.i386 0:0.92-1.el4.rf set to be updated
</I>&gt;<i> &gt; &gt; &gt; ---&gt; Downloading header for clamav to pack into transaction set.
</I>&gt;<i> &gt; &gt; &gt; clamav-0.92-1.el4.rf.i386 100% |=========================| 8.0 kB    00:00
</I>&gt;<i> &gt; &gt; &gt; ---&gt; Package clamav.i386 0:0.92-1.el4.rf set to be updated
</I>&gt;<i> &gt; &gt; &gt; --&gt; Running transaction check
</I>&gt;<i> &gt; &gt; &gt; --&gt; Processing Dependency: libclamav.so.2 for package: perl-Mail-ClamAV
</I>&gt;<i> &gt; &gt; &gt; --&gt; Finished Dependency Resolution
</I>&gt;<i> &gt; &gt; &gt; Error: Missing Dependency: libclamav.so.2 is needed by package
</I>&gt;<i> &gt; perl-Mail-ClamAV
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; The libclamav.so.2 is contained in clamav-0.91.2-1.el4.rf, yet it
</I>seems that
&gt;<i> &gt; &gt; &gt; this file isn't in clamav-0.92 ?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; Michael.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; clamav provides libclamav.so.3 now, so I suspect the perl-Mail-
</I>&gt;<i> &gt; &gt; ClamAV needs to be rebuilt?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; You could uninstall that perl module if you don't need it though.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I do need it though, as I use MailScanner with clamavmodule scanning support.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Using clamavmodule with MailScanner means that scanning is faster and much
</I>&gt;<i> &gt; lower memory usage, since clamavmodule can load virus defs once into memory
</I>&gt;<i> &gt; and won't need to reload until virus def updates are made.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Not using clamavmodule means loading virus defs each time clamscan is run and
</I>&gt;<i> &gt; without hundreds of thousands of messages per day, it's just not feasible to
</I>&gt;<i> &gt; do that.
</I>&gt;<i> 
</I>&gt;<i> Even though you are correct to some point, caching will cause the virus
</I>&gt;<i> definitions to be kept in memory an even though clamscan invocations 
</I>&gt;<i> have a little footprint on performance, loading the virus 
</I>&gt;<i> definitions does not have a real impact.
</I>
I think that's &quot;in theory&quot;, in practice using clamscan directly kills the
performance of the machine.

I remember when the 0.9x series of clamav was released (clamav 0.8x didn't
have this problem), hundreds of admins worldwide complained why their mail
servers would bog down to the point of a crawl (you can find many examples of
these issues doing a web search) and I remember I was one of them querying why
this was so, in the MailScanner mailing lists.

It turned out only two options would resolve this, using clamd or
clamavmodule. I chose the latter as it was easier to implement for me.

&gt;<i> (Unless you have a memory-shortage problem, but then one can ask why 
</I>&gt;<i> you would be scanning emails for virusses on this system)
</I>&gt;<i> 
</I>&gt;<i> The obvious solution is using clamd and clamdscan.
</I>
Yes. I'll wait for the patched Mail::ClamAV though as I still prefer this way
than clamd (primarily because I don't like changing production servers with an
&quot;untested in my setup&quot; solution, especially over the Christmas break).

Thanks and Merry Christmas!

Michael.

&gt;<i> -- 
</I>&gt;<i> --   dag wieers,  <A HREF="http://lists.repoforge.org/mailman/listinfo/users">dag at wieers.com</A>,  <A HREF="http://dag.wieers.com/">http://dag.wieers.com/</A>   --
</I>&gt;<i> [Any errors in spelling, tact or fact are transmission errors]
</I>------- End of Original Message -------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026010.html">[users] Failing in updating to clamav and clamav-db
</A></li>
	<LI>Next message: <A HREF="026007.html">[users] Bittorrent 5.2 stable.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26012">[ date ]</a>
              <a href="thread.html#26012">[ thread ]</a>
              <a href="subject.html#26012">[ subject ]</a>
              <a href="author.html#26012">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
