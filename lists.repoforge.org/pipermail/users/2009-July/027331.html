<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [users] Dependency resolution problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dependency%20resolution%20problems&In-Reply-To=%3Calpine.LRH.2.00.0907211240450.30337%40horsea.3ti.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027329.html">
   <LINK REL="Next"  HREF="027234.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[users] Dependency resolution problems</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dependency%20resolution%20problems&In-Reply-To=%3Calpine.LRH.2.00.0907211240450.30337%40horsea.3ti.be%3E"
       TITLE="[users] Dependency resolution problems">dag at wieers.com
       </A><BR>
    <I>Tue Jul 21 12:44:21 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027329.html">[users] Dependency resolution problems
</A></li>
        <LI>Next message: <A HREF="027234.html">[users] Dependency resolution problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27331">[ date ]</a>
              <a href="thread.html#27331">[ thread ]</a>
              <a href="subject.html#27331">[ subject ]</a>
              <a href="author.html#27331">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 21 Jul 2009, Dries Verachtert wrote:

&gt;<i> On Sun, Jul 19, 2009 at 6:14 PM, Dag Wieers&lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/users">dag at wieers.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Thu, 16 Jul 2009, David Steinbrunner wrote:
</I>&gt;&gt;&gt;<i> Christoph Maser wrote:
</I>&gt;&gt;&gt;&gt;<i> Am Dienstag, den 07.07.2009, 18:32 +0200 schrieb Joe Ogulin:
</I>&gt;&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;&gt;<i> Error: Missing Dependency: perl(Normalize::Text::Normalize_Fields) is
</I>&gt;&gt;&gt;&gt;&gt;<i> needed by package
</I>&gt;&gt;&gt;&gt;&gt;<i> perl-MP3-Tag-1.11-1.el5.rf.noarch (rpmforge)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> This one i broken. Seems like a mistake from find-requires skript. Is it
</I>&gt;&gt;&gt;&gt;<i> ok to simply put &quot;Provides: perl(Normalize::Text::Normalize_Fields)&quot; in
</I>&gt;&gt;&gt;&gt;<i> the spec of MP3-Tag? Or is there a way to remove things from requires
</I>&gt;&gt;&gt;&gt;<i> list?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> The attached works for me. &#160;It was generated by cpanspec and I added lines
</I>&gt;&gt;&gt;<i> from the rpmforge spec to handle the man and bin files.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The reason why it works for you with that SPEC file is because the examples
</I>&gt;&gt;<i> are left out of the documentation.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> There is this long-standing bug in RPM that also takes documentation into
</I>&gt;&gt;<i> consideration for the auto-requires and auto-provides. And the perl packages
</I>&gt;&gt;<i> are in fact very vulnerable to this.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The proper fix should go into perl.prov and perl.req and should consist of
</I>&gt;&gt;<i> ignoring documentation files. I don't know if this is already in bugzilla,
</I>&gt;&gt;<i> but if someone wants to do the effort to add it and make sure it gets fixed
</I>&gt;&gt;<i> upstreal, ths fix is quite easy (check if filename starts with
</I>&gt;&gt;<i> /usr/share/doc, and if so continue in the loop).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Since our SPEC files still need to work for RHEL3, RHEL4 and RHEL5. I don't
</I>&gt;&gt;<i> think we can realy on this fix in the foreseeable future though.
</I>&gt;<i>
</I>&gt;<i> The patch in attach (has to be applied to /usr/lib/rpm/perl.req and
</I>&gt;<i> /usr/lib/rpm/perl.prov) ignores any files with a path containing
</I>&gt;<i> /usr/share/doc/. It seems to work ok on perl-MP3-Tag. I've no idea if
</I>&gt;<i> something like this will get accepted in the rpm projects but i'll
</I>&gt;<i> submit it anyway.
</I>
Please do ! :)


&gt;<i> Dag: what do you think of applying this on the buildsystems so the
</I>&gt;<i> rpmforge perl rpms don't have this kind of problems anymore?
</I>
Well, it would mean that what we build from SRPMs is not identical to what 
other people build. So I am against this, even though it would be the most 
practical thing to do.

Shipping our own perl.req and perl.prov with every SPEC file is also not 
really good practice. The only solution I see is our own macros package 
that contains an improved perl.req and perl.prov (or a set of macros to 
filter the output).

-- 
--   dag wieers,  <A HREF="http://lists.repoforge.org/mailman/listinfo/users">dag at wieers.com</A>,  <A HREF="http://dag.wieers.com/">http://dag.wieers.com/</A>   --
[Any errors in spelling, tact or fact are transmission errors]
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027329.html">[users] Dependency resolution problems
</A></li>
	<LI>Next message: <A HREF="027234.html">[users] Dependency resolution problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27331">[ date ]</a>
              <a href="thread.html#27331">[ thread ]</a>
              <a href="subject.html#27331">[ subject ]</a>
              <a href="author.html#27331">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
