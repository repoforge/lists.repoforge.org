<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [users] Dependency resolution problems
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dependency%20resolution%20problems&In-Reply-To=%3Cec87075a0907210300p19ef310ibb040b2223014301%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="027321.html">
   <LINK REL="Next"  HREF="027329.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[users] Dependency resolution problems</H1>
    <B>Dries Verachtert</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dependency%20resolution%20problems&In-Reply-To=%3Cec87075a0907210300p19ef310ibb040b2223014301%40mail.gmail.com%3E"
       TITLE="[users] Dependency resolution problems">dries at ulyssis.org
       </A><BR>
    <I>Tue Jul 21 12:00:30 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="027321.html">[users] Dependency resolution problems
</A></li>
        <LI>Next message: <A HREF="027329.html">[users] Dependency resolution problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27328">[ date ]</a>
              <a href="thread.html#27328">[ thread ]</a>
              <a href="subject.html#27328">[ subject ]</a>
              <a href="author.html#27328">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Jul 19, 2009 at 6:14 PM, Dag Wieers&lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/users">dag at wieers.com</A>&gt; wrote:
&gt;<i> On Thu, 16 Jul 2009, David Steinbrunner wrote:
</I>&gt;<i>
</I>&gt;&gt;<i> Christoph Maser wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Am Dienstag, den 07.07.2009, 18:32 +0200 schrieb Joe Ogulin:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Error: Missing Dependency: perl(Normalize::Text::Normalize_Fields) is
</I>&gt;&gt;&gt;&gt;<i> needed by package
</I>&gt;&gt;&gt;&gt;<i> perl-MP3-Tag-1.11-1.el5.rf.noarch (rpmforge)
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> This one i broken. Seems like a mistake from find-requires skript. Is it
</I>&gt;&gt;&gt;<i> ok to simply put &quot;Provides: perl(Normalize::Text::Normalize_Fields)&quot; in
</I>&gt;&gt;&gt;<i> the spec of MP3-Tag? Or is there a way to remove things from requires
</I>&gt;&gt;&gt;<i> list?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The attached works for me. &#160;It was generated by cpanspec and I added lines
</I>&gt;&gt;<i> from the rpmforge spec to handle the man and bin files.
</I>&gt;<i>
</I>&gt;<i> The reason why it works for you with that SPEC file is because the examples
</I>&gt;<i> are left out of the documentation.
</I>&gt;<i>
</I>&gt;<i> There is this long-standing bug in RPM that also takes documentation into
</I>&gt;<i> consideration for the auto-requires and auto-provides. And the perl packages
</I>&gt;<i> are in fact very vulnerable to this.
</I>&gt;<i>
</I>&gt;<i> The proper fix should go into perl.prov and perl.req and should consist of
</I>&gt;<i> ignoring documentation files. I don't know if this is already in bugzilla,
</I>&gt;<i> but if someone wants to do the effort to add it and make sure it gets fixed
</I>&gt;<i> upstreal, ths fix is quite easy (check if filename starts with
</I>&gt;<i> /usr/share/doc, and if so continue in the loop).
</I>&gt;<i>
</I>&gt;<i> Since our SPEC files still need to work for RHEL3, RHEL4 and RHEL5. I don't
</I>&gt;<i> think we can realy on this fix in the foreseeable future though.
</I>
The patch in attach (has to be applied to /usr/lib/rpm/perl.req and
/usr/lib/rpm/perl.prov) ignores any files with a path containing
/usr/share/doc/. It seems to work ok on perl-MP3-Tag. I've no idea if
something like this will get accepted in the rpm projects but i'll
submit it anyway.
Dag: what do you think of applying this on the buildsystems so the
rpmforge perl rpms don't have this kind of problems anymore?

kind regards,
Dries
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rpm-perl-req-prov-exclude-usr-share-doc.patch
Type: text/x-patch
Size: 817 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.repoforge.org/pipermail/users/attachments/20090721/35f6c77b/attachment-0004.bin">http://lists.repoforge.org/pipermail/users/attachments/20090721/35f6c77b/attachment-0004.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="027321.html">[users] Dependency resolution problems
</A></li>
	<LI>Next message: <A HREF="027329.html">[users] Dependency resolution problems
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#27328">[ date ]</a>
              <a href="thread.html#27328">[ thread ]</a>
              <a href="subject.html#27328">[ subject ]</a>
              <a href="author.html#27328">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
