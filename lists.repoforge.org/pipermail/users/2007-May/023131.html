<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [suggest] perl-Mail-ClamAV RPM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20perl-Mail-ClamAV%20RPM&In-Reply-To=%3C20070502124817.M68332%40npgx.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023130.html">
   <LINK REL="Next"  HREF="025451.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[suggest] perl-Mail-ClamAV RPM</H1>
    <B>Michael Mansour</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20perl-Mail-ClamAV%20RPM&In-Reply-To=%3C20070502124817.M68332%40npgx.com.au%3E"
       TITLE="[suggest] perl-Mail-ClamAV RPM">mic at npgx.com.au
       </A><BR>
    <I>Wed May  2 14:56:39 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023130.html">[suggest] perl-Mail-ClamAV RPM
</A></li>
        <LI>Next message: <A HREF="025451.html">[users] xine-lib-moles still relies on xine-lib 1.1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23131">[ date ]</a>
              <a href="thread.html#23131">[ thread ]</a>
              <a href="subject.html#23131">[ subject ]</a>
              <a href="author.html#23131">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Dag,

&gt;<i> &gt; &gt; On Wed, 2 May 2007, Michael Mansour wrote:
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; I'm after a perl-Mail-ClamAV RPM. Would this be a good addition to
</I>rpmforge?
&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; That's fine. I've been working on a perl SPEC file generator for 
</I>&gt;<i> &gt; &gt; RPMforge and it looks promising. I'll test it out on this one :)
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; Once the generator works reliably, we can start producing more perl 
</I>&gt;<i> &gt; &gt; RPM packages (or at least fill out the missing ones that break 
</I>&gt;<i> &gt; &gt; consistency).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; That's good news.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; So you know the way I did it today (I'd prefer repo's instead of doing this
</I>&gt;<i> &gt; stuff myself, but I needed it as the new clamscan 0.90.2 uses way too much cpu
</I>&gt;<i> &gt; loading the virus def files each time on each file it scans, much better to go
</I>&gt;<i> &gt; with the perl module or clamd which loads the defs once and scans multiple
</I>&gt;<i> &gt; files continuously thereafter).
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; The way I did it is:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 1. from Dag repo installed:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; clamav-devel-0.90.2-1.el4.rf.i386.rpm
</I>&gt;<i> &gt; perl-Inline-0.44-1.el4.rf.noarch.rpm
</I>&gt;<i> &gt; perl-Parse-RecDescent-1.94-1.el4.rf.noarch.rpm
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 2. verified install of bzip2-devel rpm from distribution. Both devel packages
</I>&gt;<i> &gt; are needed otherwise can't compile perl module.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 3. downloaded Mail-ClamAV tarball from <A HREF="http://search.cpan.org/~sabeck/">http://search.cpan.org/~sabeck/</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 4. yum installed cpan2rpm from ATrpms repo.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 5. Created:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; # echo &quot;%_unpackaged_files_terminate_build 0&quot; &gt;&gt; /etc/rpm/macros
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; or the cpan2rpm build will break with unpackaged files error from rpm.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 6. Ran:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; # cpan2rpm Mail-ClamAV-0.20.tar.gz
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; which built RPM's in:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; RPM: /usr/src/redhat/RPMS/noarch/perl-Mail-ClamAV-0.20-1.noarch.rpm
</I>&gt;<i> &gt; SRPM: /usr/src/redhat/SRPMS/perl-Mail-ClamAV-0.20-1.src.rpm
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 7. RPM contains:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ]# rpm -qilp /usr/src/redhat/RPMS/noarch/perl-Mail-ClamAV-0.20-1.noarch.rpm
</I>&gt;<i> &gt; Name        : perl-Mail-ClamAV             Relocations: /usr
</I>&gt;<i> &gt; Version     : 0.20                              Vendor: Scott Beck
</I>&gt;<i> &gt; &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/users">sbeck at gossamer-threads.com</A>&gt;
</I>&gt;<i> &gt; Release     : 1                             Build Date: Wed 02 May 2007
</I>&gt;<i> &gt; 21:55:30 EST
</I>&gt;<i> &gt; Install Date: (not installed)               Build Host: falcon.npgx.com.au
</I>&gt;<i> &gt; Group       : Applications/CPAN             Source RPM:
</I>&gt;<i> &gt; perl-Mail-ClamAV-0.20-1.src.rpm
</I>&gt;<i> &gt; Size        : 78137                            License: Artistic
</I>&gt;<i> &gt; Signature   : (none)
</I>&gt;<i> &gt; Packager    : Arix International &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/users">cpan2rpm at arix.com</A>&gt;
</I>&gt;<i> &gt; URL         : <A HREF="http://www.cpan.org">http://www.cpan.org</A>
</I>&gt;<i> &gt; Summary     : Mail-ClamAV - Perl extension for the clamav virus scanner
</I>&gt;<i> &gt; Description :
</I>&gt;<i> &gt; Clam AntiVirus is an anti-virus toolkit for UNIX
</I>&gt;<i> &gt; L&lt;<A HREF="http://www.clamav.com/">http://www.clamav.com/</A>&gt;.  This module provide a simple interface to
</I>&gt;<i> &gt; its C API.
</I>&gt;<i> &gt; /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/Mail
</I>&gt;<i> &gt; /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/Mail/ClamAV.pm
</I>&gt;<i> &gt; /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/auto/Mail
</I>&gt;<i> &gt; /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV
</I>&gt;<i> &gt;
</I>/usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV/ClamAV.so
&gt;<i> &gt; /usr/share/doc/perl-Mail-ClamAV-0.20
</I>&gt;<i> &gt; /usr/share/doc/perl-Mail-ClamAV-0.20/Changes
</I>&gt;<i> &gt; /usr/share/doc/perl-Mail-ClamAV-0.20/INSTALL
</I>&gt;<i> &gt; /usr/share/doc/perl-Mail-ClamAV-0.20/Inline
</I>&gt;<i> &gt; /usr/share/doc/perl-Mail-ClamAV-0.20/Inline/MakeMaker.pm
</I>&gt;<i> &gt; /usr/share/doc/perl-Mail-ClamAV-0.20/README
</I>&gt;<i> &gt; /usr/share/man/man3/Mail::ClamAV.3pm.gz
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; 8. Installed RPM:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; ]# rpm -Uvh /usr/src/redhat/RPMS/noarch/perl-Mail-ClamAV-0.20-1.noarch.rpm
</I>&gt;<i> &gt; Preparing...                ########################################### [100%]
</I>&gt;<i> &gt;    1:perl-Mail-ClamAV       ########################################### [100%]
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Now using/testing it on one production server.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; If you haven't used cpan2rpm before it's an excellent piece of software.
</I>&gt;<i> 
</I>&gt;<i> The problem with cpan2rpm and cpanflute2 is that they create a SPEC 
</I>&gt;<i> file that may work for on distribution, but not for all 
</I>&gt;<i> distributions we carry.
</I>
Yeah, I understand the dilemma there for you. From my end though, I run one
distribution, Scientific Linux 4.4 throughout the whole environment, so
keeping things uniform, updated and on the same revision makes life a whole
lot easier. That's why I don't envy your workload and responsibility :) yet at
the same time appreciate it.

&gt;<i> Also in this case, it is a binary RPM, not a noarch RPM. I have seen 
</I>&gt;<i> the same mistake being made by cpanflute. One of the remaining 
</I>&gt;<i> problems I have is to detect in advance whether it is a noarch build 
</I>&gt;<i> or an arch build.
</I>
Hmm.. my guess is that the developer of cpam2rpm didn't worry about detecting
that. For the moment I haven't applied the method above to anything other than
32bit servers, but I have some 64bit servers I'll need to do this on but for
now will just wait till you make it available.

The worst hit mail servers are now running the above, they were being killed
since I applied the latest clamav release, so it was urgent for me to fix it
today. For the 64bit servers they're not as bad and can wait till more
resilient releases are made through the forge.

&gt;<i> &gt; I'd prefer of course if a repo would carry this release, as it saves time and
</I>&gt;<i> &gt; much more widely used and tested by others instead of building things myself.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Please do announce it here when you do have it in the forge.
</I>&gt;<i> 
</I>&gt;<i> The next update. I have them on my build system, but I do not push 
</I>&gt;<i> for a single package, too much overhead :(
</I>
Understood :) 

Michael.

&gt;<i> Kind regards,
</I>&gt;<i> --   dag wieers,  <A HREF="http://lists.repoforge.org/mailman/listinfo/users">dag at wieers.com</A>,  <A HREF="http://dag.wieers.com/">http://dag.wieers.com/</A>   --
</I>&gt;<i> [all I want is a warm bed and a kind word and unlimited power]
</I>------- End of Original Message -------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023130.html">[suggest] perl-Mail-ClamAV RPM
</A></li>
	<LI>Next message: <A HREF="025451.html">[users] xine-lib-moles still relies on xine-lib 1.1.4
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23131">[ date ]</a>
              <a href="thread.html#23131">[ thread ]</a>
              <a href="subject.html#23131">[ subject ]</a>
              <a href="author.html#23131">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
