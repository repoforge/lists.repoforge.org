<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [suggest] perl-Mail-ClamAV RPM
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20perl-Mail-ClamAV%20RPM&In-Reply-To=%3CPine.LNX.4.64.0705021418050.29817%40horsea.3ti.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023129.html">
   <LINK REL="Next"  HREF="023131.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[suggest] perl-Mail-ClamAV RPM</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20perl-Mail-ClamAV%20RPM&In-Reply-To=%3CPine.LNX.4.64.0705021418050.29817%40horsea.3ti.be%3E"
       TITLE="[suggest] perl-Mail-ClamAV RPM">dag at wieers.com
       </A><BR>
    <I>Wed May  2 14:20:44 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="023129.html">[suggest] perl-Mail-ClamAV RPM
</A></li>
        <LI>Next message: <A HREF="023131.html">[suggest] perl-Mail-ClamAV RPM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23130">[ date ]</a>
              <a href="thread.html#23130">[ thread ]</a>
              <a href="subject.html#23130">[ subject ]</a>
              <a href="author.html#23130">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wed, 2 May 2007, Michael Mansour wrote:

&gt;<i> Hi Dag,
</I>&gt;<i> 
</I>&gt;<i> &gt; On Wed, 2 May 2007, Michael Mansour wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; &gt; I'm after a perl-Mail-ClamAV RPM. Would this be a good addition to rpmforge?
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; That's fine. I've been working on a perl SPEC file generator for 
</I>&gt;<i> &gt; RPMforge and it looks promising. I'll test it out on this one :)
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Once the generator works reliably, we can start producing more perl 
</I>&gt;<i> &gt; RPM packages (or at least fill out the missing ones that break 
</I>&gt;<i> &gt; consistency).
</I>&gt;<i> 
</I>&gt;<i> That's good news.
</I>&gt;<i> 
</I>&gt;<i> So you know the way I did it today (I'd prefer repo's instead of doing this
</I>&gt;<i> stuff myself, but I needed it as the new clamscan 0.90.2 uses way too much cpu
</I>&gt;<i> loading the virus def files each time on each file it scans, much better to go
</I>&gt;<i> with the perl module or clamd which loads the defs once and scans multiple
</I>&gt;<i> files continuously thereafter).
</I>&gt;<i> 
</I>&gt;<i> The way I did it is:
</I>&gt;<i> 
</I>&gt;<i> 1. from Dag repo installed:
</I>&gt;<i> 
</I>&gt;<i> clamav-devel-0.90.2-1.el4.rf.i386.rpm
</I>&gt;<i> perl-Inline-0.44-1.el4.rf.noarch.rpm
</I>&gt;<i> perl-Parse-RecDescent-1.94-1.el4.rf.noarch.rpm
</I>&gt;<i> 
</I>&gt;<i> 2. verified install of bzip2-devel rpm from distribution. Both devel packages
</I>&gt;<i> are needed otherwise can't compile perl module.
</I>&gt;<i> 
</I>&gt;<i> 3. downloaded Mail-ClamAV tarball from <A HREF="http://search.cpan.org/~sabeck/">http://search.cpan.org/~sabeck/</A>
</I>&gt;<i> 
</I>&gt;<i> 4. yum installed cpan2rpm from ATrpms repo.
</I>&gt;<i> 
</I>&gt;<i> 5. Created:
</I>&gt;<i> 
</I>&gt;<i> # echo &quot;%_unpackaged_files_terminate_build 0&quot; &gt;&gt; /etc/rpm/macros
</I>&gt;<i> 
</I>&gt;<i> or the cpan2rpm build will break with unpackaged files error from rpm.
</I>&gt;<i> 
</I>&gt;<i> 6. Ran:
</I>&gt;<i> 
</I>&gt;<i> # cpan2rpm Mail-ClamAV-0.20.tar.gz
</I>&gt;<i> 
</I>&gt;<i> which built RPM's in:
</I>&gt;<i> 
</I>&gt;<i> RPM: /usr/src/redhat/RPMS/noarch/perl-Mail-ClamAV-0.20-1.noarch.rpm
</I>&gt;<i> SRPM: /usr/src/redhat/SRPMS/perl-Mail-ClamAV-0.20-1.src.rpm
</I>&gt;<i> 
</I>&gt;<i> 7. RPM contains:
</I>&gt;<i> 
</I>&gt;<i> ]# rpm -qilp /usr/src/redhat/RPMS/noarch/perl-Mail-ClamAV-0.20-1.noarch.rpm
</I>&gt;<i> Name        : perl-Mail-ClamAV             Relocations: /usr
</I>&gt;<i> Version     : 0.20                              Vendor: Scott Beck
</I>&gt;<i> &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/users">sbeck at gossamer-threads.com</A>&gt;
</I>&gt;<i> Release     : 1                             Build Date: Wed 02 May 2007
</I>&gt;<i> 21:55:30 EST
</I>&gt;<i> Install Date: (not installed)               Build Host: falcon.npgx.com.au
</I>&gt;<i> Group       : Applications/CPAN             Source RPM:
</I>&gt;<i> perl-Mail-ClamAV-0.20-1.src.rpm
</I>&gt;<i> Size        : 78137                            License: Artistic
</I>&gt;<i> Signature   : (none)
</I>&gt;<i> Packager    : Arix International &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/users">cpan2rpm at arix.com</A>&gt;
</I>&gt;<i> URL         : <A HREF="http://www.cpan.org">http://www.cpan.org</A>
</I>&gt;<i> Summary     : Mail-ClamAV - Perl extension for the clamav virus scanner
</I>&gt;<i> Description :
</I>&gt;<i> Clam AntiVirus is an anti-virus toolkit for UNIX
</I>&gt;<i> L&lt;<A HREF="http://www.clamav.com/">http://www.clamav.com/</A>&gt;.  This module provide a simple interface to
</I>&gt;<i> its C API.
</I>&gt;<i> /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/Mail
</I>&gt;<i> /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/Mail/ClamAV.pm
</I>&gt;<i> /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/auto/Mail
</I>&gt;<i> /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV
</I>&gt;<i> /usr/lib/perl5/site_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV/ClamAV.so
</I>&gt;<i> /usr/share/doc/perl-Mail-ClamAV-0.20
</I>&gt;<i> /usr/share/doc/perl-Mail-ClamAV-0.20/Changes
</I>&gt;<i> /usr/share/doc/perl-Mail-ClamAV-0.20/INSTALL
</I>&gt;<i> /usr/share/doc/perl-Mail-ClamAV-0.20/Inline
</I>&gt;<i> /usr/share/doc/perl-Mail-ClamAV-0.20/Inline/MakeMaker.pm
</I>&gt;<i> /usr/share/doc/perl-Mail-ClamAV-0.20/README
</I>&gt;<i> /usr/share/man/man3/Mail::ClamAV.3pm.gz
</I>&gt;<i> 
</I>&gt;<i> 8. Installed RPM:
</I>&gt;<i> 
</I>&gt;<i> ]# rpm -Uvh /usr/src/redhat/RPMS/noarch/perl-Mail-ClamAV-0.20-1.noarch.rpm
</I>&gt;<i> Preparing...                ########################################### [100%]
</I>&gt;<i>    1:perl-Mail-ClamAV       ########################################### [100%]
</I>&gt;<i> 
</I>&gt;<i> Now using/testing it on one production server.
</I>&gt;<i> 
</I>&gt;<i> If you haven't used cpan2rpm before it's an excellent piece of software.
</I>
The problem with cpan2rpm and cpanflute2 is that they create a SPEC file 
that may work for on distribution, but not for all distributions we carry.

Also in this case, it is a binary RPM, not a noarch RPM. I have seen the 
same mistake being made by cpanflute. One of the remaining problems I 
have is to detect in advance whether it is a noarch build or an arch 
build.


&gt;<i> I'd prefer of course if a repo would carry this release, as it saves time and
</I>&gt;<i> much more widely used and tested by others instead of building things myself.
</I>&gt;<i> 
</I>&gt;<i> Please do announce it here when you do have it in the forge.
</I>
The next update. I have them on my build system, but I do not push for a 
single package, too much overhead :(

Kind regards,
--   dag wieers,  <A HREF="http://lists.repoforge.org/mailman/listinfo/users">dag at wieers.com</A>,  <A HREF="http://dag.wieers.com/">http://dag.wieers.com/</A>   --
[all I want is a warm bed and a kind word and unlimited power]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023129.html">[suggest] perl-Mail-ClamAV RPM
</A></li>
	<LI>Next message: <A HREF="023131.html">[suggest] perl-Mail-ClamAV RPM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23130">[ date ]</a>
              <a href="thread.html#23130">[ thread ]</a>
              <a href="subject.html#23130">[ subject ]</a>
              <a href="author.html#23130">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
