<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [users] Dropping the repotag
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dropping%20the%20repotag&In-Reply-To=%3C1174238198.4700.126.camel%40cyric.rogge.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025364.html">
   <LINK REL="Next"  HREF="025367.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[users] Dropping the repotag</H1>
    <B>Andreas Rogge</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dropping%20the%20repotag&In-Reply-To=%3C1174238198.4700.126.camel%40cyric.rogge.de%3E"
       TITLE="[users] Dropping the repotag">a.rogge at solvention.de
       </A><BR>
    <I>Sun Mar 18 18:16:37 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025364.html">[users] Dropping the repotag
</A></li>
        <LI>Next message: <A HREF="025367.html">[users] Dropping the repotag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25366">[ date ]</a>
              <a href="thread.html#25366">[ thread ]</a>
              <a href="subject.html#25366">[ subject ]</a>
              <a href="author.html#25366">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Am Sonntag, den 18.03.2007, 14:37 +0100 schrieb Dag Wieers:
&gt;<i> On Sun, 18 Mar 2007, Andreas Rogge wrote:
</I>&gt;<i> &gt; On Sat, 17 Mar 2007, Dag Wieers wrote:
</I>&gt;<i> &gt; &gt; On Sat, 17 Mar 2007, Andreas Rogge wrote:
</I>&gt;<i> &gt; &gt; [...]
</I>&gt;<i> &gt; &gt; &gt; What if you could use for example &quot;listrpms --vendor RPMForge&quot; 
</I>&gt;<i> &gt; &gt; &gt; instead of &quot;rpm -qa | grep rf&quot; and get a 100% result without 
</I>&gt;<i> &gt; &gt; &gt; false-positives?
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; It will not tell you which nagios-2.8-4.el5 breaks a dependency chain. 
</I>&gt;<i> &gt; &gt; Was it the one from EPEL or the one from RPMforge ? Both have the 
</I>&gt;<i> &gt; &gt; exact same release.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; yum doesn't say, you cannot query it because it is not installed. 
</I>&gt;<i> &gt; &gt; Hell, since both have the same filename you won't even know by querying the 
</I>&gt;<i> &gt; &gt; repositories.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; This is not solvable unless you either improve yum to report all other 
</I>&gt;<i> &gt; &gt; information (including keys and/or other tags), which still doesn't 
</I>&gt;<i> &gt; &gt; fix all the other tools and is plain confusing. Or if you make the 
</I>&gt;<i> &gt; &gt; filename more unique, which is what the repotag does.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; BTW rpm -qa | grep '\.rf$' is pretty conclusive _if_ everybody follows 
</I>&gt;<i> &gt; &gt; the same standard and you require packages to be signed.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; BTW2 Dissing the repotag usefulness is like dissing the disttag 
</I>&gt;<i> &gt; &gt; usefulness. It is as arbitrary, makes the release longer and is in 
</I>&gt;<i> &gt; &gt; essence not required. Still it has its use.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; First of all: yes, you're right.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; But we will face this issue with EPEL. A repotag will not help to blame
</I>&gt;<i> &gt; EPEL when something breaks (they don't have one). It will only help to
</I>&gt;<i> &gt; blame RPMForge (as RPMforge has one). 
</I>&gt;<i> 
</I>&gt;<i> That's why EPEL should have one. At least until something better comes 
</I>&gt;<i> around (if there ever will).
</I>Yes, but you cannot force epel to add one. So we have to find our way
around this.
&gt;<i> 
</I>&gt;<i> People say a repotag should not be in the filename. But a filename is 
</I>&gt;<i> there to identify what it is. The version is there to identify what it is, 
</I>&gt;<i> just like the name and the arch. All of these are not required in the 
</I>&gt;<i> package name. In fact, rename whatever package you have to &quot;this_package&quot;
</I>&gt;<i> (without the arch, without the extension) and rpm handles that fine, 
</I>&gt;<i> because it doesn't use the information in the filename, it uses the 
</I>&gt;<i> header. So the filename is there for the user to identify what is is.
</I>&gt;<i> 
</I>Yep. In fact it would be best to *always* have a dist and a repo tag (or
disto and vendor tag, call them what you want). I don't even argue that
it must be removed from the filename - I just don't need it myself and
it is not required for proper operation.
What I actually argue is that using the revision tag for it sucks. You
can write arbitrary strings into the revision and these repotags are not
required and they are only line noise to the package manager (same for
disttags).

&gt;<i> So what's wrong with having the repotag, like the disttag and like the 
</I>&gt;<i> version and name in the filename ? It helps (at least) some people as much 
</I>&gt;<i> as all that other information and it solves a practical problem with 
</I>&gt;<i> yum/rpm and other tools that cannot give all that other information right 
</I>&gt;<i> there when we need it. (and if they would, most people wouldn't understand 
</I>&gt;<i> why the signature or an arbitrary string is there the moment you have a 
</I>&gt;<i> dependency problem).
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; I don't think repotags should be dropped because they suck. I just think
</I>&gt;<i> &gt; that they're a workaround for broken/incomplete tools and have been in
</I>&gt;<i> &gt; place for too long. Hell, neither rpm nor yum nor anything else actually
</I>&gt;<i> &gt; knows there is something like a repotag. They just display it because we
</I>&gt;<i> &gt; hijack the package signature.
</I>&gt;<i> 
</I>&gt;<i> It is a work around. Why else the disttag ? The repotag is arguably as 
</I>&gt;<i> useful as the disttag in the filename. Would you argue against the disttag 
</I>&gt;<i> in the same way ? In fact why have the release there at all. And the 
</I>&gt;<i> architecture ? Most people don't know what that means anyway.
</I>Yes, I would argue against the disttag with exactly the same arguments.
It would all be fine if these &quot;tags&quot; were actually a real information
that's known to the underlying tools. This would also force people to
fill this information (and we wouldn't argue here, because EPEL packages
would contain these tags).
For architecture all is well. It *is* a structured field from inside the
package that rpm actually uses and putting it into the filename is
required for normal operation (kernel-packags for i586 and i686 have to
live in the same directory). And *every* package has an architecture
set. Even &quot;noarch&quot; is a worthy information.

&gt;<i> 
</I>&gt;<i> &gt; People will need better tools anyway, because nobody will be able to
</I>&gt;<i> &gt; tell the difference between an EPEL and a base distro package. I think
</I>&gt;<i> &gt; yum should actually tell you vendor and distro on all packages.
</I>&gt;<i> 
</I>&gt;<i> The problem is, even when you have 'better' tools, how would they present 
</I>&gt;<i> that information without filling the screen and actually helping to 
</I>&gt;<i> understand the information. The repotag is short and doesn't add as much 
</I>&gt;<i> noise as a signature or an arbitrary string would cause.
</I>Point taken.
&gt;<i> 
</I>&gt;<i> I don't think it is practically fixable (if anybody would ever care to fix 
</I>&gt;<i> RPM and backport it to EL2.1, EL3, EL4 and now EL5 -&gt; NEVER). So whatever 
</I>&gt;<i> 'better' technical solution you propose, it wouldn't be useful until EL5 
</I>&gt;<i> is out of support.
</I>But unless we start to move something now, we will never have a useful
solution, not even after EL10 is out of support.
&gt;<i> 
</I>&gt;<i> And not to be kidding, we had this discussion when EL3 was released and 
</I>&gt;<i> you know what: people also said it was not the correct solution. Do we 
</I>&gt;<i> have a correct solution today ? No. Will we have one tomorrow ? No.
</I>And I *hope* that EPEL will arise enough issues so that they're either
fix the tools and provide a working solution or they add repotags to
their packages.
&gt;<i> 
</I>&gt;<i> So why postpone a solution until we have a better one ? Especially when we 
</I>&gt;<i> cannot define what a better solution would look like and we cannot fix the 
</I>&gt;<i> tools.
</I>Why stick to a solution if we could develop a better one?
I fact I'm not trying to make you remove the repotags. But if you do (no
matter what your reasons are) we have to discuss what we will do once
they are gone.
In fact I never liked repotags neither did I like disttags. Even if they
are a good workaround, they should have been replaced for years.
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> &gt; We already had similar issues on x86_64 where you couldn't tell the
</I>&gt;<i> &gt; difference between i386 and x86_64 packages. Today yum reports every
</I>&gt;<i> &gt; package with its arch.
</I>&gt;<i> 
</I>&gt;<i> Right. So more information is better. How would you ideally present the 
</I>&gt;<i> repository info in the output when there's a problem. The repotag is the 
</I>&gt;<i> most preferred (read: shortest) way IMNSHO.
</I>Point taken. This is an issue because the vendor and dist tags contain
too much text. I just proposed them because I hate redundant data.

kind regards,
Andreas Rogge

-- 
Solvention systems management
Egermannstr. 6-8
53359 Rheinbach

Tel: +49 2226 158179-0
Fax: +49 2226 158179-9

<A HREF="http://www.solvention.de">http://www.solvention.de</A>
mailto:<A HREF="http://lists.repoforge.org/mailman/listinfo/users">info at solvention.de</A>
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3219 bytes
Desc: not available
URL: &lt;<A HREF="http://lists.repoforge.org/pipermail/users/attachments/20070318/655c96f7/attachment-0004.bin">http://lists.repoforge.org/pipermail/users/attachments/20070318/655c96f7/attachment-0004.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025364.html">[users] Dropping the repotag
</A></li>
	<LI>Next message: <A HREF="025367.html">[users] Dropping the repotag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25366">[ date ]</a>
              <a href="thread.html#25366">[ thread ]</a>
              <a href="subject.html#25366">[ subject ]</a>
              <a href="author.html#25366">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
