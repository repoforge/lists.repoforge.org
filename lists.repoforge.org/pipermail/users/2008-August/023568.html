<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [suggest] Problems with spamassassin 3.2.5-1.el5.rf
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20Problems%20with%20spamassassin%203.2.5-1.el5.rf&In-Reply-To=%3C16428.192.168.1.2.1219396545.squirrel%40www.123plaza.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023567.html">
   <LINK REL="Next"  HREF="023545.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[suggest] Problems with spamassassin 3.2.5-1.el5.rf</H1>
    <B>Ignacio Bustamante</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20Problems%20with%20spamassassin%203.2.5-1.el5.rf&In-Reply-To=%3C16428.192.168.1.2.1219396545.squirrel%40www.123plaza.com%3E"
       TITLE="[suggest] Problems with spamassassin 3.2.5-1.el5.rf">ignaciob at 123plaza.com
       </A><BR>
    <I>Fri Aug 22 11:15:45 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="023567.html">[suggest] Problems with spamassassin 3.2.5-1.el5.rf
</A></li>
        <LI>Next message: <A HREF="023545.html">[suggest] Re: Request for perl module updates and an add
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23568">[ date ]</a>
              <a href="thread.html#23568">[ thread ]</a>
              <a href="subject.html#23568">[ subject ]</a>
              <a href="author.html#23568">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

I owe the packagers an apology of wrongly assuming this might have been a
problem caused by them.

After inspecting spamassassin's source files directly downloaded from
their main site, it became evident that this is a problem introduced in
their latest version, as it can be seen in the configuration parameters in
the Makfile used for compilation.

Later visiting their bug lists, it shows many people complaining about
problems related to sa-update and the new (forced-upon) sets of rules.

Regards,

Ignacio

&gt;<i> Hi Michael,
</I>&gt;<i>
</I>&gt;&gt;<i> Hi Ignacio,
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Hi Michael,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt; Yes that's dangerous. I would personally run the sa-update and if
</I>&gt;&gt;&gt;<i> there
</I>&gt;&gt;&gt;<i> &gt; are &gt; updates, get the cron to send me an email so I could manually
</I>&gt;&gt;&gt;<i> &gt; copy the files from /var/lib/spamassassin to /usr/share/spamassassin.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> I tried that, but the problem is that spamassassin will look into all
</I>&gt;&gt;&gt;<i> three directories for rule files (/etc/mail/spamassassin,
</I>&gt;&gt;&gt;<i> /var/lib/spamassassin/&lt;version&gt; and  /usr/share/spamassassin), so in
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Are you sure about this? when running the -D --lint on SA do you see it
</I>&gt;&gt;<i> load
</I>&gt;&gt;<i> the rules from:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> /usr/share/spamassassin and then
</I>&gt;&gt;<i> /var/lib/spamassassin
</I>&gt;&gt;<i>
</I>&gt;<i> Yep,
</I>&gt;<i>
</I>&gt;<i> If you would care to leave the copy of rules generated by sa-update with
</I>&gt;<i> no potions in &quot;/var/lib/spamassassin/&lt;version&gt;&quot;, as well as the copy
</I>&gt;<i> installed in /usr/share/spamassassin, then when you run &quot;spamassassin -D
</I>&gt;<i> --lint&quot; the output will show many lines similar to the following:
</I>&gt;<i>
</I>&gt;<i> ...
</I>&gt;<i> [30825] dbg: rules: __MO_OL_015D5 merged duplicates: __MO_OL_6554A
</I>&gt;<i> [30825] dbg: rules: __MO_OL_22B61 merged duplicates: __MO_OL_4F240
</I>&gt;<i> __MO_OL_ADFF7
</I>&gt;<i> [30825] dbg: rules: __MO_OL_812FF merged duplicates: __MO_OL_BC7E6
</I>&gt;<i> [30825] dbg: rules: __MO_OL_25340 merged duplicates: __MO_OL_4EEDB
</I>&gt;<i> __MO_OL_7533E
</I>&gt;<i> [30825] dbg: rules: __MO_OL_58CB5 merged duplicates: __MO_OL_B4B40
</I>&gt;<i> [30825] dbg: rules: __DOS_HAS_ANY_URI merged duplicates: __HAS_ANY_URI
</I>&gt;<i> [30825] dbg: rules: __XM_OL_C9068 merged duplicates: __XM_OL_EF20B
</I>&gt;<i> ...
</I>&gt;<i>
</I>&gt;<i> Which means that spamassassin is merging/resolving conflicts with
</I>&gt;<i> duplicate rules found. This in itself is not a big problem, but when you
</I>&gt;<i> have rules in a directory that have been updated, and not updated in
</I>&gt;<i> others, then with time you will experience a progressive slowdown in
</I>&gt;<i> performance by spamassassin.
</I>&gt;<i>
</I>&gt;<i> Regards,
</I>&gt;<i>
</I>&gt;<i> Ignacio
</I>&gt;<i>
</I>&gt;&gt;<i> ?
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> reality you have to move, not copy the files to
</I>&gt;&gt;&gt;<i> /usr/share/spamassassin.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> In my case this aggravated by the fact that I had initially installed
</I>&gt;&gt;&gt;<i> spamassassin from centos base repo, added a bunch of rules from SARE
</I>&gt;&gt;&gt;<i> to /etc/mail/spamassassin along with rules dujour, and later
</I>&gt;&gt;&gt;<i> upgraded to spamassassin from rpmforge, only to end up with
</I>&gt;&gt;&gt;<i> &quot;triplicate&quot; set of rules :). To make the story short, spamassassin
</I>&gt;&gt;&gt;<i> was taking 20-30 seconds to scan each email message.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The right way to do this is to create a channels file for sare rules in
</I>&gt;&gt;<i> /etc/mail/spamassassin, then reference that file from the sa-update
</I>&gt;&gt;<i> cron.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> If you don't know what I mean here let me know and I'll explain further.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Michael.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Regards,
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Ignacio
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> &gt; Hi Ignacio,
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Michael,
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; On my system when I run &quot;spamassassin -D --lint&quot;, it shows that the
</I>&gt;&gt;&gt;<i> &gt;&gt; rules
</I>&gt;&gt;&gt;<i> &gt;&gt; directory is set to &quot;/usr/share/spamassassin&quot;, and suspect that in
</I>&gt;&gt;&gt;<i> your
</I>&gt;&gt;&gt;<i> &gt;&gt; system will show this result too, so in fact you might have now an
</I>&gt;&gt;&gt;<i> newly
</I>&gt;&gt;&gt;<i> &gt;&gt; installed  duplicate set of rules :).
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Hmm... I just checked my lint on el4, it has /var/lib/spamassassin,
</I>&gt;&gt;&gt;<i> on
</I>&gt;&gt;&gt;<i> el5
</I>&gt;&gt;&gt;<i> &gt; it
</I>&gt;&gt;&gt;<i> &gt; has /usr/share/spamassassin.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; I just started up a clean el5 VM and tested this with a clean install
</I>&gt;&gt;&gt;<i> of
</I>&gt;&gt;&gt;<i> &gt; SA
</I>&gt;&gt;&gt;<i> &gt; 3.2.5 from rpmforge. I ran an sa-update (without any parameters) and
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &gt; updates went into /var/lib/spamassassin.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; So it seems on el4 the rpm is fine, on el5 it isn't.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; I haven't looked into this in detail, but suspect this means that
</I>&gt;&gt;&gt;<i> &gt;&gt; spamassassin rules directory was compiled with
</I>&gt;&gt;&gt;<i> &gt;&gt; &quot;/usr/share/spamassassin&quot;, but sa-update was compiled with
</I>&gt;&gt;&gt;<i> &gt;&gt; &quot;/var/lib/spamassassin&quot; therefore the problem.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Yes that seems to be the case. Checking the (latest) spec there's
</I>&gt;&gt;&gt;<i> this
</I>&gt;&gt;&gt;<i> &gt; bit:
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; %build
</I>&gt;&gt;&gt;<i> &gt; export CFLAGS=&quot;%{optflags} -I/usr/kerberos/include&quot;
</I>&gt;&gt;&gt;<i> &gt; %{__perl} Makefile.PL \
</I>&gt;&gt;&gt;<i> &gt; %{!?_with_perl_5_6:DESTDIR=&quot;%{buildroot}&quot;} \
</I>&gt;&gt;&gt;<i> &gt; 		SYSCONFDIR=&quot;%{_sysconfdir}&quot; \
</I>&gt;&gt;&gt;<i> &gt; 		INSTALLDIRS=&quot;vendor&quot; \
</I>&gt;&gt;&gt;<i> &gt; 		ENABLE_SSL=&quot;yes&quot; &lt;/dev/null
</I>&gt;&gt;&gt;<i> &gt; %{__make} %{?_smp_mflags} OPTIMIZE=&quot;%{optflags}&quot;
</I>&gt;&gt;&gt;<i> &gt; %{__make} %{?_smp_mflags} spamc/libspamc.so LIBS=&quot;-ldl %{optflags}
</I>&gt;&gt;&gt;<i> -fPIC&quot;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; ie. from what I can see without specifically defining the
</I>&gt;&gt;&gt;<i> &gt; /var/lib/spamassassin directory the build on Makefile.PL will use the
</I>&gt;&gt;&gt;<i> &gt; default
</I>&gt;&gt;&gt;<i> &gt; /usr/share/spamassassin directory.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; From the SA doc this is what it says about this:
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; *******
</I>&gt;&gt;&gt;<i> &gt; SpamAssassin will look in a number of areas to find the default
</I>&gt;&gt;&gt;<i> &gt; configuration files that are used.  The &quot;__*__&quot; text are variables
</I>&gt;&gt;&gt;<i> &gt; whose value you can see by looking at the first several lines of the
</I>&gt;&gt;&gt;<i> &gt; &quot;spamassassin&quot; or &quot;spamd&quot; scripts.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; They are set on install time and can be overridden with the
</I>&gt;&gt;&gt;<i> Makefile.PL
</I>&gt;&gt;&gt;<i> &gt; command line options DATADIR (for __def_rules_dir__) and CONFDIR (for
</I>&gt;&gt;&gt;<i> &gt; __local_rules_dir__).  If none of these options were given,
</I>&gt;&gt;&gt;<i> FHS-compliant
</I>&gt;&gt;&gt;<i> &gt; locations based on the PREFIX (which becomes __prefix__) are chosen.
</I>&gt;&gt;&gt;<i> &gt; *******
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; So without those Makefile.PL overrides...
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; I think at this point Dag will need to comment as it's his spec :)
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Here is the pertaining output from my system:
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; ...
</I>&gt;&gt;&gt;<i> &gt;&gt; [7037] dbg: config: using &quot;/usr/share/spamassassin&quot; for sys rules
</I>&gt;&gt;&gt;<i> &gt;&gt; pre files [7037] dbg: config: using &quot;/usr/share/spamassassin&quot; for
</I>&gt;&gt;&gt;<i> &gt;&gt; default rules dir [7037] dbg: config: read file
</I>&gt;&gt;&gt;<i> &gt; /usr/share/spamassassin/10_default_prefs.cf
</I>&gt;&gt;&gt;<i> &gt;&gt; [7037] dbg: config: read file
</I>&gt;&gt;&gt;<i> /usr/share/spamassassin/20_advance_fee.cf
</I>&gt;&gt;&gt;<i> &gt;&gt; [7037] dbg: config: read file
</I>&gt;&gt;&gt;<i> &gt;&gt; /usr/share/spamassassin/20_body_tests.cf [7037] dbg: config: read
</I>&gt;&gt;&gt;<i> &gt;&gt; file /usr/share/spamassassin/20_compensate.cf [7037] dbg: config:
</I>&gt;&gt;&gt;<i> &gt;&gt; read file /usr/share/spamassassin/20_dnsbl_tests.cf [7037] dbg:
</I>&gt;&gt;&gt;<i> &gt;&gt; config: read file /usr/share/spamassassin/20_drugs.cf [7037] dbg:
</I>&gt;&gt;&gt;<i> &gt;&gt; config: read file /usr/share/spamassassin/20_dynrdns.cf [7037] dbg:
</I>&gt;&gt;&gt;<i> &gt;&gt; config: read file /usr/share/spamassassin/20_fake_helo_tests.cf
</I>&gt;&gt;&gt;<i> &gt;&gt; [7037] dbg: config: read file
</I>&gt;&gt;&gt;<i> &gt;&gt; /usr/share/spamassassin/20_head_tests.cf [7037] dbg: config: read
</I>&gt;&gt;&gt;<i> &gt;&gt; file /usr/share/spamassassin/20_html_tests.cf [7037] dbg: config:
</I>&gt;&gt;&gt;<i> &gt;&gt; read file /usr/share/spamassassin/20_imageinfo.cf ...
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Please note that I am temporarily using sa-update with option
</I>&gt;&gt;&gt;<i> &gt;&gt; &quot;--updatedir
</I>&gt;&gt;&gt;<i> &gt;&gt; /usr/share/spamassassin&quot; to compensate for this problem, which by
</I>&gt;&gt;&gt;<i> &gt;&gt; the way it's not recommended according to
</I>&gt;&gt;&gt;<i> &gt; <A HREF="http://wiki.apache.org/spamassassin/RuleUpdates">http://wiki.apache.org/spamassassin/RuleUpdates</A>
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Yes that's dangerous. I would personally run the sa-update and if
</I>&gt;&gt;&gt;<i> there
</I>&gt;&gt;&gt;<i> &gt; are
</I>&gt;&gt;&gt;<i> &gt; updates, get the cron to send me an email so I could manually copy
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &gt; files
</I>&gt;&gt;&gt;<i> &gt; from /var/lib/spamassassin to /usr/share/spamassassin.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Of course the right way to fix it would seem to be to change the spec
</I>&gt;&gt;&gt;<i> file
</I>&gt;&gt;&gt;<i> &gt; so
</I>&gt;&gt;&gt;<i> &gt; it compiles with the /var/lib/spamassassin directory structure for
</I>&gt;&gt;&gt;<i> el5.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Regards,
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt; Michael.
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Regards,
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; Ignacio
</I>&gt;&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Hi Ignacio,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; Hi Michael,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; I stand by what I said, if you do not have the time to run &quot;sa-
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; update&quot;, there is no sense in stating that &quot;it is not true&quot;.
</I>&gt;&gt;&gt;<i> Would
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; someone (other than me):-) that has an installed spamassassin
</I>&gt;&gt;&gt;<i> 3.2.5-
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; 1.el5.rf please run sa-update, and corroborate wether or not a
</I>&gt;&gt;&gt;<i> set
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; of rules gets placed in folder &quot;/var/lib/spamassassin/&lt;version&gt;&quot;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; I run sa-update every night and use the spamassassin package from
</I>&gt;&gt;&gt;<i> &gt;&gt; rpmforge
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; on
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; both el4 and el5 servers.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; The sa-update script is meant to update the rules and put them
</I>&gt;&gt;&gt;<i> into
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; /var/lib/spamassassin.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; The /usr/share/spamassassin directory is there to provide rules to
</I>&gt;&gt;&gt;<i> &gt;&gt; admins
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; they
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; can use to copy/move into /var/lib/spamassassin. The fact the
</I>&gt;&gt;&gt;<i> rules
</I>&gt;&gt;&gt;<i> &gt;&gt; get
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; packaged in /usr/share/spamassassin is irrelevant as SA doesn't
</I>&gt;&gt;&gt;<i> use
</I>&gt;&gt;&gt;<i> &gt;&gt; them
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; from
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; that location.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; In reply to your second statement, I am fully aware that SARE has
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; been deprecated, but it is not a wildly known fact!. Plenty of
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; proofs of this can be easily found by googling around using
</I>&gt;&gt;&gt;<i> keywords
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &quot;spamassassin how to OR guide&quot;, and verify how widely
</I>&gt;&gt;&gt;<i> &quot;rules-dujour&quot;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; installation is recommended, even in very recent installation
</I>&gt;&gt;&gt;<i> guides.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; I'm on the SARE mailing list and occassionally (every 3 - 6
</I>&gt;&gt;&gt;<i> months)
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; there's an
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; email on that list and it's someone that asks about the
</I>&gt;&gt;&gt;<i> rulesdujour
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; script.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; The person is then told not use it any more but instead use
</I>&gt;&gt;&gt;<i> sa-update.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; I would suspect that if rulesdujour was still widely used the SARE
</I>&gt;&gt;&gt;<i> &gt;&gt; mailing
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; list would be much more active than that.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; Besides none of these problems that are causing so much
</I>&gt;&gt;&gt;<i> confussion
</I>&gt;&gt;&gt;<i> &gt;&gt; would
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; be around if rf's apmassassins rpm was not bundled with these
</I>&gt;&gt;&gt;<i> rules.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;  Much less locating them in an non-standard folder such as
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &quot;/usr/share/spamassassin&quot;, instead of using one of the default
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; directories&quot;. Again, I stand by my reasonings.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Many RPM packages supply tools, scripts, etc in the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; /usr/share/&lt;packagename&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; for the administrator to use and copy/move if they need to. This
</I>&gt;&gt;&gt;<i> is
</I>&gt;&gt;&gt;<i> &gt;&gt; not
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; isolated to the SA RPM from rpmforge.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; Please see:
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://wiki.apache.org/spamassassin/WhereDoLocalSettingsGo">http://wiki.apache.org/spamassassin/WhereDoLocalSettingsGo</A>
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; <A HREF="http://wiki.apache.org/spamassassin/RuleUpdates">http://wiki.apache.org/spamassassin/RuleUpdates</A>
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; At least you have to agree, that wether users are aware or not of
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; the of the deprecated SARE rules, it is not evident to them that
</I>&gt;&gt;&gt;<i> a
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; bundled set of rules was installed with the the package. This is
</I>&gt;&gt;&gt;<i> not
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; customary prcatice, unless you somehow added information to the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; package name that will let the user know this.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; You have to expect that users will start adding their own sets of
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; rules to &quot;/etc/mail/spamassassin&quot; totally oblivious to the fact
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; there might be a set of duplicate rules on other directory in
</I>&gt;&gt;&gt;<i> their
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; system.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; sa-update will put the rules in /var/lib/spamassassin.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Rules that go into /etc/mail/spamassassin are custom rules for
</I>&gt;&gt;&gt;<i> users,
</I>&gt;&gt;&gt;<i> &gt;&gt; and
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; that
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; is where they belong.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; SpamAssassin will read from both the /etc/mail/spamassassin and
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; /var/lib/spamassassin directories for the rules but will ignore
</I>&gt;&gt;&gt;<i> the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; /usr/share/spamassassin.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; I personally do not see anything wrong with this.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Regards,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; Michael.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; Regards,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; Ignacio
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; Hi Ali,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Hope I am not wrong, but...
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Just passing by to metion problems ralated to rpmforge's
</I>&gt;&gt;&gt;<i> &gt;&gt; spamasassin
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; for Centos/el5 (personally I am using x86_64.3.2.5-1.el5.rf). The
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; problem in question is that the rpm comes bundled with mnany
</I>&gt;&gt;&gt;<i> rule-
</I>&gt;&gt;&gt;<i> &gt;&gt; sets
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; provided by spamassassin.apache.org, and it even comes with an
</I>&gt;&gt;&gt;<i> cron
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; script to run sa-update periodically.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Now, this is very fine and dandy, BUT there are basically two
</I>&gt;&gt;&gt;<i> very
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; annoying problems with this approach:
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; First is the fact that the rules updating program (sa-update)
</I>&gt;&gt;&gt;<i> that
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; comes
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; with this package was not compiled with the same home
</I>&gt;&gt;&gt;<i> directory
</I>&gt;&gt;&gt;<i> as
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; spamassassin (/usr/share/spamassassin), therefor, when running
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; sa-update
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; aither manually, or from the supplied script, the new
</I>&gt;&gt;&gt;<i> rule-sets
</I>&gt;&gt;&gt;<i> &gt;&gt; get
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; placed
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; on directory &quot;/var/lib/spamassassin/spamassassinx.x.x.x&quot; or
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; something to that effect, thus creating a DUPLICATE set of
</I>&gt;&gt;&gt;<i> rules.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; I don't have time to go through the setup and answer you
</I>&gt;&gt;&gt;<i> properly
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; here, but
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; that isn't true. If you understood how the rules work and get
</I>&gt;&gt;&gt;<i> &gt;&gt; applied,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; you'll
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; realise there's nothing wrong with the sa-update script.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Secondly, since users and administrators alike are totally
</I>&gt;&gt;&gt;<i> unaware
</I>&gt;&gt;&gt;<i> &gt;&gt; of
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; the fact mentioned above, there are  floating around some
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; &quot;tutorials&quot; for installing spamassassin, in which it is
</I>&gt;&gt;&gt;<i> &gt;&gt; recommended
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; to
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; upgrade to surforge's spamassassing version, along with an auto-
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; updating program such as &quot;rules dujour&quot; :). Now to complicate
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; matters even further &quot;rules dujour&quot; utilizes rulesets provided
</I>&gt;&gt;&gt;<i> by
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; SARE,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; and sre installed in directory&quot;/etc/mail/spamassassin&quot;, thus
</I>&gt;&gt;&gt;<i> leading
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; to the creation of a TRIPLICATE set of of rules.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; If you've been around the traps for a while, you'll realise
</I>&gt;&gt;&gt;<i> that
</I>&gt;&gt;&gt;<i> &gt;&gt; the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; rulesdujour script is deprecated and mustn't be used. It was
</I>&gt;&gt;&gt;<i> actually
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; announced over 18 months ago now. If you check the sare mailing
</I>&gt;&gt;&gt;<i> list
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; archives,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; you'll see what I'm talking about.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; Regards,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; Michael.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Hope you are now getting a clear picture by now.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Combining all these seemingly inncouos things and you have a
</I>&gt;&gt;&gt;<i> &gt;&gt; recipe
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; for
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; disaster, in which spamassassin will bog down the system by
</I>&gt;&gt;&gt;<i> bravely
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; trying
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; to eliminate duplicate rules every time it runs, and slowing
</I>&gt;&gt;&gt;<i> down
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; tremedously it's scanning time.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Since I have very superficial knowledge of rpm packaging, I
</I>&gt;&gt;&gt;<i> leave
</I>&gt;&gt;&gt;<i> &gt;&gt; up
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; to
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; you to make the ammendments you consider necessary, which in my
</I>&gt;&gt;&gt;<i> &gt;&gt; humble
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; opinion would be not to bundle the rulesets, and if you do
</I>&gt;&gt;&gt;<i> please
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; place
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; them in a higly visible and well known directory (i.e.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; /etc/mail/spamassassin). Also don forget to compile sa-update
</I>&gt;&gt;&gt;<i> with
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; the
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; same home directory.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Sorry for sounding sarcastic and obnoxious,(none of that
</I>&gt;&gt;&gt;<i> &gt;&gt; intended),
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; just
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; the way it came out.
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Regards ALl,
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Ignacio
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; Ignacio
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; _______________________________________________
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; suggest mailing list
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; <A HREF="http://lists.repoforge.org/mailman/listinfo/users">suggest at lists.rpmforge.net</A>
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;&gt; <A HREF="http://lists.rpmforge.net/mailman/listinfo/suggest">http://lists.rpmforge.net/mailman/listinfo/suggest</A>
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt; ------- End of Original Message -------
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt; ------- End of Original Message -------
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt;&gt; &gt;
</I>&gt;&gt;&gt;<i> &gt; ------- End of Original Message -------
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> ------- End of Original Message -------
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;<i>
</I>&gt;<i>
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023567.html">[suggest] Problems with spamassassin 3.2.5-1.el5.rf
</A></li>
	<LI>Next message: <A HREF="023545.html">[suggest] Re: Request for perl module updates and an add
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23568">[ date ]</a>
              <a href="thread.html#23568">[ thread ]</a>
              <a href="subject.html#23568">[ subject ]</a>
              <a href="author.html#23568">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
