<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [packagers] dkms-r1000 status?
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20dkms-r1000%20status%3F&In-Reply-To=%3C20071114231833.GA22570%40openfusion.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002407.html">
   <LINK REL="Next"  HREF="002409.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[packagers] dkms-r1000 status?</H1>
    <B>Gavin Carr</B> 
    <A HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20dkms-r1000%20status%3F&In-Reply-To=%3C20071114231833.GA22570%40openfusion.com.au%3E"
       TITLE="[packagers] dkms-r1000 status?">gavin at openfusion.com.au
       </A><BR>
    <I>Thu Nov 15 00:18:33 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002407.html">[packagers] Perl package tools
</A></li>
        <LI>Next message: <A HREF="002409.html">[packagers] dkms-r1000 status?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2408">[ date ]</a>
              <a href="thread.html#2408">[ thread ]</a>
              <a href="subject.html#2408">[ subject ]</a>
              <a href="author.html#2408">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

Just installed CentOS5-x86_64 on a MSI K9AG-Neo2 MB, which has an
onboard RealTek RTL8111/8168B NIC. I tried it out with the dkms-r1000
rpmforge package (1.05-1.nodist.rf), since that's described as 
&quot;Driver for RTL8111/8168B PCI Express Gigabit Ethernet controllers&quot;.
The driver works fine for a while, but after a little bit of network 
load the card stops functioning and I start getting IOMMU errors in 
the messages log:

Nov 15 17:30:27 axe kernel: PCI-DMA: Out of IOMMU space for 42 bytes at device 0000:02:00.0
Nov 15 17:30:28 axe kernel: EDAC k8 MC0: GART TLB errorr: transaction type(generic), cache level(generic)
Nov 15 17:30:28 axe kernel: EDAC k8 MC0: extended error code: GART error
Nov 15 17:30:28 axe kernel: PCI-DMA: Out of IOMMU space for 1608 bytes at device 0000:02:00.0
Nov 15 17:30:28 axe kernel: PCI-DMA: Out of IOMMU space for 42 bytes at device 0000:02:00.0
Nov 15 17:30:29 axe kernel: EDAC k8 MC0: GART TLB errorr: transaction type(generic), cache level(generic)
Nov 15 17:30:29 axe kernel: EDAC k8 MC0: extended error code: GART error

I tried bumping the IOMMU size up via the iommu=memaper={2,3,4} kernel
parameter, which delays the problem, but eventually it starts again.

Checking the Realtek site, the r1000 is described as the driver for 
2.4 kernels:

  <A HREF="http://tinyurl.com/la9ey">http://tinyurl.com/la9ey</A>

which seems odd. I swapped over to the 8.003.00 r8168 driver there,
and all is sweetness and light.

So long bug report, but it looks as if we should be using r8168 on
instead of r1000 on recent RHELs? Would it be helpful if I tried 
to produce a dkms-r8168 SRPM modelled off the r1000 one?

Cheers,
Gavin

-- 
Gavin Carr
- <A HREF="http://www.openfusion.com.au">http://www.openfusion.com.au</A> - Linux, Perl, and Web Consulting
- <A HREF="http://www.openfusion.net">http://www.openfusion.net</A>    - Hackery, the Blog
* Fashion is a variable, but style is a constant - Programming Perl


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002407.html">[packagers] Perl package tools
</A></li>
	<LI>Next message: <A HREF="002409.html">[packagers] dkms-r1000 status?
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2408">[ date ]</a>
              <a href="thread.html#2408">[ thread ]</a>
              <a href="subject.html#2408">[ subject ]</a>
              <a href="author.html#2408">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/packagers">More information about the packagers
mailing list</a><br>
</body></html>
