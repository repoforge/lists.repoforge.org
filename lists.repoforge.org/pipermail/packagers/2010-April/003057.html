<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [packagers] State of mirrors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20State%20of%20mirrors&In-Reply-To=%3C4BBB3B13.3040005%40karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003056.html">
   <LINK REL="Next"  HREF="003060.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[packagers] State of mirrors</H1>
    <B>Karanbir Singh</B> 
    <A HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20State%20of%20mirrors&In-Reply-To=%3C4BBB3B13.3040005%40karan.org%3E"
       TITLE="[packagers] State of mirrors">mail-lists at karan.org
       </A><BR>
    <I>Tue Apr  6 15:45:55 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003056.html">[packagers] State of mirrors
</A></li>
        <LI>Next message: <A HREF="003060.html">[packagers] lua patch submission
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3057">[ date ]</a>
              <a href="thread.html#3057">[ thread ]</a>
              <a href="subject.html#3057">[ subject ]</a>
              <a href="author.html#3057">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/06/2010 02:00 PM, Yury V. Zaytsev wrote:
&gt;<i> This was exactly my point: if the mirrors will have to rehash their
</I>&gt;<i> content we can at least (with some probability) check for the
</I>&gt;<i> consistency of the mirror.
</I>&gt;<i>
</I>&gt;<i> If we check against repodata it only means that the repodata is
</I>&gt;<i> correct / up-to-date.
</I>
I've noticed that making the work complex for a mirror admin means they 
wont bother doing it - also many mirror admins tend to run mirrors for 
various different projects and dont really want a project specific 
process. So we should try and work it in a way that the 'complexity / 
testing' is handled on our side.

If the repo metadata is accurate, yum and smart should both fail to 
install a package if it does not have the right payload ( as specificed 
in the repo metadata ). So its not an unreasonable test to just test the 
repo metadata.

Another way to test every rpm would be to grab the header for the file, 
and analyse that for its payload info. But that means hitting every rpm 
on every repo that we have out there at any given time. Even if we only 
get the header's - the load from that will be non trivial given that 
there are thousands of rpms out there now.

Also - thinking about this from another different angle. Setting up a 
push style mirror might be something to think about. We could then push 
a rsync everytime the repo's are updated; and a successful rsync push 
could be an indicator that the content is fine.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003056.html">[packagers] State of mirrors
</A></li>
	<LI>Next message: <A HREF="003060.html">[packagers] lua patch submission
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3057">[ date ]</a>
              <a href="thread.html#3057">[ thread ]</a>
              <a href="subject.html#3057">[ subject ]</a>
              <a href="author.html#3057">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/packagers">More information about the packagers
mailing list</a><br>
</body></html>
