<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [packagers] State of mirrors
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20State%20of%20mirrors&In-Reply-To=%3C4BBB3068.5010403%40karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003053.html">
   <LINK REL="Next"  HREF="003056.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[packagers] State of mirrors</H1>
    <B>Karanbir Singh</B> 
    <A HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20State%20of%20mirrors&In-Reply-To=%3C4BBB3068.5010403%40karan.org%3E"
       TITLE="[packagers] State of mirrors">mail-lists at karan.org
       </A><BR>
    <I>Tue Apr  6 15:00:24 CEST 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="003053.html">[packagers] State of mirrors
</A></li>
        <LI>Next message: <A HREF="003056.html">[packagers] State of mirrors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3055">[ date ]</a>
              <a href="thread.html#3055">[ thread ]</a>
              <a href="subject.html#3055">[ subject ]</a>
              <a href="author.html#3055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 04/06/2010 12:39 PM, Steve Huff wrote:
&gt;<i> i don't know much about what fedora and suse are doing, but i do a lot of monitor-y projects at work, so i can take a crack at this.
</I>
awesome! well volunteered :)

&gt;<i> 1) put a TIMESTAMP file in the top level of the rsync target, and update it every time the rsync master changes, then gauge every slave's freshness by the delta between the value of the master's TIMESTAMP and the slave's timestamp.
</I>
Thats one of the ways to track this - it would tell us what the 'age' of 
a remote machine is. However, there is a repomd.xml file in each 
repositori/repodata/ directory, which contains sha sums for the repo 
metadata content. We could just compare what is on the remote machine 
with what we have on the 'seed' machine.

And this test could be done on a per repo basis, allowing people to run 
partial mirrors if they dont have the space for a full one. The point 
them turns into : if the repodata is consistent, do we expect the repo 
payload to be good too ?

&gt;<i> 2) instead of a mirrorlist in the yum config, write a little CGI that takes release and arch as parameters and returns the URL of a valid mirror.  this enables us to turn mirrors on and off instantly, but unfortunately it breaks the fastestmirror plugin.
</I>
both mirrorlist and fastestmirror could work with this. All we need to 
do is point mirrorlist=&lt;url&gt; to a url that is going to return multiple 
urls for mirrors, fastestmirror could / would handle the client side. 
Also, if we only return one url to a valid-mirror, fastestmirror 
disables itself.

- KB

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003053.html">[packagers] State of mirrors
</A></li>
	<LI>Next message: <A HREF="003056.html">[packagers] State of mirrors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3055">[ date ]</a>
              <a href="thread.html#3055">[ thread ]</a>
              <a href="subject.html#3055">[ subject ]</a>
              <a href="author.html#3055">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/packagers">More information about the packagers
mailing list</a><br>
</body></html>
