<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [packagers] autobuilding assumptions
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20autobuilding%20assumptions&In-Reply-To=%3C1261680618.7234.46.camel%40mypride%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002979.html">
   <LINK REL="Next"  HREF="002977.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[packagers] autobuilding assumptions</H1>
    <B>Yury V. Zaytsev</B> 
    <A HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20autobuilding%20assumptions&In-Reply-To=%3C1261680618.7234.46.camel%40mypride%3E"
       TITLE="[packagers] autobuilding assumptions">yury at shurup.com
       </A><BR>
    <I>Thu Dec 24 19:50:18 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="002979.html">[packagers] autobuilding assumptions
</A></li>
        <LI>Next message: <A HREF="002977.html">[packagers] Re: Patch for creation of ruby bindinds for subversion	1.6.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2972">[ date ]</a>
              <a href="thread.html#2972">[ thread ]</a>
              <a href="subject.html#2972">[ subject ]</a>
              <a href="author.html#2972">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Mon, 2009-12-21 at 11:51 +0000, Karanbir Singh wrote:

a-d): ack!

&gt;<i> e) buildreports are also archieved locally into a tarball that contains 
</I>&gt;<i> the mock log, yum log, build stdout, build stderr.
</I>
What about rpmlint :-) ? Might be helpful as well.

f-g): fine with me.

&gt;<i> h) The configs used for the builds are identical to whats used for 
</I>&gt;<i> CentOS--3, 4 and 5. The flip side is that hey have not been 'rpmforgeised'.
</I>
What do you mean by rpmforgeised? 

Some packages depend on the other rpmforge packages, so that if you
don't have RPMForge in your yum config this won't work. On the other
hand we now have some Perl stuff in the macros shipped with
rpmforge-release...

&gt;<i> So, there are a few things over and above this that also need 
</I>&gt;<i> addressing. We can have multiple spec files in a single commit, the 
</I>&gt;<i> 'watcher' script will just fire off each of them to build - however, its 
</I>&gt;<i> no longer possible then to identify a build and associate that with a 
</I>&gt;<i> commit id. To me, thats a big deal since it means thats one bit of 
</I>&gt;<i> metadata that comes for free. Not sure what / how other people feel 
</I>&gt;<i> about this - but it might be worth agreeing to something as 'best practice'.
</I>
It's no hassle for me to commit one SPEC at a time, but probably not fun
for people like Cristoph doing massive Perl updates. 

However I don't really understand the problem. Why you can't identify
builds and associate them with commits in this case? Well, you can't
uniquely identify a build by commit id, but that doesn't seem to be a
problem to me. Just introduce autoincrement build ids and this way you
will be able to tell which commit fired a build and which builds were
fired by a commit...

&gt;<i> Another thing is that buildroots are restricted to 1 GB each, are there 
</I>&gt;<i> many pkgs built in rpmforge that need a larger buildroot allocation ? 
</I>&gt;<i> are we building OOo (!) :)
</I>
The stuff I'm contributing with is quite small. I've seen firefox
packages in svn, but I doubt anyone is building something that is THAT
large nowadays. Anyway, we can cope with this issue when the problem
arises...

&gt;<i> We need a mechanism to ensure that sources got over the wire are what we 
</I>&gt;<i> expect them to be ( so perhaps store the sha1sum in a text file parallel 
</I>&gt;<i> to the .spec ? perhaps use the same name as the &lt;name&gt;.spec but name it 
</I>&gt;<i> &lt;name&gt;.sources ( what I do for myself at the moment ) or something similar ?
</I>
Hmmm... I guess that Dag just ignored this issue while setting up his
build system. I don't really see any other viable solution than storing
a &lt;name&gt;.sources list alongside the &lt;name&gt;.spec with sha1hashes. I can
comply if we chose to enforce this for the new builds.

&gt;<i> Because of this work done, its also not a big deal to have some level of 
</I>&gt;<i> private repo's: that work from src.rpm's over rsync. Basically allowing 
</I>&gt;<i> people to rsync a src.rpm over to the buildsys and have it run its 
</I>&gt;<i> build. This might be ok to use as a one-off or a test-thing, but as a 
</I>&gt;<i> regular run I would much prefer if all builds came via the svn route.
</I>
Well, this doesn't seem to be a huge issue to me. I normally test what I
commit on my local machine, so most of the stupid mistakes are
eliminated and therefore I won't be overloading the queue with dozens of
test builds.

&gt;<i> I'll also be documenting the whole setup, so as to not become a single 
</I>&gt;<i> point of failure. Fabian has already, perhaps unknowingly, volunteered 
</I>&gt;<i> to help in case things break and I am not around.
</I>
It would be very cool if you could document it on the RPMRepo wiki.
 
-- 
Sincerely yours,
Yury V. Zaytsev


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002979.html">[packagers] autobuilding assumptions
</A></li>
	<LI>Next message: <A HREF="002977.html">[packagers] Re: Patch for creation of ruby bindinds for subversion	1.6.6
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2972">[ date ]</a>
              <a href="thread.html#2972">[ thread ]</a>
              <a href="subject.html#2972">[ subject ]</a>
              <a href="author.html#2972">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/packagers">More information about the packagers
mailing list</a><br>
</body></html>
