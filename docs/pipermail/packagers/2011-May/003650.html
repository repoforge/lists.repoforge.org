<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [packagers] Surya going away
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20Surya%20going%20away&In-Reply-To=%3Calpine.LRH.2.02.1105310111090.3061%40pikachu.3ti.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003649.html">
   <LINK REL="Next"  HREF="003645.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[packagers] Surya going away</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20Surya%20going%20away&In-Reply-To=%3Calpine.LRH.2.02.1105310111090.3061%40pikachu.3ti.be%3E"
       TITLE="[packagers] Surya going away">dag at wieers.com
       </A><BR>
    <I>Tue May 31 01:20:32 CEST 2011</I>
    <P><UL>
        <LI>Previous message: <A HREF="003649.html">[packagers] Surya going away
</A></li>
        <LI>Next message: <A HREF="003645.html">[packagers] Surya going away
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3650">[ date ]</a>
              <a href="thread.html#3650">[ thread ]</a>
              <a href="subject.html#3650">[ subject ]</a>
              <a href="author.html#3650">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 31 May 2011, Farkas Levente wrote:

&gt;<i> On Mon, May 30, 2011 at 16:57, Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/packagers">dag at wieers.com</A>&gt; wrote:
</I>&gt;&gt;<i> On Mon, 30 May 2011, Yury V. Zaytsev wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Mon, 2011-05-30 at 13:53 +0100, Karanbir Singh wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> Just a heads up guys, we are a few days away from switching surya off.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Thanks for the heads up!
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> We are planning to finish with the migration on Thursday, 2nd June. This
</I>&gt;&gt;&gt;<i> Sunday Dag was expected to convert the Hetzner machine to RHEL6.1, I'm
</I>&gt;&gt;&gt;<i> not sure if he succeeded, but hopefully he did.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> RHEL 6.1 was a total disaster. Completely unreliable and unresponsive with
</I>&gt;&gt;<i> KVM, while the current CentOS 5.6 is very stable. I am going to re-evaluate
</I>&gt;&gt;<i> later, but it was a useful experience. Both to learn Hetzner support as well
</I>&gt;&gt;<i> as see how RHEL 6.1 holds up against CentOS 5.6 in a similar environment. At
</I>&gt;&gt;<i> least moving to RHEL6 is going to be much easier after having done this
</I>&gt;&gt;<i> (once) :)
</I>&gt;<i>
</I>&gt;<i> can you tell me a bit more detail about it?
</I>&gt;<i> it was only 6.1 which has problems or 6.0 too?
</I>&gt;<i> we use 6.0 for a long time with many guests without real problems...
</I>
I only tested RHEL6.1 and it might be related to this specific hardware 
Hetzner HW (1cpu, 4 cores, ht). The system was minimal + virtualization.

There's not such much to explain about it. We saw a very high rate of 
interrupts and context switches, only when the VMs were running (ie. being 
idle). The system was unusable remotely with frequent (every few seconds) 
everything seemed to stall for a few seconds (sometimes up to 35 seconds).
Which makes it very hard to troubleshoot, so I didn't even try (and it's 
not like I had a lot of time anyway).

It seems to be somehow related to the scheduler/timer or maybe cgroups ?

RHEL5 does not show this behavior with the exact same workload.

The only thing I found that was comparable in behavior was:

     <A HREF="http://permalink.gmane.org/gmane.comp.emulators.kvm.devel/71741">http://permalink.gmane.org/gmane.comp.emulators.kvm.devel/71741</A>

Beware that 'lost ticks' in Dstat on tickless kernels means it stalled for 
that many seconds. I have seen such behaviour inside VMs in the past when 
there were timer issues (eg a VM with a timer going backward causing the 
scheduler to miss deadlines). I have never seen such behavior on real 
hardware.

I am willing to test it again this week if there are clues that are very 
specific. But I hate to bring the infrastructure down once we put it in 
production on Thursday/Friday.

-- 
-- dag wieers, <A HREF="http://lists.repoforge.org/mailman/listinfo/packagers">dag at wieers.com</A>, <A HREF="http://dag.wieers.com/">http://dag.wieers.com/</A>
-- dagit linux solutions, <A HREF="http://lists.repoforge.org/mailman/listinfo/packagers">info at dagit.net</A>, <A HREF="http://dagit.net/">http://dagit.net/</A>

[Any errors in spelling, tact or fact are transmission errors]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003649.html">[packagers] Surya going away
</A></li>
	<LI>Next message: <A HREF="003645.html">[packagers] Surya going away
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3650">[ date ]</a>
              <a href="thread.html#3650">[ thread ]</a>
              <a href="subject.html#3650">[ subject ]</a>
              <a href="author.html#3650">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/packagers">More information about the packagers
mailing list</a><br>
</body></html>
