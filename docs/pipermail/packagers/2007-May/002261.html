<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [packagers] noob help needed  with %{dist}
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20noob%20help%20needed%20%20with%20%25%7Bdist%7D&In-Reply-To=%3CPine.LNX.4.64.0705041122200.29817%40horsea.3ti.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002260.html">
   <LINK REL="Next"  HREF="002262.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[packagers] noob help needed  with %{dist}</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:packagers%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bpackagers%5D%20noob%20help%20needed%20%20with%20%25%7Bdist%7D&In-Reply-To=%3CPine.LNX.4.64.0705041122200.29817%40horsea.3ti.be%3E"
       TITLE="[packagers] noob help needed  with %{dist}">dag at wieers.com
       </A><BR>
    <I>Fri May  4 11:25:59 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002260.html">[packagers] noob help needed  with %{dist}
</A></li>
        <LI>Next message: <A HREF="002262.html">[packagers] noob help needed  with %{dist}
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2261">[ date ]</a>
              <a href="thread.html#2261">[ thread ]</a>
              <a href="subject.html#2261">[ subject ]</a>
              <a href="author.html#2261">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Fri, 4 May 2007, Martin Hamant wrote:

&gt;<i> I don't understand how does it works. My target is to make a RPM (for
</I>&gt;<i> private use) that could be built on different distro, and so i have
</I>&gt;<i> questions:
</I>&gt;<i> 
</I>&gt;<i> - Is %{dist} internally defined by RPM engine (seems not! I tried some
</I>&gt;<i> echo %{dist}... ) , or do I need a special macro to get it defined
</I>&gt;<i> before the build ?
</I>
We update the SPEC file for each build. So the disttag is added to the 
Release tag before building.


&gt;<i> - I know rpmforge packagers use %{dist} to dynamically name their
</I>&gt;<i> package (in release) : Why can't i see any {%dist} references in
</I>&gt;<i> specfiles ?
</I>
Our buildsystem provides the dist macro when building, like:

	--define &quot;dist el4&quot;

If it would be hardcoded in the SPEC file, there would not be an advantage 
to have a macro.

Beware though, we invented the %{dist} macro, but sadly Fedora took the 
idea and used it in an incompatible manner. Fedora defines the dist macro 
as being '.fc6' or '.el5'. While we defined it as being 'fc6' and 'el5.

The reason for this is that we use the dist macro to have conditionals in 
the SPEC file that allows us to build from the same SPEC file. Fedora 
however uses the dist macro only for tagging the Release.

Sadly, both uses are not compatible.


&gt;<i> Thank you very much !
</I>
You're welcome.

Kind regards,
--   dag wieers,  <A HREF="http://lists.repoforge.org/mailman/listinfo/packagers">dag at wieers.com</A>,  <A HREF="http://dag.wieers.com/">http://dag.wieers.com/</A>   --
[all I want is a warm bed and a kind word and unlimited power]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002260.html">[packagers] noob help needed  with %{dist}
</A></li>
	<LI>Next message: <A HREF="002262.html">[packagers] noob help needed  with %{dist}
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2261">[ date ]</a>
              <a href="thread.html#2261">[ thread ]</a>
              <a href="subject.html#2261">[ subject ]</a>
              <a href="author.html#2261">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/packagers">More information about the packagers
mailing list</a><br>
</body></html>
