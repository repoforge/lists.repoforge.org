<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [suggest] broken lighttpd logrotate file
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20broken%20lighttpd%20logrotate%20file&In-Reply-To=%3C200903181314.18628.dries%40ulyssis.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="023762.html">
   <LINK REL="Next"  HREF="023764.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[suggest] broken lighttpd logrotate file</H1>
    <B>Dries Verachtert</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsuggest%5D%20broken%20lighttpd%20logrotate%20file&In-Reply-To=%3C200903181314.18628.dries%40ulyssis.org%3E"
       TITLE="[suggest] broken lighttpd logrotate file">dries at ulyssis.org
       </A><BR>
    <I>Wed Mar 18 13:14:18 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="023762.html">[suggest] broken lighttpd logrotate file
</A></li>
        <LI>Next message: <A HREF="023764.html">[suggest] Munin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23772">[ date ]</a>
              <a href="thread.html#23772">[ thread ]</a>
              <a href="subject.html#23772">[ subject ]</a>
              <a href="author.html#23772">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sunday 15 March 2009 02:49:59 pm Stanis Trendelenburg wrote:
&gt;<i> The /etc/logrotate.d/lighttpd file installed by the lighttpd-1.4.20-1.rf
</I>&gt;<i> package is broken. The 'postrotate' command is:
</I>&gt;<i>
</I>&gt;<i>     postrotate
</I>&gt;<i>         /bin/kill -HUP  2&gt;/dev/null || :
</I>&gt;<i>                       ^^^
</I>&gt;<i>                       no pid!
</I>&gt;<i>
</I>&gt;<i> The specfile actually has the &quot;$(cat $pidfile)&quot; stuff in this place, but
</I>&gt;<i> it does not get inserted for some reason. I'm not really familiar with
</I>&gt;<i> the RPM spec file syntax, but I guess there's a problem with some
</I>&gt;<i> metacharacters being interpreted by rpm instead of printed to the
</I>&gt;<i> output. (?)
</I>&gt;<i>
</I>&gt;<i> Anyway, here's a one-line patch that changes this to:
</I>&gt;<i>
</I>&gt;<i>     postrotate
</I>&gt;<i>         /sbin/service lighttpd reload &gt; /dev/null 2&gt;/dev/null || true
</I>&gt;<i>
</I>&gt;<i> (copied from apache's /etc/logrotate.d/httpd)
</I>&gt;<i> This way is also better, IMHO, since the init script even tries to
</I>&gt;<i> figure out the pid if the pidfile does not exist for some reason (e.g.
</I>&gt;<i> it has been disabled in lighttpd.conf).
</I>
Thanks for the bug hunting. I've applied your changes and i've added a 
changelog entry with your name, i hope that's ok.

kind regards,
Dries

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="023762.html">[suggest] broken lighttpd logrotate file
</A></li>
	<LI>Next message: <A HREF="023764.html">[suggest] Munin
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#23772">[ date ]</a>
              <a href="thread.html#23772">[ thread ]</a>
              <a href="subject.html#23772">[ subject ]</a>
              <a href="author.html#23772">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
