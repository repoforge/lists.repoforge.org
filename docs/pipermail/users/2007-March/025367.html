<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [users] Dropping the repotag
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dropping%20the%20repotag&In-Reply-To=%3CPine.LNX.4.64.0703181819250.1144%40horsea.3ti.be%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="025366.html">
   <LINK REL="Next"  HREF="025368.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[users] Dropping the repotag</H1>
    <B>Dag Wieers</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Dropping%20the%20repotag&In-Reply-To=%3CPine.LNX.4.64.0703181819250.1144%40horsea.3ti.be%3E"
       TITLE="[users] Dropping the repotag">dag at wieers.com
       </A><BR>
    <I>Sun Mar 18 18:34:29 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="025366.html">[users] Dropping the repotag
</A></li>
        <LI>Next message: <A HREF="025368.html">[users] Dropping the repotag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25367">[ date ]</a>
              <a href="thread.html#25367">[ thread ]</a>
              <a href="subject.html#25367">[ subject ]</a>
              <a href="author.html#25367">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, 18 Mar 2007, Andreas Rogge wrote:

&gt;<i> Am Sonntag, den 18.03.2007, 14:37 +0100 schrieb Dag Wieers:
</I>&gt;<i> &gt; On Sun, 18 Mar 2007, Andreas Rogge wrote:
</I>&gt;<i> &gt; &gt; On Sat, 17 Mar 2007, Dag Wieers wrote:
</I>&gt;<i> &gt; &gt; &gt; On Sat, 17 Mar 2007, Andreas Rogge wrote:
</I>&gt;<i> &gt; &gt; &gt; [...]
</I>&gt;<i> &gt; &gt; &gt; &gt; What if you could use for example &quot;listrpms --vendor RPMForge&quot; 
</I>&gt;<i> &gt; &gt; &gt; &gt; instead of &quot;rpm -qa | grep rf&quot; and get a 100% result without 
</I>&gt;<i> &gt; &gt; &gt; &gt; false-positives?
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; It will not tell you which nagios-2.8-4.el5 breaks a dependency chain. 
</I>&gt;<i> &gt; &gt; &gt; Was it the one from EPEL or the one from RPMforge ? Both have the 
</I>&gt;<i> &gt; &gt; &gt; exact same release.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; yum doesn't say, you cannot query it because it is not installed. 
</I>&gt;<i> &gt; &gt; &gt; Hell, since both have the same filename you won't even know by querying the 
</I>&gt;<i> &gt; &gt; &gt; repositories.
</I>&gt;<i> &gt; &gt; &gt; 
</I>&gt;<i> &gt; &gt; &gt; This is not solvable unless you either improve yum to report all other 
</I>&gt;<i> &gt; &gt; &gt; information (including keys and/or other tags), which still doesn't 
</I>&gt;<i> &gt; &gt; &gt; fix all the other tools and is plain confusing. Or if you make the 
</I>&gt;<i> &gt; &gt; &gt; filename more unique, which is what the repotag does.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; BTW rpm -qa | grep '\.rf$' is pretty conclusive _if_ everybody follows 
</I>&gt;<i> &gt; &gt; &gt; the same standard and you require packages to be signed.
</I>&gt;<i> &gt; &gt; &gt;
</I>&gt;<i> &gt; &gt; &gt; BTW2 Dissing the repotag usefulness is like dissing the disttag 
</I>&gt;<i> &gt; &gt; &gt; usefulness. It is as arbitrary, makes the release longer and is in 
</I>&gt;<i> &gt; &gt; &gt; essence not required. Still it has its use.
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; First of all: yes, you're right.
</I>&gt;<i> &gt; &gt; 
</I>&gt;<i> &gt; &gt; But we will face this issue with EPEL. A repotag will not help to blame
</I>&gt;<i> &gt; &gt; EPEL when something breaks (they don't have one). It will only help to
</I>&gt;<i> &gt; &gt; blame RPMForge (as RPMforge has one). 
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; That's why EPEL should have one. At least until something better comes 
</I>&gt;<i> &gt; around (if there ever will).
</I>&gt;<i>
</I>&gt;<i> Yes, but you cannot force epel to add one. So we have to find our way
</I>&gt;<i> around this.
</I>
That's why I am considering dropping it. If it doesn't get added to their 
packaging policy, then I prefer to follow their policy and proof them 
wrong.

It's sad if that will happen, but it's the only way to make them 
understand what is at stake. As long as other repositories add a repotag, 
EPEL will not need one. So I'm forcing them to consider needing one. If 
only to play nice.


&gt;<i> &gt; People say a repotag should not be in the filename. But a filename is 
</I>&gt;<i> &gt; there to identify what it is. The version is there to identify what it is, 
</I>&gt;<i> &gt; just like the name and the arch. All of these are not required in the 
</I>&gt;<i> &gt; package name. In fact, rename whatever package you have to &quot;this_package&quot;
</I>&gt;<i> &gt; (without the arch, without the extension) and rpm handles that fine, 
</I>&gt;<i> &gt; because it doesn't use the information in the filename, it uses the 
</I>&gt;<i> &gt; header. So the filename is there for the user to identify what is is.
</I>&gt;<i> 
</I>&gt;<i> Yep. In fact it would be best to *always* have a dist and a repo tag (or
</I>&gt;<i> disto and vendor tag, call them what you want). I don't even argue that
</I>&gt;<i> it must be removed from the filename - I just don't need it myself and
</I>&gt;<i> it is not required for proper operation.
</I>&gt;<i> What I actually argue is that using the revision tag for it sucks. You
</I>&gt;<i> can write arbitrary strings into the revision and these repotags are not
</I>&gt;<i> required and they are only line noise to the package manager (same for
</I>&gt;<i> disttags).
</I>
Same for name, version and release. They are not required and could 
therefor be removed from the filename. At some point in the past SuSE 
didn't have version and release tags in their RPM filenames.

The directory listing were slimmer :)


&gt;<i> &gt; I don't think it is practically fixable (if anybody would ever care to fix 
</I>&gt;<i> &gt; RPM and backport it to EL2.1, EL3, EL4 and now EL5 -&gt; NEVER). So whatever 
</I>&gt;<i> &gt; 'better' technical solution you propose, it wouldn't be useful until EL5 
</I>&gt;<i> &gt; is out of support.
</I>&gt;<i>
</I>&gt;<i> But unless we start to move something now, we will never have a useful
</I>&gt;<i> solution, not even after EL10 is out of support.
</I>
Again, what useful solution are we talking about ? Because having the 
repotag and disttag in the header will add anything significantly. The 
advantage is to have it in the filename for various reasons that having it 
in the header will not solve.

Sure it would be nice to have it removed from the release tag. But then 
again, there's not harm having it there either. So whatever solution is 
better, they are cosmetical, not technical nor functional.

The repotag is a functional solution.


&gt;<i> &gt; And not to be kidding, we had this discussion when EL3 was released and 
</I>&gt;<i> &gt; you know what: people also said it was not the correct solution. Do we 
</I>&gt;<i> &gt; have a correct solution today ? No. Will we have one tomorrow ? No.
</I>&gt;<i>
</I>&gt;<i> And I *hope* that EPEL will arise enough issues so that they're either
</I>&gt;<i> fix the tools and provide a working solution or they add repotags to
</I>&gt;<i> their packages.
</I>
Right, a solution that we cannot use now and not for the next 7 years :)


&gt;<i> &gt; So why postpone a solution until we have a better one ? Especially when we 
</I>&gt;<i> &gt; cannot define what a better solution would look like and we cannot fix the 
</I>&gt;<i> &gt; tools.
</I>&gt;<i>
</I>&gt;<i> Why stick to a solution if we could develop a better one?
</I>
Feel free to bring one up that is clearly better. And if possible can be 
used with older releases as well.

We do want it to be in the filename, we don't want it to be long. You'll 
end up with a repotag. Whether part of another header or part of the 
release tag is of little relevance.


&gt;<i> I fact I'm not trying to make you remove the repotags. But if you do (no
</I>&gt;<i> matter what your reasons are) we have to discuss what we will do once
</I>&gt;<i> they are gone.
</I>
At that point I do not care. I follow Fedora policy and ask people to file 
bugs against yum :)


&gt;<i> In fact I never liked repotags neither did I like disttags. Even if they
</I>&gt;<i> are a good workaround, they should have been replaced for years.
</I>
Tell me by what and for what reason ?


&gt;<i> &gt; &gt; We already had similar issues on x86_64 where you couldn't tell the
</I>&gt;<i> &gt; &gt; difference between i386 and x86_64 packages. Today yum reports every
</I>&gt;<i> &gt; &gt; package with its arch.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Right. So more information is better. How would you ideally present the 
</I>&gt;<i> &gt; repository info in the output when there's a problem. The repotag is the 
</I>&gt;<i> &gt; most preferred (read: shortest) way IMNSHO.
</I>&gt;<i>
</I>&gt;<i> Point taken. This is an issue because the vendor and dist tags contain
</I>&gt;<i> too much text. I just proposed them because I hate redundant data.
</I>
It is not redundant data if it has a clear use.

Kind regards,
--   dag wieers,  <A HREF="http://lists.repoforge.org/mailman/listinfo/users">dag at wieers.com</A>,  <A HREF="http://dag.wieers.com/">http://dag.wieers.com/</A>   --
[all I want is a warm bed and a kind word and unlimited power]

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="025366.html">[users] Dropping the repotag
</A></li>
	<LI>Next message: <A HREF="025368.html">[users] Dropping the repotag
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#25367">[ date ]</a>
              <a href="thread.html#25367">[ thread ]</a>
              <a href="subject.html#25367">[ subject ]</a>
              <a href="author.html#25367">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
