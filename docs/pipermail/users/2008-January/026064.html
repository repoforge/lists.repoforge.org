<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [users] Mail::ClamAV update now available
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Mail%3A%3AClamAV%20update%20now%20available&In-Reply-To=%3C20080118120451.M62855%40npgx.com.au%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="026063.html">
   <LINK REL="Next"  HREF="026052.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[users] Mail::ClamAV update now available</H1>
    <B>Michael Mansour</B> 
    <A HREF="mailto:users%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Busers%5D%20Mail%3A%3AClamAV%20update%20now%20available&In-Reply-To=%3C20080118120451.M62855%40npgx.com.au%3E"
       TITLE="[users] Mail::ClamAV update now available">mic at npgx.com.au
       </A><BR>
    <I>Fri Jan 18 13:17:11 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="026063.html">[users] Mail::ClamAV update now available
</A></li>
        <LI>Next message: <A HREF="026052.html">[users] Update pv please
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26064">[ date ]</a>
              <a href="thread.html#26064">[ thread ]</a>
              <a href="subject.html#26064">[ subject ]</a>
              <a href="author.html#26064">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i> Hi Dries,
</I>&gt;<i> 
</I>&gt;<i> &gt; On Tuesday 15 January 2008 02:15:20 am Michael Mansour wrote:
</I>&gt;<i> &gt; &gt; Hi Dag/Dries,
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; The update is now available:
</I>&gt;<i> &gt; &gt;
</I>&gt;<i> &gt; &gt; <A HREF="http://search.cpan.org/~sabeck/Mail-ClamAV-0.21/ClamAV.pm">http://search.cpan.org/~sabeck/Mail-ClamAV-0.21/ClamAV.pm</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Hello Michael,
</I>&gt;<i> &gt; I've updated the spec file.
</I>&gt;<i> 
</I>&gt;<i> I've checked here:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://dries.ulyssis.org/rpm/packages/perl-Mail-ClamAV/perl-Mail-">http://dries.ulyssis.org/rpm/packages/perl-Mail-ClamAV/perl-Mail-</A>
</I>&gt;<i> ClamAV-spec.html
</I>&gt;<i> 
</I>&gt;<i> and here:
</I>&gt;<i> 
</I>&gt;<i> <A HREF="http://dries.ulyssis.org/rpm/packages/perl-Mail-ClamAV/info.html">http://dries.ulyssis.org/rpm/packages/perl-Mail-ClamAV/info.html</A>
</I>&gt;<i> 
</I>&gt;<i> and can't find 0.21 anywhere??
</I>
Ok, I think your email reply referred to this:

Rpmforge Subversion URL:
<A HREF="http://svn.rpmforge.net/svn/trunk/rpms/perl-Mail-ClamAV/perl-Mail-ClamAV.spec">http://svn.rpmforge.net/svn/trunk/rpms/perl-Mail-ClamAV/perl-Mail-ClamAV.spec</A>

So I grabbed that spec and attempted compilation (on an el4.5 server).

The only errors I saw were:

cpio: Mail-ClamAV-0.21/_Inline/build/Mail/ClamAV/ClamAV.c: No such file or
directory
cpio: Mail-ClamAV-0.21/_Inline/build/Mail/ClamAV/ClamAV.xs: No such file or
directory

but the file was created:

Wrote: /usr/src/redhat/RPMS/i386/perl-Mail-ClamAV-0.21-1.i386.rpm

I installed it, then compared it to the perl-Mail-ClamAV 0.20 from rpmforge:

# rpm -ql perl-Mail-ClamAV
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/Mail
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/Mail/ClamAV.pm
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV/ClamAV.bs
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV/ClamAV.so
/usr/share/doc/perl-Mail-ClamAV-0.21
/usr/share/doc/perl-Mail-ClamAV-0.21/Changes
/usr/share/doc/perl-Mail-ClamAV-0.21/INSTALL
/usr/share/doc/perl-Mail-ClamAV-0.21/MANIFEST
/usr/share/doc/perl-Mail-ClamAV-0.21/META.yml
/usr/share/doc/perl-Mail-ClamAV-0.21/README
/usr/share/man/man3/Mail::ClamAV.3pm.gz

compared to:

# rpm -ql perl-Mail-ClamAV
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/Mail
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/Mail/ClamAV.pm
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV/ClamAV.bs
/usr/lib/perl5/vendor_perl/5.8.5/i386-linux-thread-multi/auto/Mail/ClamAV/ClamAV.so
/usr/share/doc/perl-Mail-ClamAV-0.20
/usr/share/doc/perl-Mail-ClamAV-0.20/Changes
/usr/share/doc/perl-Mail-ClamAV-0.20/INSTALL
/usr/share/doc/perl-Mail-ClamAV-0.20/MANIFEST
/usr/share/doc/perl-Mail-ClamAV-0.20/META.yml
/usr/share/doc/perl-Mail-ClamAV-0.20/README
/usr/share/man/man3/Mail::ClamAV.3pm.gz

Looks ok. I ran it through a MailScanner lint and the eicar was detected by
the clamavmodule.

I now wish to upgrade clamav and clamav-db (where I have both rpm's from
rpmforge using 0.91.2 versions), and got the following error when trying to
update to 0.92:

# yum --enablerepo=dag -y update clamav clamav-db
Loading &quot;kernel-module&quot; plugin
Setting up Update Process
Setting up repositories
Reading repository metadata in from local files
Resolving Dependencies
--&gt; Populating transaction set with selected packages. Please wait.
---&gt; Package clamav-db.i386 0:0.92-1.el4.rf set to be updated
---&gt; Package clamav.i386 0:0.92-1.el4.rf set to be updated
--&gt; Running transaction check
--&gt; Processing Dependency: libclamav.so.2 for package: perl-Mail-ClamAV
--&gt; Processing Dependency: clamav = 0.91.2-1.el4.rf for package: clamav-devel
--&gt; Restarting Dependency Resolution with new changes.
--&gt; Populating transaction set with selected packages. Please wait.
---&gt; Package clamav-devel.i386 0:0.92-1.el4.rf set to be updated
--&gt; Running transaction check
--&gt; Processing Dependency: libclamav.so.2 for package: perl-Mail-ClamAV
--&gt; Finished Dependency Resolution
Error: Missing Dependency: libclamav.so.2 is needed by package perl-Mail-ClamAV

Hmm... 

# yum whatprovides libclamav.so.2
Loading &quot;kernel-module&quot; plugin
Searching Packages:
Setting up repositories
Reading repository metadata in from local files
Importing Additional filelist information for packages
filelists.xml.gz          100% |=========================| 1.6 MB    00:00
sl-errata : ################################################## 728/728
Added 728 new packages, deleted 0 old in 46.71 seconds
filelists.xml.gz          100% |=========================| 2.0 MB    00:00
sl-base   : ################################################## 1750/1750
Added 1750 new packages, deleted 0 old in 47.42 seconds


clamav.i386                              0.91.2-1.el4.rf        installed
Matched from:
/usr/lib/libclamav.so.2
/usr/lib/libclamav.so.2.0.8
libclamav.so.2

Ok.. so does this mean that 0.92 doesn't have libclamav.so.2 ? let's see:

# rpm -qlp clamav-0.92-1.el4.rf.i386.rpm |grep lib
/usr/lib/libclamav.so.3
/usr/lib/libclamav.so.3.0.3
/usr/lib/libclamunrar.so.3
/usr/lib/libclamunrar.so.3.0.3
/usr/lib/libclamunrar_iface.so.3
/usr/lib/libclamunrar_iface.so.3.0.3

This is a problem, what's the way forward now?

Michael.

&gt;<i> Am I doing something wrong?
</I>&gt;<i> 
</I>&gt;<i> Michael.
</I>&gt;<i> 
</I>&gt;<i> &gt; kind regards,
</I>&gt;<i> &gt; Dries
</I>&gt;<i> ------- End of Original Message -------
</I>&gt;<i> 
</I>&gt;<i> _______________________________________________
</I>&gt;<i> users mailing list
</I>&gt;<i> <A HREF="http://lists.repoforge.org/mailman/listinfo/users">users at lists.rpmforge.net</A>
</I>&gt;<i> <A HREF="http://lists.rpmforge.net/mailman/listinfo/users">http://lists.rpmforge.net/mailman/listinfo/users</A>
</I>------- End of Original Message -------


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="026063.html">[users] Mail::ClamAV update now available
</A></li>
	<LI>Next message: <A HREF="026052.html">[users] Update pv please
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#26064">[ date ]</a>
              <a href="thread.html#26064">[ thread ]</a>
              <a href="subject.html#26064">[ subject ]</a>
              <a href="author.html#26064">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/users">More information about the users
mailing list</a><br>
</body></html>
