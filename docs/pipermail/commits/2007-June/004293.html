<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5494 - in trunk/rpms: . 3ddesktop BasiliskII fbreader	gnome-commander hdapsd libmrss meld micq multitail ntop	powertop python-paramiko rdiff-backup swfdec syslinux umlspeed
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5494%20-%20in%20trunk/rpms%3A%20.%203ddesktop%20BasiliskII%20fbreader%0A%09gnome-commander%20hdapsd%20libmrss%20meld%20micq%20multitail%20ntop%0A%09powertop%20python-paramiko%20rdiff-backup%20swfdec%20syslinux%20umlspeed&In-Reply-To=%3C20070611171249.36656944A99%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004292.html">
   <LINK REL="Next"  HREF="004294.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5494 - in trunk/rpms: . 3ddesktop BasiliskII fbreader	gnome-commander hdapsd libmrss meld micq multitail ntop	powertop python-paramiko rdiff-backup swfdec syslinux umlspeed</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5494%20-%20in%20trunk/rpms%3A%20.%203ddesktop%20BasiliskII%20fbreader%0A%09gnome-commander%20hdapsd%20libmrss%20meld%20micq%20multitail%20ntop%0A%09powertop%20python-paramiko%20rdiff-backup%20swfdec%20syslinux%20umlspeed&In-Reply-To=%3C20070611171249.36656944A99%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5494 - in trunk/rpms: . 3ddesktop BasiliskII fbreader	gnome-commander hdapsd libmrss meld micq multitail ntop	powertop python-paramiko rdiff-backup swfdec syslinux umlspeed">packagers at lists.rpmforge.net
       </A><BR>
    <I>Mon Jun 11 19:12:49 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004292.html">[svn] r5493 - trunk/rpms/laptop-mode-tools
</A></li>
        <LI>Next message: <A HREF="004294.html">[svn] r5495 - trunk/rpms/SDL_ttf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4293">[ date ]</a>
              <a href="thread.html#4293">[ thread ]</a>
              <a href="subject.html#4293">[ subject ]</a>
              <a href="author.html#4293">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2007-06-11 19:12:45 +0200 (Mon, 11 Jun 2007)
New Revision: 5494

Added:
   trunk/rpms/fbreader/fbreader-gtk.spec
   trunk/rpms/hdapsd/
   trunk/rpms/hdapsd/hdapsd-20070524.c
   trunk/rpms/hdapsd/hdapsd.spec
   trunk/rpms/swfdec/swfdec-0.4.spec
Modified:
   trunk/rpms/3ddesktop/3ddesktop.spec
   trunk/rpms/BasiliskII/BasiliskII.spec
   trunk/rpms/gnome-commander/gnome-commander.spec
   trunk/rpms/libmrss/libmrss.spec
   trunk/rpms/meld/meld.spec
   trunk/rpms/micq/micq.spec
   trunk/rpms/multitail/multitail.spec
   trunk/rpms/ntop/ntop.spec
   trunk/rpms/powertop/powertop.spec
   trunk/rpms/python-paramiko/python-paramiko.spec
   trunk/rpms/rdiff-backup/rdiff-backup-1.1.spec
   trunk/rpms/syslinux/syslinux.spec
   trunk/rpms/umlspeed/umlspeed.spec
Log:
Updates

Modified: trunk/rpms/3ddesktop/3ddesktop.spec
===================================================================
--- trunk/rpms/3ddesktop/3ddesktop.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/3ddesktop/3ddesktop.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -28,7 +28,7 @@
 BuildRequires: autoconf &gt;= 2.58, gcc-c++, zlib-devel
 BuildRequires: imlib2-devel, qt-devel, kdelibs-devel
 %{!?_with_modxorg:BuildRequires: XFree86-devel}
-%{?_with_modxorg:BuildRequires: libXt-devel, libXext-devel, libICE-devel, libXxf86vm-devel, libXmu-devel}
+%{?_with_modxorg:BuildRequires: libXt-devel, libXext-devel, libICE-devel, libXxf86vm-devel, libXmu-devel, libXi-devel}
 %{?el2:BuildRequires: Mesa-devel}
 Requires: imlib2
 

Modified: trunk/rpms/BasiliskII/BasiliskII.spec
===================================================================
--- trunk/rpms/BasiliskII/BasiliskII.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/BasiliskII/BasiliskII.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -3,7 +3,7 @@
 
 %define date 20060501
 %define inv_date 01052006
-%define mon_version 3.1
+%define cxmon_version 3.2
 %define desktop_vendor rpmforge
 
 %{?dist: %{expand: %%define %dist 1}}
@@ -27,15 +27,17 @@
 Summary: 68k Macintosh emulator
 Name: BasiliskII
 Version: 1.0
-Release: 0.%{date}.1
+Release: 0.%{date}.2
 License: GPL
 Group: Applications/Emulators
 URL: <A HREF="http://gwenole.beauchesne.info/projects/basilisk2/">http://gwenole.beauchesne.info/projects/basilisk2/</A>
+
 Source0: <A HREF="http://gwenole.beauchesne.info/projects/basilisk2/files/BasiliskII_src_%{inv_date">http://gwenole.beauchesne.info/projects/basilisk2/files/BasiliskII_src_%{inv_date</A>}.tar.bz2
-Source1: <A HREF="http://wwwthep.physik.uni-mainz.de/~cbauer/cxmon-%{mon_version">http://wwwthep.physik.uni-mainz.de/~cbauer/cxmon-%{mon_version</A>}.tar.gz
+Source1: <A HREF="http://cxmon.cebix.net/downloads/cxmon-%{cxmon_version">http://cxmon.cebix.net/downloads/cxmon-%{cxmon_version</A>}.tar.gz
 Source2: BasiliskII.png
 Patch: BasiliskII-1.0-nostrip.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
 BuildRequires: gcc-c++, gtk2-devel, esound-devel &gt;= 0.2.8
 BuildRequires: desktop-file-utils, readline-devel
 %{?_with_modxorg:BuildRequires: libXt-devel, libXxf86dga-devel, libXxf86vm-devel}
@@ -51,24 +53,21 @@
 --with    : sdl banks modxorg
 --without : mon
 
-
 %prep
 %setup -a 1
 %patch -p1 -b .nostrip
 
-
 %build
 pushd src/Unix
 %configure \
     --datadir=%{_sysconfdir} \
     %{?_with_banks:--enable-addressing=&quot;banks&quot;} \
     %{!?_with_banks:--enable-jit-compiler} \
-    %{!?_without_mon: --with-mon=../../cxmon-%{mon_version}/src} \
+    %{!?_without_mon: --with-mon=&quot;../../cxmon-%{cxmon_version}/src&quot;} \
     %{?_with_sdl: --enable-sdl-video --enable-sdl-audio}
 %{__make} %{?_smp_mflags}
 popd
 
-
 %install
 %{__rm} -rf %{buildroot}
 %makeinstall -C src/Unix \
@@ -95,11 +94,9 @@
 %{__install} -D -p -m 0644 %{SOURCE2} \
     %{buildroot}%{_datadir}/pixmaps/BasiliskII.png
 
-
 %clean
 %{__rm} -rf %{buildroot}
 
-
 %files
 %defattr(-, root, root, 0755)
 %doc ChangeLog COPYING README TECH TODO
@@ -112,8 +109,10 @@
 %{_datadir}/applications/%{desktop_vendor}-%{name}.desktop
 %{_mandir}/man1/BasiliskII.1*
 
-
 %changelog
+* Mon Jun 11 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0-0.20060501.2
+- Updated release of cxmon.
+
 * Wed Mar  7 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.0-0.20060501.1
 - Update to 01052006.
 - Update URL and source locations.

Added: trunk/rpms/fbreader/fbreader-gtk.spec
===================================================================
--- trunk/rpms/fbreader/fbreader-gtk.spec	                        (rev 0)
+++ trunk/rpms/fbreader/fbreader-gtk.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -0,0 +1,70 @@
+# $Id$
+# Authority: dries
+# Upstream: Nikolay Pultsin &lt;geometer$mawhrin,net&gt;
+
+%define desktop_vendor rpmforge
+
+Summary: E-book reader
+Name: fbreader
+Version: 0.8.4
+Release: 1
+License: GPL
+Group: Applications/Multimedia
+URL: <A HREF="http://only.mawhrin.net/fbreader/">http://only.mawhrin.net/fbreader/</A>
+
+Source: <A HREF="http://only.mawhrin.net/fbreader/fbreader-sources-%{version">http://only.mawhrin.net/fbreader/fbreader-sources-%{version</A>}.tgz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+BuildRequires: gcc-c++, enca-devel, gtk2-devel
+
+%description
+FBReader is an e-book reader for Linux PDAs and desktop computers.
+FBReader supports several e-book formats: plucker, palmdoc, zTXT, 
+HTML, fb2, and plain text.
+
+%prep
+%setup
+
+%build
+%{__make} %{?_smp_mflags} EXTERNALINCLUDE=&quot;-I${QTDIR}/include&quot; MOC=&quot;moc&quot; UILIBS=&quot;-L${QTDIR}/lib -lqt-mt&quot; TARGET_ARCH=&quot;desktop&quot; UI_TYPE=&quot;qt&quot; INSTALLDIR=&quot;%{_prefix}&quot; LIBDIR=&quot;%{_libdir}&quot;
+
+%install
+%{__rm} -rf %{buildroot}
+%{__make} install DESTDIR=&quot;%{buildroot}&quot; INSTALLDIR=&quot;%{_prefix}&quot; LIBDIR=&quot;%{_libdir}&quot;
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files
+%defattr(-, root, root, 0755)
+%doc fbreader/LICENSE
+%{_bindir}/FBReader
+%{_datadir}/FBReader/
+%{_libdir}/libzlibrary-gtk.so.*
+#%{_libdir}/libzlibrary-qt.so.*
+%{_datadir}/applications/FBReader.desktop
+%{_datadir}/pixmaps/FBReader.png
+%{_datadir}/pixmaps/FBReader/
+%{_datadir}/zlibrary/
+
+%changelog
+* Thu Jun 07 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.8.4-1
+- Updated to release 0.8.4.
+
+* Wed May 09 2007 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.8.3-1
+- Updated to release 0.8.3.
+
+* Mon Apr 16 2007 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.8.2-1
+- Updated to release 0.8.2.
+
+* Fri May 26 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.7.4-1
+- Updated to release 0.7.4.
+
+* Sun Mar 26 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.7.3-1
+- Updated to release 0.7.3.
+
+* Fri Feb 17 2006 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.7.2-1
+- Updated to release 0.7.2.
+
+* Wed Dec 07 2005 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 0.7.1-0.b
+- Initial package.


Property changes on: trunk/rpms/fbreader/fbreader-gtk.spec
___________________________________________________________________
Name: svn:keywords
   + Id Revision
Name: svn:eol-style
   + native

Modified: trunk/rpms/gnome-commander/gnome-commander.spec
===================================================================
--- trunk/rpms/gnome-commander/gnome-commander.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/gnome-commander/gnome-commander.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -3,7 +3,7 @@
 
 Summary: File manager for the GNOME desktop
 Name: gnome-commander
-Version: 1.2.2
+Version: 1.2.4
 Release: 1
 License: GPL
 Group: Applications/File
@@ -65,5 +65,8 @@
 %{_datadir}/pixmaps/gnome-commander.png
 
 %changelog
+* Sun Jun 10 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; 1.2.4-1
+- Updated to release 1.2.4.
+
 * Mon Dec 11 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; 1.2.2-1
 - Initial package. (using DAR)

Added: trunk/rpms/hdapsd/hdapsd-20070524.c
===================================================================
--- trunk/rpms/hdapsd/hdapsd-20070524.c	                        (rev 0)
+++ trunk/rpms/hdapsd/hdapsd-20070524.c	2007-06-11 17:12:45 UTC (rev 5494)
@@ -0,0 +1,575 @@
+/*
+ * hdapsd.c - Read from the HDAPS (HardDrive Active Protection System)
+ *            and protect the drive if motion over threshold...
+ *
+ *            Derived from pivot.c by Robert Love.
+ *
+ * Copyright (C) 2005-2007 Jon Escombe &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">lists at dresco.co.uk</A>&gt;
+ *                         Robert Love &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">rml at novell.com</A>&gt;
+ *                         Shem Multinymous &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">multinymous at gmail.com</A>&gt;
+ *
+ * &quot;Why does that kid keep dropping his laptop?&quot;
+ *
+ * This program is free software; you can redistribute it and/or modify
+ * it under the terms of the GNU General Public License as published by
+ * the Free Software Foundation; either version 2 of the License, or
+ * (at your option) any later version.
+ *
+ * This program is distributed in the hope that it will be useful,
+ * but WITHOUT ANY WARRANTY; without even the implied warranty of
+ * MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
+ * GNU General Public License for more details.
+ *
+ * You should have received a copy of the GNU General Public License
+ * along with this program; if not, write to the Free Software
+ * Foundation, Inc., 51 Franklin St, Fifth Floor, Boston, MA  02110-1301 USA
+ */
+
+#include &lt;fcntl.h&gt;
+#include &lt;stdio.h&gt;
+#include &lt;stdlib.h&gt;
+#include &lt;unistd.h&gt;
+#include &lt;string.h&gt;
+#include &lt;time.h&gt;
+#include &lt;signal.h&gt;
+#include &lt;errno.h&gt;
+#include &lt;ctype.h&gt;
+#include &lt;sys/mman.h&gt;
+#include &lt;sys/time.h&gt;
+#include &lt;getopt.h&gt;
+
+#define PID_FILE                &quot;/var/run/hdapsd.pid&quot;
+#define SYSFS_POSITION_FILE	    &quot;/sys/devices/platform/hdaps/position&quot;
+#define MOUSE_ACTIVITY_FILE     &quot;/sys/devices/platform/hdaps/keyboard_activity&quot;
+#define KEYBD_ACTIVITY_FILE     &quot;/sys/devices/platform/hdaps/mouse_activity&quot;
+#define BUF_LEN                 32
+
+#define FREEZE_SECONDS          1    /* period to freeze disk */
+#define REFREEZE_SECONDS        0.1  /* period after which to re-freeze disk */
+#define FREEZE_EXTRA_SECONDS    4    /* additional timeout for kernel timer */
+#define FREQ_HZ                 50   /* sampling frequency */
+#define SIGUSR1_SLEEP_SEC       8    /* how long to sleep upon SIGUSR1 */
+
+/* Magic threshold tweak factors, determined experimentally to make a
+ * threshold of 10-20 behave reasonably.
+ */
+#define VELOC_ADJUST            30.0
+#define ACCEL_ADJUST            (VELOC_ADJUST * 60)
+#define AVG_VELOC_ADJUST        3.0
+
+/* History depth for velocity average, in seconds */
+#define AVG_DEPTH_SEC           0.3
+
+/* Parameters for adaptive threshold */
+#define RECENT_PARK_SEC        3.0    /* How recent is &quot;recently parked&quot;? */
+#define THRESH_ADAPT_SEC       1.0    /* How often to (potentially) change
+                                       * the adaptive threshold?           */
+#define THRESH_INCREASE_FACTOR 1.1    /* Increase factor when recently
+                                       * parked but user is typing      */
+#define THRESH_DECREASE_FACTOR 0.9985 /* Decrease factor when not recently
+                                       * parked, per THRESH_ADAPT_SEC sec. */
+#define NEAR_THRESH_FACTOR     0.8    /* Fraction of threshold considered
+                                       * being near the threshold.       */
+
+/* Threshold for *continued* parking, as fraction of normal threshold */
+#define PARKED_THRESH_FACTOR   NEAR_THRESH_FACTOR /* &gt;= NEAR_THRESH_FACTOR */
+
+static int verbose = 0;
+static int pause_now = 0;
+
+char pid_file[BUF_LEN] = &quot;&quot;;
+
+/*
+ * slurp_file - read the content of a file (up to BUF_LEN-1) into a string.
+ *
+ * We open and close the file on every invocation, which is lame but due to
+ * several features of sysfs files:
+ *
+ *	(a) Sysfs files are seekable.
+ *	(b) Seeking to zero and then rereading does not seem to work.
+ *
+ * If I were king--and I will be one day--I would have made sysfs files
+ * nonseekable and only able to return full-size reads.
+ */
+static int slurp_file(const char* filename, char* buf)
+{
+	int ret;
+	int fd = open (filename, O_RDONLY);
+	if (fd &lt; 0) {
+		fprintf(stderr, &quot;open(%s): %s\n&quot;, filename, strerror(errno));
+		return fd;
+	}	
+
+	ret = read (fd, buf, BUF_LEN-1);
+	if (ret &lt; 0) {
+		fprintf(stderr, &quot;read(%s): %s\n&quot;, filename, strerror(errno));
+	} else {
+		buf[ret] = 0; /* null-terminate so we can parse safely */
+	ret = 0;
+	}
+
+	if (close (fd))
+		fprintf(stderr, &quot;close(%s): %s\n&quot;, filename, strerror(errno));
+
+	return ret;
+}
+
+/*
+ * read_position() - read the (x,y) position pair from hdaps.
+ */
+static int read_position (int *x, int *y)
+{
+	char buf[BUF_LEN];
+	int ret;
+	if ((ret = slurp_file(SYSFS_POSITION_FILE, buf)))
+		return ret;
+	return (sscanf (buf, &quot;(%d,%d)\n&quot;, x, y) != 2);
+}
+
+/*
+ * read_int() - read an integer from a file
+ */
+static int read_int (const char* filename)
+{
+	char buf[BUF_LEN];
+	int ret;
+	if ((ret = slurp_file(filename, buf)))
+		return ret;
+	if (sscanf (buf, &quot;%d\n&quot;, &amp;ret) != 1)
+		return -EIO;
+	return ret;
+}
+
+/*
+ * get_km_activity() - returns 1 if there is keyboard or mouse activity
+ */
+static int get_km_activity()
+{
+	if (read_int(MOUSE_ACTIVITY_FILE)==1)
+		return 1;
+	if (read_int(KEYBD_ACTIVITY_FILE)==1)
+		return 1;
+	return 0;
+}
+
+/*
+ * write_protect() - park/unpark
+ */
+static int write_protect (const char *path, int val)
+{
+	int fd, ret;
+	char buf[BUF_LEN];
+
+	snprintf(buf, BUF_LEN, &quot;%d&quot;, val);
+
+	fd = open (path, O_WRONLY);
+	if (fd &lt; 0) {
+		perror (&quot;open&quot;);
+		return fd;
+	}	
+
+	ret = write (fd, buf, strlen(buf));
+
+	if (ret &lt; 0) {
+		perror (&quot;write&quot;);
+		goto out;
+	}
+	ret = 0;
+
+out:
+	if (close (fd))
+		perror (&quot;close&quot;);
+
+	return ret;
+}
+
+double get_utime (void)
+{
+	struct timeval tv;
+	int ret = gettimeofday(&amp;tv, NULL);
+	if (ret) {
+		perror(&quot;gettimeofday&quot;);
+		exit(1);
+	}
+	return tv.tv_sec + tv.tv_usec/1000000.0;
+}
+
+/* Handler for SIGUSR1, sleeps for a few seconds. Useful when suspending laptop. */
+void SIGUSR1_handler(int sig)
+{
+	signal(SIGUSR1, SIGUSR1_handler);
+	pause_now=1;
+}
+
+/* Handler for SIGTERM, deletes the pidfile and exits. */
+void SIGTERM_handler(int sig)
+{
+	signal(SIGTERM, SIGTERM_handler);
+	unlink(pid_file);
+	exit(0);
+}
+
+/*
+ * usage() - display usage instructions and exit 
+ */
+void usage()
+{
+	printf(&quot;Usage: hdapsd [OPTIONS]\n&quot;);
+	printf(&quot;\n&quot;);
+	printf(&quot;Required options:\n&quot;);
+	printf(&quot;   -d --device=&lt;device&gt;              &lt;device&gt; is likely to be hda or sda.\n&quot;);
+	printf(&quot;   -s --sensitivity=&lt;sensitivity&gt;    A suggested starting &lt;sensitivity&gt; is 15.\n&quot;);
+	printf(&quot;Additional options:\n&quot;);
+	printf(&quot;   -a --adaptive                     Adaptive threshold (automatic\n&quot;);
+	printf(&quot;                                     increase when the built-in\n&quot;);
+	printf(&quot;                                     keyboard/mouse are used).\n&quot;);
+	printf(&quot;   -v --verbose                      Get verbose statistics.\n&quot;);
+	printf(&quot;   -b --background                   Run the process in the background.\n&quot;);
+	printf(&quot;   -p --pidfile[=&lt;pidfile&gt;]          Create a pid file when running\n&quot;);
+	printf(&quot;                                     in background.\n&quot;);
+	printf(&quot;                                     If &lt;pidfile&gt; is not specified,\n&quot;);
+	printf(&quot;                                     it's set to %s.\n&quot;, PID_FILE);
+	printf(&quot;\n&quot;);
+	printf(&quot;You can send SIGUSR1 to deactivate hdapsd for %d seconds.\n&quot;,
+		SIGUSR1_SLEEP_SEC);
+	printf(&quot;\n&quot;);
+	exit(1);
+}
+
+/*
+ * check_thresh() - compare a value to the threshold
+ */
+void check_thresh(double val_sqr, double thresh, int* above, int* near,
+                 char* reason_out, char reason_mark)
+{
+	if (val_sqr &gt; thresh*thresh*NEAR_THRESH_FACTOR*NEAR_THRESH_FACTOR) {
+		*near = 1;
+		*reason_out = tolower(reason_mark);
+	}
+	if (val_sqr &gt; thresh*thresh) {
+		*above = 1;
+		*reason_out = toupper(reason_mark);
+	}
+}
+
+/*
+ * analyze() - make a decision on whether to park given present readouts
+ *             (remembers some past data in local static variables).
+ * Computes and checks 3 values:
+ *   velocity:     current position - prev position / time delta
+ *   acceleration: current velocity - prev velocity / time delta
+ *   average velocity: exponentially decaying average of velocity,
+ *                     weighed by time delta.
+ * The velocity and acceleration tests respond quickly to short sharp shocks,
+ * while the average velocity test catches long, smooth movements (and
+ * averages out measurement noise).
+ * The adaptive threshold, if enabled, increases when (built-in) keyboard or
+ * mouse activity happens shortly after some value was above or near the
+ * adaptive threshold. The adaptive threshold slowly decreases back to the
+ * base threshold when no value approaches it.
+ */
+
+int analyze(int x, int y, double unow, double base_threshold, 
+            int adaptive, int parked) 
+{
+	static int x_last = 0, y_last = 0;
+	static double unow_last = 0, x_veloc_last = 0, y_veloc_last = 0;
+	static double x_avg_veloc = 0, y_avg_veloc = 0;
+	static int history = 0; /* how many recent valid samples? */
+	static double adaptive_threshold = -1; /* current adaptive thresh */
+	static int last_thresh_change = 0; /* last adaptive thresh change */
+	static int last_near_thresh = 0;      /* last time we near thresh */
+	static int last_km_activity; /* last time kbd/mouse activity seen */
+
+	double udelta, x_delta, y_delta, x_veloc, y_veloc, x_accel, y_accel;
+	double veloc_sqr, accel_sqr, avg_veloc_sqr;
+	double exp_weight;
+	double threshold; /* transient threshold for this iteration */
+	char reason[3];
+	int recently_near_thresh;
+	int above=0, near=0; /* above threshold, near threshold */
+
+	/* Adaptive threshold adjustment  */
+	if (adaptive_threshold&lt;0) /* first invocation */
+		adaptive_threshold = base_threshold;
+	recently_near_thresh = unow &lt; last_near_thresh + RECENT_PARK_SEC;
+ 	if (adaptive &amp;&amp; recently_near_thresh &amp;&amp; get_km_activity())
+		last_km_activity = unow;
+	if (adaptive &amp;&amp; unow &gt; last_thresh_change + THRESH_ADAPT_SEC) {
+		if (recently_near_thresh) {
+			if (last_km_activity &gt; last_near_thresh &amp;&amp;
+			    last_km_activity &gt; last_thresh_change) { 
+				/* Near threshold and k/m activity */
+				adaptive_threshold *= THRESH_INCREASE_FACTOR;
+				last_thresh_change = unow;
+			}
+		} else {
+			/* Recently never near threshold */
+			adaptive_threshold *= THRESH_DECREASE_FACTOR;
+			if (adaptive_threshold &lt; base_threshold)
+				adaptive_threshold = base_threshold;
+			last_thresh_change = unow;
+		}
+	}
+	
+	/* compute deltas */
+	udelta = unow - unow_last;
+	x_delta = x - x_last;
+	y_delta = y - y_last;
+
+	/* compute velocity */
+	x_veloc = x_delta/udelta;
+	y_veloc = y_delta/udelta;
+	veloc_sqr = x_veloc*x_veloc + y_veloc*y_veloc;
+
+	/* compute acceleration */
+	x_accel = (x_veloc - x_veloc_last)/udelta;
+	y_accel = (y_veloc - y_veloc_last)/udelta;
+	accel_sqr = x_accel*x_accel + y_accel*y_accel;
+
+	/* compute exponentially-decaying velocity average */
+	exp_weight = udelta/AVG_DEPTH_SEC; /* weight of this sample */
+	exp_weight = exp_weight/(1+exp_weight); /* softly clamped to 1 */
+	x_avg_veloc = exp_weight*x_veloc + (1-exp_weight)*x_avg_veloc;
+	y_avg_veloc = exp_weight*y_veloc + (1-exp_weight)*y_avg_veloc;
+	avg_veloc_sqr = x_avg_veloc*x_avg_veloc + y_avg_veloc*y_avg_veloc;
+
+	threshold = adaptive_threshold;
+	if (parked) /* when parked, be reluctant to unpark */
+		threshold *= PARKED_THRESH_FACTOR;
+
+	/* Threshold test (uses Pythagoras's theorem) */
+	strcpy(reason, &quot;   &quot;);
+	
+	check_thresh(veloc_sqr, threshold*VELOC_ADJUST,
+	             &amp;above, &amp;near, reason+0, 'V');
+	check_thresh(accel_sqr, threshold*ACCEL_ADJUST,
+	             &amp;above, &amp;near, reason+1, 'A');
+	check_thresh(avg_veloc_sqr, threshold*AVG_VELOC_ADJUST,
+	             &amp;above, &amp;near, reason+2, 'X');
+
+	if (verbose) {
+		printf(&quot;dt=%5.3f  &quot;
+		       &quot;dpos=(%3g,%3g)  &quot;
+		       &quot;vel=(%6.1f,%6.1f)*%g  &quot;
+		       &quot;acc=(%6.1f,%6.1f)*%g  &quot;
+		       &quot;avg_vel=(%6.1f,%6.1f)*%g  &quot;
+		       &quot;thr=%.1f  &quot;
+		       &quot;%s\n&quot;,
+		       udelta,
+		       x_delta, y_delta,
+		       x_veloc/VELOC_ADJUST,
+		       y_veloc/VELOC_ADJUST,
+		       VELOC_ADJUST*1.0,
+		       x_accel/ACCEL_ADJUST,
+		       y_accel/ACCEL_ADJUST,
+		       ACCEL_ADJUST*1.0,
+		       x_avg_veloc/AVG_VELOC_ADJUST,
+		       y_avg_veloc/AVG_VELOC_ADJUST,
+		       AVG_VELOC_ADJUST*1.0,
+		       threshold,
+		       reason);
+	}
+
+	if (udelta&gt;1.0) { /* Too much time since last (resume from suspend?) */
+		history = 0;
+		x_avg_veloc = y_avg_veloc = 0;
+	}
+
+	if (history&lt;2) { /* Not enough data for meaningful result */
+		above = 0;
+		near = 0;
+		++history;
+	}
+
+	if (near)
+		last_near_thresh = unow;
+
+	x_last = x;
+	y_last = y;
+	x_veloc_last = x_veloc;
+	y_veloc_last = y_veloc;
+	unow_last = unow;
+
+	return above;
+}
+
+/*
+ * main() - loop forever, reading the hdaps values and 
+ *          parking/unparking as necessary
+ */
+int main (int argc, char** argv)
+{
+	int c, park_now;
+	int x, y;
+	int fd, i, ret, threshold = 0, background = 0, adaptive=0,
+	  pidfile = 0, parked = 0;
+	char protect_file[BUF_LEN] = &quot;&quot;;
+	double unow, parked_utime = 0;
+	time_t now;
+
+	for (;;) {
+
+		struct option longopts[] =
+		{
+			{&quot;device&quot;, required_argument, NULL, 'd'},
+			{&quot;sensitivity&quot;, required_argument, NULL, 's'},
+			{&quot;adaptive&quot;, no_argument, NULL, 'a'},
+			{&quot;verbose&quot;, no_argument, NULL, 'v'},
+			{&quot;background&quot;, no_argument, NULL, 'b'},
+			{&quot;pidfile&quot;, optional_argument, NULL, 'p'},
+			{NULL, 0, NULL, 0}
+		};
+
+		c = getopt_long(argc, argv, &quot;d:s:vbap::&quot;, longopts, NULL);
+		if (c &lt; 0)
+			break;
+		switch (c) {
+			case 'd':
+				snprintf(protect_file, BUF_LEN,
+					 &quot;/sys/block/%s/queue/protect&quot;, optarg);
+				break;
+			case 's':
+				threshold = atoi(optarg);
+				break;
+			case 'b':
+				background = 1;
+				break;
+			case 'a':
+				adaptive = 1;
+				break;
+			case 'v':
+				verbose = 1;
+				break;
+			case 'p':
+				pidfile = 1;
+				if (optarg == NULL) {
+					snprintf(pid_file, BUF_LEN, &quot;%s&quot;, PID_FILE);
+				} else {
+					snprintf(pid_file, BUF_LEN, &quot;%s&quot;, optarg);
+				}
+				break;
+			default:
+				usage();
+				break;
+		}
+	}
+
+	if (!threshold || !strlen(protect_file))
+		usage(argv);
+
+	if (background) {
+		verbose = 0;
+		if (pidfile) {
+			fd = open (pid_file, O_WRONLY | O_CREAT, 0644);
+			if (fd &lt; 0) {
+				perror (&quot;open(pid_file)&quot;);
+				return 1;
+			}
+		}
+		daemon(0,0);
+		if (pidfile) {
+			char buf[BUF_LEN];
+			snprintf (buf, BUF_LEN, &quot;%d\n&quot;, getpid());
+			ret = write (fd, buf, strlen(buf));
+			if (ret &lt; 0) {
+				perror (&quot;write(pid_file)&quot;);
+				return 1;
+			}
+			if (close (fd)) {
+				perror (&quot;close(pid_file)&quot;);
+				return 1;
+			}
+		}
+	}
+
+	mlockall(MCL_FUTURE);
+
+	if (verbose) {
+		printf(&quot;protect_file: %s\n&quot;, protect_file);
+		printf(&quot;threshold: %i\n&quot;, threshold);
+	}
+
+	/* check the protect attribute exists */
+	/* wait for it if it's not there (in case the attribute hasn't been created yet) */
+	fd = open (protect_file, O_RDWR);
+	if (background)
+		for (i=0; fd &lt; 0 &amp;&amp; i &lt; 100; ++i) {
+			usleep (100000);	/* 10 Hz */
+			fd = open (protect_file, O_RDWR);
+		}
+	if (fd &lt; 0) {
+		perror (&quot;open(protect_file)&quot;);
+		return 1;
+	}
+	close (fd);
+
+	/* see if we can read the sensor */
+	/* wait for it if it's not there (in case the attribute hasn't been created yet) */
+	ret = read_position (&amp;x, &amp;y);
+	if (background)
+		for (i=0; ret &amp;&amp; i &lt; 100; ++i) {
+			usleep (100000);	/* 10 Hz */
+			ret = read_position (&amp;x, &amp;y);
+		}
+	if (ret)
+		return 1;
+
+	signal(SIGUSR1, SIGUSR1_handler);
+
+	if (background &amp;&amp; pidfile) {
+		signal(SIGTERM, SIGTERM_handler);
+	}
+
+	while (1) {
+		usleep (1000000/FREQ_HZ);
+
+		ret = read_position (&amp;x, &amp;y);
+		if (ret)
+			continue;
+
+		now = time((time_t *)NULL); /* sec */
+		unow = get_utime(); /* microsec */
+
+		park_now = analyze(x, y, unow, threshold, adaptive, parked);
+
+		if (park_now &amp;&amp; !pause_now) {
+			if (!parked || unow&gt;parked_utime+REFREEZE_SECONDS) {
+				/* Not frozen or freeze about to expire */
+				write_protect(protect_file,
+				              FREEZE_SECONDS+FREEZE_EXTRA_SECONDS);
+				/* Write protect before any output (xterm, or 
+				 * whatever else is handling our stdout, may be 
+				 * swapped out).
+				*/
+				if (!parked)
+					printf(&quot;%.24s: parking\n&quot;, ctime(&amp;now));
+				parked = 1;
+				parked_utime = unow;
+			} 
+		} else {
+			if (parked &amp;&amp;
+			    (pause_now || unow&gt;parked_utime+FREEZE_SECONDS)) {
+				/* Sanity check */
+				if (!read_int(protect_file))
+					printf(&quot;\nError! Not parked when we &quot;
+					       &quot;thought we were... (paged out &quot;
+				               &quot;and timer expired?)\n&quot;);
+				/* Freeze has expired */
+				write_protect(protect_file, 0); /* unprotect */
+				parked = 0;
+				printf(&quot;%.24s: un-parking\n&quot;, ctime(&amp;now));
+			}
+			while (pause_now) {
+				pause_now=0;
+				printf(&quot;%.24s: pausing for %d seconds\n&quot;, 
+				       ctime(&amp;now), SIGUSR1_SLEEP_SEC);
+				sleep(SIGUSR1_SLEEP_SEC);
+			}
+		}
+
+	}
+
+	munlockall();
+	return ret;
+}

Added: trunk/rpms/hdapsd/hdapsd.spec
===================================================================
--- trunk/rpms/hdapsd/hdapsd.spec	                        (rev 0)
+++ trunk/rpms/hdapsd/hdapsd.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -0,0 +1,41 @@
+# $Id$
+# Authority: dag
+
+Summary: HDAPS (Hard Disk Active Protection System) daemon
+Name: hdapsd
+%define real_version 20070524
+Version: 0.0
+Release: 0.20070524
+License: GPL
+Group: System Environment/Kernel
+URL: <A HREF="http://www.zen24593.zen.co.uk/hdaps/">http://www.zen24593.zen.co.uk/hdaps/</A>
+
+Source0: <A HREF="http://www.zen24593.zen.co.uk/hdaps/hdapsd-20070524.c">http://www.zen24593.zen.co.uk/hdaps/hdapsd-20070524.c</A>
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+Requires: kernel &gt;= 2.6.18
+
+%description
+hdapsd is a daemon that reads from the HDAPS (Hard Disk Active Protection
+System) driver and protects the hard disk from sudden movements that may
+harm it.
+
+%prep
+%setup -T -c %{name}-%{version}
+
+%build
+%{__cc} %{optflags} -o hdapsd %{SOURCE0}
+
+%install
+%{__install} -Dp -m0755 hdapsd %{buildroot}%{_sbindir}/hdapsd
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%files
+%defattr(-, root, root, 0755)
+%{_sbindir}/hdapsd
+
+%changelog
+* Mon Jun 11 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.0-0.20070524
+- Initial package. (using DAR)


Property changes on: trunk/rpms/hdapsd/hdapsd.spec
___________________________________________________________________
Name: svn:keywords
   + Id Revision
Name: svn:eol-style
   + native

Modified: trunk/rpms/libmrss/libmrss.spec
===================================================================
--- trunk/rpms/libmrss/libmrss.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/libmrss/libmrss.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -4,7 +4,7 @@
 
 Summary: Library for parsing, writing and creating RSS files or streams
 Name: libmrss
-Version: 0.17
+Version: 0.17.3
 Release: 1
 License: GPL
 Group: Development/Libraries
@@ -54,11 +54,14 @@
 %defattr(-, root, root, 0755)
 %{_includedir}/mrss.h
 %{_libdir}/libmrss.a
-%exclude %{_libdir}/libmrss.la
 %{_libdir}/libmrss.so
 %{_libdir}/pkgconfig/mrss.pc
+%exclude %{_libdir}/libmrss.la
 
 %changelog
+* Fri Jun 08 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.17.3-1
+- Updated to release 0.17.3.
+
 * Sun Mar 18 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.17-1
 - Updated to release 0.17.
 

Modified: trunk/rpms/meld/meld.spec
===================================================================
--- trunk/rpms/meld/meld.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/meld/meld.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -6,7 +6,7 @@
 
 Summary: Graphical visual diff and merge tool
 Name: meld
-Version: 1.1.4
+Version: 1.1.5
 Release: 1
 License: GPL
 Group: Applications/Text
@@ -94,6 +94,9 @@
 %{_datadir}/pixmaps/meld.png
 
 %changelog
+* Sun Jun 10 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.5-1
+- Updated to release 1.1.5.
+
 * Mon Jun 12 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.4-1
 - Updated to release 1.1.4.
 

Modified: trunk/rpms/micq/micq.spec
===================================================================
--- trunk/rpms/micq/micq.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/micq/micq.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -12,7 +12,7 @@
 
 Summary: Clone of the Mirabilis ICQ online messaging program
 Name: micq
-Version: 0.5.4
+Version: 0.5.4.1
 Release: 1
 Group: Applications/Internet
 License: GPL
@@ -64,6 +64,9 @@
 %{_datadir}/micq/
 
 %changelog
+* Mon Jun 11 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.5.4.1-1
+- Updated to release 0.5.4.1.
+
 * Wed Jun 06 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.5.4-1
 - Updated to release 0.5.4.
 

Modified: trunk/rpms/multitail/multitail.spec
===================================================================
--- trunk/rpms/multitail/multitail.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/multitail/multitail.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -67,7 +67,7 @@
 %{_sysconfdir}/multitail/convert-simple.pl
 
 %changelog
-* Sun Jun 10 2007 Dries Verachtert &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dries at ulyssis.org</A>&gt; - 5.0.5-1
+* Sat Jun 09 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 5.0.5-1
 - Updated to release 5.0.5.
 
 * Sat Jun 02 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 5.0.4-1

Modified: trunk/rpms/ntop/ntop.spec
===================================================================
--- trunk/rpms/ntop/ntop.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/ntop/ntop.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -17,13 +17,13 @@
 
 Summary: Network traffic probe that shows the network usage
 Name: ntop
-Version: 3.2
-Release: 2
+Version: 3.3
+Release: 1
 License: GPL
 Group: Applications/System
 URL: <A HREF="http://www.ntop.org/">http://www.ntop.org/</A>
 
-Source: <A HREF="http://dl.sf.net/ntop/ntop-%{version">http://dl.sf.net/ntop/ntop-%{version</A>}.tgz
+Source: <A HREF="http://dl.sf.net/ntop/ntop-%{version">http://dl.sf.net/ntop/ntop-%{version</A>}.tar.gz
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 BuildRequires: openssl-devel, gdbm-devel, libpcap, rrdtool-devel, zlib-devel, glib-devel
@@ -283,6 +283,9 @@
 #%exclude %{_libdir}/plugins/
 
 %changelog
+* Sun Jun 10 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 3.3-1
+- Updated to release 3.3.
+
 * Tue Feb 20 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 3.2-2
 - Enabled tcp_wrappers functionality.
 

Modified: trunk/rpms/powertop/powertop.spec
===================================================================
--- trunk/rpms/powertop/powertop.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/powertop/powertop.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -4,7 +4,7 @@
 
 Summary: Tool that helps you find what software is using the most power
 Name: powertop
-Version: 1.5
+Version: 1.6
 Release: 1
 License: GPL
 Group: Applications/System
@@ -46,6 +46,9 @@
 %{_bindir}/powertop
 
 %changelog
+* Sun Jun 10 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.6-1
+- Updated to release 1.6.
+
 * Mon May 28 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5-1
 - Updated to release 1.5.
 

Modified: trunk/rpms/python-paramiko/python-paramiko.spec
===================================================================
--- trunk/rpms/python-paramiko/python-paramiko.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/python-paramiko/python-paramiko.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -7,7 +7,7 @@
 
 Summary: SSH2 protocol for Python
 Name: python-paramiko
-Version: 1.7
+Version: 1.7.1
 Release: 1
 License: GPL
 Group: System Environment/Libraries
@@ -54,6 +54,9 @@
 %ghost %{python_sitelib}/paramiko/*.pyo
 
 %changelog
+* Mon Jun 11 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.7.1-1
+- Updated to release 1.7.1.
+
 * Mon Feb 19 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.7-1
 - Updated to release 1.7.
 

Modified: trunk/rpms/rdiff-backup/rdiff-backup-1.1.spec
===================================================================
--- trunk/rpms/rdiff-backup/rdiff-backup-1.1.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/rdiff-backup/rdiff-backup-1.1.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -10,7 +10,7 @@
 
 Summary: Convenient and transparent local/remote incremental mirror/backup
 Name: rdiff-backup
-Version: 1.1.7
+Version: 1.1.10
 Release: 1
 License: GPL
 Group: Applications/Archiving
@@ -66,6 +66,9 @@
 %{python_sitearch}/rdiff_backup/*.so
 
 %changelog
+* Mon Jun 11 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.10-1
+- Updated to release 1.1.10 (development).
+
 * Mon Dec 18 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.7-1
 - Updated to release 1.1.7 (development).
 

Added: trunk/rpms/swfdec/swfdec-0.4.spec
===================================================================
--- trunk/rpms/swfdec/swfdec-0.4.spec	                        (rev 0)
+++ trunk/rpms/swfdec/swfdec-0.4.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -0,0 +1,190 @@
+# $Id$
+# Authority: dag
+
+%{?dist: %{expand: %%define %dist 1}}
+%{?fedora: %{expand: %%define fc%{fedora} 1}}
+
+%{!?dist: %define _without_gstreamer 1}
+%{?el5:   %define _without_gstreamer 1}
+%{?fc6:   %define _without_gstreamer 1}
+%{?fc5:   %define _without_gstreamer 1}
+%{?el3:   %define _without_gstreamer 1}
+%{?rh9:   %define _without_gstreamer 1}
+%{?rh7:   %define _without_gstreamer 1}
+%{?el2:   %define _without_gstreamer 1}
+
+%{?fc1:   %define _without_alsa 1}
+%{?el3:   %define _without_alsa 1}
+%{?rh9:   %define _without_alsa 1}
+%{?rh7:   %define _without_alsa 1}
+%{?el2:   %define _without_alsa 1}
+
+%{!?dist: %define _with_modxorg 1}
+%{?el5:   %define _with_modxorg 1}
+%{?fc6:   %define _with_modxorg 1}
+%{?fc5:   %define _with_modxorg 1}
+
+%{!?dist: %define _without_mozilla 1}
+%{?fc6:   %define _without_mozilla 1}
+%{?fc5:   %define _without_mozilla 1}
+%{?fc1:   %define _without_mozilla 1}
+
+### Can't figure out why only EL5 produces swfdec-mozilla-player
+%{?el5:%define _with_mozilla_player 1}
+
+%define mozilla seamonkey
+%{!?dist:%define mozilla firefox}
+%{?el5:%define mozilla firefox}
+%{?fc6:%define mozilla firefox}
+%{?rh9:%define mozilla mozilla}
+%{?rh7:%define mozilla mozilla}
+
+Summary: Flash animations rendering library
+Name: swfdec
+Version: 0.4.3
+Release: 1
+License: LGPL
+Group: System Environment/Libraries
+URL: <A HREF="http://swfdec.freedesktop.org/wiki/">http://swfdec.freedesktop.org/wiki/</A>
+
+Source: <A HREF="http://swfdec.freedesktop.org/download/swfdec/0.4/swfdec-%{version">http://swfdec.freedesktop.org/download/swfdec/0.4/swfdec-%{version</A>}.tar.gz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+
+BuildRequires: libart_lgpl-devel, gtk2-devel &gt;= 2.1.2
+BuildRequires: libmad-devel, SDL-devel, gdk-pixbuf-devel, gcc-c++
+BuildRequires: liboil-devel, GConf2-devel, js-devel
+BuildRequires: directfb
+%{?gimp_plugin:BuildRequires: gimp-devel &gt;= 2.0}
+#%{!?_without_mozilla:BuildRequires: %{mozilla}-devel}
+%{!?_without_gstreamer:BuildRequires: gstreamer-plugins-devel}
+%{?_with_modxorg:BuildRequires: libXt-devel}
+
+%description
+Libswfdec is a library for rendering Flash animations. Currently it
+handles mostFlash 3 animations and some Flash 4. No interactivity is
+supported yet.
+
+%package devel
+Summary: Header files, libraries and development documentation for %{name}
+Group: Development/Libraries
+Requires: %{name} = %{version}, glib2-devel, liboil-devel
+
+%description devel
+This package contains the header files, static libraries and development
+documentation for %{name}. If you like to develop programs using %{name},
+you will need to install %{name}-devel.
+
+%package -n mozilla-swfdec
+Summary: Mozilla plugin for Flash rendering
+Group: Applications/Internet
+Requires: %{name} = %{version}
+
+%description -n mozilla-swfdec
+Mozilla plugin for rendering of Flash animations based on the swfdec library.
+
+%prep
+%setup
+
+%build
+%configure \
+%{?_without_mozilla:--disable-mozilla-plugin} \
+	--enable-shared \
+%{!?_without_alsa:--with-audio=&quot;alsa&quot;}
+%{__make} %{?_smp_mflags} 
+%{__make} %{?_smp_mflags} -C player
+
+%install
+%{__rm} -rf %{buildroot}
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
+%{__make} -C player install DESTDIR=&quot;%{buildroot}&quot;
+
+%clean
+%{__rm} -rf %{buildroot}
+
+%post
+/sbin/ldconfig
+/usr/bin/update-gdk-pixbuf-loaders $(uname -i)-redhat-linux-gnu || :
+
+### Backward compatibility for gtk &lt; 2.4.13-9
+[ -x %{_bindir}/gdk-pixbuf-query-loaders ] &amp;&amp; \
+    %{_bindir}/gdk-pixbuf-query-loaders &gt; \
+        %{_sysconfdir}/gtk-2.0/gdk-pixbuf.loaders || :
+
+%postun
+/sbin/ldconfig
+/usr/bin/update-gdk-pixbuf-loaders $(uname -i)-redhat-linux-gnu || :
+
+### Backward compatibility for gtk &lt; 2.4.13-9
+[ -x %{_bindir}/gdk-pixbuf-query-loaders ] &amp;&amp; \
+    %{_bindir}/gdk-pixbuf-query-loaders &gt; \
+        %{_sysconfdir}/gtk-2.0/gdk-pixbuf.loaders || :
+
+%files
+%defattr(-, root, root, 0755)
+%doc AUTHORS COPYING README
+%{_libdir}/libswfdec*.so.*
+
+%files devel
+%defattr(-, root, root, 0755)
+%dir %{_datadir}/gtk-doc/
+%dir %{_datadir}/gtk-doc/html/
+%doc %{_datadir}/gtk-doc/html/swfdec/
+%{_includedir}/swfdec*/
+%{_libdir}/libswfdec*.a
+%exclude %{_libdir}/libswfdec*.la
+%{_libdir}/libswfdec*.so
+%{_libdir}/pkgconfig/swfdec*.pc
+
+%changelog
+* Sun Jun 10 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4.3-1
+- Updated to release 0.4.3.
+
+* Fri Mar 17 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.6-2
+- Release bump to drop the disttag number in FC5 build.
+
+* Thu Jan 19 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.6-1
+- Update to 0.3.6.
+- Add js-devel buil requirement, configure should check this.
+- Remove no longer included swf_play.
+
+* Thu Jan 12 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.5-2
+- Disable gstreamer support on FC5 (as it's for 0.8).
+- Disable mozilla plugin on FC5 (no more mozilla-config script).
+- Add modular xorg build conditional.
+
+* Wed May 25 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.5-1
+- Update to 0.3.5.
+
+* Thu May  5 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.4-2
+- Add missing glib2-devel and liboil-devel reqs in the devel package.
+
+* Sat Apr  2 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.4-1
+- Update to 0.3.4.
+- Change %%makeinstall for DESTDIR method because of the gimp plugin.
+
+* Fri Nov 26 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.3.2-2
+- Added update-gdk-pixbuf-loaders to scriptlets.
+
+* Thu Nov 25 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.2-2
+- Make scriplets never return a failure.
+
+* Wed Nov 24 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.2-1
+- Update to 0.3.2.
+
+* Tue Nov  9 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.1-1
+- Make gimp plugin conditional and build only for FC2, FC3 and YD4 (gimp2).
+
+* Fri Nov 05 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.3.1-1
+- Updated to release 0.3.1.
+
+* Wed Oct 20 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.3.0-1
+- Update to 0.3.0.
+- Added new liboil-devel and gimp2-devel dependencies.
+- Added gimp plugin... strange, it goes into 1.3 :-/
+
+* Tue Jan 20 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.2-1
+- Added missing swfdec requirement. (Alexandre Oliva)
+
+* Thu Aug 28 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.2-0
+- Initial package. (using DAR)
+


Property changes on: trunk/rpms/swfdec/swfdec-0.4.spec
___________________________________________________________________
Name: svn:keywords
   + Id Revision
Name: svn:eol-style
   + native

Modified: trunk/rpms/syslinux/syslinux.spec
===================================================================
--- trunk/rpms/syslinux/syslinux.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/syslinux/syslinux.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -8,7 +8,7 @@
 
 Summary: Kernel bootloader for FAT or ISO9660 filesystems or PXE networks
 Name: syslinux
-Version: 3.35
+Version: 3.50
 Release: 1
 License: GPL
 Group: Applications/System
@@ -61,6 +61,9 @@
 %{_libdir}/syslinux/
 
 %changelog
+* Sun Jun 10 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 3.50-1
+- Updated to release 3.50.
+
 * Mon Jan 29 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 3.35-1
 - Updated to release 3.35.
 

Modified: trunk/rpms/umlspeed/umlspeed.spec
===================================================================
--- trunk/rpms/umlspeed/umlspeed.spec	2007-06-10 12:55:47 UTC (rev 5493)
+++ trunk/rpms/umlspeed/umlspeed.spec	2007-06-11 17:12:45 UTC (rev 5494)
@@ -3,7 +3,7 @@
 
 Summary: Compiler for C-style language of UML notation
 Name: umlspeed
-Version: 0.16
+Version: 0.17
 Release: 1
 License: GPL
 Group: Development/Languages
@@ -44,6 +44,9 @@
 %{_bindir}/umlspeed
 
 %changelog
+* Sat Jun 09 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.17-1
+- Updated to release 0.17.
+
 * Wed May 23 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.16-1
 - Updated to release 0.16.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004292.html">[svn] r5493 - trunk/rpms/laptop-mode-tools
</A></li>
	<LI>Next message: <A HREF="004294.html">[svn] r5495 - trunk/rpms/SDL_ttf
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4293">[ date ]</a>
              <a href="thread.html#4293">[ thread ]</a>
              <a href="subject.html#4293">[ subject ]</a>
              <a href="author.html#4293">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
