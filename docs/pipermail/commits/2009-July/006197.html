<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r7398 - in trunk/rpms: ffmpeg k3b-extras mplayer oxine vlc	x264 xine-lib
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7398%20-%20in%20trunk/rpms%3A%20ffmpeg%20k3b-extras%20mplayer%20oxine%20vlc%0A%09x264%20xine-lib&In-Reply-To=%3C200907100222.n6A2MHr4026051%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006196.html">
   <LINK REL="Next"  HREF="006198.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r7398 - in trunk/rpms: ffmpeg k3b-extras mplayer oxine vlc	x264 xine-lib</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r7398%20-%20in%20trunk/rpms%3A%20ffmpeg%20k3b-extras%20mplayer%20oxine%20vlc%0A%09x264%20xine-lib&In-Reply-To=%3C200907100222.n6A2MHr4026051%40surya.karan.org%3E"
       TITLE="[svn] r7398 - in trunk/rpms: ffmpeg k3b-extras mplayer oxine vlc	x264 xine-lib">packagers at lists.rpmforge.net
       </A><BR>
    <I>Fri Jul 10 04:22:17 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006196.html">[svn] r7397 - trunk/rpms/perl-Crypt-CBC
</A></li>
        <LI>Next message: <A HREF="006198.html">[svn] r7399 - trunk/rpms/perl-Time-HiRes-Value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6197">[ date ]</a>
              <a href="thread.html#6197">[ thread ]</a>
              <a href="subject.html#6197">[ subject ]</a>
              <a href="author.html#6197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2009-07-10 03:22:10 +0100 (Fri, 10 Jul 2009)
New Revision: 7398

Added:
   trunk/rpms/k3b-extras/k3b-0.12.17-ffmpeg-0.5.patch
   trunk/rpms/mplayer/ffmpeg-0.4.9_p20080326-libx264.patch
   trunk/rpms/x264/x264-20090708-glibc232.patch
Modified:
   trunk/rpms/ffmpeg/ffmpeg-20070109.spec
   trunk/rpms/ffmpeg/ffmpeg.spec
   trunk/rpms/k3b-extras/k3b-extras-0.11.spec
   trunk/rpms/k3b-extras/k3b-extras.spec
   trunk/rpms/mplayer/mplayer.spec
   trunk/rpms/oxine/oxine.spec
   trunk/rpms/vlc/vlc.spec
   trunk/rpms/x264/x264.spec
   trunk/rpms/xine-lib/xine-lib.spec
Log:
Updates

Modified: trunk/rpms/ffmpeg/ffmpeg-20070109.spec
===================================================================
--- trunk/rpms/ffmpeg/ffmpeg-20070109.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/ffmpeg/ffmpeg-20070109.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -1,54 +1,48 @@
 # $Id$
-# Authority: matthias
+# Authority: dag
 
+# ExclusiveDist: el3
+
 %{?dtag: %{expand: %%define %dtag 1}}
 
 %{?el4:%define _without_texi2html 1}
-%{?fc3:%define _without_texi2html 1}
-%{?fc2:%define _without_texi2html 1}
-%{?fc1:%define _without_texi2html 1}
+%{?el3:%define _without_dts 1}
 %{?el3:%define _without_texi2html 1}
 
-%{?rh9:%define _without_texi2html 1}
-%{?rh9:%define _without_x264 1}
-
-%{?rh7:%define _without_faac 1}
-%{?rh7:%define _without_texi2html 1}
-%{?rh7:%define _without_x264 1}
-
-%{?el2:%define _without_faac 1}
-%{?el2:%define _without_texi2html 1}
-%{?el2:%define _without_vorbis 1}
-%{?el2:%define _without_x264 1}
-
 %define date 20070109
 
 Summary: Utilities and libraries to record, convert and stream audio and video
 Name: ffmpeg
 Version: 0.4.9
-Release: 0.9%{?date:.%{date}}
+Release: 0.10%{?date:.%{date}}
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://ffmpeg.org/">http://ffmpeg.org/</A>
+
 # svn checkout <A HREF="svn://svn.mplayerhq.hu/ffmpeg/trunk">svn://svn.mplayerhq.hu/ffmpeg/trunk</A> ffmpeg
 # find ffmpeg -name .svn | xargs rm -rf
 # then rename the directory and compress
 Source: ffmpeg-%{date}.tar.bz2
 Patch0: ffmpeg-20070109-gsm.patch
 Patch1: ffmpeg-20070109-faad2.patch
+Patch2: ffmpeg-0.4.9_p20080326-libx264.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: imlib2-devel, SDL-devel, freetype-devel, zlib-devel
-%{!?_without_texi2html:BuildRequires: texi2html}
-%{!?_without_lame:BuildRequires: lame-devel}
-%{!?_without_vorbis:BuildRequires: libogg-devel, libvorbis-devel}
-%{!?_without_faad:BuildRequires: faad2-devel}
+
+BuildRequires: SDL-devel
+BuildRequires: freetype-devel
+BuildRequires: imlib2-devel
+BuildRequires: zlib-devel
+%{!?_without_a52dec:BuildRequires: a52dec-devel}
+%{!?_without_dts:BuildRequires: libdca-devel}
 %{!?_without_faac:BuildRequires: faac-devel}
+%{!?_without_faad:BuildRequires: faad2-devel}
 %{!?_without_gsm:BuildRequires: gsm-devel}
-%{!?_without_xvid:BuildRequires: xvidcore-devel}
+%{!?_without_lame:BuildRequires: lame-devel}
+%{!?_without_texi2html:BuildRequires: texi2html}
+%{!?_without_vorbis:BuildRequires: libogg-devel, libvorbis-devel}
 %{!?_without_x264:BuildRequires: x264-devel}
+%{!?_without_xvid:BuildRequires: xvidcore-devel}
 %{!?_without_a52dec:Requires: a52dec}
-%{!?_without_a52dec:BuildRequires: a52dec-devel}
-%{!?_without_dts:BuildRequires: libdca-devel}
 
 %description
 FFmpeg is a very fast video and audio converter. It can also grab from a
@@ -62,21 +56,20 @@
 Available rpmbuild rebuild options :
 --without : lame vorbis faad faac gsm xvid x264 a52dec dts altivec
 
-
 %package devel
 Summary: Header files and static library for the ffmpeg codec library
 Group: Development/Libraries
 Requires: %{name} = %{version}
 Requires: imlib2-devel, SDL-devel, freetype-devel, zlib-devel, pkgconfig
-%{!?_without_lame:Requires: lame-devel}
-%{!?_without_vorbis:Requires: libogg-devel, libvorbis-devel}
-%{!?_without_faad:Requires: faad2-devel}
+%{!?_without_a52dec:Requires: a52dec-devel}
+%{!?_without_dts:Requires: libdca-devel}
 %{!?_without_faac:Requires: faac-devel}
+%{!?_without_faad:Requires: faad2-devel}
 %{!?_without_gsm:Requires: gsm-devel}
-%{!?_without_xvid:Requires: xvidcore-devel}
+%{!?_without_lame:Requires: lame-devel}
+%{!?_without_vorbis:Requires: libogg-devel, libvorbis-devel}
 %{!?_without_x264:Requires: x264-devel}
-%{!?_without_a52dec:Requires: a52dec-devel}
-%{!?_without_dts:Requires: libdca-devel}
+%{!?_without_xvid:Requires: xvidcore-devel}
 
 %description devel
 FFmpeg is a very fast video and audio converter. It can also grab from a
@@ -89,7 +82,6 @@
 
 Install this package if you want to compile apps with ffmpeg support.
 
-
 %package libpostproc
 Summary: Video postprocessing library from ffmpeg
 Group: System Environment/Libraries
@@ -108,13 +100,12 @@
 other projects such as transcode may use. Install this package if you intend
 to use MPlayer, transcode or other similar programs.
 
-
 %prep
 %setup -n ffmpeg-%{date}
 %patch0 -p1 -b .gsm
 %patch1 -p1 -b .faad2
+%patch2 -p1 -b .x264
 
-
 %build
 export CFLAGS=&quot;%{optflags}&quot;
 # We should be using --disable-opts since configure is adding some default opts
@@ -122,34 +113,34 @@
 ./configure \
     --prefix=&quot;%{_prefix}&quot; \
     --libdir=&quot;%{_libdir}&quot; \
+    --shlibdir=&quot;%{_libdir}&quot; \
     --mandir=&quot;%{_mandir}&quot; \
     --incdir=&quot;%{_includedir}/ffmpeg&quot; \
+    --disable-static \
+    --disable-strip \
 %ifarch x86_64
     --extra-cflags=&quot;-fPIC&quot; \
 %endif
-    %{!?_without_lame:   --enable-mp3lame} \
-    %{!?_without_vorbis: --enable-libogg --enable-vorbis} \
-    %{!?_without_faad:   --enable-faad} \
-    %{!?_without_faac:   --enable-faac} \
-    %{!?_without_gsm:    --enable-libgsm} \
-    %{!?_without_xvid:   --enable-xvid} \
-    %{!?_without_x264:   --enable-x264} \
-    %{!?_without_a52:    --enable-a52 --enable-a52bin} \
-    %{!?_without_dts:    --enable-dts} \
+%{!?_without_a52:--enable-a52 --enable-a52bin} \
+%{!?_without_dts:--enable-dts} \
+%{!?_without_faac:--enable-faac} \
+%{!?_without_faad:--enable-faad} \
+%{!?_without_gsm:--enable-libgsm} \
+%{!?_without_lame:--enable-mp3lame} \
+%{!?_without_vorbis:--enable-libogg --enable-vorbis} \
+%{!?_without_x264:--enable-x264} \
+%{!?_without_xvid:--enable-xvid} \
+    --enable-gpl \
     --enable-pp \
-    --enable-shared \
     --enable-pthreads \
-    --enable-gpl \
-    --disable-strip
+    --enable-shared \
+    --enable-swscaler
 %{__make} %{?_smp_mflags}
 
 
 %install
 %{__rm} -rf %{buildroot} _docs
-%makeinstall \
-    incdir=&quot;%{buildroot}%{_includedir}/ffmpeg&quot; \
-    shlibdir=&quot;%{buildroot}%{_libdir}&quot; \
-    libdir=&quot;%{buildroot}%{_libdir}&quot;
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 
 # Remove unwanted files from the included docs
 %{__cp} -a doc _docs
@@ -157,15 +148,12 @@
 
 # The &lt;postproc/postprocess.h&gt; is now at &lt;ffmpeg/postprocess.h&gt;, so provide
 # a compatibility symlink
-%{__mkdir_p} %{buildroot}%{_includedir}/postproc/
-%{__ln_s}    ../ffmpeg/postprocess.h \
-             %{buildroot}%{_includedir}/postproc/postprocess.h
+#%{__mkdir_p} %{buildroot}%{_includedir}/postproc/
+#%{__ln_s} ../ffmpeg/postprocess.h %{buildroot}%{_includedir}/postproc/postprocess.h
 
-
 %clean
 %{__rm} -rf %{buildroot}
 
-
 %post
 /sbin/ldconfig
 chcon -t textrel_shlib_t %{_libdir}/libav{codec,format,util}.so.*.*.* \
@@ -173,28 +161,37 @@
 
 %postun -p /sbin/ldconfig
 
-
 %post libpostproc -p /sbin/ldconfig
-
 %postun libpostproc -p /sbin/ldconfig
 
-
 %files
 %defattr(-, root, root, 0755)
 %doc Changelog COPYING CREDITS README
-%{_bindir}/*
-%{_libdir}/*.so.*
-%exclude %{_libdir}/libpostproc.so*
+%doc %{_mandir}/man1/ffmpeg.1*
+%doc %{_mandir}/man1/ffplay.1*
+%doc %{_mandir}/man1/ffserver.1*
+%{_bindir}/ffmpeg
+%{_bindir}/ffplay
+%{_bindir}/ffserver
+%{_libdir}/libavcodec.so.*
+%{_libdir}/libavformat.so.*
+%{_libdir}/libavutil.so.*
+%{_libdir}/libswscale.so.*
 %{_libdir}/vhook/
-%{_mandir}/man1/*
+%exclude %{_libdir}/libpostproc.so*
 
 %files devel
 %defattr(-, root, root, 0755)
 %doc _docs/*
 %{_includedir}/ffmpeg/
-%{_libdir}/*.a
-%{_libdir}/*.so
-%{_libdir}/pkgconfig/*.pc
+%{_libdir}/libavcodec.so
+%{_libdir}/libavformat.so
+%{_libdir}/libavutil.so
+%{_libdir}/libswscale.so
+%{_libdir}/pkgconfig/libavcodec.pc
+%{_libdir}/pkgconfig/libavformat.pc
+%{_libdir}/pkgconfig/libavutil.pc
+%{_libdir}/pkgconfig/libswscale.pc
 %exclude %{_libdir}/pkgconfig/libpostproc.pc
 
 %files libpostproc
@@ -203,8 +200,10 @@
 %{_libdir}/libpostproc.so*
 %{_libdir}/pkgconfig/libpostproc.pc
 
-
 %changelog
+* Thu Jul 09 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4.9-0.10.20070109
+- Rebuild against x264-0.4.20090708.
+
 * Mon Jun 04 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4.9-0.9.20070109
 - Rebuild against x264-0.4.20070529 because I missed it.
 

Modified: trunk/rpms/ffmpeg/ffmpeg.spec
===================================================================
--- trunk/rpms/ffmpeg/ffmpeg.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/ffmpeg/ffmpeg.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -1,60 +1,52 @@
 # $Id$
-# Authority: matthias
+# Authority: dag
 
 %{?dtag: %{expand: %%define %dtag 1}}
 
-%{?rh7:%define _without_faac 1}
-%{?el2:%define _without_faac 1}
+### Disabled speex support as ffmpeg needs speex 1.2 and RHEL5 ships with 1.0.5
 
+%{?el5:%define _without_gsm 1}
+%{?el5:%define _without_speex 1}
+
+%{?el4:%define _without_gsm 1}
+%{?el4:%define _without_speex 1}
+%{?el4:%define _without_texi2html 1}
 %{?el4:%define _without_theora 1}
-%{?el3:%define _without_theora 1}
-%{?rh9:%define _without_theora 1}
-%{?rh7:%define _without_theora 1}
-%{?el2:%define _without_theora 1}
+%{?el4:%define _without_v4l 1}
 
-%{?el4:%define _without_texi2html 1}
-%{?fc3:%define _without_texi2html 1}
-%{?fc2:%define _without_texi2html 1}
-%{?fc1:%define _without_texi2html 1}
+%{?el3:%define _without_gsm 1}
+%{?el3:%define _without_speex 1}
 %{?el3:%define _without_texi2html 1}
-%{?rh9:%define _without_texi2html 1}
-%{?rh7:%define _without_texi2html 1}
-%{?el2:%define _without_texi2html 1}
+%{?el3:%define _without_theora 1}
 
-%{?el2:%define _without_vorbis 1}
-
-%{?rh9:%define _without_x264 1}
-%{?rh7:%define _without_x264 1}
-%{?el2:%define _without_x264 1}
-
-%define date 20070530
-
 Summary: Utilities and libraries to record, convert and stream audio and video
 Name: ffmpeg
-Version: 0.4.9
-Release: 0.9%{?date:.%{date}}
+Version: 0.5
+Release: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://ffmpeg.org/">http://ffmpeg.org/</A>
-# svn checkout <A HREF="svn://svn.mplayerhq.hu/ffmpeg/trunk">svn://svn.mplayerhq.hu/ffmpeg/trunk</A> ffmpeg
-# find ffmpeg -name .svn | xargs rm -rf
-# then rename the directory and compress
-Source: ffmpeg-%{date}.tar.bz2
-Patch0: ffmpeg-20070530-gsm.patch
-Patch1: ffmpeg-20070530-faad2.patch
+
+Source: <A HREF="http://www.ffmpeg.org/releases/ffmpeg-%{version">http://www.ffmpeg.org/releases/ffmpeg-%{version</A>}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: imlib2-devel, SDL-devel, freetype-devel, zlib-devel
+
+BuildRequires: SDL-devel
+BuildRequires: freetype-devel
+BuildRequires: imlib2-devel
+BuildRequires: zlib-devel
+%{!?_without_a52dec:BuildRequires: a52dec-devel}
+%{!?_without_amrnb:BuildRequires: amrnb-devel}
+%{!?_without_amrwb:BuildRequires: amrwb-devel}
+#%{!?_without_vorbis:BuildRequires: libogg-devel, libvorbis-devel}
+%{!?_without_faac:BuildRequires: faac-devel}
+%{!?_without_faad:BuildRequires: faad2-devel}
+%{!?_without_gsm:BuildRequires: gsm-devel}
+%{!?_without_lame:BuildRequires: lame-devel}
 %{!?_without_texi2html:BuildRequires: texi2html}
-%{!?_without_lame:BuildRequires: lame-devel}
-%{!?_without_vorbis:BuildRequires: libogg-devel, libvorbis-devel}
 %{!?_without_theora:BuildRequires: libogg-devel, libtheora-devel}
-%{!?_without_faad:BuildRequires: faad2-devel}
-%{!?_without_faac:BuildRequires: faac-devel}
-%{!?_without_gsm:BuildRequires: gsm-devel}
+%{!?_without_x264:BuildRequires: x264-devel}
 %{!?_without_xvid:BuildRequires: xvidcore-devel}
-%{!?_without_x264:BuildRequires: x264-devel}
 %{!?_without_a52dec:Requires: a52dec}
-%{!?_without_a52dec:BuildRequires: a52dec-devel}
 
 %description
 FFmpeg is a very fast video and audio converter. It can also grab from a
@@ -68,20 +60,19 @@
 Available rpmbuild rebuild options :
 --without : lame vorbis theora faad faac gsm xvid x264 a52dec altivec
 
-
 %package devel
 Summary: Header files and static library for the ffmpeg codec library
 Group: Development/Libraries
 Requires: %{name} = %{version}
 Requires: imlib2-devel, SDL-devel, freetype-devel, zlib-devel, pkgconfig
-%{!?_without_lame:Requires: lame-devel}
-%{!?_without_vorbis:Requires: libogg-devel, libvorbis-devel}
+%{!?_without_a52dec:Requires: a52dec-devel}
+%{!?_without_faac:Requires: faac-devel}
 %{!?_without_faad:Requires: faad2-devel}
-%{!?_without_faac:Requires: faac-devel}
 %{!?_without_gsm:Requires: gsm-devel}
+%{!?_without_lame:Requires: lame-devel}
+#%{!?_without_vorbis:Requires: libogg-devel, libvorbis-devel}
+%{!?_without_x264:Requires: x264-devel}
 %{!?_without_xvid:Requires: xvidcore-devel}
-%{!?_without_x264:Requires: x264-devel}
-%{!?_without_a52dec:Requires: a52dec-devel}
 
 %description devel
 FFmpeg is a very fast video and audio converter. It can also grab from a
@@ -94,7 +85,6 @@
 
 Install this package if you want to compile apps with ffmpeg support.
 
-
 %package libpostproc
 Summary: Video postprocessing library from ffmpeg
 Group: System Environment/Libraries
@@ -113,12 +103,10 @@
 other projects such as transcode may use. Install this package if you intend
 to use MPlayer, transcode or other similar programs.
 
-
 %prep
-%setup -n ffmpeg-%{date}
-%patch0 -p1 -b .gsm
-%patch1 -p1 -b .faad2
+%setup
 
+%{__perl} -pi.orig -e 's|gsm.h|gsm/gsm.h|' configure libavcodec/libgsm.c
 
 %build
 export CFLAGS=&quot;%{optflags}&quot;
@@ -127,34 +115,38 @@
 ./configure \
     --prefix=&quot;%{_prefix}&quot; \
     --libdir=&quot;%{_libdir}&quot; \
+    --shlibdir=&quot;%{_libdir}&quot; \
     --mandir=&quot;%{_mandir}&quot; \
     --incdir=&quot;%{_includedir}/ffmpeg&quot; \
+%{?_without_v4l:--disable-demuxer=v4l} \
 %ifarch x86_64
     --extra-cflags=&quot;-fPIC&quot; \
 %endif
-    %{!?_without_lame:   --enable-libmp3lame} \
-    %{!?_without_vorbis: --enable-libogg --enable-libvorbis} \
-    %{!?_without_theora: --enable-libogg --enable-libtheora} \
-    %{!?_without_faad:   --enable-libfaad} \
-    %{!?_without_faac:   --enable-libfaac} \
-    %{!?_without_gsm:    --enable-libgsm} \
-    %{!?_without_xvid:   --enable-xvid} \
-    %{!?_without_x264:   --enable-x264} \
-    %{!?_without_a52:    --enable-liba52 --enable-liba52bin} \
-    --enable-pp \
+%{!?_without_amrnb:--enable-libamr-nb} \
+%{!?_without_amrwb:--enable-libamr-wb} \
+%{!?_without_dirac:--enable-libdirac} \
+%{!?_without_faac:--enable-libfaac} \
+%{!?_without_faad:--enable-libfaad} \
+%{!?_without_gsm:--enable-libgsm} \
+%{!?_without_lame:--enable-libmp3lame} \
+%{!?_without_speex:--enable-libspeex} \
+%{!?_without_theora:--enable-libtheora} \
+%{!?_without_x264:--enable-libx264} \
+    --enable-gpl \
+    --enable-nonfree \
+    --enable-postproc \
+    --enable-pthreads \
     --enable-shared \
-    --enable-pthreads \
-    --enable-gpl \
-    --disable-strip
+    --enable-swscale \
+    --enable-x11grab
+#    %{!?_without_dc1394: --enable-libdc1394} \
+#    %{!?_without_vorbis: --enable-libvorbis} \
+#    %{!?_without_xvid:   --enable-libxvid} \
 %{__make} %{?_smp_mflags}
 
-
 %install
 %{__rm} -rf %{buildroot} _docs
-%makeinstall \
-    incdir=&quot;%{buildroot}%{_includedir}/ffmpeg&quot; \
-    shlibdir=&quot;%{buildroot}%{_libdir}&quot; \
-    libdir=&quot;%{buildroot}%{_libdir}&quot;
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 
 # Remove unwanted files from the included docs
 %{__cp} -a doc _docs
@@ -163,43 +155,57 @@
 # The &lt;postproc/postprocess.h&gt; is now at &lt;ffmpeg/postprocess.h&gt;, so provide
 # a compatibility symlink
 %{__mkdir_p} %{buildroot}%{_includedir}/postproc/
-%{__ln_s}    ../ffmpeg/postprocess.h \
-             %{buildroot}%{_includedir}/postproc/postprocess.h
+%{__ln_s} ../ffmpeg/postprocess.h %{buildroot}%{_includedir}/postproc/postprocess.h
 
-
 %clean
 %{__rm} -rf %{buildroot}
 
-
 %post
 /sbin/ldconfig
-chcon -t textrel_shlib_t %{_libdir}/libav{codec,format,util}.so.*.*.* \
-    &amp;&gt;/dev/null || :
+chcon -t textrel_shlib_t %{_libdir}/libav{codec,device,format,util}.so.*.*.* &amp;&gt;/dev/null || :
 
 %postun -p /sbin/ldconfig
 
-
 %post libpostproc -p /sbin/ldconfig
-
 %postun libpostproc -p /sbin/ldconfig
 
-
 %files
 %defattr(-, root, root, 0755)
-%doc Changelog COPYING CREDITS README
-%{_bindir}/*
-%{_libdir}/*.so.*
+%doc Changelog COPYING* CREDITS INSTALL MAINTAINERS README
+%doc %{_mandir}/man1/ffmpeg.1*
+%doc %{_mandir}/man1/ffplay.1*
+%doc %{_mandir}/man1/ffserver.1*
+%{_bindir}/ffmpeg
+%{_bindir}/ffplay
+%{_bindir}/ffserver
+%{_datadir}/ffmpeg/
+%{_libdir}/libavcodec.so.*
+%{_libdir}/libavdevice.so.*
+%{_libdir}/libavformat.so.*
+%{_libdir}/libavutil.so.*
+%{_libdir}/libswscale.so.*
+%{_libdir}/vhook/
 %exclude %{_libdir}/libpostproc.so*
-%{_libdir}/vhook/
-%{_mandir}/man1/*
 
 %files devel
 %defattr(-, root, root, 0755)
 %doc _docs/*
 %{_includedir}/ffmpeg/
-%{_libdir}/*.a
-%{_libdir}/*.so
-%{_libdir}/pkgconfig/*.pc
+%{_libdir}/libavcodec.a
+%{_libdir}/libavdevice.a
+%{_libdir}/libavformat.a
+%{_libdir}/libavutil.a
+%{_libdir}/libswscale.a
+%{_libdir}/libavcodec.so
+%{_libdir}/libavdevice.so
+%{_libdir}/libavformat.so
+%{_libdir}/libavutil.so
+%{_libdir}/libswscale.so
+%{_libdir}/pkgconfig/libavcodec.pc
+%{_libdir}/pkgconfig/libavdevice.pc
+%{_libdir}/pkgconfig/libavformat.pc
+%{_libdir}/pkgconfig/libavutil.pc
+%{_libdir}/pkgconfig/libswscale.pc
 %exclude %{_libdir}/pkgconfig/libpostproc.pc
 
 %files libpostproc
@@ -208,8 +214,12 @@
 %{_libdir}/libpostproc.so*
 %{_libdir}/pkgconfig/libpostproc.pc
 
+%changelog
+* Wed Jul 08 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.5-1
+- Updated to release 0.5.
+- Disabled speex support, lacking speex 1.2.
+- Rebuild against x264-0.4.20090708.
 
-%changelog
 * Mon Jun 04 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.4.9-0.9.20070530
 - Rebuild against x264-0.4.20070529 because I missed it.
 

Added: trunk/rpms/k3b-extras/k3b-0.12.17-ffmpeg-0.5.patch
===================================================================
--- trunk/rpms/k3b-extras/k3b-0.12.17-ffmpeg-0.5.patch	                        (rev 0)
+++ trunk/rpms/k3b-extras/k3b-0.12.17-ffmpeg-0.5.patch	2009-07-10 02:22:10 UTC (rev 7398)
@@ -0,0 +1,46 @@
+--- k3b-0.12.17.orig/plugins/decoder/ffmpeg/k3bffmpegwrapper.cpp 2008-09-29 15:27:50.000000000 -0600
++++ k3b-0.12.17/plugins/decoder/ffmpeg/k3bffmpegwrapper.cpp 2008-11-16 03:36:42.384349570 -0700
+@@ -194,8 +194,13 @@
+     return i18n(&quot;Windows Media v1&quot;);
+   case CODEC_ID_WMAV2:
+     return i18n(&quot;Windows Media v2&quot;);
++#if defined(CODEC_ID_MP3)
++  case CODEC_ID_MP3:
++    return i18n(&quot;MPEG 1 Layer III&quot;);
++#elif defined(CODEC_ID_MP3LAME)
+   case CODEC_ID_MP3LAME:
+     return i18n(&quot;MPEG 1 Layer III&quot;);
++#endif
+   default:
+     return QString::fromLocal8Bit( d-&gt;codec-&gt;name );
+   }
+@@ -285,10 +290,16 @@
+ 
+     d-&gt;outputBufferPos = d-&gt;outputBuffer;
+ 
++#if LIBAVCODEC_VERSION_MAJOR &gt;= 52
++    d-&gt;outputBufferSize = sizeof(d-&gt;outputBuffer);
++    int len = avcodec_decode_audio2(
++#else
++    int len = avcodec_decode_audio(
++#endif
+ #ifdef FFMPEG_BUILD_PRE_4629
+-    int len = avcodec_decode_audio( &amp;d-&gt;formatContext-&gt;streams[0]-&gt;codec,
++    &amp;d-&gt;formatContext-&gt;streams[0]-&gt;codec,
+ #else
+-    int len = avcodec_decode_audio( d-&gt;formatContext-&gt;streams[0]-&gt;codec,
++    d-&gt;formatContext-&gt;streams[0]-&gt;codec,
+ #endif
+ 				    (short*)d-&gt;outputBuffer, &amp;d-&gt;outputBufferSize,
+ 				    d-&gt;packetData, d-&gt;packetSize );
+--- k3b-0.12.17.orig/plugins/decoder/ffmpeg/k3bffmpegdecoder.cpp	2009-07-09 21:08:16.000000000 +0200
++++ k3b-0.12.17/plugins/decoder/ffmpeg/k3bffmpegdecoder.cpp	2009-07-09 21:08:32.000000000 +0200
+@@ -96,7 +96,7 @@
+ 
+     // ffmpeg cannot handle vbr mp3 files properly (their length)
+     // so we have to decode the whole file in order to get the correct length
+-    if( m_file-&gt;type() == CODEC_ID_MP3LAME ) {
++    if( m_file-&gt;type() == CODEC_ID_MP3 ) {
+       kdDebug() &lt;&lt; &quot;(K3bFFMpegDecoder) mp3. Have to decode the hole file to get it's length.&quot; &lt;&lt; endl;
+       char buffer[10*2048];
+       int len = 0;

Modified: trunk/rpms/k3b-extras/k3b-extras-0.11.spec
===================================================================
--- trunk/rpms/k3b-extras/k3b-extras-0.11.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/k3b-extras/k3b-extras-0.11.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -17,11 +17,9 @@
 %{?rh7:%define _without_kde32 1}
 %{?el2:%define _without_kde32 1}
 
-%{!?k3b_version:%define k3b_version %(rpm -q k3b --qf '%{RPMTAG_VERSION}' | tail -1)}
-
 Summary: Additional codec plugins for the k3b CD/DVD burning application
 Name: k3b-extras
-Version: %{k3b_version}
+Version: 0.11.14
 Release: 3
 License: GPL
 Group: Applications/Multimedia
@@ -29,21 +27,29 @@
 
 Source: <A HREF="http://dl.sf.net/k3b/k3b-%{version">http://dl.sf.net/k3b/k3b-%{version</A>}.tar.bz2
 Patch0: k3b-0.11.23-statfs.patch
-Patch1: k3b-0.11.24-no-bad-gcc.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 ExcludeArch: s390 s390x
+BuildRequires: arts-devel
+BuildRequires: ffmpeg-devel
+BuildRequires: gettext
 BuildRequires: k3b
-# Some of these are only to make the configure script happy.
-BuildRequires: kdelibs-devel &gt;= 6:3.1, libart_lgpl-devel, arts-devel
-BuildRequires: zlib-devel, libpng-devel, libjpeg-devel, libmusicbrainz-devel
-BuildRequires: gettext, taglib-devel, libmad-devel, lame-devel, ffmpeg-devel
-BuildRequires: libmpcdec-devel, libsndfile-devel
+BuildRequires: kdelibs-devel &gt;= 6:3.1
+BuildRequires: lame-devel
+BuildRequires: libart_lgpl-devel
+BuildRequires: libjpeg-devel
+BuildRequires: libmad-devel
+BuildRequires: libmpcdec-devel
+BuildRequires: libmusicbrainz-devel
+BuildRequires: libpng-devel
+BuildRequires: libsndfile-devel
+BuildRequires: taglib-devel
+BuildRequires: zlib-devel
 %{!?_without_kde32:BuildRequires: libmng-devel fam-devel glib2-devel alsa-lib-devel esound-devel}
 %{?_with_modxorg:BuildRequires: libX11-devel}
 %{!?_with_modxorg:BuildRequires: XFree86-devel}
 
-Requires: k3b = %{k3b_version}
+Requires: k3b = %{version}
 
 Obsoletes: k3b-mp3 &lt;= %{version}-%{release}
 Provides: k3b-mp3 = %{version}-%{release}
@@ -55,21 +61,20 @@
 handle CD/DVD burning application.
 
 %prep
-%setup -n k3b-%{k3b_version}
+%setup -n k3b-%{version}
 %patch0 -p1 -b .statfs
-#patch1 -p1 -b .no-bad-gcc
 
 %build
 source /etc/profile.d/qt.sh
 %configure \
-	--disable-rpath \
-	--without-flac \
-	--without-oggvorbis \
-	--with-external-libsamplerate=&quot;no&quot; \
-	--with-k3bsetup=&quot;no&quot; \
-	--with-musepack \
-	--with-qt-libraries=&quot;$QTDIR/lib&quot; \
-	--with-sndfile
+    --disable-rpath \
+    --without-flac \
+    --without-oggvorbis \
+    --with-external-libsamplerate=&quot;no&quot; \
+    --with-k3bsetup=&quot;no&quot; \
+    --with-musepack \
+    --with-qt-libraries=&quot;$QTDIR/lib&quot; \
+    --with-sndfile
 
 %{__ln_s} -f %{_libdir}/libk3bdevice.la src/device/libk3bdevice.la
 %{__ln_s} -f %{_libdir}/libk3bcore.la src/core/libk3bcore.la
@@ -94,12 +99,12 @@
 %{_datadir}/apps/k3b/plugins/k3bmaddecoder.plugin
 
 %changelog
-* Mon Dec 17 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - %{version}-3
+* Mon Dec 17 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.11.14-3
 - Rebuild against libmpcdec 1.2.6.
 
-* Fri Mar 30 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - %{version}-2
+* Fri Mar 30 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.11.14-2
 - Renamed k3b-mp3 to k3b-extras.
 
-* Sun Mar 05 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - %{version}-1
+* Sun Mar 05 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.11.14-1
 - Imported based on Livna SPEC file.
 - Initial package. (using DAR)

Modified: trunk/rpms/k3b-extras/k3b-extras.spec
===================================================================
--- trunk/rpms/k3b-extras/k3b-extras.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/k3b-extras/k3b-extras.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -17,34 +17,39 @@
 %{?rh7:%define _without_kde32 1}
 %{?el2:%define _without_kde32 1}
 
-%{!?k3b_version:%define k3b_version %(rpm -q k3b --qf '%{RPMTAG_VERSION}' | tail -1)}
-
 Summary: Additional codec plugins for the k3b CD/DVD burning application
 Name: k3b-extras
-Version: %{k3b_version}
-Release: 3
+Version: 0.12.17
+Release: 4
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://www.k3b.org/">http://www.k3b.org/</A>
 
 Source: <A HREF="http://dl.sf.net/k3b/k3b-%{version">http://dl.sf.net/k3b/k3b-%{version</A>}.tar.bz2
-# Patch touches globals, better include this.
-Patch0: k3b-0.12.2-statfs.patch
-Patch1: k3b-0.11.24-no-bad-gcc.patch
+Patch0: k3b-0.12.17-ffmpeg-0.5.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 ExcludeArch: s390 s390x
+BuildRequires: arts-devel
+BuildRequires: ffmpeg-devel
+BuildRequires: gettext
 BuildRequires: k3b
-# Some of these are only to make the configure script happy.
-BuildRequires: kdelibs-devel &gt;= 6:3.1, libart_lgpl-devel, arts-devel
-BuildRequires: zlib-devel, libpng-devel, libjpeg-devel, libmusicbrainz-devel
-BuildRequires: gettext, taglib-devel, libmad-devel, lame-devel, ffmpeg-devel
-BuildRequires: libmpcdec-devel, libsndfile-devel
+BuildRequires: kdelibs-devel &gt;= 6:3.1
+BuildRequires: lame-devel
+BuildRequires: libart_lgpl-devel
+BuildRequires: libjpeg-devel
+BuildRequires: libmad-devel
+BuildRequires: libmpcdec-devel
+BuildRequires: libmusicbrainz-devel
+BuildRequires: libpng-devel
+BuildRequires: libsndfile-devel
+BuildRequires: taglib-devel
+BuildRequires: zlib-devel
 %{!?_without_kde32:BuildRequires: libmng-devel fam-devel glib2-devel alsa-lib-devel esound-devel}
 %{?_with_modxorg:BuildRequires: libX11-devel}
 %{!?_with_modxorg:BuildRequires: XFree86-devel}
 
-Requires: k3b = %{k3b_version}
+Requires: k3b = %{version}
 
 Obsoletes: k3b-mp3 &lt;= %{version}-%{release}
 Provides: k3b-mp3 = %{version}-%{release}
@@ -57,18 +62,25 @@
 
 %prep
 %setup -n k3b-%{version}
+%patch0 -p1 -b .ffmpeg
 
+%{__perl} -pi.orig -e '
+        s|&lt;ffmpeg/avformat.h&gt;|&lt;libavformat/avformat.h&gt;|g;
+        s|&lt;ffmpeg/avcodec.h&gt;|&lt;libavcodec/avcodec.h&gt;|g;
+    ' configure* plugins/decoder/ffmpeg/*
+
 %build
 source /etc/profile.d/qt.sh
+export CPPFLAGS=&quot;-I%{_includedir}/ffmpeg&quot;
 %configure \
-	--disable-rpath \
-	--without-flac \
-	--without-oggvorbis \
-	--with-external-libsamplerate=&quot;no&quot; \
-	--with-k3bsetup=&quot;no&quot; \
-	--with-musepack \
-	--with-qt-libraries=&quot;$QTDIR/lib&quot; \
-	--with-sndfile
+    --disable-rpath \
+    --without-flac \
+    --without-oggvorbis \
+    --with-external-libsamplerate=&quot;no&quot; \
+    --with-k3bsetup=&quot;no&quot; \
+    --with-musepack \
+    --with-qt-libraries=&quot;$QTDIR/lib&quot; \
+    --with-sndfile
 
 %{__make} -C libk3bdevice %{?_smp_mflags}
 %{__make} -C libk3b %{?_smp_mflags}
@@ -108,12 +120,15 @@
 %{_datadir}/apps/k3b/plugins/k3bmpcdecoder.plugin
 
 %changelog
-* Mon Dec 17 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - %{version}-3
+* Thu Jul 09 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.12.17-4
+- Rebuild against ffmpeg-0.5.
+
+* Mon Dec 17 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.12.17-3
 - Rebuild against libmpcdec 1.2.6.
 
-* Fri Mar 30 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - %{version}-2
+* Fri Mar 30 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.12.17-2
 - Added ffmpeg, libsndfile and mpcdec codecs.
 
-* Sun Mar 05 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - %{version}-1
+* Sun Mar 05 2006 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.12.17-1
 - Imported based on Livna SPEC file.
 - Initial package. (using DAR)

Added: trunk/rpms/mplayer/ffmpeg-0.4.9_p20080326-libx264.patch
===================================================================
--- trunk/rpms/mplayer/ffmpeg-0.4.9_p20080326-libx264.patch	                        (rev 0)
+++ trunk/rpms/mplayer/ffmpeg-0.4.9_p20080326-libx264.patch	2009-07-10 02:22:10 UTC (rev 7398)
@@ -0,0 +1,36 @@
+diff -ur ffmpeg.orig/libavcodec/libx264.c ffmpeg/libavcodec/libx264.c
+--- ffmpeg.orig/libavcodec/libx264.c	2008-03-25 16:34:49.000000000 -0700
++++ ffmpeg/libavcodec/libx264.c	2008-10-07 22:01:13.293938864 -0700
+@@ -162,7 +162,11 @@
+ 
+     x4-&gt;params.i_bframe = avctx-&gt;max_b_frames;
+     x4-&gt;params.b_cabac = avctx-&gt;coder_type == FF_CODER_TYPE_AC;
++#if X264_BUILD &gt; 62
++    x4-&gt;params.i_bframe_adaptive = avctx-&gt;b_frame_strategy;
++#else
+     x4-&gt;params.b_bframe_adaptive = avctx-&gt;b_frame_strategy;
++#endif
+     x4-&gt;params.i_bframe_bias = avctx-&gt;bframebias;
+     x4-&gt;params.b_bframe_pyramid = (avctx-&gt;flags2 &amp; CODEC_FLAG2_BPYRAMID);
+     avctx-&gt;has_b_frames= (avctx-&gt;flags2 &amp; CODEC_FLAG2_BPYRAMID) ? 2 : !!avctx-&gt;max_b_frames;
+@@ -225,8 +229,10 @@
+     x4-&gt;params.analyse.i_me_range = avctx-&gt;me_range;
+     x4-&gt;params.analyse.i_subpel_refine = avctx-&gt;me_subpel_quality;
+ 
++#if X264_BUILD &lt; 65
+     x4-&gt;params.analyse.b_bidir_me = (avctx-&gt;bidir_refine &gt; 0);
+     x4-&gt;params.analyse.b_bframe_rdo = (avctx-&gt;flags2 &amp; CODEC_FLAG2_BRDO);
++#endif
+     x4-&gt;params.analyse.b_mixed_references =
+         (avctx-&gt;flags2 &amp; CODEC_FLAG2_MIXED_REFS);
+     x4-&gt;params.analyse.b_chroma_me = (avctx-&gt;me_cmp &amp; FF_CMP_CHROMA);
+@@ -251,7 +257,9 @@
+     x4-&gt;params.rc.f_ip_factor = 1/fabs(avctx-&gt;i_quant_factor);
+     x4-&gt;params.rc.f_pb_factor = avctx-&gt;b_quant_factor;
+     x4-&gt;params.analyse.i_chroma_qp_offset = avctx-&gt;chromaoffset;
++#if X264_BUILD &lt; 61
+     x4-&gt;params.rc.psz_rc_eq = avctx-&gt;rc_eq;
++#endif
+ 
+     x4-&gt;params.analyse.b_psnr = (avctx-&gt;flags &amp; CODEC_FLAG_PSNR);
+     x4-&gt;params.i_log_level = X264_LOG_DEBUG;

Modified: trunk/rpms/mplayer/mplayer.spec
===================================================================
--- trunk/rpms/mplayer/mplayer.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/mplayer/mplayer.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -12,101 +12,36 @@
 
 %{?el5:%define _without_nas 1}
 %{?el4:%define _without_nas 1}
-%{?fc3:%define _without_nas 1}
-%{?fc2:%define _without_nas 1}
 
-%{?fc1:%define _without_alsa 1}
-%{?fc1:%define _without_nas 1}
-%{?fc1:%define _without_theora 1}
-%{?fc1:%define _without_xvmc 1}
-
 %{?el3:%define _without_alsa 1}
 %{?el3:%define _without_fribidi 1}
 %{?el3:%define _without_nas 1}
 %{?el3:%define _without_theora 1}
 %{?el3:%define _without_xvmc 1}
+%{?el3:%define _without_x264_patch 1}
+%{?el3:%define _without_binutils214 1}
 
-%{?rh9:%define _without_alsa 1}
-%{?rh9:%define _without_fribidi 1}
-%{?rh9:%define _without_nas 1}
-%{?rh9:%define _without_theora 1}
-%{?rh9:%define _without_x264 1}
-%{?rh9:%define _without_xvmc 1}
-
-%{?rh8:%define _without_alsa 1}
-%{?rh8:%define _without_fribidi 1}
-%{?rh8:%define _without_nas 1}
-%{?rh8:%define _without_theora 1}
-%{?rh8:%define _without_twolame 1}
-%{?rh8:%define _without_x264 1}
-%{?rh8:%define _without_xvmc 1}
-
-%{?rh7:%define _without_alsa 1}
-%{?rh7:%define _without_faac 1}
-%{?rh7:%define _without_fribidi 1}
-%{?rh7:%define _without_freedesktop 1}
-%{?rh7:%define _without_gcccheck 1}
-%{?rh7:%define _without_nas 1}
-%{?rh7:%define _without_theora 1}
-%{?rh7:%define _without_twolame 1}
-%{?rh7:%define _without_x264 1}
-%{?rh7:%define _without_xvmc 1}
-
-%{?el2:%define _without_alsa 1}
-%{?el2:%define _without_arts 1}
-%{?el2:%define _without_caca 1}
-%{?el2:%define _without_dv 1}
-%{?el2:%define _without_faac 1}
-%{?el2:%define _without_fribidi 1}
-%{?el2:%define _without_freedesktop 1}
-%{?el2:%define _without_gcccheck 1}
-%{?el2:%define _without_gtk2 1}
-%{?el2:%define _without_nas 1}
-%{?el2:%define _without_theora 1}
-%{?el2:%define _without_twolame 1} 
-%{?el2:%define _without_x264 1}
-%{?el2:%define _without_xvmc 1}
-
-%{?yd3:%define _without_alsa 1}
-%{?yd3:%define _without_fribidi 1}
-%{?yd3:%define _without_nas 1}
-%{?yd3:%define _without_theora 1}
-
-# Is this a daily build? If so, put the date like &quot;20020808&quot; otherwise put 0
-#define date      20060919
-%define rcver     rc1
-
 %define livever   2006.10.18a
 
 Summary: MPlayer, the Movie Player for Linux
 Name: mplayer
+%define real_version 1.0rc2
 Version: 1.0
-Release: 0.40%{?rcver:.%{rcver}}%{?date:.%{date}}try2
+Release: 0.40.rc2
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://mplayerhq.hu/">http://mplayerhq.hu/</A>
-%if %{?date:1}0
-# svn checkout <A HREF="svn://svn.mplayerhq.hu/mplayer/trunk">svn://svn.mplayerhq.hu/mplayer/trunk</A> mplayer
-# cp -a mplayer MPlayer-%{date}
-# find MPlayer-%{date} -name .svn -type d | xargs rm -rf
-# tar cjvf MPlayer-%{date}.tar.bz2 MPlayer-%{date}/
-Source0: MPlayer-%{date}.tar.bz2
-%else
-Source0: <A HREF="http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{version">http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{version</A>}%{?rcver}.tar.bz2
-%endif
+
+Source0: <A HREF="http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{real_version">http://www.mplayerhq.hu/MPlayer/releases/MPlayer-%{real_version</A>}.tar.bz2
 Source1: <A HREF="http://www.live555.com/liveMedia/public/live.%{livever">http://www.live555.com/liveMedia/public/live.%{livever</A>}.tar.gz
 Source2: <A HREF="http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.6.tar.bz2">http://www.mplayerhq.hu/MPlayer/Skin/Blue-1.6.tar.bz2</A>
 Source3: mplayer.png
-# Only for reference, required on YDL4 at least
-Source10: uio.h-ppc.patch
 Patch0: MPlayer-0.90pre9-runtimemsg.patch
 Patch1: MPlayer-0.90-playlist.patch
 Patch2: MPlayer-0.90pre10-redhat.patch
+Patch3: ffmpeg-0.4.9_p20080326-libx264.patch
 Patch10: MPlayer-1.0pre6a-fribidi.patch
-# Fixes to 1.0rc1 which won't be needed anymore with 1.0rc2
-Patch50: MPlayer-1.0rc1-dct64_amd.patch
-Patch51: asmrules_fix_20061231.diff
-Patch100: mplayer-1.0rc1-h264-static.patch
+#Patch100: mplayer-1.0rc1-h264-static.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: mplayer-fonts
 BuildRequires: libpng-devel, libjpeg-devel, libungif-devel
@@ -157,7 +92,6 @@
             theora osdmenu gcccheck fribidi xvmc x264 faac mpc live ladspa
             amrnb samba speex twolame
 
-
 %package -n mencoder
 Summary: MPlayer&#8217;s Movie Encoder
 Group: Applications/Multimedia
@@ -171,7 +105,6 @@
 powerful filter system (crop, expand, flip, postprocess, rotate, scale,
 noise, rgb/yuv conversion) and more.
 
-
 %package docs
 Summary: Documentation for MPlayer, the Movie Player for Linux
 Group: Applications/Multimedia
@@ -183,20 +116,14 @@
 
 This package contains the end user documentation.
 
-
 %prep
-%if %{?date:1}0
-%setup -n MPlayer-%{date} -a 1
-%else
-%setup -n MPlayer-%{version}%{?rcver} -a 1
-%endif
+%setup -n MPlayer-%{real_version} -a 1
 %patch0 -p1 -b .runtimemsg
 %patch1 -p1 -b .playlist
 %patch2 -p0 -b .redhat
+%patch3 -p1 -b .x264
 %patch10 -p1 -b .fribidi
-%patch50 -p1 -b .dct64_amd
-%patch51 -p0 -b .asmrules_fix
-%patch100 -p0 -b .h264_static
+#patch100 -p0 -b .h264_static
 
 # Overwrite some of the details of the provided system menu entry
 %{__perl} -pi -e 's|^Exec=gmplayer$|Exec=gmplayer %f|g;
@@ -205,7 +132,6 @@
     etc/mplayer.desktop
 echo &quot;MimeType=video/dv;video/mpeg;video/x-mpeg;video/msvideo;video/quicktime;video/x-anim;video/x-avi;video/x-ms-asf;video/x-ms-wmv;video/x-msvideo;video/x-nsv;video/x-flc;video/x-fli;application/ogg;application/x-ogg;application/x-matroska;audio/x-mp3;audio/x-mpeg;audio/mpeg;audio/x-wav;audio/x-mpegurl;audio/x-scpls;audio/x-m4a;audio/x-ms-asf;audio/x-ms-asx;audio/x-ms-wax;application/vnd.rn-realmedia;audio/x-real-audio;audio/x-pn-realaudio;misc/ultravox;audio/vnd.rn-realaudio;audio/x-pn-aiff;audio/x-pn-au;audio/x-pn-wav;audio/x-pn-windows-acm;image/vnd.rn-realpix;video/vnd.rn-realvideo;audio/x-pn-realaudio-plugin;&quot; &gt;&gt; etc/mplayer.desktop
 
-
 %build
 # Build statically linked live555 libraries
 %if 0%{!?_without_live:1}
@@ -225,25 +151,26 @@
     --mandir=&quot;%{_mandir}&quot; \
     --confdir=&quot;%{_sysconfdir}/mplayer&quot; \
     --libdir=&quot;%{_libdir}&quot; \
-    %{!?_with_dvdread:--disable-dvdread} \
-    %{?_without_gcccheck:--disable-gcc-check} \
+%{!?_with_dvdread:--disable-dvdread} \
+%{?_without_gcccheck:--disable-gcc-check} \
+%{?_without_binutils214:--disable-ssse3} \
     --enable-dynamic-plugins \
     --enable-gui \
     --enable-joystick \
     --enable-largefiles \
-    %{?_without_live:--disable-live} \
-    %{!?_without_osdmenu:--enable-menu} \
-    %{!?_with_modxorg:%{!?_without_xvmc:--enable-xvmc --with-xvmclib=&quot;XvMCW&quot;}} \
-    %{?_with_modxorg:%{!?_without_xvmc:--enable-xvmc}} \
+%{?_without_live:--disable-live} \
+%{!?_without_osdmenu:--enable-menu} \
+%{!?_with_modxorg:%{!?_without_xvmc:--enable-xvmc --with-xvmclib=&quot;XvMCW&quot;}} \
+%{?_with_modxorg:%{!?_without_xvmc:--enable-xvmc}} \
 %ifarch %{ix86}
     --enable-runtime-cpudetection \
-    --enable-win32 \
-    --with-win32libdir=&quot;%{_libdir}/codecs&quot; \
-    --with-xanimlibdir=&quot;%{_libdir}/codecs&quot; \
 %endif
-    --with-reallibdir=&quot;%{_libdir}/codecs&quot; \
-    --language=&quot;all&quot; \
-    %{!?_without_live:--with-livelibdir=&quot;$(pwd)/live&quot;}
+    --language=&quot;all&quot;
+#    --enable-win32 \
+#    --with-win32libdir=&quot;%{_libdir}/codecs&quot; \
+#    --with-xanimlibdir=&quot;%{_libdir}/codecs&quot; \
+#    --with-reallibdir=&quot;%{_libdir}/codecs&quot; \
+#%{!?_without_live:--with-livelibdir=&quot;$(pwd)/live&quot;}
 
 %{__make} %{?_smp_mflags}
 
@@ -275,7 +202,6 @@
 %{__install} -p -m 0644 %{SOURCE3} \
            %{buildroot}%{_datadir}/pixmaps/mplayer.png
 
-
 %post
 /sbin/ldconfig
 update-desktop-database %{_datadir}/applications &amp;&gt;/dev/null || :
@@ -284,14 +210,21 @@
 /sbin/ldconfig
 update-desktop-database %{_datadir}/applications &amp;&gt;/dev/null || :
 
-
 %clean
 %{__rm} -rf %{buildroot}
 
-
 %files
 %defattr(-, root, root, 0755)
-%doc AUTHORS ChangeLog Copyright LICENSE README etc/*.conf
+%doc AUTHORS Changelog Copyright LICENSE README etc/*.conf
+%doc %{_mandir}/man1/mplayer.1*
+%doc %lang(cs) %{_mandir}/cs/man1/mplayer.1*
+%doc %lang(de) %{_mandir}/de/man1/mplayer.1*
+%doc %lang(es) %{_mandir}/es/man1/mplayer.1*
+%doc %lang(fr) %{_mandir}/fr/man1/mplayer.1*
+%doc %lang(hu) %{_mandir}/hu/man1/mplayer.1*
+%doc %lang(it) %{_mandir}/it/man1/mplayer.1*
+%doc %lang(pl) %{_mandir}/pl/man1/mplayer.1*
+%doc %lang(ru) %{_mandir}/ru/man1/mplayer.1*
 %dir %{_sysconfdir}/mplayer/
 #ghost %config %{_sysconfdir}/mplayer/codecs.conf
 #ghost %config %{_sysconfdir}/mplayer/input.conf
@@ -300,40 +233,33 @@
 %{_bindir}/gmplayer
 %{_bindir}/mplayer
 %dir %{_libdir}/codecs/
-%{_libdir}/libdha.so*
-%{_libdir}/mplayer/
+#%{_libdir}/libdha.so*
+#%{_libdir}/mplayer/
 %{!?_without_freedesktop:%{_datadir}/applications/mplayer.desktop}
 %{_datadir}/mplayer/
 %{_datadir}/pixmaps/mplayer.png
-%{_mandir}/man1/mplayer.1*
-%lang(cs) %{_mandir}/cs/man1/mplayer.1*
-%lang(de) %{_mandir}/de/man1/mplayer.1*
-%lang(es) %{_mandir}/es/man1/mplayer.1*
-%lang(fr) %{_mandir}/fr/man1/mplayer.1*
-%lang(hu) %{_mandir}/hu/man1/mplayer.1*
-%lang(it) %{_mandir}/it/man1/mplayer.1*
-%lang(pl) %{_mandir}/pl/man1/mplayer.1*
-%lang(sv) %{_mandir}/sv/man1/mplayer.1*
 
 %files -n mencoder
 %defattr(-, root, root, 0755)
+%doc %{_mandir}/man1/mencoder.1*
+%doc %lang(cs) %{_mandir}/cs/man1/mencoder.1*
+%doc %lang(de) %{_mandir}/de/man1/mencoder.1*
+%doc %lang(es) %{_mandir}/es/man1/mencoder.1*
+%doc %lang(fr) %{_mandir}/fr/man1/mencoder.1*
+%doc %lang(hu) %{_mandir}/hu/man1/mencoder.1*
+%doc %lang(it) %{_mandir}/it/man1/mencoder.1*
+%doc %lang(pl) %{_mandir}/pl/man1/mencoder.1*
+%doc %lang(ru) %{_mandir}/ru/man1/mencoder.1*
 %{_bindir}/mencoder
-%{_mandir}/man1/mencoder.1*
-%lang(cs) %{_mandir}/cs/man1/mencoder.1*
-%lang(de) %{_mandir}/de/man1/mencoder.1*
-%lang(es) %{_mandir}/es/man1/mencoder.1*
-%lang(fr) %{_mandir}/fr/man1/mencoder.1*
-%lang(hu) %{_mandir}/hu/man1/mencoder.1*
-%lang(it) %{_mandir}/it/man1/mencoder.1*
-%lang(pl) %{_mandir}/pl/man1/mencoder.1*
-%lang(sv) %{_mandir}/sv/man1/mencoder.1*
 
 %files docs
 %defattr(-, root, root, 0755)
 %doc DOCS/*
 
-
 %changelog
+* Wed Jul 08 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0-0.40.rc2
+- Updated to release 1.0rc2.
+
 * Wed Sep 24 2008 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.0-0.40.rc1tr2
 - Rebuild against directfb-1.2.4.
 

Modified: trunk/rpms/oxine/oxine.spec
===================================================================
--- trunk/rpms/oxine/oxine.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/oxine/oxine.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -9,12 +9,9 @@
 %{?fc6: %define _with_modxorg 1}
 %{?fc5: %define _with_modxorg 1}
 
-%{?rh9: %define _without_lirc 1}
-%{?rh7: %define _without_lirc 1}
-
 Summary: Lightweight, purely OSD based xine frontend
 Name: oxine
-Version: 0.7.0
+Version: 0.7.1
 Release: 1
 License: GPL
 Group: Applications/Multimedia
@@ -53,7 +50,7 @@
 
 %install
 %{__rm} -rf %{buildroot}
-%{__make} install DESTDIR=%{buildroot}
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 %find_lang %{name}
 
 %clean
@@ -66,6 +63,9 @@
 %{_datadir}/oxine/
 
 %changelog
+* Fri Jul 10 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.1-1
+- Updated to release 0.7.1.
+
 * Tue Sep 25 2007 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.0-1
 - Updated to release 0.7.0.
 

Modified: trunk/rpms/vlc/vlc.spec
===================================================================
--- trunk/rpms/vlc/vlc.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/vlc/vlc.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -15,6 +15,7 @@
 #define _without_dirac 1
 #define _without_opencv 1
 %define _without_directfb 1
+%define _without_ffmpeg 1
 %define _without_portaudio 1
 
 %ifarch %{ix86}
@@ -35,25 +36,6 @@
 %{?el4:%define _without_sysfs 1}
 #{?el4:#define _without_theora 1}
 
-%{?fc3:%define _without_avahi 1}
-%{?fc3:%define _without_jack 1}
-%{?fc3:%define _without_modxorg 1}
-%{?fc3:%define _without_sysfs 1}
-
-%{?fc2:%define _without_avahi 1}
-%{?fc2:%define _without_hal 1}
-%{?fc2:%define _without_jack 1}
-%{?fc2:%define _without_modxorg 1}
-%{?fc2:%define _without_sysfs 1}
-
-%{?fc1:%define _without_avahi 1}
-%{?fc1:%define _without_alsa 1}
-%{?fc1:%define _without_hal 1}
-%{?fc1:%define _without_jack 1}
-%{?fc1:%define _without_modxorg 1}
-%{?fc1:%define _without_sysfs 1}
-%{?fc1:%define _without_theora 1}
-
 %{?el3:%define mozilla seamonkey-devel}
 %{?el3:%define _without_alsa 1}
 %{?el3:%define _without_avahi 1}
@@ -65,66 +47,18 @@
 %{?el3:%define _without_sysfs 1}
 %{?el3:%define _without_theora 1}
 
-%{?rh9:%define _without_alsa 1}
-%{?rh9:%define _without_avahi 1}
-%{?rh9:%define _without_dbus1 1}
-%{?rh9:%define _without_fribidi 1}
-%{?rh9:%define _without_hal 1}
-%{?rh9:%define _without_jack 1}
-%{?rh9:%define _without_modxorg 1}
-%{?rh9:%define _without_sysfs 1}
-%{?rh9:%define _without_theora 1}
-%{?rh9:%define _without_x264 1}
-
-%{?rh7:%define _without_alsa 1}
-%{?rh7:%define _without_avahi 1}
-%{?rh7:%define _without_dbus1 1}
-%{?rh7:%define _without_freedesktop 1}
-%{?rh7:%define _without_fribidi 1}
-%{?rh7:%define _without_hal 1}
-%{?rh7:%define _without_jack 1}
-%{?rh7:%define _without_modxorg 1}
-%{?rh7:%define _without_sysfs 1}
-%{?rh7:%define _without_theora 1}
-%{?rh7:%define _without_vorbis 1}
-#{?rh7:#define _without_wxwidgets 1}
-%{?rh7:%define _without_x264 1}
-%{?rh7:%define _without_xosd 1}
-
-%{?el2:%define mozilla seamonkey-devel}
-%{?el2:%define _without_alsa 1}
-%{?el2:%define _without_arts 1}
-%{?el2:%define _without_avahi 1}
-%{?el2:%define _without_dbus1 1}
-%{?el2:%define _without_freedesktop 1}
-%{?el2:%define _without_fribidi 1}
-%{?el2:%define _without_glx 1}
-%{?el2:%define _without_hal 1}
-%{?el2:%define _without_jack 1}
-%{?el2:%define _without_modxorg 1}
-%{?el2:%define _without_sysfs 1}
-%{?el2:%define _without_theora 1}
-#{?el2:#define _without_upnp 1}
-%{?el2:%define _without_vorbis 1}
-#{?el2:#define _without_wxwidgets 1}
-%{?el2:%define _without_x264 1}
-%{?el2:%define _without_xosd 1}
-
-%{?yd3:%define _without_alsa 1}
-%{?yd3:%define _without_fribidi 1}
-
 %define desktop_vendor rpmforge
 #define ffmpeg_date 20061215
 #define ffmpeg_date 20071121
 #define ffmpeg_date 20080113
 %define ffmpeg_date 20080225
 #define live_date 2006.12.08
-%define live_date 2008.09.02
+%define live_date 2009.07.09
 
 Summary: The VideoLAN client, also a very good standalone video player
 Name: vlc
-Version: 0.9.9
-Release: 2
+Version: 0.9.9a
+Release: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://www.videolan.org/">http://www.videolan.org/</A>
@@ -133,12 +67,7 @@
 #Source1: <A HREF="http://downloads.videolan.org/pub/videolan/vlc/%{version">http://downloads.videolan.org/pub/videolan/vlc/%{version</A>}/contrib/ffmpeg-%{ffmpeg_date}.tar.bz2
 Source1: <A HREF="http://rpm.greysector.net/livna/ffmpeg-%{ffmpeg_date">http://rpm.greysector.net/livna/ffmpeg-%{ffmpeg_date</A>}.tar.bz2
 Source2: <A HREF="http://www.live555.com/liveMedia/public/live.%{live_date">http://www.live555.com/liveMedia/public/live.%{live_date</A>}.tar.gz
-Patch0: vlc-0.8.6-ffmpegX11.patch
-Patch1: vlc-0.8.6-wx28.patch
-#Patch2: vlc-0.8.6a-faad2.patch
 Patch4: ffmpeg-20080225-asmreg.patch
-Patch21: vlc-0.8.6e-directfb.patch
-Patch80: vlc-0.8.6e-xulrunner.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 
 Buildrequires: autoconf
@@ -260,16 +189,10 @@
 
 %prep
 %setup -a 1 -a 2
-#patch0 -p1 -b .ffmpegX11
-#patch1 -p1 -b .wx28
 
 ### Use regex to change FAAD2 interface
-#patch2 -p1 -b .faad2
 %{__perl} -pi -e 's|\bfaacDec\B|NeAACDec|g' modules/codec/faad.c
 
-#patch21 -p1 -b .directfb
-#patch80 -p1 -b .libxul
-
 ### Fix PLUGIN_PATH path for lib64
 %{__perl} -pi -e 's|/lib\b|/%{_lib}|g' vlc-config.in.in configure*
 
@@ -277,6 +200,7 @@
 %{__perl} -pi -e 's|\bgsm.h|gsm/gsm.h|g' ffmpeg-%{ffmpeg_date}/configure ffmpeg-%{ffmpeg_date}/libavcodec/libgsm.c
 
 %build
+source /etc/profile.d/qt.sh
 export CFLAGS=&quot;%{optflags}&quot;
 
 ### Build bundeled ffmpeg first
@@ -409,6 +333,7 @@
 %{!?_without_twolame:--enable-twolame} \
 %{!?_without_upnp:--enable-upnp} \
 %{!?_without_v4l:--enable-v4l} \
+%{?_without_v4l2:--disable-v4l2} \
 %{?_without_vorbis:--disable-vorbis} \
 %{?_without_wxwidgets:--disable-wxwidgets --disable-skins2} \
 %{?_without_x264:--disable-x264} \
@@ -420,6 +345,7 @@
 
 %install
 %{__rm} -rf %{buildroot} _docs
+source /etc/profile.d/qt.sh
 %{__make} install DESTDIR=&quot;%{buildroot}&quot;
 %find_lang %{name}
 # Include the docs below, our way
@@ -468,6 +394,12 @@
 %endif
 
 %changelog
+* Tue Jul 07 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.9.9a-1
+- Updated to release 0.9.9a.
+- Rebuild against ffmpeg-0.5.
+- Rebuild against x264-0.4.20090708.
+- Rebuild against libmodplug-0.8.7.
+
 * Sat Apr 04 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.9.9-2
 - Enable theora again.
 

Added: trunk/rpms/x264/x264-20090708-glibc232.patch
===================================================================
--- trunk/rpms/x264/x264-20090708-glibc232.patch	                        (rev 0)
+++ trunk/rpms/x264/x264-20090708-glibc232.patch	2009-07-10 02:22:10 UTC (rev 7398)
@@ -0,0 +1,11 @@
+--- common/cpu.c.orig	2009-07-09 01:22:47.000000000 +0200
++++ common/cpu.c	2009-07-09 01:23:09.000000000 +0200
+@@ -294,7 +294,7 @@
+     int np;
+     cpu_set_t p_aff;
+     memset( &amp;p_aff, 0, sizeof(p_aff) );
+-    sched_getaffinity( 0, sizeof(p_aff), &amp;p_aff );
++    sched_getaffinity( 0, &amp;p_aff );
+     for( np = 0, bit = 0; bit &lt; sizeof(p_aff); bit++ )
+         np += (((uint8_t *)&amp;p_aff)[bit / 8] &gt;&gt; (bit % 8)) &amp; 1;
+     return np;

Modified: trunk/rpms/x264/x264.spec
===================================================================
--- trunk/rpms/x264/x264.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/x264/x264.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -9,27 +9,11 @@
 %{?fc6:  %define _with_modxorg 1}
 %{?fc5:  %define _with_modxorg 1}
 
-%{?el4:%define _without_gtk26 1}
-%{?fc3:%define _without_gtk26 1}
-%{?fc2:%define _without_gtk26 1}
-
-%{?fc1:%define _without_glibc232 1}
-%{?fc1:%define _without_gtk26 1}
-
+%{?el3:%define _without_asm 1}
 %{?el3:%define _without_glibc232 1}
-%{?el3:%define _without_gtk26 1}
 
-%{?rh9:%define _without_glibc232 1}
-%{?rh9:%define _without_gtk26 1}
+%define date 20090708
 
-%{?rh7:%define _without_glibc232 1}
-%{?rh7:%define _without_gtk26 1}
-
-%{?el2:%define _without_glibc232 1}
-%{?el2:%define _without_gtk26 1}
-
-%define date 20070529
-
 Summary: Library for encoding and decoding H264/AVC video streams
 Name: x264
 Version: 0.0.0
@@ -37,48 +21,32 @@
 License: GPL
 Group: System Environment/Libraries
 URL: <A HREF="http://developers.videolan.org/x264.html">http://developers.videolan.org/x264.html</A>
+
 Source: <A HREF="http://downloads.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-%{date">http://downloads.videolan.org/pub/videolan/x264/snapshots/x264-snapshot-%{date</A>}-2245.tar.bz2
-Patch0: x264-snapshot-20070529-2245-glibc232.patch
+Patch0: x264-20090708-glibc232.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: nasm, yasm, gettext
-%{?!_without_gtk26:BuildRequires: gtk2-devel &gt;= 2.6}
+
+BuildRequires: gettext
+BuildRequires: nasm
+BuildRequires: yasm
 %{?_with_visualize:%{?_with_modxorg:BuildRequires: libXt-devel}}
 %{?_with_visualize:%{!?_with_modxorg:BuildRequires: XFree86-devel}}
-# version.sh requires svnversion
-BuildRequires: subversion
 
+Obsoletes: x264-gtk &lt;= %{version}-%{release}
+
 %description
 Utility and library for encoding H264/AVC video streams.
 
-
 %package devel
 Summary: Development files for the x264 library
 Group: Development/Libraries
 Requires: %{name} = %{version}-%{release}, pkgconfig
+Obsoletes: x264-gtk-devel &lt;= %{version}-%{release}
 
 %description devel
 This package contains the files required to develop programs that will encode
 H264/AVC video streams using the x264 library.
 
-
-%package gtk
-Summary: GTK x264 frontend
-Group: Applications/Multimedia
-
-%description gtk
-Graphical utility for encoding H264/AVC video streams.
-
-
-%package gtk-devel
-Summary: Development files for the GTK x264 frontend
-Group: Development/Libraries
-Requires: %{name}-gtk = %{version}-%{release}, pkgconfig
-
-%description gtk-devel
-This package contains the files required to develop programs that will encode
-H264/AVC video streams using the x264 graphical utility.
-
-
 %prep
 %setup -n %{name}-snapshot-%{date}-2245
 # configure hardcodes X11 lib path
@@ -92,39 +60,29 @@
 %build
 # Force PIC as applications fail to recompile against the lib on x86_64 without
 ./configure \
-    --prefix=%{_prefix} \
-    --bindir=%{_bindir} \
-    --includedir=%{_includedir} \
-    --libdir=%{_libdir} \
-%{?!_without_gtk26:    --enable-gtk} \
-    --enable-pthread \
+    --prefix=&quot;%{_prefix}&quot; \
+    --bindir=&quot;%{_bindir}&quot; \
+    --includedir=&quot;%{_includedir}&quot; \
+    --libdir=&quot;%{_libdir}&quot; \
+%{?_without_asm:--disable-asm} \
     --enable-debug \
-    %{?_with_visualize:--enable-visualize} \
     --enable-pic \
+    --enable-pthread \
     --enable-shared \
+%{?_with_visualize:--enable-visualize} \
     --extra-cflags=&quot;%{optflags}&quot;
 %{__make} %{?_smp_mflags}
 
-
 %install
 %{__rm} -rf %{buildroot}
-%{__make} install DESTDIR=%{buildroot}
-%{?!_without_gtk26:%find_lang x264_gtk}
+%{__make} install DESTDIR=&quot;%{buildroot}&quot;
 
-
 %clean
 %{__rm} -rf %{buildroot}
 
-
 %post -p /sbin/ldconfig
-
 %postun -p /sbin/ldconfig
 
-%post gtk -p /sbin/ldconfig
-
-%postun gtk -p /sbin/ldconfig
-
-
 %files
 %defattr(-, root, root, 0755)
 %doc AUTHORS COPYING
@@ -139,25 +97,10 @@
 %{_libdir}/libx264.a
 %{_libdir}/libx264.so
 
-%if %{!?_without_gtk26:1}0
-%files gtk -f x264_gtk.lang
-%defattr(-, root, root, 0755)
-%doc AUTHORS COPYING
-%{_bindir}/x264_gtk_encode
-%{_libdir}/libx264gtk.so.*
-%{_datadir}/x264/x264.png
-
-%files gtk-devel
-%defattr(-, root, root, 0755)
-%doc doc/*.txt
-%{_includedir}/x264_gtk.h
-%{_includedir}/x264_gtk_enum.h
-%{_libdir}/pkgconfig/x264gtk.pc
-%{_libdir}/libx264gtk.a
-%{_libdir}/libx264gtk.so
-%endif
-
 %changelog
+* Wed Jul 08 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.0.0-0.4.20090708
+- Updated to git release 20090708 (soname .68).
+
 * Wed May 30 2007 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.0.0-0.4.20070529
 - Update to 20070529 snasphot for F7 (soname .54 bump to .55).
 - Add missing ldconfig calls for the gtk sub-package.

Modified: trunk/rpms/xine-lib/xine-lib.spec
===================================================================
--- trunk/rpms/xine-lib/xine-lib.spec	2009-07-09 17:58:31 UTC (rev 7397)
+++ trunk/rpms/xine-lib/xine-lib.spec	2009-07-10 02:22:10 UTC (rev 7398)
@@ -1,5 +1,5 @@
 # $Id$
-# Authority: matthias
+# Authority: dag
 # Upstream: &lt;xine-user$lists,sf,net&gt;
 
 %{?dtag: %{expand: %%define %dtag 1}}
@@ -12,13 +12,6 @@
 
 %{?el4:%define _with_speex104 1}
 
-%{?fc2:%define _without_gettextdevel 1}
-
-%{?fc1:%define _without_alsa 1}
-%{?fc1:%define _without_gettextdevel 1}
-%{?fc1:%define _without_theora 1}
-%{?fc1:%define _without_xvmc 1}
-
 %{?el3:%define _without_alsa 1}
 %{?el3:%define _without_freetype2_pc 1}
 %{?el3:%define _without_fribidi 1}
@@ -26,41 +19,12 @@
 %{?el3:%define _without_theora 1}
 %{?el3:%define _without_xvmc 1}
 
-%{?rh9:%define _without_alsa 1}
-%{?rh9:%define _without_freetype2_pc 1}
-%{?rh9:%define _without_fribidi 1}
-%{?rh9:%define _without_gettextdevel 1}
-%{?rh9:%define _without_theora 1}
-%{?rh9:%define _without_xvmc 1}
-
-%{?rh8:%define _without_alsa 1}
-%{?rh8:%define _without_freetype2_pc 1}
-%{?rh8:%define _without_fribidi 1}
-%{?rh8:%define _without_gettextdevel 1}
-%{?rh8:%define _without_theora 1}
-%{?rh8:%define _without_xvmc 1}
-
-%{?rh7:%define _without_alsa 1}
-%{?rh7:%define _without_freetype2_pc 1}
-%{?rh7:%define _without_fribidi 1}
-%{?rh7:%define _without_gettextdevel 1}
-%{?rh7:%define _without_theora 1}
-%{?rh7:%define _without_gnomevfs2 1}
-%{?rh7:%define _without_xvmc 1}
-
-%{?yd3:%define _without_alsa 1}
-%{?yd3:%define _without_freetype2_pc 1}
-%{?yd3:%define _without_fribidi 1}
-%{?yd3:%define _without_gettextdevel 1}
-%{?yd3:%define _without_theora 1}
-%{?yd3:%define _without_xvmc 1}
-
 %define libname libxine1
 
 Summary: Core library of the xine multimedia player
 Name: xine-lib
-Version: 1.1.13
-Release: 3
+Version: 1.1.16.3
+Release: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://xinehq.de/">http://xinehq.de/</A>
@@ -212,6 +176,12 @@
 %exclude %{_libdir}/libxine.la
 
 %changelog
+* Thu Jul 09 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.16.3-1
+- Updated to release 1.1.16.3.
+
+* Tue May 26 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.16-1
+- Updated to release 1.1.16.
+
 * Wed Sep 24 2008 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.13-3
 - Rebuild against directfb-1.2.4.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006196.html">[svn] r7397 - trunk/rpms/perl-Crypt-CBC
</A></li>
	<LI>Next message: <A HREF="006198.html">[svn] r7399 - trunk/rpms/perl-Time-HiRes-Value
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6197">[ date ]</a>
              <a href="thread.html#6197">[ thread ]</a>
              <a href="subject.html#6197">[ subject ]</a>
              <a href="author.html#6197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
