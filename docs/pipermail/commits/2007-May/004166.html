<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5367 - trunk/rpms/xine
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5367%20-%20trunk/rpms/xine&In-Reply-To=%3C20070504153330.3C57E944AEC%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004165.html">
   <LINK REL="Next"  HREF="004167.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5367 - trunk/rpms/xine</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5367%20-%20trunk/rpms/xine&In-Reply-To=%3C20070504153330.3C57E944AEC%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5367 - trunk/rpms/xine">packagers at lists.rpmforge.net
       </A><BR>
    <I>Fri May  4 17:33:30 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004165.html">[svn] r5366 - trunk/tools/dar
</A></li>
        <LI>Next message: <A HREF="004167.html">[svn] r5368 - trunk/rpms/xine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4166">[ date ]</a>
              <a href="thread.html#4166">[ thread ]</a>
              <a href="subject.html#4166">[ subject ]</a>
              <a href="author.html#4166">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2007-05-04 17:33:27 +0200 (Fri, 04 May 2007)
New Revision: 5367

Removed:
   trunk/rpms/xine/xine-ui-0.99.3-sprintf.patch
   trunk/rpms/xine/xine-ui-0.99.3-uifixups.patch
   trunk/rpms/xine/xine-ui-0.99.3-xftfontsize.patch
Modified:
   trunk/rpms/xine/xine.spec
Log:
Update xine to 0.99.5 + minor improvements.


Deleted: trunk/rpms/xine/xine-ui-0.99.3-sprintf.patch
===================================================================
--- trunk/rpms/xine/xine-ui-0.99.3-sprintf.patch	2007-05-04 11:33:12 UTC (rev 5366)
+++ trunk/rpms/xine/xine-ui-0.99.3-sprintf.patch	2007-05-04 15:33:27 UTC (rev 5367)
@@ -1,1116 +0,0 @@
-diff -ur xine-ui-0.99.3/src/common/utils.c xine-ui-0.99.3.sprintf/src/common/utils.c
---- xine-ui-0.99.3/src/common/utils.c	2004-04-15 13:55:36.000000000 -0700
-+++ xine-ui-0.99.3.sprintf/src/common/utils.c	2005-07-07 02:18:25.546943500 -0700
-@@ -195,7 +195,7 @@
-   pp = buf;
-   while((p = xine_strsep(&amp;pp, &quot;/&quot;)) != NULL) {
-     if(p &amp;&amp; strlen(p)) {
--      sprintf(buf2, &quot;%s/%s&quot;, buf2, p);
-+      sprintf(buf2+strlen(buf2), &quot;/%s&quot;, p);
-       if(!_mkdir_safe(buf2))
- 	return 0;
-     }
-diff -ur xine-ui-0.99.3/src/fb/osd.c xine-ui-0.99.3.sprintf/src/fb/osd.c
---- xine-ui-0.99.3/src/fb/osd.c	2003-12-01 09:23:27.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/fb/osd.c	2005-07-05 18:53:05.000000000 -0700
-@@ -392,34 +392,34 @@
-     len = strlen(buffer);
-     switch(audiochannel) {
-     case -2:
--      sprintf(buffer, &quot;%soff&quot;, buffer);
-+      strcat(buffer, &quot;off&quot;);
-       break;
-     case -1:
-       if(!xine_get_audio_lang (fbxine.stream, audiochannel, &amp;buffer[len]))
--	sprintf(buffer, &quot;%sauto&quot;, buffer);
-+	strcat(buffer, &quot;auto&quot;);
-       break;
-     default:
-       if(!xine_get_audio_lang (fbxine.stream, audiochannel, &amp;buffer[len]))
--	sprintf(buffer, &quot;%s%3d&quot;, buffer, audiochannel);
-+	sprintf(&amp;buffer[len], &quot;%3d&quot;, audiochannel);
-       break;
-     }
- 
--    sprintf(buffer, &quot;%s, Spu: &quot;, buffer);
-+    strcat(buffer, &quot;, Spu: &quot;);
-     len = strlen(buffer);
-     switch (spuchannel) {
-     case -2:
--      sprintf(buffer, &quot;%soff&quot;, buffer);
-+      strcat(buffer, &quot;off&quot;);
-       break;
-     case -1:
-       if(!xine_get_spu_lang (fbxine.stream, spuchannel, &amp;buffer[len]))
--	sprintf(buffer, &quot;%sauto&quot;, buffer);
-+	strcat(buffer, &quot;auto&quot;);
-       break;
-     default:
-       if(!xine_get_spu_lang (fbxine.stream, spuchannel, &amp;buffer[len]))
--        sprintf(buffer, &quot;%s%3d&quot;, buffer, spuchannel);
-+        sprintf(&amp;buffer[len], &quot;%3d&quot;, spuchannel);
-       break;
-     }
--    sprintf(buffer, &quot;%s.&quot;, buffer);
-+    strcat(buffer, &quot;.&quot;);
-     xine_osd_draw_text(fbxine.osd.sinfo, x, y, buffer, XINE_OSD_TEXT1);
-     xine_osd_get_text_size(fbxine.osd.sinfo, buffer, &amp;w, &amp;h);
-     if(w &gt; osdw)
-diff -ur xine-ui-0.99.3/src/xitk/file_browser.c xine-ui-0.99.3.sprintf/src/xitk/file_browser.c
---- xine-ui-0.99.3/src/xitk/file_browser.c	2004-12-12 06:19:08.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/file_browser.c	2005-07-05 19:01:50.000000000 -0700
-@@ -983,7 +983,7 @@
-       snprintf(buf, sizeof(buf), &quot;%s&quot;, fb-&gt;current_dir);
-       if(strlen(fb-&gt;current_dir) &gt; 1)
- 	strcat(buf, &quot;/&quot;);
--      sprintf(buf, &quot;%s%s&quot;, buf, fb-&gt;norm_files[sel].name);
-+      strcat(buf, fb-&gt;norm_files[sel].name);
-       
-       if((unlink(buf)) == -1)
- 	xine_error(_(&quot;Unable to delete file '%s': %s.&quot;), buf, strerror(errno));
-@@ -1006,7 +1006,7 @@
-     snprintf(buf, sizeof(buf), _(&quot;Do you really want to delete the file: '%s'&quot;), fb-&gt;current_dir);
-     if(strlen(fb-&gt;current_dir) &gt; 1)
-       strcat(buf, &quot;/&quot;);
--    sprintf(buf, &quot;%s%s' ?.&quot;, buf, fb-&gt;norm_files[sel].name);
-+    sprintf(buf+strlen(buf), &quot;%s' ?&quot;, fb-&gt;norm_files[sel].name);
-     
-     fb_deactivate(fb);
-     xitk_window_dialog_yesno(gGui-&gt;imlib_data, _(&quot;Confirm deletion ?&quot;),
-@@ -1025,7 +1025,7 @@
-   snprintf(buf, sizeof(buf), &quot;%s&quot;, fb-&gt;current_dir);
-   if(strlen(fb-&gt;current_dir) &gt; 1)
-     strcat(buf, &quot;/&quot;);
--  sprintf(buf, &quot;%s%s&quot;, buf, fb-&gt;norm_files[sel].name);
-+  strcat(buf, fb-&gt;norm_files[sel].name);
-   
-   if((rename(buf, newname)) == -1)
-     xine_error(_(&quot;Unable to rename file '%s' to '%s': %s.&quot;), buf, newname, strerror(errno));
-@@ -1044,7 +1044,7 @@
-     snprintf(buf, sizeof(buf), &quot;%s&quot;, fb-&gt;current_dir);
-     if(strlen(fb-&gt;current_dir) &gt; 1)
-       strcat(buf, &quot;/&quot;);
--    sprintf(buf, &quot;%s%s&quot;, buf, fb-&gt;norm_files[sel].name);
-+    strcat(buf, fb-&gt;norm_files[sel].name);
-     
-     fb_deactivate(fb);
-     fb_create_input_window(_(&quot;Rename file&quot;), buf, fb_rename_file_cb, fb);
-diff -ur xine-ui-0.99.3/src/xitk/kbindings.c xine-ui-0.99.3.sprintf/src/xitk/kbindings.c
---- xine-ui-0.99.3/src/xitk/kbindings.c	2004-12-16 08:14:08.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/kbindings.c	2005-07-07 01:53:29.110252000 -0700
-@@ -590,12 +590,12 @@
- 	    char *header = _(&quot;The following key bindings pairs are identical:\n\n&quot;);
- 	    len += strlen(header);
- 	    kmsg = (char *) xine_xmalloc(len + 1);
--	    sprintf(kmsg, &quot;%s%s%c%s%c%s&quot;, header, action1,' ', dna, ' ', action2);
-+	    sprintf(kmsg, &quot;%s%s %s %s&quot;, header, action1, dna, action2);
- 	  }
- 	  else {
- 	    len += 2;
- 	    kmsg = (char *) realloc(kmsg, strlen(kmsg) + len + 1);
--	    sprintf(kmsg, &quot;%s%s%s%c%s%c%s&quot;, kmsg, &quot;, &quot;, action1, ' ', dna, ' ', action2);
-+	    sprintf(kmsg+strlen(kmsg), &quot;, %s %s %s&quot;, action1, dna, action2);
- 	  }
- 	}
-       }
-@@ -607,7 +607,7 @@
-     char          *footer = _(&quot;.\n\nWhat do you want to do ?\n&quot;);
-     
-     kmsg = (char *) realloc(kmsg, strlen(kmsg) + strlen(footer) + 1);
--    sprintf(kmsg, &quot;%s%s&quot;, kmsg, footer);
-+    strcat(kmsg, footer);
- 
-     dump_error(gGui-&gt;verbosity, kmsg);
- 
-@@ -1007,16 +1007,14 @@
-     
-     for(k = kbt-&gt;entry, i = 0; k[i]-&gt;action != NULL; i++) {
-       if(!k[i]-&gt;is_alias) {
--	sprintf(buf, &quot;# %s\n&quot;, k[i]-&gt;comment);
--	sprintf(buf, &quot;%sbegin\n&quot;, buf);
--	sprintf(buf, &quot;%s\tremote = xxxxx\n&quot;, buf);
--	sprintf(buf, &quot;%s\tbutton = xxxxx\n&quot;, buf);
--	sprintf(buf, &quot;%s\tprog   = xine\n&quot;, buf);
--	sprintf(buf, &quot;%s\trepeat = 0\n&quot;, buf);
--	sprintf(buf, &quot;%s\tconfig = %s\n&quot;, buf, k[i]-&gt;action);
--	sprintf(buf, &quot;%send\n\n&quot;, buf);
--	fputs(buf, stream);
--	memset(&amp;buf, 0, sizeof(buf));
-+	fprintf(stream, &quot;# %s\n&quot;
-+	                &quot;begin\n&quot;
-+	                &quot;\tremote = xxxxx\n&quot;
-+	                &quot;\tbutton = xxxxx\n&quot;
-+	                &quot;\tprog   = xine\n&quot;
-+	                &quot;\trepeat = 0\n&quot;
-+	                &quot;\tconfig = %s\n&quot;
-+	                &quot;end\n\n&quot;, k[i]-&gt;comment, k[i]-&gt;action);
-       }
-     }
-     fprintf(stream, &quot;##\n# End of xine key bindings.\n##\n&quot;);
-@@ -1028,33 +1026,31 @@
-     fprintf(stream, &quot;# Automatically generated by %s version %s.\n##\n\n&quot;, PACKAGE, VERSION);
- 
-     for(k = kbt-&gt;entry, i = 0; k[i]-&gt;action != NULL; i++) {
--      snprintf(buf, sizeof(buf), &quot;# %s\n&quot;, k[i]-&gt;comment);
-+      fprintf(stream, &quot;# %s\n&quot;, k[i]-&gt;comment);
- 
-       if(k[i]-&gt;is_alias) {
--	sprintf(buf, &quot;%sAlias {\n&quot;, buf);
--	sprintf(buf, &quot;%s\tentry = %s\n&quot;, buf, k[i]-&gt;action);
-+	fprintf(stream, &quot;Alias {\n&quot;
-+	                &quot;\tentry = %s\n&quot;, k[i]-&gt;action);
-       }
-       else
--	sprintf(buf, &quot;%s%s {\n&quot;, buf, k[i]-&gt;action);
-+	fprintf(stream, &quot;%s {\n&quot;, k[i]-&gt;action);
- 
--      sprintf(buf, &quot;%s\tkey = %s\n&quot;, buf, k[i]-&gt;key);
--      sprintf(buf, &quot;%s%s&quot;, buf, &quot;\tmodifier = &quot;);
-+      fprintf(stream, &quot;\tkey = %s\n&quot;, k[i]-&gt;key);
-+      strcpy(buf, &quot;\tmodifier = &quot;);
-       if(k[i]-&gt;modifier == KEYMOD_NOMOD)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;none&quot;);
-+	strcat(buf, &quot;none, &quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_CONTROL)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;control&quot;);
-+	strcat(buf, &quot;control, &quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_META)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;meta&quot;);
-+	strcat(buf, &quot;meta, &quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_MOD3)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;mod3&quot;);
-+	strcat(buf, &quot;mod3, &quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_MOD4)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;mod4&quot;);
-+	strcat(buf, &quot;mod4, &quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_MOD5)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;mod5&quot;);
--      buf[strlen(buf) - 2] = '\n';
--      buf[strlen(buf) - 1] = '\0';
--      sprintf(buf, &quot;%s%s&quot;, buf, &quot;}\n\n&quot;);
--      fprintf(stream, &quot;%s&quot;, buf);
-+	strcat(buf, &quot;mod5, &quot;);
-+      buf[strlen(buf) - 2] = '\0';
-+      fprintf(stream, &quot;%s\n}\n\n&quot;, buf);
-       memset(&amp;buf, 0, sizeof(buf));
-     }
-     fprintf(stream, &quot;##\n# End of xine key bindings.\n##\n&quot;);
-@@ -1267,31 +1263,35 @@
-     memset(&amp;shortcut, 0, sizeof(shortcut));
-     
-     if(gGui-&gt;shortcut_style == 0) {
--      if(kbe-&gt;modifier &amp; KEYMOD_CONTROL)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, _(&quot;Ctrl&quot;));
--      if(kbe-&gt;modifier &amp; KEYMOD_META)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, _(&quot;Alt&quot;));
-+      if(kbe-&gt;modifier &amp; KEYMOD_CONTROL) {
-+	strcat(shortcut, _(&quot;Ctrl&quot;));
-+	strcat(shortcut, &quot;+&quot;);
-+      }
-+      if(kbe-&gt;modifier &amp; KEYMOD_META) {
-+	strcat(shortcut, _(&quot;Alt&quot;));
-+	strcat(shortcut, &quot;+&quot;);
-+      }
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD3)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, &quot;M3&quot;);
-+	strcat(shortcut, &quot;M3+&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD4)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, &quot;M4&quot;);
-+	strcat(shortcut, &quot;M4+&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD5)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, &quot;M5&quot;);
-+	strcat(shortcut, &quot;M5+&quot;);
-     }
-     else {
-       if(kbe-&gt;modifier &amp; KEYMOD_CONTROL)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;C&quot;);
-+	strcat(shortcut, &quot;C-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_META)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M&quot;);
-+	strcat(shortcut, &quot;M-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD3)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M3&quot;);
-+	strcat(shortcut, &quot;M3-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD4)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M4&quot;);
-+	strcat(shortcut, &quot;M4-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD5)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M5&quot;);
-+	strcat(shortcut, &quot;M5-&quot;);
-     }
-     
--    sprintf(shortcut, &quot;%s%s&quot;, shortcut, kbe-&gt;key);
-+    strcat(shortcut, kbe-&gt;key);
-     
-     return shortcut;
-   }
-@@ -2486,23 +2486,23 @@
- 	  sprintf(buf, &quot;%s&quot;, &quot;\\fBC\\fP&quot;);
- 	if(k[i]-&gt;modifier &amp; KEYMOD_META) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM\\fP&quot;);
- 	}
- 	if(k[i]-&gt;modifier &amp; KEYMOD_MOD3) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM3\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM3\\fP&quot;);
- 	}
- 	if(k[i]-&gt;modifier &amp; KEYMOD_MOD4) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM4\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM4\\fP&quot;);
- 	}
- 	if(k[i]-&gt;modifier &amp; KEYMOD_MOD5) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM5\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM5\\fP&quot;);
- 	}
- 	printf(&quot;%s\\-&quot;, buf);
-       }
-diff -ur xine-ui-0.99.3/src/xitk/kbindings_man.c xine-ui-0.99.3.sprintf/src/xitk/kbindings_man.c
---- xine-ui-0.99.3/src/xitk/kbindings_man.c	2004-12-16 08:14:08.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/kbindings_man.c	2005-07-06 12:12:21.000000000 -0700
-@@ -590,12 +590,12 @@
- 	    char *header = _(&quot;The following key bindings pairs are identical:\n\n&quot;);
- 	    len += strlen(header);
- 	    kmsg = (char *) xine_xmalloc(len + 1);
--	    sprintf(kmsg, &quot;%s%s%c%s%c%s&quot;, header, action1,' ', dna, ' ', action2);
-+	    sprintf(kmsg, &quot;%s%s %s %s&quot;, header, action1, dna, action2);
- 	  }
- 	  else {
- 	    len += 2;
- 	    kmsg = (char *) realloc(kmsg, strlen(kmsg) + len + 1);
--	    sprintf(kmsg, &quot;%s%s%s%c%s%c%s&quot;, kmsg, &quot;, &quot;, action1, ' ', dna, ' ', action2);
-+	    sprintf(kmsg+strlen(kmsg), &quot;, %s %s %s&quot;, action1, dna, action2);
- 	  }
- 	}
-       }
-@@ -607,7 +607,7 @@
-     char          *footer = _(&quot;.\n\nWhat do you want to do ?\n&quot;);
-     
-     kmsg = (char *) realloc(kmsg, strlen(kmsg) + strlen(footer) + 1);
--    sprintf(kmsg, &quot;%s%s&quot;, kmsg, footer);
-+    strcat(kmsg, footer);
- 
-     dump_error(gGui-&gt;verbosity, kmsg);
- 
-@@ -1007,16 +1007,14 @@
-     
-     for(k = kbt-&gt;entry, i = 0; k[i]-&gt;action != NULL; i++) {
-       if(!k[i]-&gt;is_alias) {
--	sprintf(buf, &quot;# %s\n&quot;, k[i]-&gt;comment);
--	sprintf(buf, &quot;%sbegin\n&quot;, buf);
--	sprintf(buf, &quot;%s\tremote = xxxxx\n&quot;, buf);
--	sprintf(buf, &quot;%s\tbutton = xxxxx\n&quot;, buf);
--	sprintf(buf, &quot;%s\tprog   = xine\n&quot;, buf);
--	sprintf(buf, &quot;%s\trepeat = 0\n&quot;, buf);
--	sprintf(buf, &quot;%s\tconfig = %s\n&quot;, buf, k[i]-&gt;action);
--	sprintf(buf, &quot;%send\n\n&quot;, buf);
--	fputs(buf, stream);
--	memset(&amp;buf, 0, sizeof(buf));
-+	fprintf(stream, &quot;# %s\n&quot;
-+	                &quot;begin\n&quot;
-+	                &quot;\tremote = xxxxx\n&quot;
-+	                &quot;\tbutton = xxxxx\n&quot;
-+	                &quot;\tprog   = xine\n&quot;
-+	                &quot;\trepeat = 0\n&quot;
-+	                &quot;\tconfig = %s\n&quot;
-+	                &quot;end\n\n&quot;, k[i]-&gt;comment, k[i]-&gt;action);
-       }
-     }
-     fprintf(stream, &quot;##\n# End of xine key bindings.\n##\n&quot;);
-@@ -1028,33 +1026,31 @@
-     fprintf(stream, &quot;# Automatically generated by %s version %s.\n##\n\n&quot;, PACKAGE, VERSION);
- 
-     for(k = kbt-&gt;entry, i = 0; k[i]-&gt;action != NULL; i++) {
--      snprintf(buf, sizeof(buf), &quot;# %s\n&quot;, k[i]-&gt;comment);
-+      fprintf(stream, &quot;# %s\n&quot;, k[i]-&gt;comment);
- 
-       if(k[i]-&gt;is_alias) {
--	sprintf(buf, &quot;%sAlias {\n&quot;, buf);
--	sprintf(buf, &quot;%s\tentry = %s\n&quot;, buf, k[i]-&gt;action);
-+	fprintf(stream, &quot;Alias {\n&quot;
-+	                &quot;\tentry = %s\n&quot;, k[i]-&gt;action);
-       }
-       else
--	sprintf(buf, &quot;%s%s {\n&quot;, buf, k[i]-&gt;action);
-+	fprintf(stream, &quot;%s {\n&quot;, k[i]-&gt;action);
- 
--      sprintf(buf, &quot;%s\tkey = %s\n&quot;, buf, k[i]-&gt;key);
--      sprintf(buf, &quot;%s%s&quot;, buf, &quot;\tmodifier = &quot;);
-+      fprintf(stream, &quot;\tkey = %s\n&quot;, k[i]-&gt;key);
-+      strcpy(buf, &quot;\tmodifier = &quot;);
-       if(k[i]-&gt;modifier == KEYMOD_NOMOD)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;none&quot;);
-+	sprintf(buf+strlen(buf), &quot;%s, &quot;, &quot;none&quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_CONTROL)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;control&quot;);
-+	sprintf(buf+strlen(buf), &quot;%s, &quot;, &quot;control&quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_META)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;meta&quot;);
-+	sprintf(buf+strlen(buf), &quot;%s, &quot;, &quot;meta&quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_MOD3)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;mod3&quot;);
-+	sprintf(buf+strlen(buf), &quot;%s, &quot;, &quot;mod3&quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_MOD4)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;mod4&quot;);
-+	sprintf(buf+strlen(buf), &quot;%s, &quot;, &quot;mod4&quot;);
-       if(k[i]-&gt;modifier &amp; KEYMOD_MOD5)
--	sprintf(buf, &quot;%s%s, &quot;, buf, &quot;mod5&quot;);
--      buf[strlen(buf) - 2] = '\n';
--      buf[strlen(buf) - 1] = '\0';
--      sprintf(buf, &quot;%s%s&quot;, buf, &quot;}\n\n&quot;);
--      fprintf(stream, &quot;%s&quot;, buf);
-+	sprintf(buf+strlen(buf), &quot;%s, &quot;, &quot;mod5&quot;);
-+      buf[strlen(buf) - 2] = '\0';
-+      fprintf(stream, &quot;%s\n}\n\n&quot;, buf);
-       memset(&amp;buf, 0, sizeof(buf));
-     }
-     fprintf(stream, &quot;##\n# End of xine key bindings.\n##\n&quot;);
-@@ -1267,31 +1263,35 @@
-     memset(&amp;shortcut, 0, sizeof(shortcut));
-     
-     if(gGui-&gt;shortcut_style == 0) {
--      if(kbe-&gt;modifier &amp; KEYMOD_CONTROL)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, _(&quot;Ctrl&quot;));
--      if(kbe-&gt;modifier &amp; KEYMOD_META)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, _(&quot;Alt&quot;));
-+      if(kbe-&gt;modifier &amp; KEYMOD_CONTROL) {
-+	strcat(shortcut, _(&quot;Ctrl&quot;));
-+	strcat(shortcut, &quot;+&quot;);
-+      }
-+      if(kbe-&gt;modifier &amp; KEYMOD_META) {
-+	strcat(shortcut, _(&quot;Alt&quot;));
-+	strcat(shortcut, &quot;+&quot;);
-+      }
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD3)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, &quot;M3&quot;);
-+	strcat(shortcut, &quot;M3+&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD4)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, &quot;M4&quot;);
-+	strcat(shortcut, &quot;M4+&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD5)
--	sprintf(shortcut, &quot;%s%s+&quot;, shortcut, &quot;M5&quot;);
-+	strcat(shortcut, &quot;M5+&quot;);
-     }
-     else {
-       if(kbe-&gt;modifier &amp; KEYMOD_CONTROL)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;C&quot;);
-+	strcat(shortcut, &quot;C-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_META)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M&quot;);
-+	strcat(shortcut, &quot;M-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD3)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M3&quot;);
-+	strcat(shortcut, &quot;M3-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD4)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M4&quot;);
-+	strcat(shortcut, &quot;M4-&quot;);
-       if(kbe-&gt;modifier &amp; KEYMOD_MOD5)
--	sprintf(shortcut, &quot;%s%s-&quot;, shortcut, &quot;M5&quot;);
-+	strcat(shortcut, &quot;M5-&quot;);
-     }
-     
--    sprintf(shortcut, &quot;%s%s&quot;, shortcut, kbe-&gt;key);
-+    strcat(shortcut, kbe-&gt;key);
-     
-     return shortcut;
-   }
-@@ -2486,23 +2486,23 @@
- 	  sprintf(buf, &quot;%s&quot;, &quot;\\fBC\\fP&quot;);
- 	if(k[i]-&gt;modifier &amp; KEYMOD_META) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM\\fP&quot;);
- 	}
- 	if(k[i]-&gt;modifier &amp; KEYMOD_MOD3) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM3\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM3\\fP&quot;);
- 	}
- 	if(k[i]-&gt;modifier &amp; KEYMOD_MOD4) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM4\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM4\\fP&quot;);
- 	}
- 	if(k[i]-&gt;modifier &amp; KEYMOD_MOD5) {
- 	  if(strlen(buf))
--	    sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\-&quot;);
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;\\fBM5\\fP&quot;);
-+	    strcat(buf, &quot;\\-&quot;);
-+	  strcat(buf, &quot;\\fBM5\\fP&quot;);
- 	}
- 	printf(&quot;%s\\-&quot;, buf);
-       }
-diff -ur xine-ui-0.99.3/src/xitk/main.c xine-ui-0.99.3.sprintf/src/xitk/main.c
---- xine-ui-0.99.3/src/xitk/main.c	2004-12-15 13:10:45.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/main.c	2005-07-06 12:56:14.000000000 -0700
-@@ -463,11 +463,12 @@
-     len = strlen(buffer);
-     
-     if((len + (strlen(plugin) + 3)) &lt; 80) {
--      sprintf(buffer, &quot;%s%s%s&quot;, buffer, (strlen(buffer) == strlen(blanks)) ? &quot;&quot; : &quot;, &quot;, plugin);
-+      if (len != strlen(blanks))
-+        strcat(buffer, &quot;, &quot;);
-+      strcat(buffer, plugin);
-     }
-     else {
--      printf(buffer);
--      printf(&quot;,\n&quot;);
-+      printf(&quot;%s,\n&quot;, buffer);
-       snprintf(buffer, sizeof(buffer), &quot;%s%s&quot;, blanks, plugin);
-     }
-     
-@@ -1090,9 +1091,9 @@
- 		 &quot;%s:&quot;, _(&quot;*drum roll*, xine lib wants to take your attention &quot;
- 			  &quot;to deliver an important message to you ;-):&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s %s %s&quot;, buffer, (char *) data + data-&gt;explanation, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; %s %s&quot;, (char *) data + data-&gt;explanation, (char *) data + data-&gt;parameters);
- 	else
--	  sprintf(buffer, &quot;%s %s&quot;, buffer, _(&quot;No Information available.&quot;));
-+	  sprintf(buffer+strlen(buffer), &quot; %s&quot;, _(&quot;No Information available.&quot;));
- 	  
- 	break;
- 
-@@ -1101,14 +1102,14 @@
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;The host you're trying to connect is unknown.\n&quot;
- 						 &quot;Check the validity of the specified hostname.&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s)&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s)&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 	
- 	/* (device name) */
-       case XINE_MSG_UNKNOWN_DEVICE:
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;The device name you specified seems invalid.&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s)&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s)&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 
- 	/* none */
-@@ -1116,21 +1117,21 @@
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;The network looks unreachable.\nCheck your network &quot;
- 						 &quot;setup and/or the server name.&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s)&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s)&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 
- 	/* (host name) */
-       case XINE_MSG_CONNECTION_REFUSED:
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;The connection was refused.\nCheck the host name.&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s)&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s)&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 
- 	/* (file name or mrl) */
-       case XINE_MSG_FILE_NOT_FOUND:
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;The specified file or mrl is not found. Please check it twice.&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s)&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s)&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 
- 	/* (device/file/mrl) */
-@@ -1139,27 +1140,27 @@
- 						 &quot;rights for this, or source doesn't contain data &quot;
- 						 &quot;(e.g: not disc in drive).&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s)&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s)&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 	
- 	/* (library/decoder) */
-       case XINE_MSG_LIBRARY_LOAD_ERROR:
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;A problem occur while loading a library or a decoder&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s: %s&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot;: %s&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 
- 	/* none */
-       case XINE_MSG_ENCRYPTED_SOURCE:
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;The source seems encrypted, and can't be read.&quot;));
- 	if(!strncasecmp(gGui-&gt;mmk.mrl, &quot;dvd:/&quot;, 5)) {
--	  sprintf(buffer, &quot;%s%s&quot;, buffer, _(&quot;\nYour DVD is probably crypted. &quot;
--					    &quot;According to your country laws, you can or can't &quot;
--					    &quot;install/use libdvdcss to be able to read this disc, &quot;
--					    &quot;which you bought.&quot;));
-+	  strcat(buffer, _(&quot;\nYour DVD is probably crypted. &quot;
-+			   &quot;According to your country laws, you can or can't &quot;
-+			   &quot;install/use libdvdcss to be able to read this disc, &quot;
-+			   &quot;which you bought.&quot;));
- 	}
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s)&quot;, buffer, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s)&quot;, (char *) data + data-&gt;parameters);
- 	break;
- 
- 	/* (warning message) */
-@@ -1180,17 +1181,17 @@
-       default:
- 	snprintf(buffer, sizeof(buffer), &quot;%s&quot;, _(&quot;*sight*, unkown error.&quot;));
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s (%s %s)&quot;, buffer, (char *) data + data-&gt;explanation, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot; (%s %s)&quot;, (char *) data + data-&gt;explanation, (char *) data + data-&gt;parameters);
- 	break;
-       }
-       
-       if(gGui-&gt;verbosity &gt;= XINE_VERBOSITY_DEBUG) {
--	sprintf(buffer, &quot;%s\n\n[&quot;, buffer);
-+	strcat(buffer, &quot;\n\n[&quot;);
- 	
- 	if(data-&gt;explanation)
--	  sprintf(buffer, &quot;%s'%s' '%s'&quot;, buffer, (char *) data + data-&gt;explanation, (char *) data + data-&gt;parameters);
-+	  sprintf(buffer+strlen(buffer), &quot;'%s' '%s'&quot;, (char *) data + data-&gt;explanation, (char *) data + data-&gt;parameters);
- 	
--	sprintf(buffer, &quot;%s]&quot;, buffer);
-+	strcat(buffer, &quot;]&quot;);
-       }
-       
-       if(strlen(buffer))
-diff -ur xine-ui-0.99.3/src/xitk/mediamark.c xine-ui-0.99.3.sprintf/src/xitk/mediamark.c
---- xine-ui-0.99.3/src/xitk/mediamark.c	2004-12-15 23:14:26.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/mediamark.c	2005-07-06 12:58:03.000000000 -0700
-@@ -561,7 +561,7 @@
- 		    if((buffer[strlen(buffer) - 1] == '/') &amp;&amp; (*ln == '/'))
- 		      buffer[strlen(buffer) - 1] = '\0';
- 		    
--		    sprintf(buffer, &quot;%s%s&quot;, buffer, ln);
-+		    strcat(buffer, ln);
- 		    
- 		    if(_file_exist(buffer))
- 		      entry = buffer;
-@@ -681,7 +681,7 @@
- 			  if((buffer[strlen(buffer) - 1] == '/') &amp;&amp; (*ln == '/'))
- 			    buffer[strlen(buffer) - 1] = '\0';
- 			  
--			  sprintf(buffer, &quot;%s%s&quot;, buffer, ln);
-+			  strcat(buffer, ln);
- 			  
- 			  if(_file_exist(buffer))
- 			    entry = buffer;
-@@ -774,7 +774,7 @@
- 		  if((buffer[strlen(buffer) - 1] == '/') &amp;&amp; (*ln == '/'))
- 		    buffer[strlen(buffer) - 1] = '\0';
- 		  
--		  sprintf(buffer, &quot;%s%s&quot;, buffer, ln);
-+		  strcat(buffer, ln);
- 		  
- 		  if(_file_exist(buffer))
- 		    entry = buffer;
-@@ -1125,7 +1125,7 @@
- 		  sprintf(real_title, &quot;%s&quot;, atitle);
- 		    
- 		  if(aauthor &amp;&amp; strlen(aauthor))
--		    sprintf(real_title, &quot;%s (%s)&quot;, real_title, aauthor);
-+		    sprintf(real_title+strlen(real_title), &quot; (%s)&quot;, aauthor);
- 		}
- 		  
- 		mmk = (mediamark_t **) realloc(mmk, sizeof(mediamark_t *) * (entries_asx + 2));
-diff -ur xine-ui-0.99.3/src/xitk/network.c xine-ui-0.99.3.sprintf/src/xitk/network.c
---- xine-ui-0.99.3/src/xitk/network.c	2004-08-24 13:06:26.000000000 -0700
-+++ xine-ui-0.99.3.sprintf/src/xitk/network.c	2005-07-06 13:08:58.000000000 -0700
-@@ -550,7 +550,7 @@
-   /* Each line sent is '\n' terminated */
-   if(cr) {
-     if((buf[strlen(buf)] == '\0') &amp;&amp; (buf[strlen(buf) - 1] != '\n'))
--      sprintf(buf, &quot;%s%c&quot;, buf, '\n');
-+      strcat(buf, &quot;\n&quot;);
-   }
-   
-   return _sock_write(socket, buf, strlen(buf));
-@@ -746,15 +746,15 @@
-   while(session_commands[i]-&gt;command != NULL) {
-     if(session_commands[i]-&gt;enable) {
-       if((curpos + maxlen) &gt;= 80) {
--	sprintf(buf, &quot;%s\n       &quot;, buf);
-+	strcat(buf, &quot;\n       &quot;);
- 	curpos = 7;
-       }
-       
--      sprintf(buf, &quot;%s%s&quot;, buf, session_commands[i]-&gt;command);
-+      strcat(buf, session_commands[i]-&gt;command);
-       curpos += strlen(session_commands[i]-&gt;command);
-       
-       for(j = 0; j &lt; (maxlen - strlen(session_commands[i]-&gt;command)); j++) {
--	sprintf(buf, &quot;%s &quot;, buf);
-+	strcat(buf, &quot; &quot;);
- 	curpos++;
-       }
-     }
-@@ -1111,10 +1111,9 @@
-   memset(&amp;buf, 0, sizeof(buf));
- 
-   for(i = 0; i &lt; num_commands; i++) {
--    if(strlen(buf))
--      sprintf(buf, &quot;%s %s&quot;, buf, commands[i]);
--    else
--      snprintf(buf, sizeof(buf), &quot;%s&quot;, commands[i]);
-+    if(i)
-+      strcat(buf, &quot; &quot;);
-+    strcat(buf, commands[i]);
-   }
- 
-   client_handle_command(session, buf);
-@@ -1709,11 +1708,11 @@
-   
-   while(commands[i].command != NULL) {
-     if(commands[i].public) {
--      sprintf(buf, &quot;%s\t%s&quot;, buf, commands[i].command);
-+      sprintf(buf+strlen(buf), &quot;\t%s&quot;, commands[i].command);
-     }
-     i++;
-   }
--  sprintf(buf, &quot;%s.\n&quot;, buf);
-+  strcat(buf, &quot;.\n&quot;);
-   sock_write(client_info-&gt;socket, buf);
- }
- 
-@@ -1744,22 +1743,22 @@
-     while(commands[i].command != NULL) {
-       if(commands[i].public) {
- 	if((curpos + maxlen) &gt;= 80) {
--	  sprintf(buf, &quot;%s\n       &quot;, buf);
-+	  strcat(buf, &quot;\n       &quot;);
- 	  curpos = 7;
- 	}
- 	
--	sprintf(buf, &quot;%s%s&quot;, buf, commands[i].command);
-+	strcat(buf, commands[i].command);
- 	curpos += strlen(commands[i].command);
- 	
- 	for(j = 0; j &lt; (maxlen - strlen(commands[i].command)); j++) {
--	  sprintf(buf, &quot;%s &quot;, buf);
-+	  strcat(buf, &quot; &quot;);
- 	  curpos++;
- 	}
-       }
-       i++;
-     }
-     
--    sprintf(buf, &quot;%s\n&quot;, buf);
-+    strcat(buf, &quot;\n&quot;);
-     sock_write(client_info-&gt;socket, buf);
-   }
-   else {
-@@ -2091,11 +2090,11 @@
- 	status = xine_get_status(gGui-&gt;stream);
- 	
- 	if(status &lt;= XINE_STATUS_QUIT)
--	  sprintf(buf, &quot;%s%s&quot;, buf, status_struct[status].name);
-+	  strcat(buf, status_struct[status].name);
- 	else
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;*UNKNOWN*&quot;);
-+	  strcat(buf, &quot;*UNKNOWN*&quot;);
- 	
--	sprintf(buf, &quot;%s%c&quot;, buf, '\n');
-+	strcat(buf, &quot;\n&quot;);
- 	sock_write(client_info-&gt;socket, buf);
-       }
-       else if(is_arg_contain(client_info, 1, &quot;speed&quot;)) {
-@@ -2111,11 +2110,11 @@
- 	}
- 	
- 	if(i &lt; ((sizeof(speeds_struct) / sizeof(speeds_struct[0])) - 1))
--	  sprintf(buf, &quot;%s%s&quot;, buf, speeds_struct[i].name);
-+	  strcat(buf, speeds_struct[i].name);
- 	else
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;*UNKNOWN*&quot;);
-+	  strcat(buf, &quot;*UNKNOWN*&quot;);
- 	
--	sprintf(buf, &quot;%s%c&quot;, buf, '\n');
-+	strcat(buf, &quot;\n&quot;);
- 	sock_write(client_info-&gt;socket, buf);
-       }
-       else if(is_arg_contain(client_info, 1, &quot;position&quot;)) {
-@@ -2149,26 +2148,26 @@
- 
- 	switch(gGui-&gt;playlist.loop) {
- 	case PLAYLIST_LOOP_NO_LOOP:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'No Loop'&quot;);
-+	  strcat(buf, &quot;'No Loop'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_LOOP:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Loop'&quot;);
-+	  strcat(buf, &quot;'Loop'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_REPEAT:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Repeat'&quot;);
-+	  strcat(buf, &quot;'Repeat'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_SHUFFLE:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Shuffle'&quot;);
-+	  strcat(buf, &quot;'Shuffle'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_SHUF_PLUS:	
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Shuffle forever'&quot;);
-+	  strcat(buf, &quot;'Shuffle forever'&quot;);
- 	  break;
- 	default:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'!!Unknown!!'&quot;);
-+	  strcat(buf, &quot;'!!Unknown!!'&quot;);
- 	  break;
- 	}
- 
--	sprintf(buf, &quot;%s.\n&quot;, buf);
-+	strcat(buf, &quot;.\n&quot;);
- 	sock_write(client_info-&gt;socket, buf);
-       }
-     }
-diff -ur xine-ui-0.99.3/src/xitk/osd.c xine-ui-0.99.3.sprintf/src/xitk/osd.c
---- xine-ui-0.99.3/src/xitk/osd.c	2004-11-15 13:43:20.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/osd.c	2005-07-06 17:20:30.000000000 -0700
-@@ -338,34 +338,34 @@
-     len = strlen(buffer);
-     switch(audiochannel) {
-     case -2:
--      sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;off&quot;);
-+      strcat(buffer, &quot;off&quot;);
-       break;
-     case -1:
-       if(!xine_get_audio_lang (gGui-&gt;stream, audiochannel, &amp;buffer[len]))
--	sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;auto&quot;);
-+	strcat(buffer, &quot;auto&quot;);
-       break;
-     default:
-       if(!xine_get_audio_lang (gGui-&gt;stream, audiochannel, &amp;buffer[len]))
--	sprintf(buffer, &quot;%s%3d&quot;, buffer, audiochannel);
-+	sprintf(buffer+strlen(buffer), &quot;%3d&quot;, audiochannel);
-       break;
-     }
- 
--    sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;, Spu: &quot;);
-+    strcat(buffer, &quot;, Spu: &quot;);
-     len = strlen(buffer);
-     switch (spuchannel) {
-     case -2:
--      sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;off&quot;);
-+      strcat(buffer, &quot;off&quot;);
-       break;
-     case -1:
-       if(!xine_get_spu_lang (gGui-&gt;stream, spuchannel, &amp;buffer[len]))
--	sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;auto&quot;);
-+	strcat(buffer, &quot;auto&quot;);
-       break;
-     default:
-       if(!xine_get_spu_lang (gGui-&gt;stream, spuchannel, &amp;buffer[len]))
--        sprintf(buffer, &quot;%s%3d&quot;, buffer, spuchannel);
-+        sprintf(buffer+strlen(buffer), &quot;%3d&quot;, spuchannel);
-       break;
-     }
--    sprintf(buffer, &quot;%s.&quot;, buffer);
-+    strcat(buffer, &quot;.&quot;);
-     xine_osd_draw_text(gGui-&gt;osd.sinfo.osd[0], x, y, buffer, XINE_OSD_TEXT1);
-     xine_osd_get_text_size(gGui-&gt;osd.sinfo.osd[0], buffer, &amp;w, &amp;h);
-     if(w &gt; osdw)
-@@ -384,12 +384,12 @@
-       int totaldays;
-       
-       totaldays  = totaltime / (3600 * 24);
--      sprintf(buffer, &quot;%s(%.0f%%) %s &quot;, buffer, ((float)playedtime / (float)totaltime) * 100, _(&quot;of&quot;));
-+      sprintf(buffer+strlen(buffer), &quot;(%.0f%%) %s &quot;, ((float)playedtime / (float)totaltime) * 100, _(&quot;of&quot;));
-       
-       if(totaldays &gt; 0)
--	sprintf(buffer, &quot;%s%d::%02d&quot;, buffer, totaldays, totaltime / 3600);
-+	sprintf(buffer+strlen(buffer), &quot;%d::%02d&quot;, totaldays, totaltime / 3600);
-       else
--	sprintf(buffer, &quot;%s%d:%02d:%02d&quot;, buffer, totaltime / 3600, (totaltime % 3600) / 60, totaltime % 60);
-+	sprintf(buffer+strlen(buffer), &quot;%d:%02d:%02d&quot;, totaltime / 3600, (totaltime % 3600) / 60, totaltime % 60);
-     }
-     
-     xine_osd_draw_text(gGui-&gt;osd.sinfo.osd[0], x, y, buffer, XINE_OSD_TEXT1);
-diff -ur xine-ui-0.99.3/src/xitk/stream_infos.c xine-ui-0.99.3.sprintf/src/xitk/stream_infos.c
---- xine-ui-0.99.3/src/xitk/stream_infos.c	2004-12-15 13:10:46.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/stream_infos.c	2005-07-06 17:21:22.000000000 -0700
-@@ -265,11 +265,11 @@
-     if((aartist &amp;&amp; strlen(aartist)) || (aalbum &amp;&amp; strlen(aalbum))) {
-       strcat(ident, &quot; (&quot;);
-       if(aartist &amp;&amp; strlen(aartist))
--	sprintf(ident, &quot;%s%s&quot;, ident, aartist);
-+	strcat(ident, aartist);
-       if((aartist &amp;&amp; strlen(aartist)) &amp;&amp; (aalbum &amp;&amp; strlen(aalbum)))
- 	strcat(ident, &quot; - &quot;);
-       if(aalbum &amp;&amp; strlen(aalbum))
--	sprintf(ident, &quot;%s%s&quot;, ident, aalbum);
-+	strcat(ident, aalbum);
-       strcat(ident, &quot;)&quot;);
-     }
-   }
-diff -ur xine-ui-0.99.3/src/xitk/viewlog.c xine-ui-0.99.3.sprintf/src/xitk/viewlog.c
---- xine-ui-0.99.3/src/xitk/viewlog.c	2004-12-15 13:10:46.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/viewlog.c	2005-07-06 17:23:03.000000000 -0700
-@@ -229,7 +229,7 @@
- 	    break;
- 	    
- 	  default:
--	    sprintf(buf, &quot;%s%c&quot;, buf, *p);
-+	    sprintf(buf+strlen(buf), &quot;%c&quot;, *p);
- 	    break;
- 	  }
- 	  
-diff -ur xine-ui-0.99.3/src/xitk/xine-remote.c xine-ui-0.99.3.sprintf/src/xitk/xine-remote.c
---- xine-ui-0.99.3/src/xitk/xine-remote.c	2004-08-24 13:06:26.000000000 -0700
-+++ xine-ui-0.99.3.sprintf/src/xitk/xine-remote.c	2005-07-06 17:36:35.000000000 -0700
-@@ -550,7 +550,7 @@
-   /* Each line sent is '\n' terminated */
-   if(cr) {
-     if((buf[strlen(buf)] == '\0') &amp;&amp; (buf[strlen(buf) - 1] != '\n'))
--      sprintf(buf, &quot;%s%c&quot;, buf, '\n');
-+      strcat(buf, &quot;\n&quot;);
-   }
-   
-   return _sock_write(socket, buf, strlen(buf));
-@@ -746,15 +746,15 @@
-   while(session_commands[i]-&gt;command != NULL) {
-     if(session_commands[i]-&gt;enable) {
-       if((curpos + maxlen) &gt;= 80) {
--	sprintf(buf, &quot;%s\n       &quot;, buf);
-+	strcat(buf, &quot;\n       &quot;);
- 	curpos = 7;
-       }
-       
--      sprintf(buf, &quot;%s%s&quot;, buf, session_commands[i]-&gt;command);
-+      strcat(buf, session_commands[i]-&gt;command);
-       curpos += strlen(session_commands[i]-&gt;command);
-       
-       for(j = 0; j &lt; (maxlen - strlen(session_commands[i]-&gt;command)); j++) {
--	sprintf(buf, &quot;%s &quot;, buf);
-+	strcat(buf, &quot; &quot;);
- 	curpos++;
-       }
-     }
-@@ -1111,10 +1111,9 @@
-   memset(&amp;buf, 0, sizeof(buf));
- 
-   for(i = 0; i &lt; num_commands; i++) {
--    if(strlen(buf))
--      sprintf(buf, &quot;%s %s&quot;, buf, commands[i]);
--    else
--      snprintf(buf, sizeof(buf), &quot;%s&quot;, commands[i]);
-+    if(i)
-+      strcat(buf, &quot; &quot;);
-+    strcat(buf, commands[i]);
-   }
- 
-   client_handle_command(session, buf);
-@@ -1709,11 +1708,11 @@
-   
-   while(commands[i].command != NULL) {
-     if(commands[i].public) {
--      sprintf(buf, &quot;%s\t%s&quot;, buf, commands[i].command);
-+      sprintf(buf+strlen(buf), &quot;\t%s&quot;, commands[i].command);
-     }
-     i++;
-   }
--  sprintf(buf, &quot;%s.\n&quot;, buf);
-+  strcat(buf, &quot;.\n&quot;);
-   sock_write(client_info-&gt;socket, buf);
- }
- 
-@@ -1744,22 +1743,22 @@
-     while(commands[i].command != NULL) {
-       if(commands[i].public) {
- 	if((curpos + maxlen) &gt;= 80) {
--	  sprintf(buf, &quot;%s\n       &quot;, buf);
-+	  strcat(buf, &quot;\n       &quot;);
- 	  curpos = 7;
- 	}
- 	
--	sprintf(buf, &quot;%s%s&quot;, buf, commands[i].command);
-+	strcat(buf, commands[i].command);
- 	curpos += strlen(commands[i].command);
- 	
- 	for(j = 0; j &lt; (maxlen - strlen(commands[i].command)); j++) {
--	  sprintf(buf, &quot;%s &quot;, buf);
-+	  strcat(buf, &quot; &quot;);
- 	  curpos++;
- 	}
-       }
-       i++;
-     }
-     
--    sprintf(buf, &quot;%s\n&quot;, buf);
-+    strcat(buf, &quot;\n&quot;);
-     sock_write(client_info-&gt;socket, buf);
-   }
-   else {
-@@ -2091,11 +2090,11 @@
- 	status = xine_get_status(gGui-&gt;stream);
- 	
- 	if(status &lt;= XINE_STATUS_QUIT)
--	  sprintf(buf, &quot;%s%s&quot;, buf, status_struct[status].name);
-+	  strcat(buf, status_struct[status].name);
- 	else
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;*UNKNOWN*&quot;);
-+	  strcat(buf, &quot;*UNKNOWN*&quot;);
- 	
--	sprintf(buf, &quot;%s%c&quot;, buf, '\n');
-+	strcat(buf, &quot;\n&quot;);
- 	sock_write(client_info-&gt;socket, buf);
-       }
-       else if(is_arg_contain(client_info, 1, &quot;speed&quot;)) {
-@@ -2111,11 +2110,11 @@
- 	}
- 	
- 	if(i &lt; ((sizeof(speeds_struct) / sizeof(speeds_struct[0])) - 1))
--	  sprintf(buf, &quot;%s%s&quot;, buf, speeds_struct[i].name);
-+	  strcat(buf, speeds_struct[i].name);
- 	else
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;*UNKNOWN*&quot;);
-+	  strcat(buf, &quot;*UNKNOWN*&quot;);
- 	
--	sprintf(buf, &quot;%s%c&quot;, buf, '\n');
-+	strcat(buf, &quot;\n&quot;);
- 	sock_write(client_info-&gt;socket, buf);
-       }
-       else if(is_arg_contain(client_info, 1, &quot;position&quot;)) {
-@@ -2149,26 +2148,26 @@
- 
- 	switch(gGui-&gt;playlist.loop) {
- 	case PLAYLIST_LOOP_NO_LOOP:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'No Loop'&quot;);
-+	  strcat(buf, &quot;'No Loop'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_LOOP:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Loop'&quot;);
-+	  strcat(buf, &quot;'Loop'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_REPEAT:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Repeat'&quot;);
-+	  strcat(buf, &quot;'Repeat'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_SHUFFLE:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Shuffle'&quot;);
-+	  strcat(buf, &quot;'Shuffle'&quot;);
- 	  break;
- 	case PLAYLIST_LOOP_SHUF_PLUS:	
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'Shuffle forever'&quot;);
-+	  strcat(buf, &quot;'Shuffle forever'&quot;);
- 	  break;
- 	default:
--	  sprintf(buf, &quot;%s%s&quot;, buf, &quot;'!!Unknown!!'&quot;);
-+	  strcat(buf, &quot;'!!Unknown!!'&quot;);
- 	  break;
- 	}
- 
--	sprintf(buf, &quot;%s.\n&quot;, buf);
-+	strcat(buf, &quot;.\n&quot;);
- 	sock_write(client_info-&gt;socket, buf);
-       }
-     }
-diff -ur xine-ui-0.99.3/src/xitk/xine-toolkit/image.c xine-ui-0.99.3.sprintf/src/xitk/xine-toolkit/image.c
---- xine-ui-0.99.3/src/xitk/xine-toolkit/image.c	2004-12-16 13:35:30.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/xine-toolkit/image.c	2005-07-06 17:37:27.000000000 -0700
-@@ -1334,7 +1334,7 @@
-       /* Cut title, add three dots a the end */
-       nchar -= 4;
-       snprintf(buf, nchar, &quot;%s&quot;, title);
--      sprintf(buf, &quot;%s%s&quot;, buf, &quot;...&quot;);
-+      strcat(buf, &quot;...&quot;);
-     }
-     else
-       sprintf(buf, &quot;%s&quot;, title);
-diff -ur xine-ui-0.99.3/src/xitk/xine-toolkit/skin.c xine-ui-0.99.3.sprintf/src/xitk/xine-toolkit/skin.c
---- xine-ui-0.99.3/src/xitk/xine-toolkit/skin.c	2004-11-22 00:45:26.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/xine-toolkit/skin.c	2005-07-06 17:40:32.000000000 -0700
-@@ -149,44 +149,44 @@
- 		snprintf(ppath, sizeof(ppath), &quot;%s&quot;, skonfig-&gt;path);
- 		if((z = strrchr(ppath, '/')) != NULL) {
- 		  *z = '\0';
--		  sprintf(buf2, &quot;%s%s&quot;, buf2, ppath);
-+		  strcat(buf2, ppath);
- 		}
- 	      }
- 	    }
- 	    else if(!strncmp(&quot;SKIN_VERSION&quot;, var, strlen(var))) {
- 	      if(skonfig-&gt;version &gt;= 0)
--		sprintf(buf2, &quot;%s%d&quot;, buf2, skonfig-&gt;version);
-+		sprintf(buf2+strlen(buf2), &quot;%d&quot;, skonfig-&gt;version);
- 	    }
- 	    else if(!strncmp(&quot;SKIN_AUTHOR&quot;, var, strlen(var))) {
- 	      if(skonfig-&gt;author)
--		sprintf(buf2, &quot;%s%s&quot;, buf2, skonfig-&gt;author);
-+		strcat(buf2, skonfig-&gt;author);
- 	    }
- 	    else if(!strncmp(&quot;SKIN_PATH&quot;, var, strlen(var))) {
- 	      if(skonfig-&gt;path)
--		sprintf(buf2, &quot;%s%s&quot;, buf2, skonfig-&gt;path);
-+		strcat(buf2, skonfig-&gt;path);
- 	    }
- 	    else if(!strncmp(&quot;SKIN_NAME&quot;, var, strlen(var))) {
- 	      if(skonfig-&gt;name)
--		sprintf(buf2, &quot;%s%s&quot;, buf2, skonfig-&gt;name);
-+		strcat(buf2, skonfig-&gt;name);
- 	    }
- 	    else if(!strncmp(&quot;SKIN_DATE&quot;, var, strlen(var))) {
- 	      if(skonfig-&gt;date)
--		sprintf(buf2, &quot;%s%s&quot;, buf2, skonfig-&gt;date);
-+		strcat(buf2, skonfig-&gt;date);
- 	    }
- 	    else if(!strncmp(&quot;SKIN_URL&quot;, var, strlen(var))) {
- 	      if(skonfig-&gt;url)
--		sprintf(buf2, &quot;%s%s&quot;, buf2, skonfig-&gt;url);
-+		strcat(buf2, skonfig-&gt;url);
- 	    }
- 	    else if(!strncmp(&quot;HOME&quot;, var, strlen(var))) {
- 	      if(skonfig-&gt;url)
--		sprintf(buf2, &quot;%s%s&quot;, buf2, xitk_get_homedir());
-+		strcat(buf2, xitk_get_homedir());
- 	    }
- 	    /* else ignore */
- 	  }
- 	  break;
- 	  
- 	default:
--	  sprintf(buf2, &quot;%s%c&quot;, buf2, *p);
-+	  sprintf(buf2+strlen(buf2), &quot;%c&quot;, *p);
- 	  break;
- 	}
- 	p++;
-diff -ur xine-ui-0.99.3/src/xitk/xine-toolkit/xitk.c xine-ui-0.99.3.sprintf/src/xitk/xine-toolkit/xitk.c
---- xine-ui-0.99.3/src/xitk/xine-toolkit/xitk.c	2004-12-15 13:10:48.000000000 -0800
-+++ xine-ui-0.99.3.sprintf/src/xitk/xine-toolkit/xitk.c	2005-07-07 01:32:18.000000000 -0700
-@@ -1828,7 +1828,7 @@
- 	    gXitk-&gt;use_xshm = 0;
- 	  else {
- 	    XShmDetach(display, &amp;shminfo);
--	    sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;[XShm]&quot;);
-+	    strcat(buffer, &quot;[XShm]&quot;);
- 	  }
- 	  
- 	  XDestroyImage(xim);
-@@ -1844,12 +1844,12 @@
- #endif
- 
- #ifdef WITH_XFT
--  sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;[XFT]&quot;);
-+  strcat(buffer, &quot;[XFT]&quot;);
- #elif defined(WITH_XMB)
--  sprintf(buffer, &quot;%s%s&quot;, buffer, &quot;[XMB]&quot;);
-+  strcat(buffer, &quot;[XMB]&quot;);
- #endif
-   
--  sprintf(buffer, &quot;%s%s&quot;, buffer, &quot; ]-&quot;);
-+  strcat(buffer, &quot; ]-&quot;);
- 
-   if(verbosity)
-     printf(buffer);

Deleted: trunk/rpms/xine/xine-ui-0.99.3-uifixups.patch
===================================================================
--- trunk/rpms/xine/xine-ui-0.99.3-uifixups.patch	2007-05-04 11:33:12 UTC (rev 5366)
+++ trunk/rpms/xine/xine-ui-0.99.3-uifixups.patch	2007-05-04 15:33:27 UTC (rev 5367)
@@ -1,104 +0,0 @@
-diff -ur xine-ui-0.99.3/src/xitk/help.c xine-ui-0.99.3-uifixups/src/xitk/help.c
---- xine-ui-0.99.3/src/xitk/help.c	2004-12-15 13:10:44.000000000 -0800
-+++ xine-ui-0.99.3-uifixups/src/xitk/help.c	2005-07-07 15:44:39.000000000 -0700
-@@ -392,7 +392,7 @@
-   xitk_list_append_content ((XITK_WIDGET_LIST_LIST(help-&gt;widget_list)),
-     (help-&gt;tabs = 
-      xitk_noskin_tabs_create(help-&gt;widget_list, 
--			     &amp;tab, 20, 24, WINDOW_WIDTH - 40, tabsfontname)));
-+			     &amp;tab, 20, 24, WINDOW_WIDTH - 40, 28, tabsfontname)));
-   
-   xitk_enable_and_show_widget(help-&gt;tabs);
- 
-diff -ur xine-ui-0.99.3/src/xitk/setup.c xine-ui-0.99.3-uifixups/src/xitk/setup.c
---- xine-ui-0.99.3/src/xitk/setup.c	2004-12-15 13:10:46.000000000 -0800
-+++ xine-ui-0.99.3-uifixups/src/xitk/setup.c	2005-07-12 17:49:15.000000000 -0700
-@@ -56,7 +56,7 @@
-     int                  lbearing, rbearing, width, ascent, descent;                            \
-     xitk_font_t         *fs;                                                                    \
-                                                                                                 \
--    image = xitk_image_create_image(gGui-&gt;imlib_data, FRAME_WIDTH + 1, FRAME_HEIGHT + 1);       \
-+    image = xitk_image_create_image(gGui-&gt;imlib_data, FRAME_WIDTH + 1, FRAME_HEIGHT + 2);       \
-                                                                                                 \
-     fs = xitk_font_load_font(gGui-&gt;display, boldfontname);                                      \
-     xitk_font_set_font(fs, (XITK_WIDGET_LIST_GC(setup-&gt;widget_list)));                          \
-@@ -1006,7 +1006,7 @@
-   tab.userdata          = NULL;
-   xitk_list_append_content ((XITK_WIDGET_LIST_LIST(setup-&gt;widget_list)),
-     (setup-&gt;tabs = 
--     xitk_noskin_tabs_create(setup-&gt;widget_list, &amp;tab, 20, 24, WINDOW_WIDTH - 40, tabsfontname)));
-+     xitk_noskin_tabs_create(setup-&gt;widget_list, &amp;tab, 20, 24, WINDOW_WIDTH - 40, 28, tabsfontname)));
-   
-   xitk_enable_and_show_widget(setup-&gt;tabs);
- 
-@@ -1047,7 +1047,6 @@
- 
-   if(rpos != setup-&gt;first_displayed) {
-     setup-&gt;first_displayed = rpos;
--    setup_clear_tab();
-     setup_paint_widgets();
-   }
- }
-diff -ur xine-ui-0.99.3/src/xitk/viewlog.c xine-ui-0.99.3-uifixups/src/xitk/viewlog.c
---- xine-ui-0.99.3/src/xitk/viewlog.c	2004-12-15 13:10:46.000000000 -0800
-+++ xine-ui-0.99.3-uifixups/src/xitk/viewlog.c	2005-07-07 15:44:39.000000000 -0700
-@@ -319,7 +319,7 @@
-   tab.userdata          = NULL;
-   xitk_list_append_content ((XITK_WIDGET_LIST_LIST(viewlog-&gt;widget_list)),
-     (viewlog-&gt;tabs = 
--     xitk_noskin_tabs_create(viewlog-&gt;widget_list, &amp;tab, 20, 24, WINDOW_WIDTH - 40, tabsfontname)));
-+     xitk_noskin_tabs_create(viewlog-&gt;widget_list, &amp;tab, 20, 24, WINDOW_WIDTH - 40, 28, tabsfontname)));
-   xitk_enable_and_show_widget(viewlog-&gt;tabs);
- 
-   bg = xitk_image_create_xitk_pixmap(gGui-&gt;imlib_data, WINDOW_WIDTH, WINDOW_HEIGHT);
-diff -ur xine-ui-0.99.3/src/xitk/xine-toolkit/tabs.c xine-ui-0.99.3-uifixups/src/xitk/xine-toolkit/tabs.c
---- xine-ui-0.99.3/src/xitk/xine-toolkit/tabs.c	2004-04-13 12:55:50.000000000 -0700
-+++ xine-ui-0.99.3-uifixups/src/xitk/xine-toolkit/tabs.c	2005-07-07 15:44:39.000000000 -0700
-@@ -323,7 +323,8 @@
-  */
- xitk_widget_t *xitk_noskin_tabs_create(xitk_widget_list_t *wl,
- 				       xitk_tabs_widget_t *t, 
--				       int x, int y, int width, char *fontname) {
-+				       int x, int y, int width, int height,
-+				       char *fontname) {
-   xitk_widget_t         *mywidget;
-   tabs_private_data_t   *private_data;
-   
-@@ -367,7 +368,10 @@
-     XITK_WIDGET_INIT(&amp;lb, t-&gt;imlibdata);
-     XITK_WIDGET_INIT(&amp;b, t-&gt;imlibdata);
- 
--    private_data-&gt;bheight = fheight * 2;
-+    if (height == 0)
-+      private_data-&gt;bheight = fheight * 2;
-+    else
-+      private_data-&gt;bheight = height;
- 
-     for(i = 0; i &lt; t-&gt;num_entries; i++) {
- 
-diff -ur xine-ui-0.99.3/src/xitk/xine-toolkit/test.c xine-ui-0.99.3-uifixups/src/xitk/xine-toolkit/test.c
---- xine-ui-0.99.3/src/xitk/xine-toolkit/test.c	2004-07-25 17:43:47.000000000 -0700
-+++ xine-ui-0.99.3-uifixups/src/xitk/xine-toolkit/test.c	2005-07-07 15:44:39.000000000 -0700
-@@ -509,7 +509,7 @@
-   t.userdata          = NULL;
-   xitk_list_append_content (XITK_WIDGET_LIST_LIST(test-&gt;widget_list),
- 		    (test-&gt;tabs = 
--		     xitk_noskin_tabs_create(test-&gt;widget_list, &amp;t, x, y, w, fontname)));
-+		     xitk_noskin_tabs_create(test-&gt;widget_list, &amp;t, x, y, w, 0, fontname)));
-   xitk_enable_and_show_widget(test-&gt;tabs);
- 
- }
-diff -ur xine-ui-0.99.3/src/xitk/xine-toolkit/xitk.h xine-ui-0.99.3-uifixups/src/xitk/xine-toolkit/xitk.h
---- xine-ui-0.99.3/src/xitk/xine-toolkit/xitk.h	2004-12-16 13:35:30.000000000 -0800
-+++ xine-ui-0.99.3-uifixups/src/xitk/xine-toolkit/xitk.h	2005-07-07 15:44:39.000000000 -0700
-@@ -2351,7 +2351,8 @@
- 
- xitk_widget_t *xitk_noskin_tabs_create(xitk_widget_list_t *wl,
- 				       xitk_tabs_widget_t *t, 
--				       int x, int y, int width, char *fontname);
-+				       int x, int y, int width, int height,
-+				       char *fontname);
- int xitk_tabs_get_current_selected(xitk_widget_t *w);
- char *xitk_tabs_get_current_tab_selected(xitk_widget_t *w);
- void xitk_tabs_set_current_selected(xitk_widget_t *w, int select);
-

Deleted: trunk/rpms/xine/xine-ui-0.99.3-xftfontsize.patch
===================================================================
--- trunk/rpms/xine/xine-ui-0.99.3-xftfontsize.patch	2007-05-04 11:33:12 UTC (rev 5366)
+++ trunk/rpms/xine/xine-ui-0.99.3-xftfontsize.patch	2007-05-04 15:33:27 UTC (rev 5367)
@@ -1,64 +0,0 @@
-diff -ur xine-ui-0.99.3/src/xitk/xine-toolkit/font.c xine-ui-0.99.3-xftfontsize/src/xitk/xine-toolkit/font.c
---- xine-ui-0.99.3/src/xitk/xine-toolkit/font.c	2004-05-07 14:06:54.000000000 -0700
-+++ xine-ui-0.99.3-xftfontsize/src/xitk/xine-toolkit/font.c	2005-07-12 18:18:53.000000000 -0700
-@@ -320,7 +320,8 @@
-       || strncmp(old_name, &quot;-&quot;, 1) == 0 || strncmp(old_name, &quot;*&quot;, 1) == 0) {
-     char  font[50];
-     char  style[15];
--    char  *psize = &quot;*&quot;, size[5], ptsize[5], pxsize[5];
-+    char  ptsize[5], pxsize[5];
-+    int   xft_pxsize;
-     
-     if( old_name[0] == '-' )
-       old_name++;
-@@ -330,27 +331,18 @@
-     sscanf( old_name, &quot;%*[^-]-%*[^-]-%*[^-]-%*[^-]-%*[^-]-%*[^-]-%[^-]&quot;, pxsize);
-     sscanf( old_name, &quot;%*[^-]-%*[^-]-%*[^-]-%*[^-]-%*[^-]-%*[^-]-%*[^-]-%[^-]&quot;, ptsize);
- 
--    /* Xft doesn't have lucida, which is a small font;
--     * thus we make whatever is chosen 2 sizes smaller */
--    if(strlen(pxsize) &amp;&amp; strcmp(pxsize, &quot;*&quot;))
--      psize = pxsize;
--    else if(strlen(ptsize) &amp;&amp; strcmp(ptsize, &quot;*&quot;))
--      psize = ptsize;
-+    if (!strcmp(style, &quot;*&quot;))
-+      style[0] = 0;
- 
--    if( strcmp( font, &quot;lucida&quot; ) == 0 ) {
--      int  sz = strtol(psize, &amp;psize, 10);
-+    if(strlen(pxsize) &amp;&amp; strcmp(pxsize, &quot;*&quot;)) {
-+      /* Xft fonts usually come out looking slightly smaller at a given pixel
-+       * size, so bump the px size up by 1 to get a more consistent appearance.
-+       */
-+      xft_pxsize = atoi(pxsize) + 1;
-+      snprintf(new_name, sizeof(new_name)-5, &quot;%s:pixelsize=%d:%s&quot;, font, xft_pxsize, style);
-+    } else if(strlen(ptsize) &amp;&amp; strcmp(ptsize, &quot;*&quot;))
-+      snprintf(new_name, sizeof(new_name)-5, &quot;%s-%s:%s&quot;, font, ptsize, style);
- 
--      sz -= 2;
--      snprintf(size , sizeof(size), &quot;%i&quot;, sz);
--    }
--    else
--      snprintf(size, sizeof(size), &quot;%s&quot;, psize);
--    
--    if( strcmp( style , &quot;bold&quot; ) != 0 )
--      snprintf( new_name, sizeof(new_name), &quot;%s-%s&quot;, font, size );
--    else
--      snprintf( new_name, sizeof(new_name), &quot;%s-%s:%s&quot;, font, size, style );
-- 
-     return new_name;
-   }
- 
-@@ -1096,8 +1088,11 @@
-   XUNLOCK(xtfs-&gt;display);
-   free(encoded_text);
- 
-+  /* Note: the fact that we have to fudge ascent so much means we're doing
-+   * something wrong somewhere.  I don't have time to figure it out right now,
-+   * and this makes everything look about right onscreen, at least... --AS */
-   if (width) *width       = xft_extents.width;
--  if (ascent) *ascent     = xtfs-&gt;font-&gt;ascent - 1;
-+  if (ascent) *ascent     = xtfs-&gt;font-&gt;ascent - 4;
-   if (descent) *descent   = xtfs-&gt;font-&gt;descent;
-   if (lbearing) *lbearing = 0;
-   if (rbearing) *rbearing = 0;

Modified: trunk/rpms/xine/xine.spec
===================================================================
--- trunk/rpms/xine/xine.spec	2007-05-04 11:33:12 UTC (rev 5366)
+++ trunk/rpms/xine/xine.spec	2007-05-04 15:33:27 UTC (rev 5367)
@@ -108,7 +108,7 @@
 
 %build
 %configure \
-%{?_without_lirc:--disable-lirc}
+    %{?_without_lirc:--disable-lirc}
 %{__make} %{?_smp_mflags}
 
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004165.html">[svn] r5366 - trunk/tools/dar
</A></li>
	<LI>Next message: <A HREF="004167.html">[svn] r5368 - trunk/rpms/xine
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4166">[ date ]</a>
              <a href="thread.html#4166">[ thread ]</a>
              <a href="subject.html#4166">[ subject ]</a>
              <a href="author.html#4166">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
