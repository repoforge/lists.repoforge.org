<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r3717 - trunk/web/freshrpms.net/docs/oracle
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3717%20-%20trunk/web/freshrpms.net/docs/oracle&In-Reply-To=%3C20051114183150.9022C3180E7%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002516.html">
   <LINK REL="Next"  HREF="002518.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r3717 - trunk/web/freshrpms.net/docs/oracle</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3717%20-%20trunk/web/freshrpms.net/docs/oracle&In-Reply-To=%3C20051114183150.9022C3180E7%40pooch.vmhosting.org%3E"
       TITLE="[svn] r3717 - trunk/web/freshrpms.net/docs/oracle">packagers at lists.rpmforge.net
       </A><BR>
    <I>Mon Nov 14 19:31:50 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002516.html">[svn] r3716 - trunk/rpms/httping
</A></li>
        <LI>Next message: <A HREF="002518.html">[svn] r3718 - trunk/web/freshrpms.net/docs/oracle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2517">[ date ]</a>
              <a href="thread.html#2517">[ thread ]</a>
              <a href="subject.html#2517">[ subject ]</a>
              <a href="author.html#2517">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2005-11-14 19:31:49 +0100 (Mon, 14 Nov 2005)
New Revision: 3717

Modified:
   trunk/web/freshrpms.net/docs/oracle/index.html
   trunk/web/freshrpms.net/docs/oracle/php-modules.spec
Log:
Update to the freshrpms.net oracle documentation page.


Modified: trunk/web/freshrpms.net/docs/oracle/index.html
===================================================================
--- trunk/web/freshrpms.net/docs/oracle/index.html	2005-11-14 16:06:45 UTC (rev 3716)
+++ trunk/web/freshrpms.net/docs/oracle/index.html	2005-11-14 18:31:49 UTC (rev 3717)
@@ -8,19 +8,19 @@
 &lt;/p&gt;
 
 &lt;p&gt;
-Here are the files I use to configure RHEL4 servers as Oracle clients. They have been tested with php-oci8, squale and perl-DBD-Oracle. The main oracle-instantclient packages have been rebuilt from the zip files provided by Oracle because their rpm packages don't work as expected (no require/provide information, no ldconfig calls), and because Oracle doesn't provide any x86_64 rpm packages. Of course, the proprietary Oracle bits aren't provided here, which is why you'll find only the .nosrc.rpm. For other packages, binaries are provided since they only link dynamically to the Oracle libraries and contain no proprietary code.&lt;br /&gt;
+Here are the files I use to configure RHEL4 servers as Oracle clients. They have been tested with php-oci8, squale and perl-DBD-Oracle. The main oracle-instantclient packages have been rebuilt from the zip files provided by Oracle because their rpm packages don't work as expected (no require/provide information, no ldconfig calls), and because Oracle didn't use to provide any x86_64 rpm packages. Of course, the proprietary Oracle bits aren't available here, which is why you'll find only the .nosrc.rpm files. For other packages, binaries are provided since they only link dynamically to the Oracle libraries and contain no proprietary code.&lt;br /&gt;
 &lt;ul&gt;
-  &lt;li&gt;libsqlora8-2.3.2-2&lt;/li&gt;
-  &lt;li&gt;libsqlora8-devel-2.3.2-2&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-10.1.0.3&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-basic-10.1.0.3-3&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-devel-10.1.0.3-3&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-jdbc-10.1.0.3-3&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-sqlplus-10.1.0.3-3&lt;/li&gt;
-  &lt;li&gt;perl-DBD-Oracle-1.16-1&lt;/li&gt;
+  &lt;li&gt;libsqlora8-2.3.2-5&lt;/li&gt;
+  &lt;li&gt;libsqlora8-devel-2.3.2-5&lt;/li&gt;
+  &lt;li&gt;oracle-instantclient-10.2.0.1-5&lt;/li&gt;
+  &lt;li&gt;oracle-instantclient-basic-10.2.0.1-5&lt;/li&gt;
+  &lt;li&gt;oracle-instantclient-devel-10.2.0.1-5&lt;/li&gt;
+  &lt;li&gt;oracle-instantclient-jdbc-10.2.0.1-5&lt;/li&gt;
+  &lt;li&gt;oracle-instantclient-sqlplus-10.2.0.1-5&lt;/li&gt;
+  &lt;li&gt;perl-DBD-Oracle-1.16-2&lt;/li&gt;
   &lt;li&gt;php-oci8-4.3.9-2&lt;/li&gt;
-  &lt;li&gt;squale-0.1.3-1&lt;/li&gt;
-  &lt;li&gt;squale-devel-0.1.3-1&lt;/li&gt;
+  &lt;li&gt;squale-0.1.5-1&lt;/li&gt;
+  &lt;li&gt;squale-devel-0.1.5-1&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/p&gt;
 
@@ -29,7 +29,7 @@
 &lt;/p&gt;
 
 &lt;p&gt;
-If you need to rebuild the php-oci8 module for another PHP version, you can adapt the spec file and patch from below. As you can see, I also include other modules that aren't part of the original package (mcrypt, mime_magic, pdf) since I also need those, but don't provide binaries here since it would mean adding other libraries and such.
+If you need to rebuild the php-oci8 module for another PHP version, you can adapt the spec file and patch from below. As you can see, I also include other modules that aren't part of the original package (mcrypt, currently) since I also need those, but don't provide binaries here since it would mean adding other libraries and such.
 &lt;ul&gt;
   &lt;li&gt;&lt;a href=&quot;php-modules.spec&quot;&gt;php-modules.spec&lt;/a&gt;&lt;/li&gt;
   &lt;li&gt;&lt;a href=&quot;php-4.3.10-oci8instantclient.patch&quot;&gt;php-4.3.10-oci8instantclient.patch&lt;/a&gt; (tested with 4.3.9 and 4.3.10)&lt;/li&gt;

Modified: trunk/web/freshrpms.net/docs/oracle/php-modules.spec
===================================================================
--- trunk/web/freshrpms.net/docs/oracle/php-modules.spec	2005-11-14 16:06:45 UTC (rev 3716)
+++ trunk/web/freshrpms.net/docs/oracle/php-modules.spec	2005-11-14 18:31:49 UTC (rev 3717)
@@ -1,21 +1,22 @@
 # $Id$
 
-%define php_extdir %(php-config --extension-dir 2&gt;/dev/null || echo &quot;/usr/lib/php4&quot;)
-#define php_version #(rpm -q --qf '%{version}' php || echo &quot;none&quot;)
-%define php_version 4.3.10
-%define extensions mcrypt oci8 mime_magic pdf
+%define php_extdir %(php-config --extension-dir 2&gt;/dev/null || echo %{_libdir}/php4)
+%{!?php_version:%define php_version %(php-config --version 2&gt;/dev/null || echo 4.4.1)}
+%define oracle_version 10.2.0.1
+%define extensions mcrypt oci8
 
 Summary: Additional PHP extension modules
 Name: php-modules
 Version: %{php_version}
-Release: 2
+Release: 1
 License: PHP
 Group: Development/Languages
 URL: <A HREF="http://www.php.net/">http://www.php.net/</A>
 Source: <A HREF="http://www.php.net/distributions/php-%{version">http://www.php.net/distributions/php-%{version</A>}.tar.bz2
-Patch: php-4.3.10-oci8instantclient.patch
+Patch0: php-4.3.11-oci8.patch
+#Patch1: php-4.3.11-pdf-lib64.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-BuildRequires: php, php-devel
+BuildRequires: php, php-devel = %{php_version}
 # Required by phpize
 BuildRequires: autoconf, automake, libtool, gcc-c++
 
@@ -57,31 +58,32 @@
 support to PHP.
 
 
-%package -n php-mime_magic
-Summary: A PHP module to guess the content type and encoding of a file.
-Group: Development/Languages
-Requires: php = %{version}, file
+#%package -n php-mime_magic
+#Summary: A PHP module to guess the content type and encoding of a file.
+#Group: Development/Languages
+#Requires: php = %{version}, file
+#
+#%description -n php-mime_magic
+#The functions in this module try to guess the content type and encoding of a
+#file by looking for certain magic byte sequences at specific positions within
+#the file. While this is not a bullet proof approach the heuristics used do a
+#very good job.
+#This extension is derived from Apache mod_mime_magic, which is itself based
+#on the file command maintained by Ian F. Darwin.
 
-%description -n php-mime_magic
-The functions in this module try to guess the content type and encoding of a
-file by looking for certain magic byte sequences at specific positions within
-the file. While this is not a bullet proof approach the heuristics used do a
-very good job.
-This extension is derived from Apache mod_mime_magic, which is itself based
-on the file command maintained by Ian F. Darwin.
 
+#%package -n php-pdf
+#Summary: A PHP module to generate PDF files using pdflib
+#Group: Development/Languages
+#Requires: php = %{version}
+#BuildRequires: pdflib-devel, gd-devel
+#BuildRequires: zlib-devel, libjpeg-devel, libpng-devel, libtiff-devel
+#
+#%description -n php-pdf
+#The php-pdf package contains a dynamic shared object that will add support
+#for generating PDF files by using pdflib.
 
-%package -n php-pdf
-Summary: A PHP module to generate PDF files using pdflib
-Group: Development/Languages
-Requires: php = %{version}
-BuildRequires: pdflib-devel, gd-devel
 
-%description -n php-pdf
-The php-pdf package contains a dynamic shared object that will add support
-for generating PDF files by using pdflib.
-
-
 #%package -n php-xslt
 #Summary: A PHP module for Extensible Stylesheet Language Transformations
 #Group: Development/Languages
@@ -95,19 +97,26 @@
 
 
 %prep 
-%setup -n php-%{version}
-%patch -p1 -b .instantclient
+%setup -q -n php-%{version}
+%patch0 -p1 -b .oci8
+#ifarch x86_64
+#patch1 -p1 -b .pdf-lib64
+#endif
 
 
 %build
+unset ORACLE_HOME
 for ext in %{extensions}; do
     if [ &quot;${ext}&quot; = &quot;xslt&quot; ]; then
         options=&quot;--with-xslt-sablot --with-sablot-js&quot;
-    elif [ &quot;${ext}&quot; = &quot;pdf&quot; ]; then
-        # Ugly include workaround
-        mkdir ext/pdf/ext
-        ln -s ../../gd ext/pdf/ext/gd
-        options=&quot;&quot;
+#    elif [ &quot;${ext}&quot; = &quot;pdf&quot; ]; then
+#        # Ugly include workaround
+#        mkdir ext/pdf/ext
+#        ln -s ../../gd ext/pdf/ext/gd
+#        options=&quot;--with-jpeg-dir=%{_prefix} --with-png-dir=%{_prefix} --with-zlib-dir=%{_prefix} --with-tiff-dir=%{_prefix}&quot;
+    elif [ &quot;${ext}&quot; = &quot;oci8&quot; ]; then
+        #options=&quot;--without-oci8 --with-oci8-instant-client=%{_libdir}/oracle/%{oracle_version}/client/%{_lib}&quot;
+        options=&quot;--with-oci8-instant-client=%{_libdir}/oracle/%{oracle_version}/client/%{_lib}&quot;
     else
         options=&quot;&quot;
     fi
@@ -139,13 +148,13 @@
 # Specific configuration additions
 
 # mime_magic
-%{__cat} &gt;&gt; %{buildroot}%{_sysconfdir}/php.d/mime_magic.ini &lt;&lt; EOF
+#%{__cat} &gt;&gt; %{buildroot}%{_sysconfdir}/php.d/mime_magic.ini &lt;&lt; EOF
+#
+#; Configuration
+#mime_magic.magicfile = /usr/share/file/magic.mime
+#EOF
 
-; Configuration
-mime_magic.magicfile = /usr/share/file/magic.mime
-EOF
 
-
 %clean
 %{__rm} -rf %{buildroot}
 
@@ -162,17 +171,17 @@
 %config(noreplace) %{_sysconfdir}/php.d/oci8.ini
 %{php_extdir}/oci8.so
 
-%files -n php-mime_magic
-%defattr(-, root, root, 0755)
-%doc ext/mime_magic/CREDITS ext/mime_magic/TODO
-%config(noreplace) %{_sysconfdir}/php.d/mime_magic.ini
-%{php_extdir}/mime_magic.so
+#%files -n php-mime_magic
+#%defattr(-, root, root, 0755)
+#%doc ext/mime_magic/CREDITS ext/mime_magic/TODO
+#%config(noreplace) %{_sysconfdir}/php.d/mime_magic.ini
+#%{php_extdir}/mime_magic.so
 
-%files -n php-pdf
-%defattr(-, root, root, 0755)
-%doc ext/pdf/CREDITS
-%config(noreplace) %{_sysconfdir}/php.d/pdf.ini
-%{php_extdir}/pdf.so
+#%files -n php-pdf
+#%defattr(-, root, root, 0755)
+#%doc ext/pdf/CREDITS
+#%config(noreplace) %{_sysconfdir}/php.d/pdf.ini
+#%{php_extdir}/pdf.so
 
 #%files -n php-xslt
 #%defattr(-, root, root, 0755)
@@ -182,6 +191,16 @@
 
 
 %changelog
+* Tue Jul 19 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 4.4.0-1
+- Update to 4.4.0.
+- Remove pdf module, we now use php-pecl-pdflib instead (much more recent).
+- Remove mime_magic module, it's now built into PHP.
+
+* Tue Apr 12 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 4.3.11-1
+- Update to 4.3.11, remove no longer needed oci8 instant client patch.
+- Actually, plain oci8 doesn't want to be disabled... so patch again to remove.
+- Add php-4.3.11-pdf-lib64.patch (for x86_64 only, as it changes all &quot;lib&quot;s).
+
 * Wed Feb  9 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 4.3.10-1
 - Added php-pdf module.
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002516.html">[svn] r3716 - trunk/rpms/httping
</A></li>
	<LI>Next message: <A HREF="002518.html">[svn] r3718 - trunk/web/freshrpms.net/docs/oracle
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2517">[ date ]</a>
              <a href="thread.html#2517">[ thread ]</a>
              <a href="subject.html#2517">[ subject ]</a>
              <a href="author.html#2517">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
