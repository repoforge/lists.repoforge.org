<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r3743 - in trunk/rpms: amule videolan-client
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3743%20-%20in%20trunk/rpms%3A%20amule%20videolan-client&In-Reply-To=%3C20051128180507.03F1F3180F2%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002542.html">
   <LINK REL="Next"  HREF="002544.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r3743 - in trunk/rpms: amule videolan-client</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r3743%20-%20in%20trunk/rpms%3A%20amule%20videolan-client&In-Reply-To=%3C20051128180507.03F1F3180F2%40pooch.vmhosting.org%3E"
       TITLE="[svn] r3743 - in trunk/rpms: amule videolan-client">packagers at lists.rpmforge.net
       </A><BR>
    <I>Mon Nov 28 19:05:07 CET 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="002542.html">[svn] r3742 - in branches/rpms/matthias: . wxGTK wxGTK24
</A></li>
        <LI>Next message: <A HREF="002544.html">[svn] r3744 - in trunk/rpms: . bogofilter cinepaint exrtools fox	freelords fuzzyclock kcheckgmail kchmviewer lcms netwox openexr vips
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2543">[ date ]</a>
              <a href="thread.html#2543">[ thread ]</a>
              <a href="subject.html#2543">[ subject ]</a>
              <a href="author.html#2543">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2005-11-28 19:04:44 +0100 (Mon, 28 Nov 2005)
New Revision: 3743

Removed:
   trunk/rpms/videolan-client/vlc-0.8.2-64bit.patch
   trunk/rpms/videolan-client/vlc-0.8.2-asm.patch
Modified:
   trunk/rpms/amule/amule.spec
   trunk/rpms/videolan-client/videolan-client.spec
Log:
Update videolan-client to 0.8.4, update aMule build dep s/wxGTK2/wxGTK/.


Modified: trunk/rpms/amule/amule.spec
===================================================================
--- trunk/rpms/amule/amule.spec	2005-11-28 15:45:59 UTC (rev 3742)
+++ trunk/rpms/amule/amule.spec	2005-11-28 18:04:44 UTC (rev 3743)
@@ -6,7 +6,7 @@
 Summary: Easy to use client for ED2K Peer-to-Peer Network based on eMule
 Name: amule
 Version: 2.0.3
-Release: 1%{?prever:.%{prever}}
+Release: 2%{?prever:.%{prever}}
 License: GPL
 Group: Applications/Internet
 URL: <A HREF="http://www.amule.org/">http://www.amule.org/</A>
@@ -14,7 +14,7 @@
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires(post): /usr/sbin/alternatives
 Requires(preun): /usr/sbin/alternatives
-BuildRequires: gcc-c++, wxGTK2-devel &gt;= 2.5.1, curl-devel &gt;= 7.9.7, zlib-devel
+BuildRequires: gcc-c++, wxGTK-devel &gt;= 2.5.1, curl-devel &gt;= 7.9.7, zlib-devel
 BuildRequires: gd-progs, gd-devel, libidn-devel, libjpeg-devel, gettext-devel
 # Required on Yellow Dog Linux 3.0
 BuildRequires: openssl-devel
@@ -83,6 +83,9 @@
 
 
 %changelog
+* Mon Nov 28 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.0.3-2
+- Change build requirement s/wxGTK2/wxGTK/.
+
 * Tue Aug  2 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.0.3-1
 - Update to 2.0.3.
 

Modified: trunk/rpms/videolan-client/videolan-client.spec
===================================================================
--- trunk/rpms/videolan-client/videolan-client.spec	2005-11-28 15:45:59 UTC (rev 3742)
+++ trunk/rpms/videolan-client/videolan-client.spec	2005-11-28 18:04:44 UTC (rev 3743)
@@ -39,20 +39,18 @@
 %{?yd3:%define _without_fribidi 1}
 
 %define desktop_vendor rpmforge
-%define ffmpeg_date    20050624
+%define ffmpeg_date    20051126
 %define real_name      vlc
 
 Summary: The VideoLAN client, also a very good standalone video player
 Name: videolan-client
-Version: 0.8.2
-Release: 3
+Version: 0.8.4
+Release: 1
 License: GPL
 Group: Applications/Multimedia
 URL: <A HREF="http://www.videolan.org/">http://www.videolan.org/</A>
-Source0: <A HREF="http://download.videolan.org/pub/vlc/%{version">http://download.videolan.org/pub/vlc/%{version</A>}/vlc-%{version}.tar.bz2
-Source1: <A HREF="http://download.videolan.org/pub/vlc/0.8.1/contrib/ffmpeg-%{ffmpeg_date">http://download.videolan.org/pub/vlc/0.8.1/contrib/ffmpeg-%{ffmpeg_date</A>}.tar.bz2
-Patch0: vlc-0.8.2-64bit.patch
-Patch1: vlc-0.8.2-asm.patch
+Source0: <A HREF="http://downloads.videolan.org/pub/videolan/vlc/%{version">http://downloads.videolan.org/pub/videolan/vlc/%{version</A>}/vlc-%{version}.tar.bz2
+Source1: <A HREF="http://downloads.videolan.org/pub/videolan/vlc/%{version">http://downloads.videolan.org/pub/videolan/vlc/%{version</A>}/contrib/ffmpeg-%{ffmpeg_date}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: gcc-c++, XFree86-devel, libpng-devel, libxml2-devel
 BuildRequires: libgcrypt-devel, gnutls-devel
@@ -74,8 +72,8 @@
 %{!?_without_vorbis:BuildRequires: libvorbis-devel}
 %{!?_without_speex:BuildRequires: speex-devel}
 %{!?_without_theora:BuildRequires: libtheora-devel}
-%{?_with_x264:BuildRequires: x264-devel}
-%{!?_without_sdl:BuildRequires: SDL-devel}
+%{!?_without_x264:BuildRequires: x264-devel}
+%{!?_without_sdl:BuildRequires: SDL-devel, SDL_image-devel}
 %{!?_without_fribidi:BuildRequires: fribidi-devel}
 %{!?_without_aa:BuildRequires: aalib-devel}
 %{!?_without_caca:BuildRequires: libcaca-devel}
@@ -90,6 +88,12 @@
 %{?_with_ncurses:BuildRequires: ncurses-devel}
 %{?_with_glide:BuildRequires: Glide3-devel}
 %{!?_without_cdio:BuildRequires: libcdio-devel}
+# Added in 0.8.4
+%{!?_without_gnomevfs:BuildRequires: gnome-vfs2-devel}
+%{?_with_hal:BuildRequires: hal-devel}
+%{!?_without_vcd:BuildRequires: vcdimager-devel}
+%{?_with_avahi:BuildRequires: avahi-devel}
+%{!?_without_daap:BuildRequires: libopendaap-devel}
 Conflicts: vlc
 
 %description
@@ -98,13 +102,14 @@
 well as DVDs, VCDs, and various streaming protocols.
 
 Available rpmbuild rebuild options :
---with mga ncurses glide pth mozilla portaudio
+--with mga ncurses glide pth mozilla portaudio avahi hal
 --without dvdread dvdnav dvbpsi v4l avi asf aac ogg mad ffmpeg cdio
           a52 vorbis mpeg2dec flac aa caca esd arts alsa wxwin xosd
-          lsp lirc id3tag faad2 theora mkv modplug smb speex glx
+          lsp lirc id3tag faad2 theora mkv modplug smb speex glx x264
+          gnomevfs vcd daap
 
 Options that would need not yet existing add-on packages :
---with tremor tarkin svgalib ggi x264
+--with tremor tarkin svgalib ggi
 
 
 %package devel
@@ -123,21 +128,19 @@
 
 %prep
 %setup -n %{real_name}-%{version} -a 1
-%patch0 -p1 -b .64bit
-%patch1 -p1 -b .asm
 # Fix PLUGIN_PATH path for lib64
 %{__perl} -pi -e 's|/lib/vlc|/%{_lib}/vlc|g' vlc-config.in.in configure*
 
 
 %build
+export CFLAGS=&quot;%{optflags}&quot;
 # Build bundeled ffmpeg first
 pushd ffmpeg-%{ffmpeg_date}
-    %configure \
-        --disable-shared \
-        --enable-gpl \
+    ./configure \
+        --enable-mp3lame \
+        --enable-faac \
         --enable-pp \
-        --enable-mp3lame \
-        --enable-faac
+        --enable-gpl
     %{__make} %{?_smp_mflags}
 popd
 
@@ -147,8 +150,6 @@
 %endif
 
 %configure \
-    --x-libraries=&quot;%{_prefix}/X11R6/%{_lib}&quot; \
-    --program-prefix=&quot;%{?_program_prefix}&quot; \
     --enable-release \
     %{!?_without_dvdread:--enable-dvdread} \
     %{?_without_dvdnav:--disable-dvdnav} \
@@ -255,12 +256,22 @@
 %doc HACKING
 %{_bindir}/vlc-config
 %{_includedir}/vlc/
-%dir %{_libdir}/vlc/
-%{_libdir}/vlc/*.a
-%{_libdir}/libvlc.a
+#dir %{_libdir}/vlc/
+%exclude %{_libdir}/vlc/*.a
+%exclude %{_libdir}/libvlc.a
 
 
 %changelog
+* Sun Nov 27 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.4-1
+- Update to 0.8.4.
+- Remove no longer needed 64bit and asm patches.
+- Exclude static libraries (from the devel package).
+- Add SDL_image-devel to the sdl conditional build (now checked for).
+- Add gnome-vfs, vcdimager, libopendaap support.
+- Ready for bonjour support (avahi will be in FC5).
+- Now enable x264 by default (there are freshrpms.net packages of it now).
+- Add hal, but disable for now (build fails on FC4).
+
 * Tue Jul 12 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.2-3
 - Force altivec gcc flags on ppc as configure doesn't set them properly.
 - Fix PLUGIN_PATH path for lib64 (they got searched for in lib, not lib64).

Deleted: trunk/rpms/videolan-client/vlc-0.8.2-64bit.patch
===================================================================
--- trunk/rpms/videolan-client/vlc-0.8.2-64bit.patch	2005-11-28 15:45:59 UTC (rev 3742)
+++ trunk/rpms/videolan-client/vlc-0.8.2-64bit.patch	2005-11-28 18:04:44 UTC (rev 3743)
@@ -1,11 +0,0 @@
-diff -Naupr vlc-0.8.2.orig/modules/gui/skins2/src/theme_loader.cpp vlc-0.8.2/modules/gui/skins2/src/theme_loader.cpp
---- vlc-0.8.2.orig/modules/gui/skins2/src/theme_loader.cpp	2005-06-25 15:43:08.000000000 +0200
-+++ vlc-0.8.2/modules/gui/skins2/src/theme_loader.cpp	2005-06-28 16:00:44.000000000 +0200
-@@ -556,6 +556,6 @@ int gzopen_frontend( char *pathname, int
-         return -1;
-     }
- 
--    return (int)gzf;
-+    return 1;
- }
- #endif

Deleted: trunk/rpms/videolan-client/vlc-0.8.2-asm.patch
===================================================================
--- trunk/rpms/videolan-client/vlc-0.8.2-asm.patch	2005-11-28 15:45:59 UTC (rev 3742)
+++ trunk/rpms/videolan-client/vlc-0.8.2-asm.patch	2005-11-28 18:04:44 UTC (rev 3743)
@@ -1,84 +0,0 @@
---- vlc-0.8.2/src/misc/cpu.c	2005-06-25 15:43:02.000000000 +0200
-+++ vlc-20050712/src/misc/cpu.c	2005-07-12 09:19:25.000000000 +0200
-@@ -1,8 +1,8 @@
- /*****************************************************************************
-  * cpu.c: CPU detection code
-  *****************************************************************************
-- * Copyright (C) 1998-2004 VideoLAN
-- * $Id: cpu.c 10687 2005-04-15 18:06:51Z massiot $
-+ * Copyright (C) 1998-2004 the VideoLAN team
-+ * $Id: cpu.c 11664 2005-07-09 06:17:09Z courmisch $
-  *
-  * Authors: Samuel Hocevar &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sam at zoy.org</A>&gt;
-  *          Christophe Massiot &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">massiot at via.ecp.fr</A>&gt;
-@@ -84,17 +84,31 @@ uint32_t CPUCapabilities( void )
-     volatile vlc_bool_t    b_amd;
- 
-     /* Needed for x86 CPU capabilities detection */
--#   define cpuid( reg )                    \
--        asm volatile ( &quot;push %%ebx\n\t&quot;   \
--                       &quot;cpuid\n\t&quot;         \
--                       &quot;movl %%ebx,%1\n\t&quot; \
--                       &quot;pop %%ebx\n\t&quot;    \
--                     : &quot;=a&quot; ( i_eax ),     \
--                       &quot;=r&quot; ( i_ebx ),     \
--                       &quot;=c&quot; ( i_ecx ),     \
--                       &quot;=d&quot; ( i_edx )      \
--                     : &quot;a&quot;  ( reg )        \
--                     : &quot;cc&quot; );
-+#   if defined( __x86_64__ )
-+#       define cpuid( reg )                    \
-+            asm volatile ( &quot;push %%rbx\n\t&quot;    \
-+                           &quot;cpuid\n\t&quot;         \
-+                           &quot;movl %%ebx,%1\n\t&quot; \
-+                           &quot;pop %%rbx\n\t&quot;     \
-+                         : &quot;=a&quot; ( i_eax ),     \
-+                           &quot;=r&quot; ( i_ebx ),     \
-+                           &quot;=c&quot; ( i_ecx ),     \
-+                           &quot;=d&quot; ( i_edx )      \
-+                         : &quot;a&quot;  ( reg )        \
-+                         : &quot;cc&quot; );
-+#   else
-+#       define cpuid( reg )                    \
-+            asm volatile ( &quot;push %%ebx\n\t&quot;    \
-+                           &quot;cpuid\n\t&quot;         \
-+                           &quot;movl %%ebx,%1\n\t&quot; \
-+                           &quot;pop %%ebx\n\t&quot;     \
-+                         : &quot;=a&quot; ( i_eax ),     \
-+                           &quot;=r&quot; ( i_ebx ),     \
-+                           &quot;=c&quot; ( i_ecx ),     \
-+                           &quot;=d&quot; ( i_edx )      \
-+                         : &quot;a&quot;  ( reg )        \
-+                         : &quot;cc&quot; );
-+#   endif
- 
- #   if defined( CAN_COMPILE_SSE ) || defined ( CAN_COMPILE_3DNOW ) \
-      &amp;&amp; defined( HAVE_SIGNAL_H )
-@@ -103,6 +117,8 @@ uint32_t CPUCapabilities( void )
- 
-     i_capabilities |= CPU_CAPABILITY_FPU;
- 
-+#   if defined( __i386__ )
-+    /* check if cpuid instruction is supported */
-     asm volatile ( &quot;push %%ebx\n\t&quot;
-                    &quot;pushf\n\t&quot;
-                    &quot;pop %%eax\n\t&quot;
-@@ -121,12 +137,15 @@ uint32_t CPUCapabilities( void )
- 
-     if( i_eax == i_ebx )
-     {
--#   if defined( CAN_COMPILE_SSE ) || defined ( CAN_COMPILE_3DNOW ) \
--     &amp;&amp; defined( HAVE_SIGNAL_H )
-+#       if defined( CAN_COMPILE_SSE ) || defined ( CAN_COMPILE_3DNOW ) \
-+            &amp;&amp; defined( HAVE_SIGNAL_H )
-         signal( SIGILL, pf_sigill );
--#   endif
-+#       endif
-         return i_capabilities;
-     }
-+#   else
-+    /* x86_64 supports cpuid instruction, so we dont need to check it */
-+#   endif
- 
-     i_capabilities |= CPU_CAPABILITY_486;
- 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002542.html">[svn] r3742 - in branches/rpms/matthias: . wxGTK wxGTK24
</A></li>
	<LI>Next message: <A HREF="002544.html">[svn] r3744 - in trunk/rpms: . bogofilter cinepaint exrtools fox	freelords fuzzyclock kcheckgmail kchmviewer lcms netwox openexr vips
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2543">[ date ]</a>
              <a href="thread.html#2543">[ thread ]</a>
              <a href="subject.html#2543">[ subject ]</a>
              <a href="author.html#2543">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
