<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r4326 - trunk/web/freshrpms.net/docs/oracle
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r4326%20-%20trunk/web/freshrpms.net/docs/oracle&In-Reply-To=%3C20060424150331.D39D631815B%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003125.html">
   <LINK REL="Next"  HREF="003127.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r4326 - trunk/web/freshrpms.net/docs/oracle</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r4326%20-%20trunk/web/freshrpms.net/docs/oracle&In-Reply-To=%3C20060424150331.D39D631815B%40pooch.vmhosting.org%3E"
       TITLE="[svn] r4326 - trunk/web/freshrpms.net/docs/oracle">packagers at lists.rpmforge.net
       </A><BR>
    <I>Mon Apr 24 17:03:31 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003125.html">[svn] r4325 - in trunk/rpms: . php-squale
</A></li>
        <LI>Next message: <A HREF="003127.html">[svn] r4327 - in trunk/rpms: . apt calife dnsmasq mrxvt	perl-Module-Install perl-Test-Base rsync svnmailer watchdog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3126">[ date ]</a>
              <a href="thread.html#3126">[ thread ]</a>
              <a href="subject.html#3126">[ subject ]</a>
              <a href="author.html#3126">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: thias
Date: 2006-04-24 17:03:13 +0200 (Mon, 24 Apr 2006)
New Revision: 4326

Added:
   trunk/web/freshrpms.net/docs/oracle/php-4.3.11-oci8.patch
   trunk/web/freshrpms.net/docs/oracle/php-4.3.9-oci8.patch
Removed:
   trunk/web/freshrpms.net/docs/oracle/php-4.3.10-oci8instantclient.patch
Modified:
   trunk/web/freshrpms.net/docs/oracle/index.html
   trunk/web/freshrpms.net/docs/oracle/php-modules.spec
Log:
Update oracle instant-client packages on the freshrpms.net website.


Modified: trunk/web/freshrpms.net/docs/oracle/index.html
===================================================================
--- trunk/web/freshrpms.net/docs/oracle/index.html	2006-04-24 13:27:22 UTC (rev 4325)
+++ trunk/web/freshrpms.net/docs/oracle/index.html	2006-04-24 15:03:13 UTC (rev 4326)
@@ -8,20 +8,18 @@
 &lt;/p&gt;
 
 &lt;p&gt;
-Here are the files I use to configure RHEL4 servers as Oracle clients. They have been tested with php-oci8, squale and perl-DBD-Oracle. The main oracle-instantclient packages have been rebuilt from the zip files provided by Oracle because their rpm packages don't work as expected (no require/provide information, no ldconfig calls), and because Oracle didn't use to provide any x86_64 rpm packages. Of course, the proprietary Oracle bits aren't available here, which is why you'll find only the .nosrc.rpm files. For other packages, binaries are provided since they only link dynamically to the Oracle libraries and contain no proprietary code.&lt;br /&gt;
+&lt;em&gt;Mon Apr 24 2006 : Updated instantclient to 10.2.0.2, libsqlora8 to 2.3.3, squale to 0.1.6 and fixed php-oci8 build on x86_64.&lt;/em&gt;
+&lt;/p&gt;
+
+&lt;p&gt;
+Here are the files I use to configure Red Hat Enterprise Linux 4 (RHEL4) servers as Oracle clients. They have been tested with php-oci8, squale and perl-DBD-Oracle. The main oracle-instantclient packages have been rebuilt from the zip files provided by Oracle because their rpm packages don't work as expected (no require/provide information and no ldconfig calls), and also because Oracle didn't use to provide any x86_64 rpm packages. Of course, the proprietary Oracle bits aren't available here, which is why you'll find only the .nosrc.rpm files. For other packages, binaries are provided since they only link dynamically to the Oracle libraries and contain no proprietary code.&lt;br /&gt;
 &lt;ul&gt;
-  &lt;li&gt;libsqlora8-2.3.2-5&lt;/li&gt;
-  &lt;li&gt;libsqlora8-devel-2.3.2-5&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-10.2.0.1-6&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-basic-10.2.0.1-6&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-devel-10.2.0.1-6&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-jdbc-10.2.0.1-6&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-odbc-10.2.0.1-6&lt;/li&gt;
-  &lt;li&gt;oracle-instantclient-sqlplus-10.2.0.1-6&lt;/li&gt;
-  &lt;li&gt;perl-DBD-Oracle-1.16-2&lt;/li&gt;
-  &lt;li&gt;php-oci8-4.3.9-2&lt;/li&gt;
-  &lt;li&gt;squale-0.1.5-1&lt;/li&gt;
-  &lt;li&gt;squale-devel-0.1.5-1&lt;/li&gt;
+  &lt;li&gt;libsqlora8-2.3.3-1&lt;/li&gt;
+  &lt;li&gt;oracle-instantclient-10.2.0.2-1&lt;/li&gt;
+  &lt;li&gt;perl-DBD-Oracle-1.16-2.2&lt;/li&gt;
+  &lt;li&gt;php-oci8-4.3.9-3&lt;/li&gt;
+  &lt;li&gt;php-squale-0.1.6-1&lt;/li&gt;
+  &lt;li&gt;squale-0.1.6-1&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/p&gt;
 
@@ -33,7 +31,8 @@
 If you need to rebuild the php-oci8 module for another PHP version, you can adapt the spec file and patch from below. As you can see, I also include other modules that aren't part of the original package (mcrypt, currently) since I also need those, but don't provide binaries here since it would mean adding other libraries and such.
 &lt;ul&gt;
   &lt;li&gt;&lt;a href=&quot;php-modules.spec&quot;&gt;php-modules.spec&lt;/a&gt;&lt;/li&gt;
-  &lt;li&gt;&lt;a href=&quot;php-4.3.10-oci8instantclient.patch&quot;&gt;php-4.3.10-oci8instantclient.patch&lt;/a&gt; (tested with 4.3.9, 4.3.10, 4.4.0 and 4.4.1)&lt;/li&gt;
+  &lt;li&gt;&lt;a href=&quot;php-4.3.9-oci8.patch&quot;&gt;php-4.3.9-oci8.patch&lt;/a&gt; (for 4.3.9 and 4.3.10)&lt;/li&gt;
+  &lt;li&gt;&lt;a href=&quot;php-4.3.11-oci8.patch&quot;&gt;php-4.3.11-oci8.patch&lt;/a&gt; (for 4.3.11, 4.4.0 and 4.4.1)&lt;/li&gt;
 &lt;/ul&gt;
 &lt;/p&gt;
 

Deleted: trunk/web/freshrpms.net/docs/oracle/php-4.3.10-oci8instantclient.patch
===================================================================
--- trunk/web/freshrpms.net/docs/oracle/php-4.3.10-oci8instantclient.patch	2006-04-24 13:27:22 UTC (rev 4325)
+++ trunk/web/freshrpms.net/docs/oracle/php-4.3.10-oci8instantclient.patch	2006-04-24 15:03:13 UTC (rev 4326)
@@ -1,210 +0,0 @@
-diff -Naupr php-4.3.10.orig/ext/oci8/config.m4 php-4.3.10/ext/oci8/config.m4
---- php-4.3.10.orig/ext/oci8/config.m4	2004-02-03 15:22:34.000000000 +0100
-+++ php-4.3.10/ext/oci8/config.m4	2005-02-18 18:46:03.387887624 +0100
-@@ -18,132 +18,93 @@ AC_DEFUN(PHP_OCI_IF_DEFINED,[
-   ])
- ])
- 
--AC_DEFUN(AC_OCI8_VERSION,[
--  AC_MSG_CHECKING([Oracle version])
--  if test -s &quot;$OCI8_DIR/orainst/unix.rgs&quot;; then
--    OCI8_VERSION=`grep '&quot;ocommon&quot;' $OCI8_DIR/orainst/unix.rgs | sed 's/[ ][ ]*/:/g' | cut -d: -f 6 | cut -c 2-4`
--    test -z &quot;$OCI8_VERSION&quot; &amp;&amp; OCI8_VERSION=7.3
--  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
--    OCI8_VERSION=10.1    
--  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
--    OCI8_VERSION=9.0
--  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
--    OCI8_VERSION=8.1
--  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
--    OCI8_VERSION=8.0
--  elif test -f $OCI8_DIR/lib/libclntsh.a; then 
--    if test -f $OCI8_DIR/lib/libcore4.a; then 
--      OCI8_VERSION=8.0
-+
-+AC_DEFUN(AC_OCI8IC_VERSION,[
-+  AC_MSG_CHECKING([Oracle Instant Client version])
-+  if test -f $PHP_OCI8_INSTANT_CLIENT/libociei.$SHLIB_SUFFIX_NAME; then
-+    if test -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
-+      if test ! -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME; then
-+        AC_MSG_ERROR([Link from $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME to libclntsh.$SHLIB_SUFFIX_NAME.10.1 not found])
-+      fi
-+      OCI8_VERSION=10.1
-     else
--      OCI8_VERSION=8.1
-+      AC_MSG_ERROR([Oracle Instant Client library version not supported])
-     fi
-   else
--    AC_MSG_ERROR(Oracle-OCI8 needed libraries not found)
--  fi
--  AC_MSG_RESULT($OCI8_VERSION)
--])                                                                                                                                                                
--
--PHP_ARG_WITH(oci8, for Oracle-OCI8 support,
--[  --with-oci8[=DIR]       Include Oracle-oci8 support. Default DIR is ORACLE_HOME.])
--
--if test &quot;$PHP_OCI8&quot; != &quot;no&quot;; then
--  AC_MSG_CHECKING([Oracle Install-Dir])
--  if test &quot;$PHP_OCI8&quot; = &quot;yes&quot;; then
--    OCI8_DIR=$ORACLE_HOME
--  else
--    OCI8_DIR=$PHP_OCI8
-+    AC_MSG_ERROR([Oracle Instant Client libraries not found])
-   fi
--  AC_MSG_RESULT($OCI8_DIR)
-+  AC_MSG_RESULT([$OCI8_VERSION])
-+])
- 
--  if test -d &quot;$OCI8_DIR/rdbms/public&quot;; then
--    PHP_ADD_INCLUDE($OCI8_DIR/rdbms/public)
--    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public&quot;
--  fi
--  if test -d &quot;$OCI8_DIR/rdbms/demo&quot;; then
--    PHP_ADD_INCLUDE($OCI8_DIR/rdbms/demo)
--    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo&quot;
--  fi
--  if test -d &quot;$OCI8_DIR/network/public&quot;; then
--    PHP_ADD_INCLUDE($OCI8_DIR/network/public)
--    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/network/public&quot;
--  fi
--  if test -d &quot;$OCI8_DIR/plsql/public&quot;; then
--    PHP_ADD_INCLUDE($OCI8_DIR/plsql/public)
--    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/plsql/public&quot;
-+PHP_ARG_WITH(oci8, for Oracle (OCI8) support using ORACLE_HOME installation,
-+[  --with-oci8[[=DIR]]     Include Oracle (OCI8) support using an ORACLE_HOME
-+                        install. The default DIR is ORACLE_HOME])
-+
-+PHP_ARG_WITH(oci8-instant-client, for Oracle (OCI8) support using Oracle Instant Client,
-+[  --with-oci8-instant-client[[=DIR]]    Include Oracle (OCI8) support using
-+                        Oracle Instant Client. DIR is the directory with the
-+                        Instant Client libraries. On Linux it will default to
-+                        /usr/lib/oracle/&lt;most_recent_version&gt;/client/lib
-+                        Other platforms will need to have it explicitly specified.])
-+
-+if test &quot;$PHP_OCI8_INSTANT_CLIENT&quot; != &quot;no&quot;; then
-+
-+  AC_MSG_CHECKING([Oracle Instant Client directory])
-+  if test &quot;$PHP_OCI8_INSTANT_CLIENT&quot; = &quot;yes&quot;; then
-+dnl Generally the Instant Client can be anywhere so the user must pass in the
-+dnl directory to the libraries.  But on Linux we default to the most recent
-+dnl version in /usr/lib
-+    PHP_OCI8_INSTANT_CLIENT=`ls -d /usr/lib/oracle/*/client/lib  2&gt; /dev/null | tail -1`
-+    if test -z &quot;$PHP_OCI8_INSTANT_CLIENT&quot;; then
-+      AC_MSG_ERROR([Oracle Instant Client directory not found. Try --with-oci8-instant-client=DIR])
-+    fi
-   fi
-+  AC_MSG_RESULT($PHP_OCI8_INSTANT_CLIENT)
- 
--  if test -f &quot;$OCI8_DIR/lib/sysliblist&quot;; then
--    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/lib/sysliblist`, OCI8_SYSLIB)
--  elif test -f &quot;$OCI8_DIR/rdbms/lib/sysliblist&quot;; then
--    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/rdbms/lib/sysliblist`, OCI8_SYSLIB)
--  fi
-+  OCI8_DIR=$PHP_OCI8_INSTANT_CLIENT
- 
--  AC_OCI8_VERSION($OCI8_DIR)
--  case $OCI8_VERSION in
--    8.0)
--      PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, &quot;&quot;, OCI8_SHARED_LIBADD)
--      PHP_ADD_LIBRARY_WITH_PATH(core4, &quot;&quot;, OCI8_SHARED_LIBADD)
--      PHP_ADD_LIBRARY_WITH_PATH(psa, &quot;&quot;, OCI8_SHARED_LIBADD)
--      PHP_ADD_LIBRARY_WITH_PATH(clntsh, $OCI8_DIR/lib, OCI8_SHARED_LIBADD)
--      ;;
-+  AC_MSG_CHECKING([Oracle Instant Client SDK header directory])
- 
--    8.1)
--      PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
--      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
-+dnl Header directory for Instant Client SDK RPM install
-+  OCISDKRPMINC=`echo &quot;$PHP_OCI8_INSTANT_CLIENT&quot; | sed -e 's!^/usr/lib/oracle/\(.*\)/client/lib[[/]]*$!/usr/include/oracle/\1/client!'`
- 
--      dnl 
--      dnl OCI_ATTR_STATEMENT is not available in all 8.1.x versions
--      dnl 
--      PHP_OCI_IF_DEFINED(OCI_ATTR_STATEMENT, [AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])], $OCI8_INCLUDES)
--      ;;
-+dnl Header directory for Instant Client SDK zip file install
-+  OCISDKZIPINC=$PHP_OCI8_INSTANT_CLIENT/sdk/include
-+
-+  if test -f &quot;$OCISDKRPMINC/oci.h&quot;; then
-+    AC_MSG_RESULT($OCISDKRPMINC)
-+    PHP_ADD_INCLUDE($OCISDKRPMINC)
-+    OCI8INCDIR=$OCISDKRPMINC
-+  elif test -f &quot;$OCISDKZIPINC/oci.h&quot;; then
-+    AC_MSG_RESULT($OCISDKZIPINC)
-+    PHP_ADD_INCLUDE($OCISDKZIPINC)
-+    OCI8INCDIR=$OCISDKZIPINC
-+  else
-+    AC_MSG_ERROR([Oracle Instant Client SDK header files not found])
-+  fi
- 
--    9.0)
--      PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
--      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
--      AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
-+  OCISYSLIBLIST=`echo &quot;$OCI8INCDIR&quot; | sed -e 's!\(.*\)/include$!\1/demo/sysliblist!'`
-+  if test -f &quot;$OCISYSLIBLIST&quot;; then
-+    PHP_EVAL_LIBLINE(`cat $OCISYSLIBLIST`, OCI8_SYSLIB)
-+  fi
- 
--      dnl These functions are only available in version &gt;= 9.2
--      PHP_CHECK_LIBRARY(clntsh, OCIEnvNlsCreate,
--      [
--        PHP_CHECK_LIBRARY(clntsh, OCINlsCharSetNameToId,
--        [
--          AC_DEFINE(HAVE_OCI_9_2,1,[ ])
--          OCI8_VERSION=9.2
--        ], [], [
--          -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
--        ])
--      ], [], [
--        -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
--      ])
--      ;;
-+  AC_OCI8IC_VERSION($PHP_OCI8_INSTANT_CLIENT)
-+  case $OCI8_VERSION in
-     10.1)
-       PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
--      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
--      AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
--      AC_DEFINE(HAVE_OCI_9_2,1,[ ])
-+      PHP_ADD_LIBPATH($PHP_OCI8_INSTANT_CLIENT, OCI8_SHARED_LIBADD)
-       ;;
-+
-     *)
--      AC_MSG_ERROR(Unsupported Oracle version!)
-+      AC_MSG_ERROR([Unsupported Oracle Instant Client version])
-       ;;
-   esac
- 
--  dnl
--  dnl Check if we need to add -locijdbc8 
--  dnl
--  PHP_CHECK_LIBRARY(clntsh, OCILobIsTemporary,
--  [
--    AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
--  ], [
--    PHP_CHECK_LIBRARY(ocijdbc8, OCILobIsTemporary,
--    [
--      PHP_ADD_LIBRARY(ocijdbc8, 1, OCI8_SHARED_LIBADD)
--      AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
--    ], [], [
--      -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
--    ])
--  ], [
--    -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
--  ])
-+  AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
-+  AC_DEFINE(HAVE_OCI_9_2,1,[ ])
-+  AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
-+  AC_DEFINE(PHP_OCI8_HAVE_COLLECTIONS,1,[ ])
-+  AC_DEFINE(HAVE_OCI_INSTANT_CLIENT,1,[ ])
- 
-   PHP_NEW_EXTENSION(oci8, oci8.c, $ext_shared)
-   AC_DEFINE(HAVE_OCI8,1,[ ])
-@@ -151,4 +112,5 @@ if test &quot;$PHP_OCI8&quot; != &quot;no&quot;; then
-   PHP_SUBST_OLD(OCI8_SHARED_LIBADD)
-   PHP_SUBST_OLD(OCI8_DIR)
-   PHP_SUBST_OLD(OCI8_VERSION)
-+
- fi

Added: trunk/web/freshrpms.net/docs/oracle/php-4.3.11-oci8.patch
===================================================================
--- trunk/web/freshrpms.net/docs/oracle/php-4.3.11-oci8.patch	2006-04-24 13:27:22 UTC (rev 4325)
+++ trunk/web/freshrpms.net/docs/oracle/php-4.3.11-oci8.patch	2006-04-24 15:03:13 UTC (rev 4326)
@@ -0,0 +1,199 @@
+diff -Naupr php-4.3.11.orig/ext/oci8/config.m4 php-4.3.11/ext/oci8/config.m4
+--- php-4.3.11.orig/ext/oci8/config.m4	2005-02-25 12:33:24.000000000 +0100
++++ php-4.3.11/ext/oci8/config.m4	2005-04-12 16:05:03.000000000 +0200
+@@ -18,31 +18,6 @@ AC_DEFUN([PHP_OCI_IF_DEFINED],[
+   ])
+ ])
+ 
+-AC_DEFUN([AC_OCI8_VERSION],[
+-  AC_MSG_CHECKING([Oracle version])
+-  if test -s &quot;$OCI8_DIR/orainst/unix.rgs&quot;; then
+-    OCI8_VERSION=`grep '&quot;ocommon&quot;' $OCI8_DIR/orainst/unix.rgs | sed 's/[ ][ ]*/:/g' | cut -d: -f 6 | cut -c 2-4`
+-    test -z &quot;$OCI8_VERSION&quot; &amp;&amp; OCI8_VERSION=7.3
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
+-    OCI8_VERSION=10.1    
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
+-    OCI8_VERSION=9.0
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
+-    OCI8_VERSION=8.1
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
+-    OCI8_VERSION=8.0
+-  elif test -f $OCI8_DIR/lib/libclntsh.a; then 
+-    if test -f $OCI8_DIR/lib/libcore4.a; then 
+-      OCI8_VERSION=8.0
+-    else
+-      OCI8_VERSION=8.1
+-    fi
+-  else
+-    AC_MSG_ERROR([Oracle (OCI8) required libraries not found])
+-  fi
+-  AC_MSG_RESULT($OCI8_VERSION)
+-])                                                                                                                                                                
+-
+ AC_DEFUN([AC_OCI8IC_VERSION],[
+   AC_MSG_CHECKING([Oracle Instant Client version])
+   if test -f $PHP_OCI8_INSTANT_CLIENT/libociei.$SHLIB_SUFFIX_NAME; then
+@@ -60,11 +35,6 @@ AC_DEFUN([AC_OCI8IC_VERSION],[
+   AC_MSG_RESULT([$OCI8_VERSION])
+ ])
+ 
+-PHP_ARG_WITH(oci8, for Oracle (OCI8) support using ORACLE_HOME installation,
+-[  --with-oci8[=DIR]       Include Oracle (OCI8) support using an ORACLE_HOME
+-                          install. The default DIR is ORACLE_HOME])
+-
+-if test &quot;$PHP_OCI8&quot; = &quot;no&quot;; then
+   PHP_ARG_WITH(oci8-instant-client, for Oracle (OCI8) support using Oracle Instant Client,
+   [  --with-oci8-instant-client[=DIR]    
+                           Include Oracle (OCI8) support using
+@@ -72,137 +42,6 @@ if test &quot;$PHP_OCI8&quot; = &quot;no&quot;; then
+                           Instant Client libraries. On Linux it will default to
+                           /usr/lib/oracle/&lt;most_recent_version&gt;/client/lib
+                           Other platforms will need to have it explicitly specified.])
+-else 
+-  PHP_OCI8_INSTANT_CLIENT=&quot;no&quot;;
+-fi
+-
+-if test &quot;$PHP_OCI8&quot; != &quot;no&quot;; then
+-
+-  if test &quot;$PHP_OCI8_INSTANT_CLIENT&quot; != &quot;no&quot;; then
+-    AC_MSG_ERROR([--with-oci8 and --with-oci8-instant-client are mutually exclusive])
+-  fi
+-
+-  AC_MSG_CHECKING([Oracle Install Directory])
+-  if test &quot;$PHP_OCI8&quot; = &quot;yes&quot;; then
+-    OCI8_DIR=$ORACLE_HOME
+-  else
+-    OCI8_DIR=$PHP_OCI8
+-  fi
+-  AC_MSG_RESULT($OCI8_DIR)
+-
+-  if test -d &quot;$OCI8_DIR/rdbms/public&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/rdbms/public)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public&quot;
+-  fi
+-  if test -d &quot;$OCI8_DIR/rdbms/demo&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/rdbms/demo)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo&quot;
+-  fi
+-  if test -d &quot;$OCI8_DIR/network/public&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/network/public)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/network/public&quot;
+-  fi
+-  if test -d &quot;$OCI8_DIR/plsql/public&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/plsql/public)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/plsql/public&quot;
+-  fi
+-
+-  if test -f &quot;$OCI8_DIR/lib/sysliblist&quot;; then
+-    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/lib/sysliblist`, OCI8_SYSLIB)
+-  elif test -f &quot;$OCI8_DIR/rdbms/lib/sysliblist&quot;; then
+-    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/rdbms/lib/sysliblist`, OCI8_SYSLIB)
+-  fi
+-
+-  AC_OCI8_VERSION($OCI8_DIR)
+-  case $OCI8_VERSION in
+-    8.0)
+-      PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, &quot;&quot;, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBRARY_WITH_PATH(core4, &quot;&quot;, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBRARY_WITH_PATH(psa, &quot;&quot;, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBRARY_WITH_PATH(clntsh, $OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+-      ;;
+-
+-    8.1)
+-      PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+-
+-      dnl 
+-      dnl OCI_ATTR_STATEMENT is not available in all 8.1.x versions
+-      dnl 
+-      PHP_OCI_IF_DEFINED(OCI_ATTR_STATEMENT, [AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])], $OCI8_INCLUDES)
+-      ;;
+-
+-    9.0)
+-      PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+-      AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
+-
+-      dnl These functions are only available in version &gt;= 9.2
+-      PHP_CHECK_LIBRARY(clntsh, OCIEnvNlsCreate,
+-      [
+-        PHP_CHECK_LIBRARY(clntsh, OCINlsCharSetNameToId,
+-        [
+-          AC_DEFINE(HAVE_OCI_9_2,1,[ ])
+-          OCI8_VERSION=9.2
+-        ], [], [
+-          -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-        ])
+-      ], [], [
+-        -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-      ])
+-      ;;
+-
+-    10.1)
+-      PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+-      AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
+-      AC_DEFINE(HAVE_OCI_9_2,1,[ ])
+-      AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
+-      AC_DEFINE(PHP_OCI8_HAVE_COLLECTIONS,1,[ ])
+-      ;;
+-
+-    *)
+-      AC_MSG_ERROR([Unsupported Oracle version])
+-      ;;
+-  esac
+-
+-  dnl
+-  dnl Check if we need to add -locijdbc8 
+-  dnl
+-  PHP_CHECK_LIBRARY(clntsh, OCILobIsTemporary,
+-  [
+-    AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
+-  ], [
+-    PHP_CHECK_LIBRARY(ocijdbc8, OCILobIsTemporary,
+-    [
+-      PHP_ADD_LIBRARY(ocijdbc8, 1, OCI8_SHARED_LIBADD)
+-      AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
+-    ], [], [
+-      -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-    ])
+-  ], [
+-    -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-  ])
+-
+-  dnl
+-  dnl Check if we have collections
+-  dnl
+-  PHP_CHECK_LIBRARY(clntsh, OCICollAssign,
+-  [
+-    AC_DEFINE(PHP_OCI8_HAVE_COLLECTIONS,1,[ ])
+-  ], [], [
+-    -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-  ])
+-
+-
+-  PHP_NEW_EXTENSION(oci8, oci8.c, $ext_shared)
+-  AC_DEFINE(HAVE_OCI8,1,[ ])
+-
+-  PHP_SUBST_OLD(OCI8_SHARED_LIBADD)
+-  PHP_SUBST_OLD(OCI8_DIR)
+-  PHP_SUBST_OLD(OCI8_VERSION)
+-
+-elif test &quot;$PHP_OCI8_INSTANT_CLIENT&quot; != &quot;no&quot;; then
+ 
+   AC_MSG_CHECKING([Oracle Instant Client directory])
+   if test &quot;$PHP_OCI8_INSTANT_CLIENT&quot; = &quot;yes&quot;; then
+@@ -221,7 +60,7 @@ dnl version in /usr/lib
+   AC_MSG_CHECKING([Oracle Instant Client SDK header directory])
+ 
+ dnl Header directory for Instant Client SDK RPM install
+-  OCISDKRPMINC=`echo &quot;$PHP_OCI8_INSTANT_CLIENT&quot; | sed -e 's!^/usr/lib/oracle/\(.*\)/client/lib[[/]]*$!/usr/include/oracle/\1/client!'`
++  OCISDKRPMINC=`echo &quot;$PHP_OCI8_INSTANT_CLIENT&quot; | sed -e 's!.*/oracle/\(.*\)/client/lib.*!/usr/include/oracle/\1/client!'`
+ 
+ dnl Header directory for Instant Client SDK zip file install
+   OCISDKZIPINC=$PHP_OCI8_INSTANT_CLIENT/sdk/include
+@@ -268,4 +107,3 @@ dnl Header directory for Instant Client 
+   PHP_SUBST_OLD(OCI8_DIR)
+   PHP_SUBST_OLD(OCI8_VERSION)
+ 
+-fi

Added: trunk/web/freshrpms.net/docs/oracle/php-4.3.9-oci8.patch
===================================================================
--- trunk/web/freshrpms.net/docs/oracle/php-4.3.9-oci8.patch	2006-04-24 13:27:22 UTC (rev 4325)
+++ trunk/web/freshrpms.net/docs/oracle/php-4.3.9-oci8.patch	2006-04-24 15:03:13 UTC (rev 4326)
@@ -0,0 +1,210 @@
+diff -Naupr php-4.3.9.orig/ext/oci8/config.m4 php-4.3.9/ext/oci8/config.m4
+--- php-4.3.9.orig/ext/oci8/config.m4	2004-02-03 15:22:34.000000000 +0100
++++ php-4.3.9/ext/oci8/config.m4	2006-04-24 16:44:16.000000000 +0200
+@@ -18,132 +18,93 @@ AC_DEFUN(PHP_OCI_IF_DEFINED,[
+   ])
+ ])
+ 
+-AC_DEFUN(AC_OCI8_VERSION,[
+-  AC_MSG_CHECKING([Oracle version])
+-  if test -s &quot;$OCI8_DIR/orainst/unix.rgs&quot;; then
+-    OCI8_VERSION=`grep '&quot;ocommon&quot;' $OCI8_DIR/orainst/unix.rgs | sed 's/[ ][ ]*/:/g' | cut -d: -f 6 | cut -c 2-4`
+-    test -z &quot;$OCI8_VERSION&quot; &amp;&amp; OCI8_VERSION=7.3
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
+-    OCI8_VERSION=10.1    
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.9.0; then
+-    OCI8_VERSION=9.0
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.8.0; then
+-    OCI8_VERSION=8.1
+-  elif test -f $OCI8_DIR/lib/libclntsh.$SHLIB_SUFFIX_NAME.1.0; then
+-    OCI8_VERSION=8.0
+-  elif test -f $OCI8_DIR/lib/libclntsh.a; then 
+-    if test -f $OCI8_DIR/lib/libcore4.a; then 
+-      OCI8_VERSION=8.0
++
++AC_DEFUN(AC_OCI8IC_VERSION,[
++  AC_MSG_CHECKING([Oracle Instant Client version])
++  if test -f $PHP_OCI8_INSTANT_CLIENT/libociei.$SHLIB_SUFFIX_NAME; then
++    if test -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME.10.1; then
++      if test ! -f $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME; then
++        AC_MSG_ERROR([Link from $PHP_OCI8_INSTANT_CLIENT/libclntsh.$SHLIB_SUFFIX_NAME to libclntsh.$SHLIB_SUFFIX_NAME.10.1 not found])
++      fi
++      OCI8_VERSION=10.1
+     else
+-      OCI8_VERSION=8.1
++      AC_MSG_ERROR([Oracle Instant Client library version not supported])
+     fi
+   else
+-    AC_MSG_ERROR(Oracle-OCI8 needed libraries not found)
+-  fi
+-  AC_MSG_RESULT($OCI8_VERSION)
+-])                                                                                                                                                                
+-
+-PHP_ARG_WITH(oci8, for Oracle-OCI8 support,
+-[  --with-oci8[=DIR]       Include Oracle-oci8 support. Default DIR is ORACLE_HOME.])
+-
+-if test &quot;$PHP_OCI8&quot; != &quot;no&quot;; then
+-  AC_MSG_CHECKING([Oracle Install-Dir])
+-  if test &quot;$PHP_OCI8&quot; = &quot;yes&quot;; then
+-    OCI8_DIR=$ORACLE_HOME
+-  else
+-    OCI8_DIR=$PHP_OCI8
++    AC_MSG_ERROR([Oracle Instant Client libraries not found])
+   fi
+-  AC_MSG_RESULT($OCI8_DIR)
++  AC_MSG_RESULT([$OCI8_VERSION])
++])
+ 
+-  if test -d &quot;$OCI8_DIR/rdbms/public&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/rdbms/public)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/rdbms/public&quot;
+-  fi
+-  if test -d &quot;$OCI8_DIR/rdbms/demo&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/rdbms/demo)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/rdbms/demo&quot;
+-  fi
+-  if test -d &quot;$OCI8_DIR/network/public&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/network/public)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/network/public&quot;
+-  fi
+-  if test -d &quot;$OCI8_DIR/plsql/public&quot;; then
+-    PHP_ADD_INCLUDE($OCI8_DIR/plsql/public)
+-    OCI8_INCLUDES=&quot;$OCI8_INCLUDES -I$OCI8_DIR/plsql/public&quot;
++PHP_ARG_WITH(oci8, for Oracle (OCI8) support using ORACLE_HOME installation,
++[  --with-oci8[[=DIR]]     Include Oracle (OCI8) support using an ORACLE_HOME
++                        install. The default DIR is ORACLE_HOME])
++
++PHP_ARG_WITH(oci8-instant-client, for Oracle (OCI8) support using Oracle Instant Client,
++[  --with-oci8-instant-client[[=DIR]]    Include Oracle (OCI8) support using
++                        Oracle Instant Client. DIR is the directory with the
++                        Instant Client libraries. On Linux it will default to
++                        /usr/lib/oracle/&lt;most_recent_version&gt;/client/lib
++                        Other platforms will need to have it explicitly specified.])
++
++if test &quot;$PHP_OCI8_INSTANT_CLIENT&quot; != &quot;no&quot;; then
++
++  AC_MSG_CHECKING([Oracle Instant Client directory])
++  if test &quot;$PHP_OCI8_INSTANT_CLIENT&quot; = &quot;yes&quot;; then
++dnl Generally the Instant Client can be anywhere so the user must pass in the
++dnl directory to the libraries.  But on Linux we default to the most recent
++dnl version in /usr/lib
++    PHP_OCI8_INSTANT_CLIENT=`ls -d /usr/lib/oracle/*/client/lib  2&gt; /dev/null | tail -1`
++    if test -z &quot;$PHP_OCI8_INSTANT_CLIENT&quot;; then
++      AC_MSG_ERROR([Oracle Instant Client directory not found. Try --with-oci8-instant-client=DIR])
++    fi
+   fi
++  AC_MSG_RESULT($PHP_OCI8_INSTANT_CLIENT)
+ 
+-  if test -f &quot;$OCI8_DIR/lib/sysliblist&quot;; then
+-    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/lib/sysliblist`, OCI8_SYSLIB)
+-  elif test -f &quot;$OCI8_DIR/rdbms/lib/sysliblist&quot;; then
+-    PHP_EVAL_LIBLINE(`cat $OCI8_DIR/rdbms/lib/sysliblist`, OCI8_SYSLIB)
+-  fi
++  OCI8_DIR=$PHP_OCI8_INSTANT_CLIENT
+ 
+-  AC_OCI8_VERSION($OCI8_DIR)
+-  case $OCI8_VERSION in
+-    8.0)
+-      PHP_ADD_LIBRARY_WITH_PATH(nlsrtl3, &quot;&quot;, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBRARY_WITH_PATH(core4, &quot;&quot;, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBRARY_WITH_PATH(psa, &quot;&quot;, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBRARY_WITH_PATH(clntsh, $OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+-      ;;
++  AC_MSG_CHECKING([Oracle Instant Client SDK header directory])
+ 
+-    8.1)
+-      PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
++dnl Header directory for Instant Client SDK RPM install
++  OCISDKRPMINC=`echo &quot;$PHP_OCI8_INSTANT_CLIENT&quot; | sed -e 's!.*/oracle/\(.*\)/client/lib.*!/usr/include/oracle/\1/client!'`
+ 
+-      dnl 
+-      dnl OCI_ATTR_STATEMENT is not available in all 8.1.x versions
+-      dnl 
+-      PHP_OCI_IF_DEFINED(OCI_ATTR_STATEMENT, [AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])], $OCI8_INCLUDES)
+-      ;;
++dnl Header directory for Instant Client SDK zip file install
++  OCISDKZIPINC=$PHP_OCI8_INSTANT_CLIENT/sdk/include
++
++  if test -f &quot;$OCISDKRPMINC/oci.h&quot;; then
++    AC_MSG_RESULT($OCISDKRPMINC)
++    PHP_ADD_INCLUDE($OCISDKRPMINC)
++    OCI8INCDIR=$OCISDKRPMINC
++  elif test -f &quot;$OCISDKZIPINC/oci.h&quot;; then
++    AC_MSG_RESULT($OCISDKZIPINC)
++    PHP_ADD_INCLUDE($OCISDKZIPINC)
++    OCI8INCDIR=$OCISDKZIPINC
++  else
++    AC_MSG_ERROR([Oracle Instant Client SDK header files not found in $OCISDKRPMINC or $OCISDKZIPINC])
++  fi
+ 
+-    9.0)
+-      PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+-      AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
++  OCISYSLIBLIST=`echo &quot;$OCI8INCDIR&quot; | sed -e 's!\(.*\)/include$!\1/demo/sysliblist!'`
++  if test -f &quot;$OCISYSLIBLIST&quot;; then
++    PHP_EVAL_LIBLINE(`cat $OCISYSLIBLIST`, OCI8_SYSLIB)
++  fi
+ 
+-      dnl These functions are only available in version &gt;= 9.2
+-      PHP_CHECK_LIBRARY(clntsh, OCIEnvNlsCreate,
+-      [
+-        PHP_CHECK_LIBRARY(clntsh, OCINlsCharSetNameToId,
+-        [
+-          AC_DEFINE(HAVE_OCI_9_2,1,[ ])
+-          OCI8_VERSION=9.2
+-        ], [], [
+-          -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-        ])
+-      ], [], [
+-        -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-      ])
+-      ;;
++  AC_OCI8IC_VERSION($PHP_OCI8_INSTANT_CLIENT)
++  case $OCI8_VERSION in
+     10.1)
+       PHP_ADD_LIBRARY(clntsh, 1, OCI8_SHARED_LIBADD)
+-      PHP_ADD_LIBPATH($OCI8_DIR/lib, OCI8_SHARED_LIBADD)
+-      AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
+-      AC_DEFINE(HAVE_OCI_9_2,1,[ ])
++      PHP_ADD_LIBPATH($PHP_OCI8_INSTANT_CLIENT, OCI8_SHARED_LIBADD)
+       ;;
++
+     *)
+-      AC_MSG_ERROR(Unsupported Oracle version!)
++      AC_MSG_ERROR([Unsupported Oracle Instant Client version])
+       ;;
+   esac
+ 
+-  dnl
+-  dnl Check if we need to add -locijdbc8 
+-  dnl
+-  PHP_CHECK_LIBRARY(clntsh, OCILobIsTemporary,
+-  [
+-    AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
+-  ], [
+-    PHP_CHECK_LIBRARY(ocijdbc8, OCILobIsTemporary,
+-    [
+-      PHP_ADD_LIBRARY(ocijdbc8, 1, OCI8_SHARED_LIBADD)
+-      AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
+-    ], [], [
+-      -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-    ])
+-  ], [
+-    -L$OCI8_DIR/lib $OCI8_SHARED_LIBADD
+-  ])
++  AC_DEFINE(HAVE_OCI8_ATTR_STATEMENT,1,[ ])
++  AC_DEFINE(HAVE_OCI_9_2,1,[ ])
++  AC_DEFINE(HAVE_OCI8_TEMP_LOB,1,[ ])
++  AC_DEFINE(PHP_OCI8_HAVE_COLLECTIONS,1,[ ])
++  AC_DEFINE(HAVE_OCI_INSTANT_CLIENT,1,[ ])
+ 
+   PHP_NEW_EXTENSION(oci8, oci8.c, $ext_shared)
+   AC_DEFINE(HAVE_OCI8,1,[ ])
+@@ -151,4 +112,5 @@ if test &quot;$PHP_OCI8&quot; != &quot;no&quot;; then
+   PHP_SUBST_OLD(OCI8_SHARED_LIBADD)
+   PHP_SUBST_OLD(OCI8_DIR)
+   PHP_SUBST_OLD(OCI8_VERSION)
++
+ fi

Modified: trunk/web/freshrpms.net/docs/oracle/php-modules.spec
===================================================================
--- trunk/web/freshrpms.net/docs/oracle/php-modules.spec	2006-04-24 13:27:22 UTC (rev 4325)
+++ trunk/web/freshrpms.net/docs/oracle/php-modules.spec	2006-04-24 15:03:13 UTC (rev 4326)
@@ -2,18 +2,18 @@
 
 %define php_extdir %(php-config --extension-dir 2&gt;/dev/null || echo %{_libdir}/php4)
 %{!?php_version:%define php_version %(php-config --version 2&gt;/dev/null || echo 4.4.1)}
-%define oracle_version 10.2.0.1
+%define oracle_version %(oracle-instantclient-config --version 2&gt;/dev/null || echo 10.2.0.2)
 %define extensions mcrypt oci8
 
 Summary: Additional PHP extension modules
 Name: php-modules
 Version: %{php_version}
-Release: 1
+Release: 3
 License: PHP
 Group: Development/Languages
 URL: <A HREF="http://www.php.net/">http://www.php.net/</A>
 Source: <A HREF="http://www.php.net/distributions/php-%{version">http://www.php.net/distributions/php-%{version</A>}.tar.bz2
-Patch0: php-4.3.11-oci8.patch
+Patch0: php-4.3.9-oci8.patch
 #Patch1: php-4.3.11-pdf-lib64.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 BuildRequires: php, php-devel = %{php_version}
@@ -36,7 +36,8 @@
 %package -n php-mcrypt
 Summary: A module for PHP applications that use encryption routines.
 Group: Development/Languages
-Requires: php = %{version}, libmcrypt
+#Requires: php = %{version}
+Requires: php &gt;= 4.3.9
 BuildRequires: libmcrypt-devel
 Provides: php_encryption
 
@@ -48,7 +49,8 @@
 %package -n php-oci8
 Summary: An OCI8 (Oracle) database module for PHP.
 Group: Development/Languages
-Requires: php = %{version}, oracle-instantclient-basic
+#Requires: php = %{version}, oracle-instantclient-basic
+Requires: php &gt;= 4.3.9, oracle-instantclient-basic
 BuildRequires: oracle-instantclient-devel
 Provides: php_database
 
@@ -115,7 +117,6 @@
 #        ln -s ../../gd ext/pdf/ext/gd
 #        options=&quot;--with-jpeg-dir=%{_prefix} --with-png-dir=%{_prefix} --with-zlib-dir=%{_prefix} --with-tiff-dir=%{_prefix}&quot;
     elif [ &quot;${ext}&quot; = &quot;oci8&quot; ]; then
-        #options=&quot;--without-oci8 --with-oci8-instant-client=%{_libdir}/oracle/%{oracle_version}/client/%{_lib}&quot;
         options=&quot;--with-oci8-instant-client=%{_libdir}/oracle/%{oracle_version}/client/%{_lib}&quot;
     else
         options=&quot;&quot;
@@ -191,6 +192,11 @@
 
 
 %changelog
+* Mon Apr 24 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 4.3.9-3
+- Switch to using oracle-instantclient-config to get the Oracle version.
+- Fix oci8 instant client patch to work on x86_64 too.
+- Rebuild vanilla RHEL4 4.3.9-3 oci8 module.
+
 * Tue Jul 19 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 4.4.0-1
 - Update to 4.4.0.
 - Remove pdf module, we now use php-pecl-pdflib instead (much more recent).


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003125.html">[svn] r4325 - in trunk/rpms: . php-squale
</A></li>
	<LI>Next message: <A HREF="003127.html">[svn] r4327 - in trunk/rpms: . apt calife dnsmasq mrxvt	perl-Module-Install perl-Test-Base rsync svnmailer watchdog
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3126">[ date ]</a>
              <a href="thread.html#3126">[ thread ]</a>
              <a href="subject.html#3126">[ subject ]</a>
              <a href="author.html#3126">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
