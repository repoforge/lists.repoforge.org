<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r6178 - in trunk/rpms: buffer directfb dkms-r8168 fuse gaim	gstreamer-plugins-extras imlib2 iperf libmpeg3 lighttpd	lockstat miro mod_suphp mpack ndisgtk nsupdate-gss nvi	openobex-utils pdns perl-CGI-Persistent perl-Courier-Filter	psi rrdtool streamdvd subversion tn5250 usbsink viruskiller	x264 xmms zope
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r6178%20-%20in%20trunk/rpms%3A%20buffer%20directfb%20dkms-r8168%20fuse%20gaim%0A%09gstreamer-plugins-extras%20imlib2%20iperf%20libmpeg3%20lighttpd%0A%09lockstat%20miro%20mod_suphp%20mpack%20ndisgtk%20nsupdate-gss%20nvi%0A%09openobex-utils%20pdns%20perl-CGI-Persistent%20perl-Courier-Filter%0A%09psi%20rrdtool%20streamdvd%20subversion%20tn5250%20usbsink%20viruskiller%0A%09x264%20xmms%20zope&In-Reply-To=%3C200802261524.m1QFOMSA016226%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004976.html">
   <LINK REL="Next"  HREF="004978.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r6178 - in trunk/rpms: buffer directfb dkms-r8168 fuse gaim	gstreamer-plugins-extras imlib2 iperf libmpeg3 lighttpd	lockstat miro mod_suphp mpack ndisgtk nsupdate-gss nvi	openobex-utils pdns perl-CGI-Persistent perl-Courier-Filter	psi rrdtool streamdvd subversion tn5250 usbsink viruskiller	x264 xmms zope</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r6178%20-%20in%20trunk/rpms%3A%20buffer%20directfb%20dkms-r8168%20fuse%20gaim%0A%09gstreamer-plugins-extras%20imlib2%20iperf%20libmpeg3%20lighttpd%0A%09lockstat%20miro%20mod_suphp%20mpack%20ndisgtk%20nsupdate-gss%20nvi%0A%09openobex-utils%20pdns%20perl-CGI-Persistent%20perl-Courier-Filter%0A%09psi%20rrdtool%20streamdvd%20subversion%20tn5250%20usbsink%20viruskiller%0A%09x264%20xmms%20zope&In-Reply-To=%3C200802261524.m1QFOMSA016226%40surya.karan.org%3E"
       TITLE="[svn] r6178 - in trunk/rpms: buffer directfb dkms-r8168 fuse gaim	gstreamer-plugins-extras imlib2 iperf libmpeg3 lighttpd	lockstat miro mod_suphp mpack ndisgtk nsupdate-gss nvi	openobex-utils pdns perl-CGI-Persistent perl-Courier-Filter	psi rrdtool streamdvd subversion tn5250 usbsink viruskiller	x264 xmms zope">packagers at lists.rpmforge.net
       </A><BR>
    <I>Tue Feb 26 16:24:22 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004976.html">[svn] r6177 - in trunk/rpms: aircrack-ng collectd ddrescue dstat	eboard glabels iozone mpg123 perl-Archive-Rar perl-Carp-Clan	perl-Catalyst-Engine-Apache perl-Config-IniHash	perl-Crypt-Cracklib perl-DBD-Multi perl-DBD-Pg	perl-Devel-TrackObjects perl-Egg-Plugin-SessionKit	perl-ExtUtils-ParseXS perl-File-Remove perl-Gnome2-VFS	perl-HTTP-Body perl-I18N-Charset perl-IO-Socket-INET6	perl-IPC-ShareLite perl-Image-Size	perl-Locale-Currency-Format perl-Mail-IMAPClient	perl-Math-MatrixReal perl-Math-Prime-XS	perl-Math-Random-MT-Auto perl-Net-DBus perl-Net-SIP	perl-OLE-Storage_Lite perl-Object-InsideOut	perl-Smart-Comments perl-Sub-Name perl-Sys-Virt	perl-TermReadKey perl-Test-Exception perl-Test-Simple synbak zvbi
</A></li>
        <LI>Next message: <A HREF="004978.html">[svn] r6179 - trunk/rpms/mailgraph
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4977">[ date ]</a>
              <a href="thread.html#4977">[ thread ]</a>
              <a href="subject.html#4977">[ subject ]</a>
              <a href="author.html#4977">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2008-02-26 15:23:06 +0000 (Tue, 26 Feb 2008)
New Revision: 6178

Added:
   trunk/rpms/buffer/buffer-1.19-build.patch
   trunk/rpms/buffer/buffer-1.19-destdir.patch
   trunk/rpms/directfb/DirectFB-0.9.25.1-linux-compiler.patch
   trunk/rpms/directfb/DirectFB-0.9.25.1-ppc.patch
   trunk/rpms/directfb/DirectFB-0.9.25.1-sysfs.patch
   trunk/rpms/directfb/DirectFB-0.9.25.1-types.patch
   trunk/rpms/dkms-r8168/r8168-8.004.00-makefile.patch
   trunk/rpms/dkms-r8168/r8168-8.004.00-modversions.patch
   trunk/rpms/fuse/fuse-udev_rules.patch
   trunk/rpms/gaim/gaim-1.0.1-naive-gnome-check.patch
   trunk/rpms/gstreamer-plugins-extras/gst-plugins-0.8.6-dvdread.patch
   trunk/rpms/imlib2/imlib2-1.2.1-X11-path.patch
   trunk/rpms/imlib2/imlib2-1.3.0-loader_overflows.patch
   trunk/rpms/imlib2/imlib2-1.3.0-multilib.patch
   trunk/rpms/iperf/iperf-2.0.2-noyield.patch
   trunk/rpms/libmpeg3/libmpeg3-1.5.2-gnustack.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-boostrap.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_autotools.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_hacking.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-fix_commented.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-makefile.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-memcpy.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-pkgconfig.in.patch
   trunk/rpms/libmpeg3/libmpeg3-1.7-spec_in.patch
   trunk/rpms/lighttpd/lighttpd-1.4.17-defaultconf.patch
   trunk/rpms/lockstat/lockstat-1.4.11-time.patch
   trunk/rpms/miro/miro-0.9.9.1-svn.patch
   trunk/rpms/mod_suphp/suphp-0.6.0-handler.patch
   trunk/rpms/mod_suphp/suphp-0.6.0-handler2.patch
   trunk/rpms/mpack/mpack-1.6-buildfix.patch
   trunk/rpms/ndisgtk/ndisgtk-0.8-centos.patch
   trunk/rpms/nsupdate-gss/nsupdate-gss-ad-sites2.patch
   trunk/rpms/nvi/build.patch
   trunk/rpms/openobex-utils/openobex-apps-1.0.0-gcc3.4.patch
   trunk/rpms/pdns/pdns-2.9.21-avoid-version.patch
   trunk/rpms/pdns/pdns-2.9.21-fixinit.patch
   trunk/rpms/perl-CGI-Persistent/perl-CGI-Persistent-1.00-relpath.patch
   trunk/rpms/perl-Courier-Filter/Courier-Filter-0.17-message.patch
   trunk/rpms/psi/psi-0.9.2-strip.patch
   trunk/rpms/rrdtool/rrdtool-1.0.50-configure.patch
   trunk/rpms/streamdvd/streamdvd-0.4-gcc41.patch
   trunk/rpms/streamdvd/streamdvd-0.4-gui.patch
   trunk/rpms/streamdvd/streamdvd-0.4-lsdvd.patch
   trunk/rpms/streamdvd/streamdvd-0.4-makefile.patch
   trunk/rpms/streamdvd/streamdvd-0.4-streamdvd.patch
   trunk/rpms/subversion/subversion-1.4.4-macropen.patch
   trunk/rpms/subversion/subversion-1.4.4-swig1333.patch
   trunk/rpms/tn5250/tn5250-0.16.5-bhc.patch
   trunk/rpms/tn5250/tn5250-0.17.3-multilib.patch
   trunk/rpms/usbsink/usbsink-utils.patch
   trunk/rpms/viruskiller/viruskiller-1.0-makefile.patch
   trunk/rpms/x264/x264-snapshot-20070529-2245-glibc232.patch
   trunk/rpms/xmms/xmms-1.2.10-configfile-safe-write.patch
   trunk/rpms/xmms/xmms-1.2.10-crossfade-0.3.9.patch
   trunk/rpms/xmms/xmms-1.2.10-gcc4.patch
   trunk/rpms/xmms/xmms-1.2.10-joycrash.patch
   trunk/rpms/xmms/xmms-1.2.10-multidevel.patch
   trunk/rpms/xmms/xmms-1.2.10-pls-188603.patch
   trunk/rpms/xmms/xmms-1.2.10-reposition.patch
   trunk/rpms/xmms/xmms-1.2.10-ubuntu-CVE-2007-0653.patch
   trunk/rpms/xmms/xmms-cd-mountpoint.patch
   trunk/rpms/zope/zope-2.7.3-config.patch
   trunk/rpms/zope/zope-2.8.3-pythonwarning.patch
Log:
Added missing patches.

Added: trunk/rpms/buffer/buffer-1.19-build.patch
===================================================================
--- trunk/rpms/buffer/buffer-1.19-build.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/buffer/buffer-1.19-build.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,97 @@
+--- Makefile
++++ Makefile
+@@ -32,7 +32,7 @@
+ install: buffer
+ 	rm -f $(INSTBIN)/buffer
+ 	cp buffer $(INSTBIN)/buffer
+-	chmod 111 $(INSTBIN)/buffer
++	chmod 755 $(INSTBIN)/buffer
+ 	rm -f $(INSTMAN)/buffer.$S
+ 	cp buffer.man $(INSTMAN)/buffer.$S
+ 	chmod 444 $(INSTMAN)/buffer.$S
+--- buffer.c
++++ buffer.c
+@@ -111,6 +111,8 @@
+  */
+ #include &lt;unistd.h&gt;
+ #include &lt;stdio.h&gt;
++#include &lt;stdlib.h&gt;
++#include &lt;string.h&gt;
+ #include &lt;signal.h&gt;
+ #include &lt;fcntl.h&gt;
+ #include &lt;errno.h&gt;
+@@ -126,10 +128,6 @@
+ static char *rcsid = &quot;$Header: /a/swan/home/swan/staff/csg/lmjm/src/buffer/RCS/buffer.c,v 1.19 1995/08/24 17:46:28 lmjm Exp lmjm $&quot;;
+ #endif
+ 
+-#ifndef __alpha
+-extern char *shmat();
+-#endif /* __alpha */
+-
+ /* General macros */
+ #define TRUE 1
+ #define FALSE 0
+@@ -430,7 +428,7 @@
+ 
+ /* The interrupt handler */
+ void
+-shutdown()
++shutdown(int dummy)
+ {
+ 	static int shutting;
+ 	if( shutting ){
+@@ -447,7 +445,7 @@
+ 
+ /* Shutdown because the child has ended */
+ void
+-child_shutdown()
++child_shutdown(int dummy)
+ {
+ 	/* Find out which child has died.  (They may not be my
+ 	 * children if buffer was exec'd on top of something that had
+@@ -507,7 +505,7 @@
+ 	get_buffer();
+ 
+ 	if( debug )
+-		fprintf( stderr, &quot;%s pbuffer is 0x%08x, buffer_size is %d [%d x %d]\n&quot;,
++		fprintf( stderr, &quot;%s pbuffer is %p, buffer_size is %d [%d x %d]\n&quot;,
+ 			proc_string,
+ 			(char *)pbuffer, buffer_size, blocks, blocksize );
+ 
+--- sem.c
++++ sem.c
+@@ -27,6 +27,7 @@
+  * semaphores */
+ 
+ #include &lt;stdio.h&gt;
++#include &lt;unistd.h&gt;
+ #include &lt;sys/types.h&gt;
+ #include &lt;sys/stat.h&gt;
+ #include &lt;sys/ipc.h&gt;
+@@ -34,7 +35,7 @@
+ #include &lt;errno.h&gt;
+ #include &quot;sem.h&quot;
+ 
+-#if defined(SYS5) || defined(ultrix) || defined(_AIX)
++#if defined(SYS5) || defined(ultrix) || defined(_AIX) || defined _SEM_SEMUN_UNDEFINED
+ union semun {
+ 	int val;
+ 	struct semid_ds *buf;
+@@ -95,7 +96,7 @@
+ 	return sem;
+ }
+ 
+-static
++static void
+ do_sem( sem_id, pbuf, err )
+ 	int sem_id;
+ 	struct sembuf *pbuf;
+@@ -152,7 +153,7 @@
+ 	if( sem_id == -1 )
+ 		return;
+ 
+-	if( semctl( sem_id, 0, IPC_RMID, NULL ) == -1 ){
++	if( semctl( sem_id, 0, IPC_RMID, (union semun)0 ) == -1 ){
+ 		report_proc();
+ 		perror( &quot;internal error, failed to remove semaphore&quot; );
+ 	}

Added: trunk/rpms/buffer/buffer-1.19-destdir.patch
===================================================================
--- trunk/rpms/buffer/buffer-1.19-destdir.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/buffer/buffer-1.19-destdir.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,16 @@
+--- Makefile	2007-11-09 14:38:56.364663016 +0100
++++ Makefile.destdir	1999-08-27 16:01:29.000000000 +0200
+@@ -13,10 +13,10 @@
+ CFLAGS=-Wall
+ 
+ # Where to install buffer and its manual pages
+-INSTBIN=/usr/local/bin
+-INSTMAN=/usr/man/manl
++INSTBIN=$(DESTDIR)/usr/bin
++INSTMAN=$(DESTDIR)/usr/share/man/man1
+ # The manual page section (normally l or 1)
+-S=l
++S=1
+ 
+ RM=/bin/rm
+ ALL=README buffer.man Makefile buffer.c sem.c sem.h COPYING

Added: trunk/rpms/directfb/DirectFB-0.9.25.1-linux-compiler.patch
===================================================================
--- trunk/rpms/directfb/DirectFB-0.9.25.1-linux-compiler.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/directfb/DirectFB-0.9.25.1-linux-compiler.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+diff -Naupr DirectFB-0.9.25.1.orig/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c DirectFB-0.9.25.1/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c
+--- DirectFB-0.9.25.1.orig/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c	2006-05-03 09:22:37.000000000 +0200
++++ DirectFB-0.9.25.1/interfaces/IDirectFBVideoProvider/idirectfbvideoprovider_v4l.c	2006-09-14 14:50:43.000000000 +0200
+@@ -44,7 +44,6 @@
+ #include &lt;fcntl.h&gt;
+ #include &lt;sys/ioctl.h&gt;
+ 
+-#include &lt;linux/compiler.h&gt;
+ #include &quot;videodev.h&quot;
+ 
+ #include &lt;directfb.h&gt;

Added: trunk/rpms/directfb/DirectFB-0.9.25.1-ppc.patch
===================================================================
--- trunk/rpms/directfb/DirectFB-0.9.25.1-ppc.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/directfb/DirectFB-0.9.25.1-ppc.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,27 @@
+diff -Naupr DirectFB-0.9.25.1.orig/lib/direct/ppcasm_memcpy_cachable.S DirectFB-0.9.25.1/lib/direct/ppcasm_memcpy_cachable.S
+--- DirectFB-0.9.25.1.orig/lib/direct/ppcasm_memcpy_cachable.S	2005-10-19 01:14:16.000000000 +0200
++++ DirectFB-0.9.25.1/lib/direct/ppcasm_memcpy_cachable.S	2006-09-15 15:38:17.000000000 +0200
+@@ -11,8 +11,6 @@
+ 
+ #define __ASSEMBLY__
+ 
+-#include &lt;linux/config.h&gt;
+-
+ #if defined(CONFIG_8xx) || defined(CONFIG_403GCX)
+ #define L1_CACHE_LINE_SIZE       16
+ #define LG_L1_CACHE_LINE_SIZE     4 
+diff -Naupr DirectFB-0.9.25.1.orig/lib/direct/system.c DirectFB-0.9.25.1/lib/direct/system.c
+--- DirectFB-0.9.25.1.orig/lib/direct/system.c	2006-05-03 09:22:37.000000000 +0200
++++ DirectFB-0.9.25.1/lib/direct/system.c	2006-09-15 15:56:46.000000000 +0200
+@@ -33,11 +33,7 @@
+ #include &lt;direct/build.h&gt;
+ #include &lt;direct/system.h&gt;
+ 
+-#if HAVE_ASM_PAGE_H
+-#include &lt;asm/page.h&gt;
+-#else
+ #define PAGE_SIZE   sysconf( _SC_PAGESIZE )
+-#endif
+ 
+ 
+ #if DIRECT_BUILD_GETTID &amp;&amp; defined(HAVE_LINUX_UNISTD_H)

Added: trunk/rpms/directfb/DirectFB-0.9.25.1-sysfs.patch
===================================================================
--- trunk/rpms/directfb/DirectFB-0.9.25.1-sysfs.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/directfb/DirectFB-0.9.25.1-sysfs.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,20 @@
+--- DirectFB-0.9.25.1/directfb.pc.in.orig	2006-07-27 02:09:28.000000000 +0200
++++ DirectFB-0.9.25.1/directfb.pc.in	2006-07-27 02:09:37.000000000 +0200
+@@ -7,5 +7,5 @@
+ Description: Graphics and windowing library for the Linux frame buffer device
+ Version: @VERSION@
+ Requires: fusion direct
+-Libs: -L${libdir} -ldirectfb @THREADLIB@ @DYNLIB@ @ZLIB_LIBS@ @OSX_LIBS@
++Libs: -L${libdir} -ldirectfb @THREADLIB@ @DYNLIB@ @ZLIB_LIBS@ @SYSFS_LIBS@ @OSX_LIBS@
+ Cflags: @THREADFLAGS@ <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">-I at INCLUDEDIR</A>@
+--- DirectFB-0.9.25.1/directfb-config.in.orig	2006-07-27 02:08:17.000000000 +0200
++++ DirectFB-0.9.25.1/directfb-config.in	2006-07-27 02:09:02.000000000 +0200
+@@ -300,7 +300,7 @@
+       libs=<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">-L at libdir</A>@
+ 
+       if test &quot;$lib_directfb&quot; = &quot;yes&quot;; then
+-	 libs=&quot;$libs -ldirectfb -lfusion -ldirect @THREADLIB@ @ZLIB_LIBS@&quot;
++	 libs=&quot;$libs -ldirectfb -lfusion -ldirect @THREADLIB@ @ZLIB_LIBS@ @SYSFS_LIBS@&quot;
+ 
+ 	 if test -z &quot;$echo_static&quot;; then
+ 	    libs=&quot;$libs @DYNLIB@&quot;

Added: trunk/rpms/directfb/DirectFB-0.9.25.1-types.patch
===================================================================
--- trunk/rpms/directfb/DirectFB-0.9.25.1-types.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/directfb/DirectFB-0.9.25.1-types.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+diff -Naupr DirectFB-0.9.25.1.orig/include/dfb_types.h DirectFB-0.9.25.1/include/dfb_types.h
+--- DirectFB-0.9.25.1.orig/include/dfb_types.h	2005-10-19 01:14:12.000000000 +0200
++++ DirectFB-0.9.25.1/include/dfb_types.h	2006-09-14 14:48:26.000000000 +0200
+@@ -1,6 +1,7 @@
+ #ifndef __DFB_TYPES_H__
+ #define __DFB_TYPES_H__
+ 
++#include &lt;asm/types.h&gt;
+ #include &lt;sys/types.h&gt;
+ 
+ #ifndef USE_KOS

Added: trunk/rpms/dkms-r8168/r8168-8.004.00-makefile.patch
===================================================================
--- trunk/rpms/dkms-r8168/r8168-8.004.00-makefile.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/dkms-r8168/r8168-8.004.00-makefile.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- r8168-8.004.00/src/Makefile.orig	2007-11-21 03:39:11.000000000 +0200
++++ r8168-8.004.00/src/Makefile	2008-02-06 16:21:07.000000000 +0200
+@@ -35,7 +35,7 @@ modules:
+ ifeq ($(KFLAG),24x)
+ 	$(MAKE) -f Makefile_linux24x
+ else
+-	$(MAKE) -C $(KDIR) SUBDIRS=$(PWD)/src modules
++	$(MAKE) -C $(KDIR) SUBDIRS=$(PWD) modules
+ 	strip --strip-debug r8168.$(KEXT)
+ endif
+ 

Added: trunk/rpms/dkms-r8168/r8168-8.004.00-modversions.patch
===================================================================
--- trunk/rpms/dkms-r8168/r8168-8.004.00-modversions.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/dkms-r8168/r8168-8.004.00-modversions.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,12 @@
+--- r8168-8.004.00/src/Makefile_linux24x.orig	2007-11-21 03:39:11.000000000 +0200
++++ r8168-8.004.00/src/Makefile_linux24x	2008-02-06 14:18:34.000000000 +0200
+@@ -14,7 +14,8 @@ endif
+ #standard flags for module builds
+ MODCFLAGS	+= -DLINUX -D__KERNEL__ -DMODULE -O2 -pipe -Wall
+ MODCFLAGS	+= -I$(KSRC)/include -I.
+-MODCFLAGS	+= -DMODVERSIONS -DEXPORT_SYMTAB -include $(KSRC)/include/linux/modversions.h
++MODCFLAGS      += -DEXPORT_SYMTAB
++
+ ifeq ($(RTL_IOCTL),y)
+    SOURCE	:= r8168_n.c rtl_ioctl.c
+ else

Added: trunk/rpms/fuse/fuse-udev_rules.patch
===================================================================
--- trunk/rpms/fuse/fuse-udev_rules.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/fuse/fuse-udev_rules.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,5 @@
+--- util/udev.rules	2005-11-03 19:38:05.000000000 +0100
++++ util/udev.rules	2005-11-03 19:38:13.000000000 +0100
+@@ -1 +1 @@
+-KERNEL==&quot;fuse&quot;, MODE=&quot;0666&quot;
++KERNEL==&quot;fuse&quot;, NAME=&quot;%k&quot;, MODE=&quot;0660&quot;,OWNER=&quot;root&quot;,GROUP=&quot;fuse&quot;

Added: trunk/rpms/gaim/gaim-1.0.1-naive-gnome-check.patch
===================================================================
--- trunk/rpms/gaim/gaim-1.0.1-naive-gnome-check.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/gaim/gaim-1.0.1-naive-gnome-check.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,17 @@
+--- gaim-1.0.1/src/gtkutils.c.orig	2004-10-07 18:07:35.363545624 -1000
++++ gaim-1.0.1/src/gtkutils.c	2004-10-07 18:08:00.153994668 -1000
+@@ -1274,11 +1274,12 @@
+ gboolean
+ gaim_running_gnome(void)
+ {
+-	if ((g_getenv(&quot;GNOME_DESKTOP_SESSION_ID&quot;) != NULL) &amp;&amp;
++	/* This check is naive and wrong */
++	/*if ((g_getenv(&quot;GNOME_DESKTOP_SESSION_ID&quot;) != NULL) &amp;&amp;
+ 		(g_find_program_in_path(&quot;gnome-open&quot;) != NULL))
+ 	{
+ 		return TRUE;
+-	}
++	}*/
+ 
+ 	return FALSE;
+ }

Added: trunk/rpms/gstreamer-plugins-extras/gst-plugins-0.8.6-dvdread.patch
===================================================================
--- trunk/rpms/gstreamer-plugins-extras/gst-plugins-0.8.6-dvdread.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/gstreamer-plugins-extras/gst-plugins-0.8.6-dvdread.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,12 @@
+--- gst-plugins-0.8.6/ext/dvdread/dvdreadsrc.h.orig	2007-03-26 02:52:38.431625920 +0200
++++ gst-plugins-0.8.6/ext/dvdread/dvdreadsrc.h	2007-03-26 02:53:03.637794000 +0200
+@@ -22,6 +22,9 @@
+ #define __DVDREADSRC_H__
+ 
+ 
++#include &lt;inttypes.h&gt;
++//#include &lt;dvdread/ifo_types.h&gt;
++
+ #include &lt;gst/gst.h&gt;
+ 
+ 

Added: trunk/rpms/imlib2/imlib2-1.2.1-X11-path.patch
===================================================================
--- trunk/rpms/imlib2/imlib2-1.2.1-X11-path.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/imlib2/imlib2-1.2.1-X11-path.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,12 @@
+diff -Nur imlib2-1.2.1-orig/src/modules/loaders/loader_xpm.c imlib2-1.2.1/src/modules/loaders/loader_xpm.c
+--- imlib2-1.2.1-orig/src/modules/loaders/loader_xpm.c	2005-05-18 07:26:16.000000000 +0200
++++ imlib2-1.2.1/src/modules/loaders/loader_xpm.c	2005-09-21 08:55:11.000000000 +0200
+@@ -66,7 +66,7 @@
+    /* look in rgb txt database */
+    if (!rgb_txt)
+ #ifndef __EMX__
+-      rgb_txt = fopen(&quot;/usr/X11R6/lib/X11/rgb.txt&quot;, &quot;r&quot;);
++      rgb_txt = fopen(&quot;/usr/share/X11/rgb.txt&quot;, &quot;r&quot;);
+ #else
+       rgb_txt = fopen(__XOS2RedirRoot(&quot;/XFree86/lib/X11/rgb.txt&quot;), &quot;rt&quot;);
+ #endif

Added: trunk/rpms/imlib2/imlib2-1.3.0-loader_overflows.patch
===================================================================
--- trunk/rpms/imlib2/imlib2-1.3.0-loader_overflows.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/imlib2/imlib2-1.3.0-loader_overflows.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,98 @@
+diff -Nur imlib2-1.2.1/src/modules/loaders/loader_argb.c imlib2-1.2.1.new/src/modules/loaders/loader_argb.c
+--- imlib2-1.2.1/src/modules/loaders/loader_argb.c	2006-11-06 01:27:59.000000000 -0800
++++ imlib2-1.2.1.new/src/modules/loaders/loader_argb.c	2006-11-06 01:30:41.000000000 -0800
+@@ -23,7 +23,7 @@
+ load(ImlibImage * im, ImlibProgressFunction progress,
+      char progress_granularity, char immediate_load)
+ {
+-   int                 w, h, alpha;
++   int                 w=0, h=0, alpha=0;
+    FILE               *f;
+ 
+    if (im-&gt;data)
+@@ -36,6 +36,8 @@
+    {
+       char                buf[256], buf2[256];
+ 
++      memset(buf, 0, sizeof(buf));
++      memset(buf2, 0, sizeof(buf));
+       if (!fgets(buf, 255, f))
+         {
+            fclose(f);
+diff -Nur imlib2-1.2.1/src/modules/loaders/loader_jpeg.c imlib2-1.2.1.new/src/modules/loaders/loader_jpeg.c
+--- imlib2-1.2.1/src/modules/loaders/loader_jpeg.c	2006-11-06 01:27:59.000000000 -0800
++++ imlib2-1.2.1.new/src/modules/loaders/loader_jpeg.c	2006-11-06 01:33:01.000000000 -0800
+@@ -104,8 +104,9 @@
+         im-&gt;w = w = cinfo.output_width;
+         im-&gt;h = h = cinfo.output_height;
+ 
+-        if (cinfo.rec_outbuf_height &gt; 16)
++        if (cinfo.rec_outbuf_height &gt; 16 || w &lt; 1 || h &lt; 1 || w &gt; 16383 || h &gt; 16383)
+           {
++	     im-&gt;w = im-&gt;h = 0;
+              jpeg_destroy_decompress(&amp;cinfo);
+              fclose(f);
+              return 0;
+diff -Nur imlib2-1.2.1/src/modules/loaders/loader_lbm.c imlib2-1.2.1.new/src/modules/loaders/loader_lbm.c
+--- imlib2-1.2.1/src/modules/loaders/loader_lbm.c	2006-11-06 01:27:59.000000000 -0800
++++ imlib2-1.2.1.new/src/modules/loaders/loader_lbm.c	2006-11-06 01:30:41.000000000 -0800
+@@ -453,6 +453,7 @@
+         }
+     }
+     if (!full || !ok) {
++        im-&gt;w = im-&gt;h = 0;
+         freeilbm(&amp;ilbm);
+         return ok;
+     }
+@@ -467,12 +468,13 @@
+     cancel = 0;
+     plane[0] = NULL;
+ 
++    n = ilbm.depth;
++    if (ilbm.mask == 1) n++;
++
+     im-&gt;data = malloc(im-&gt;w * im-&gt;h * sizeof(DATA32));
+-    if (im-&gt;data) {
+-        n = ilbm.depth;
+-        if (ilbm.mask == 1) n++;
++    plane[0] = malloc(((im-&gt;w + 15) / 16) * 2 * n);
++    if (im-&gt;data &amp;&amp; plane[0]) {
+ 
+-        plane[0] = malloc(((im-&gt;w + 15) / 16) * 2 * n);
+         for (i = 1; i &lt; n; i++) plane[i] = plane[i - 1] + ((im-&gt;w + 15) / 16) * 2;
+ 
+         z = ((im-&gt;w + 15) / 16) * 2 * n;
+@@ -511,6 +513,7 @@
+    * the memory for im-&gt;data.
+    *----------*/
+     if (!ok) {
++        im-&gt;w = im-&gt;h = 0;
+         if (im-&gt;data) free(im-&gt;data);
+         im-&gt;data = NULL;
+     }
+diff -Nur imlib2-1.2.1/src/modules/loaders/loader_pnm.c imlib2-1.2.1.new/src/modules/loaders/loader_pnm.c
+--- imlib2-1.2.1/src/modules/loaders/loader_pnm.c	2006-11-06 01:27:59.000000000 -0800
++++ imlib2-1.2.1.new/src/modules/loaders/loader_pnm.c	2006-11-06 01:30:41.000000000 -0800
+@@ -80,7 +80,7 @@
+              int                 i = 0;
+ 
+              /* read numbers */
+-             while (c != EOF &amp;&amp; !isspace(c))
++             while (c != EOF &amp;&amp; i+1 &lt; sizeof(buf) &amp;&amp; !isspace(c))
+                {
+                   buf[i++] = c;
+                   c = fgetc(f);
+diff -Nur imlib2-1.2.1/src/modules/loaders/loader_tga.c imlib2-1.2.1.new/src/modules/loaders/loader_tga.c
+--- imlib2-1.2.1/src/modules/loaders/loader_tga.c	2006-11-06 01:27:59.000000000 -0800
++++ imlib2-1.2.1.new/src/modules/loaders/loader_tga.c	2006-11-06 01:30:41.000000000 -0800
+@@ -365,7 +369,9 @@
+                   else
+                      dataptr = im-&gt;data + (y * im-&gt;w);
+ 
+-                  for (x = 0; x &lt; im-&gt;w; x++)   /* for each pixel in the row */
++                  for (x = 0;
++                       x &lt; im-&gt;w &amp;&amp; bufptr+bpp/8 &lt; bufend;
++                       x++)   /* for each pixel in the row */
+                     {
+                        switch (bpp)
+                          {

Added: trunk/rpms/imlib2/imlib2-1.3.0-multilib.patch
===================================================================
--- trunk/rpms/imlib2/imlib2-1.3.0-multilib.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/imlib2/imlib2-1.3.0-multilib.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,34 @@
+--- imlib2-1.3.0/configure.in~	2006-10-27 00:18:39.000000000 +0200
++++ imlib2-1.3.0/configure.in	2006-10-27 00:18:39.000000000 +0200
+@@ -190,7 +190,7 @@
+   AC_PATH_XTRA
+   x_dir=${x_dir:-/usr/X11R6}
+   x_cflags=${x_cflags:--I${x_includes:-$x_dir/include}}
+-  x_libs=&quot;${x_libs:--L${x_libraries:-$x_dir/lib}} -lX11 -lXext&quot;
++  x_libs=&quot;-lX11 -lXext&quot;
+   AM_CONDITIONAL(BUILD_X11, true)
+   AC_DEFINE(BUILD_X11, 1, [enabling X11 support])
+ else
+--- imlib2-1.3.0/configure~	2006-10-27 00:18:25.000000000 +0200
++++ imlib2-1.3.0/configure	2006-10-27 00:18:25.000000000 +0200
+@@ -23117,7 +23117,7 @@
+ 
+   x_dir=${x_dir:-/usr/X11R6}
+   x_cflags=${x_cflags:--I${x_includes:-$x_dir/include}}
+-  x_libs=&quot;${x_libs:--L${x_libraries:-$x_dir/lib}} -lX11 -lXext&quot;
++  x_libs=&quot;-lX11 -lXext&quot;
+ 
+ 
+ if true; then
+--- imlib2-1.3.0/imlib2-config.in~	2006-10-27 00:17:29.000000000 +0200
++++ imlib2-1.3.0/imlib2-config.in	2006-10-27 00:17:29.000000000 +0200
+@@ -45,8 +45,7 @@
+       echo $includes
+       ;;
+     --libs)
+-      libdirs=<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">-L at libdir</A>@
+-      echo $libdirs -lImlib2 @my_libs@
++      echo -lImlib2 @my_libs@
+       ;;
+     *)
+       echo &quot;${usage}&quot; 1&gt;&amp;2

Added: trunk/rpms/iperf/iperf-2.0.2-noyield.patch
===================================================================
--- trunk/rpms/iperf/iperf-2.0.2-noyield.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/iperf/iperf-2.0.2-noyield.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,98 @@
+fix iperf locking - it was burning CPU time while polling
+unnecessarily, instead of using the proper wait primitives.
+
+Signed-off-by: Ingo Molnar 
+---
+ compat/Thread.c |    3 ---
+ src/Reporter.c  |   13 +++++++++----
+ src/main.cpp    |    2 ++
+ 3 files changed, 11 insertions(+), 7 deletions(-)
+
+Index: iperf-2.0.2/compat/Thread.c
+===================================================================
+--- iperf-2.0.2.orig/compat/Thread.c
++++ iperf-2.0.2/compat/Thread.c
+@@ -405,9 +405,6 @@ int thread_numuserthreads( void ) {
+ void thread_rest ( void ) {
+ #if defined( HAVE_THREAD )
+ #if defined( HAVE_POSIX_THREAD )
+-    // TODO add checks for sched_yield or pthread_yield and call that
+-    // if available
+-    usleep( 0 );
+ #else // Win32
+     SwitchToThread( );
+ #endif
+Index: iperf-2.0.2/src/Reporter.c
+===================================================================
+--- iperf-2.0.2.orig/src/Reporter.c
++++ iperf-2.0.2/src/Reporter.c
+@@ -111,6 +111,7 @@ report_statistics multiple_reports[kRepo
+ char buffer[64]; // Buffer for printing
+ ReportHeader *ReportRoot = NULL;
+ extern Condition ReportCond;
++extern Condition ReportDoneCond;
+ int reporter_process_report ( ReportHeader *report );
+ void process_report ( ReportHeader *report );
+ int reporter_handle_packet( ReportHeader *report );
+@@ -338,7 +339,7 @@ void ReportPacket( ReportHeader* agent, 
+             // item
+             while ( index == 0 ) {
+                 Condition_Signal( &amp;ReportCond );
+-                thread_rest();
++                Condition_Wait( &amp;ReportDoneCond );
+                 index = agent-&gt;reporterindex;
+             }
+             agent-&gt;agentindex = 0;
+@@ -346,7 +347,7 @@ void ReportPacket( ReportHeader* agent, 
+         // Need to make sure that reporter is not about to be &quot;lapped&quot;
+         while ( index - 1 == agent-&gt;agentindex ) {
+             Condition_Signal( &amp;ReportCond );
+-            thread_rest();
++            Condition_Wait( &amp;ReportDoneCond );
+             index = agent-&gt;reporterindex;
+         }
+         
+@@ -553,6 +554,7 @@ void reporter_spawn( thread_Settings *th
+         }
+         Condition_Unlock ( ReportCond );
+ 
++again:
+         if ( ReportRoot != NULL ) {
+             ReportHeader *temp = ReportRoot;
+             //Condition_Unlock ( ReportCond );
+@@ -575,9 +577,12 @@ void reporter_spawn( thread_Settings *th
+                 // finished with report so free it
+                 free( temp );
+                 Condition_Unlock ( ReportCond );
++               Condition_Signal( &amp;ReportDoneCond );
++       if (ReportRoot)
++           goto again;
+             }
+-            // yield control of CPU is another thread is waiting
+-            thread_rest();
++            Condition_Signal( &amp;ReportDoneCond );
++            usleep(10000);
+         } else {
+             //Condition_Unlock ( ReportCond );
+         }
+Index: iperf-2.0.2/src/main.cpp
+===================================================================
+--- iperf-2.0.2.orig/src/main.cpp
++++ iperf-2.0.2/src/main.cpp
+@@ -96,6 +96,7 @@ extern &quot;C&quot; {
+     // records being accessed in a report and also to
+     // serialize modification of the report list
+     Condition ReportCond;
++    Condition ReportDoneCond;
+ }
+ 
+ // global variables only accessed within this file
+@@ -141,6 +142,7 @@ int main( int argc, char **argv ) {
+ 
+     // Initialize global mutexes and conditions
+     Condition_Initialize ( &amp;ReportCond );
++    Condition_Initialize ( &amp;ReportDoneCond );
+     Mutex_Initialize( &amp;groupCond );
+     Mutex_Initialize( &amp;clients_mutex );
+ 
+-

Added: trunk/rpms/libmpeg3/libmpeg3-1.5.2-gnustack.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.5.2-gnustack.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.5.2-gnustack.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,22 @@
+diff -ru libmpeg3-1.5.2.orig/video/mmxidct.S libmpeg3-1.5.2/video/mmxidct.S
+--- libmpeg3-1.5.2.orig/video/mmxidct.S	2006-04-24 23:13:14.000000000 +0200
++++ libmpeg3-1.5.2/video/mmxidct.S	2006-04-24 23:13:47.000000000 +0200
+@@ -673,3 +673,7 @@
+ 	ret
+ .Lfe1:
+ 	.size	 IDCT_mmx,.Lfe1-IDCT_mmx
++
++#ifdef __ELF__
++.section .note.GNU-stack,&quot;&quot;,%progbits
++#endif
+diff -ru libmpeg3-1.5.2.orig/video/reconmmx.s libmpeg3-1.5.2/video/reconmmx.s
+--- libmpeg3-1.5.2.orig/video/reconmmx.s	2006-04-24 23:13:14.000000000 +0200
++++ libmpeg3-1.5.2/video/reconmmx.s	2006-04-24 23:13:20.000000000 +0200
+@@ -298,4 +298,6 @@
+   pop        esi
+   ret
+ 
+-
++%ifidn __OUTPUT_FORMAT__,elf
++section .note.GNU-stack noalloc noexec nowrite progbits
++%endif

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-boostrap.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-boostrap.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-boostrap.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+diff -uNr libmpeg3-1.7-bootstrap/bootstrap libmpeg3-1.7/bootstrap
+--- libmpeg3-1.7-bootstrap/bootstrap	1970-01-01 01:00:00.000000000 +0100
++++ libmpeg3-1.7/bootstrap	2007-09-14 00:27:39.000000000 +0200
+@@ -0,0 +1,7 @@
++#!/bin/sh
++set -x
++aclocal
++libtoolize --force --copy
++autoheader
++automake --add-missing --copy
++autoconf

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_autotools.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_autotools.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_autotools.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,213 @@
+diff -uNr libmpeg3-1.7/audio/ac3.c libmpeg3-cinelerra/audio/ac3.c
+--- libmpeg3-1.7/audio/ac3.c	2006-01-11 05:42:23.000000000 +0100
++++ libmpeg3-cinelerra/audio/ac3.c	2007-07-05 00:42:40.000000000 +0200
+@@ -1,7 +1,7 @@
+ #include &lt;stdint.h&gt;
+ #include &lt;stdio.h&gt;
+ 
+-#include &quot;a52.h&quot;
++#include &lt;a52dec/a52.h&gt;
+ #include &quot;mpeg3private.h&quot;
+ #include &quot;mpeg3protos.h&quot;
+ 
+diff -uNr libmpeg3-1.7/audio/Makefile.am libmpeg3-cinelerra/audio/Makefile.am
+--- libmpeg3-1.7/audio/Makefile.am	1970-01-01 01:00:00.000000000 +0100
++++ libmpeg3-cinelerra/audio/Makefile.am	2007-07-05 00:42:40.000000000 +0200
+@@ -0,0 +1,12 @@
++noinst_LTLIBRARIES = libmpeg3_audio.la
++libmpeg3_audio_la_SOURCES = ac3.c dct.c huffman.c layer2.c layer3.c mpeg3audio.c pcm.c synthesizers.c tables.c
++libmpeg3_audio_la_LDFLAGS =
++
++noinst_HEADERS = ac3.h huffman.h mpeg3audio.h tables.h
++
++AM_CFLAGS = $(CPU_CFLAGS) $(LARGEFILE_CFLAGS)
++AM_CXXFLAGS = $(CPU_CFLAGS) $(LARGEFILE_CFLAGS)
++INCLUDES=-I$(srcdir)/..
++
++LIBTOOL = $(SHELL) $(top_builddir)/libtool $(LTC_FLAGS)
++
+diff -uNr libmpeg3-1.7/configure.in libmpeg3-cinelerra/configure.in
+--- libmpeg3-1.7/configure.in	1970-01-01 01:00:00.000000000 +0100
++++ libmpeg3-cinelerra/configure.in	2007-09-08 23:27:17.000000000 +0200
+@@ -0,0 +1,83 @@
++# Process this file with autoconf to produce a configure script.
++AC_INIT(libmpeg3, 1.7)
++AM_INIT_AUTOMAKE([dist-bzip2])
++AC_PREREQ(2.53)
++AM_CONFIG_HEADER([config.h])
++AM_PROG_AS
++AC_DISABLE_SHARED
++AC_ENABLE_STATIC
++AC_PROG_LIBTOOL
++
++LIBMPEG3_VERSION_CURRENT=1
++LIBMPEG3_VERSION_REVISION=0
++LIBMPEG3_VERSION_AGE=0
++LIBMPEG3_VERSION_INFO=$LIBMPEG3_VERSION_CURRENT:$LIBMPEG3_VERSION_REVISION:$LIBMPEG3_VERSION_AGE
++AC_SUBST(LIBMPEG3_VERSION_INFO)
++
++# Checks for programs.
++AC_PROG_CC
++
++# hack for using nasm for .S files
++CCAS=&quot;nasm --tag=$CC&quot;
++AC_SUBST(CCAS)
++AC_SUBST(CCASFLAGS)
++
++############## MMX
++
++AC_ARG_ENABLE(mmx, 
++	AC_HELP_STRING([--enable-mmx], [enables support for mmx (default is autodetect)]),
++		[ enable_mmx=$enableval ],[ enable_mmx=auto ])
++case &quot;$target_cpu&quot; in
++i586 | i686)
++	test &quot;x$enable_mmx&quot; = &quot;xauto&quot; &amp;&amp; enable_mmx=yes
++
++	CPU_CFLAGS=&quot;-DX86_CPU $CPU_CFLAGS&quot;
++
++	if test &quot;x$enable_mmx&quot; = &quot;xyes&quot;; then
++		CPU_CFLAGS=&quot;-DHAVE_MMX -DUSE_MMX $CPU_CFLAGS&quot; # -D_MMX_ doesn't work
++		enable_mmx32=yes
++	fi
++;;
++x86_64)
++	test &quot;x$enable_mmx&quot; = &quot;xauto&quot; &amp;&amp; enable_mmx=yes
++	CPU_CFLAGS=&quot;-DX86_CPU $CPU_CFLAGS&quot;
++	if test &quot;x$enable_mmx&quot; = &quot;xyes&quot;; then
++		CPU_CFLAGS=&quot;-DHAVE_MMX -DUSE_MMX $CPU_CFLAGS&quot;
++
++       fi
++;;
++esac
++
++test &quot;x$enable_mmx&quot; = &quot;xauto&quot; &amp;&amp; enable_mmx=no
++
++AM_CONDITIONAL(USEMMX, test &quot;x$enable_mmx&quot; = &quot;xyes&quot;)
++AM_CONDITIONAL(USEMMX32, test &quot;x$enable_mmx32&quot; = &quot;xyes&quot;)
++AM_CONDITIONAL(TARGET_BUILTIN_VECTOR,test &quot;x$enable_mmx&quot; = &quot;xyes&quot;)
++AC_SUBST(LIBDECORE_LIBADD)
++AC_SUBST(CPU_CFLAGS)
++
++############## END OF MMX
++
++LARGEFILE_CFLAGS=&quot;-D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE -D_FILE_OFFSET_BITS=64&quot;
++AC_SUBST(LARGEFILE_CFLAGS)
++
++# Checks for header files.
++AC_HEADER_STDC
++AC_CHECK_HEADERS([stdlib.h string.h])
++
++# Checks for typedefs, structures, and compiler characteristics.
++AC_C_CONST
++AC_C_INLINE
++AC_STRUCT_TM
++
++# Checks for libraries.
++
++AC_CONFIG_FILES([
++Makefile
++audio/Makefile
++video/Makefile
++libmpeg3.spec
++libmpeg3.pc
++])
++AC_OUTPUT
++
+diff -uNr libmpeg3-1.7/Makefile.am libmpeg3-cinelerra/Makefile.am
+--- libmpeg3-1.7/Makefile.am	1970-01-01 01:00:00.000000000 +0100
++++ libmpeg3-cinelerra/Makefile.am	2007-09-08 22:58:17.000000000 +0200
+@@ -0,0 +1,61 @@
++lib_LTLIBRARIES = libmpeg3.la
++AM_CFLAGS = $(CPU_CFLAGS) $(LARGEFILE_CFLAGS)
++libmpeg3_la_LDFLAGS = -version-info @LIBMPEG3_VERSION_INFO@
++libmpeg3_la_LIBADD = -la52 video/libmpeg3_video.la audio/libmpeg3_audio.la -lm \
++		     -lpthread
++libmpeg3_la_SOURCES = libmpeg3.c mpeg3bits.c mpeg3atrack.c mpeg3css.c \
++	mpeg3demux.c \
++	mpeg3ifo.c \
++	mpeg3io.c \
++	mpeg3strack.c \
++	mpeg3title.c \
++	mpeg3tocutil.c \
++	mpeg3vtrack.c \
++	workarounds.c
++
++bin_PROGRAMS = mpeg3dump mpeg3peek mpeg3toc mpeg3cat # mpeg2qt
++mpeg3dump_SOURCES = mpeg3dump.c
++mpeg3dump_LDADD = libmpeg3.la
++mpeg3dump_CFLAGS = $(AM_CFLAGS)
++mpeg3peek_SOURCES = mpeg3peek.c
++mpeg3peek_LDADD = libmpeg3.la
++mpeg3peek_CFLAGS = $(AM_CFLAGS)
++mpeg3toc_SOURCES = mpeg3toc.c
++mpeg3toc_LDADD = libmpeg3.la
++mpeg3toc_CFLAGS = $(AM_CFLAGS)
++mpeg3cat_SOURCES = mpeg3cat.c
++mpeg3cat_LDADD = libmpeg3.la
++mpeg3cat_CFLAGS = $(AM_CFLAGS)
++#mpeg2qt_SOURCES = mpeg2qt.c # disabled to prevent circle dependencies
++#mpeg2qt_LDADD = libmpeg3.la -lpng -lz -ldl -lquicktime4linux
++#mpeg2qt_CFLAGS = $(AM_CFLAGS) -I$(includedir)/quicktime4linux
++
++SUBDIRS = audio video 
++
++EXTRA_DIST = docs
++
++noinst_HEADERS = bitstream.h \
++	ifo.h \
++	libmpeg3.h \
++	mpeg3atrack.h \
++	mpeg3css.h \
++	mpeg3css_fake.c \
++	mpeg3demux.h \
++	mpeg3io.h \
++	mpeg3private.h \
++	mpeg3private.inc \
++	mpeg3protos.h \
++	mpeg3title.h \
++	mpeg3vtrack.h \
++	timecode.h \
++	workarounds.h
++
++dist_noinst_SCRIPTS = bootstrap
++
++pkgincludedir=$(includedir)/mpeg3
++pkginclude_HEADERS=libmpeg3.h mpeg3private.h
++
++pkgconfigdir = $(libdir)/pkgconfig
++pkgconfig_DATA = libmpeg3.pc
++
++LIBTOOL = $(SHELL) $(top_builddir)/libtool $(LTC_FLAGS)
+diff -uNr libmpeg3-1.7/video/Makefile.am libmpeg3-cinelerra/video/Makefile.am
+--- libmpeg3-1.7/video/Makefile.am	1970-01-01 01:00:00.000000000 +0100
++++ libmpeg3-cinelerra/video/Makefile.am	2007-07-05 00:42:40.000000000 +0200
+@@ -0,0 +1,29 @@
++noinst_LTLIBRARIES = libmpeg3_video.la
++libmpeg3_video_la_SOURCES = getpicture.c headers.c idct.c macroblocks.c mmxtest.c motion.c \
++	mpeg3cache.c \
++	mpeg3video.c \
++	output.c \
++	reconstruct.c \
++	seek.c \
++	slice.c \
++	subtitle.c \
++	vlc.c
++
++if USEMMX
++libmpeg3_video_la_SOURCES += mmxidct.S reconmmx.s
++else
++libmpeg3_video_la_SOURCES +=
++endif
++
++noinst_HEADERS = idct.h \
++	layerdata.h \
++	mpeg3video.h \
++	mpeg3videoprotos.h \
++	slice.h \
++	vlc.h
++
++libmpeg3_video_la_LDFLAGS=
++AM_CFLAGS = $(CPU_CFLAGS) $(LARGEFILE_CFLAGS)
++INCLUDES=-I$(srcdir)/..
++
++LIBTOOL = $(SHELL) $(top_builddir)/libtool $(LTC_FLAGS)

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_hacking.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_hacking.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-cinelerra_hacking.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,57 @@
+diff -uNr libmpeg3-1.7/libmpeg3.c libmpeg3-cinelerra/libmpeg3.c
+--- libmpeg3-1.7/libmpeg3.c	2006-03-29 06:14:26.000000000 +0200
++++ libmpeg3-cinelerra/libmpeg3.c	2007-07-05 00:42:40.000000000 +0200
+@@ -181,6 +181,7 @@
+ 				strncasecmp(ext, &quot;.mpg&quot;, 4) &amp;&amp;
+ 				strncasecmp(ext, &quot;.vob&quot;, 4) &amp;&amp;
+ 				strncasecmp(ext, &quot;.mpeg&quot;, 4) &amp;&amp;
++				strncasecmp(ext, &quot;.m2t&quot;, 4) &amp;&amp;
+ 				strncasecmp(ext, &quot;.ac3&quot;, 4))
+ 				result = 0;
+ 		}
+diff -uNr libmpeg3-1.7/libmpeg3.h libmpeg3-cinelerra/libmpeg3.h
+--- libmpeg3-1.7/libmpeg3.h	2006-03-29 06:14:26.000000000 +0200
++++ libmpeg3-cinelerra/libmpeg3.h	2007-07-05 00:42:40.000000000 +0200
+@@ -5,6 +5,7 @@
+ extern &quot;C&quot; {
+ #endif
+ 
++// FIXME: don't include private definitions in external header
+ #include &quot;mpeg3private.h&quot;
+ 
+ 
+diff -uNr libmpeg3-1.7/mpeg3toc.c libmpeg3-cinelerra/mpeg3toc.c
+--- libmpeg3-1.7/mpeg3toc.c	2005-12-23 23:54:55.000000000 +0100
++++ libmpeg3-cinelerra/mpeg3toc.c	2007-07-05 00:42:40.000000000 +0200
+@@ -574,7 +574,7 @@
+ 						if(j == vtracks - 1 &amp;&amp; l == frame_count - 1)
+ 						{
+ 							total_frames += frame_count;
+-							fprintf(stderr, &quot;Video: title=%lld total_frames=%d &quot;, title_number, total_frames);
++							fprintf(stderr, &quot;Video: title=%lld total_frames=%d (%.1f \%)&quot;, title_number, total_frames,100*((float)position)/((float) mpeg3demux_movie_size(demuxer)));
+ 						}
+ 					}
+ 				}
+
+diff -uNr libmpeg3-1.7/video/output.c libmpeg3-cinelerra/video/output.c
+--- libmpeg3-1.7/video/output.c	2006-01-07 10:55:56.000000000 +0100
++++ libmpeg3-cinelerra/video/output.c	2007-07-05 00:42:40.000000000 +0200
+@@ -104,7 +104,7 @@
+ 	*data++ = 0;
+ 
+ #define STORE_PIXEL_RGB565 \
+-	*((unsigned short*)data) = \
++	*(*(unsigned short**)(&amp;data))++ = \
+ 		((CLIP(r_l) &amp; 0xf8) &lt;&lt; 8) | \
+ 		((CLIP(g_l) &amp; 0xfc) &lt;&lt; 3) | \
+ 		((CLIP(b_l) &amp; 0xf8) &gt;&gt; 3); \
+diff -uNr libmpeg3-1.7/video/vlc.c libmpeg3-cinelerra/video/vlc.c
+--- libmpeg3-1.7/video/vlc.c	2005-04-21 05:59:42.000000000 +0200
++++ libmpeg3-cinelerra/video/vlc.c	2007-07-05 00:42:40.000000000 +0200
+@@ -1,3 +1,6 @@
++// FIXME: vlc.h redefines ERROR to 99 if and only if error is defined.
++#define ERROR
++
+ #include &quot;mpeg3private.h&quot;
+ #include &quot;mpeg3protos.h&quot;
+ #include &quot;vlc.h&quot;

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-fix_commented.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-fix_commented.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-fix_commented.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,12 @@
+diff -up libmpeg3-1.7/mpeg3protos.h.commented libmpeg3-1.7/mpeg3protos.h
+--- libmpeg3-1.7/mpeg3protos.h.commented	2006-03-29 06:14:26.000000000 +0200
++++ libmpeg3-1.7/mpeg3protos.h	2007-09-11 18:20:08.000000000 +0200
+@@ -390,7 +390,7 @@ int mpeg3demux_open_title(mpeg3_demuxer_
+ /* Go to the absolute byte given */
+ int mpeg3demux_seek_byte(mpeg3_demuxer_t *demuxer, int64_t byte);
+ 
+-/* Seek to the title and cell containing the absolute byte of the 
++/* Seek to the title and cell containing the absolute byte of the */
+ /* demuxer. */
+ /* Called at the beginning of every packet. */
+ int mpeg3_seek_phys(mpeg3_demuxer_t *demuxer);

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-makefile.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-makefile.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-makefile.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,163 @@
+diff -up libmpeg3-1.7/Makefile.makefile libmpeg3-1.7/Makefile
+--- libmpeg3-1.7/Makefile.makefile	2006-02-15 06:09:31.000000000 +0100
++++ libmpeg3-1.7/Makefile	2007-09-08 03:16:05.000000000 +0200
+@@ -9,6 +9,10 @@ ifeq (&quot;$(PREFIX)&quot;, &quot;&quot;)
+ PREFIX=/usr
+ endif
+ 
++ifeq (&quot;$(LIBDIR)&quot;, &quot;&quot;)
++LIBDIR=$(PREFIX)/lib
++endif
++
+ ifeq ($(origin CFLAGS), environment)
+ HAVE_CFLAGS := y
+ else
+@@ -16,36 +20,13 @@ HAVE_CFLAGS := n
+ endif
+ 
+ 
++ifeq (&quot;$(OBJDIR)&quot;, &quot;&quot;)
+ OBJDIR := $(shell uname --machine)
+-
+-
+-
+-
+-ifeq ($(OBJDIR), alpha)
+-  USE_MMX = 0
+-  ifneq ($(HAVE_CFLAGS), y)
+-    CFLAGS := -O4 -arch ev67 -ieee -accept c99_keywords -gcc_messages
+-  endif
+-endif
+-
+-ifeq ($(OBJDIR), i686)
+-  USE_MMX = 1
+-  ifneq ($(HAVE_CFLAGS), y)
+-    CFLAGS := -O2 -fomit-frame-pointer -falign-loops=2 -falign-jumps=2 -falign-functions=2 -I/usr/local/include
+-  endif
+-  CFLAGS += -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE
+-endif
+-
+-ifeq ($(OBJDIR), x86_64)
+-  ifneq ($(HAVE_CFLAGS), y)
+-    CFLAGS := -O2 -fomit-frame-pointer -I/usr/local/include
+-  endif
+-  CFLAGS += -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE
+-
+-
+ endif
+ 
+ 
++CFLAGS += -D_FILE_OFFSET_BITS=64 -D_LARGEFILE_SOURCE -D_LARGEFILE64_SOURCE
++
+ 
+ ifeq ($(USE_CSS), 1)
+   CFLAGS += -DHAVE_CSS
+@@ -64,8 +45,7 @@ endif
+ 
+ CFLAGS += \
+ 	-I. \
+-	-I$(A52DIR)/include \
+-	-I$(A52DIR)/liba52
++	-I/usr/include/a52dec
+ 
+ 
+ 
+@@ -136,9 +116,9 @@ DIRS := \
+ 	$(OBJDIR)/audio \
+ 	$(OBJDIR)/video
+ 
+-include Makefile.a52
++#include Makefile.a52
+ 
+-DIRS += $(A52DIRS)
++#DIRS += $(A52DIRS)
+ 
+ 
+ OUTPUT = $(OBJDIR)/libmpeg3.a
+@@ -147,40 +127,40 @@ UTILS = $(OBJDIR)/mpeg3dump $(OBJDIR)/mp
+ #$(OBJDIR)/mpeg3split
+ 
+ 
+-LIBS = -lm -lpthread
++LIBS = -lm -lpthread -la52
+ 
+ $(shell if ! test -d $(OBJDIR) \; then mkdir -p $(OBJDIR) \; fi )
+ 
+-$(shell echo $(CFLAGS) &gt; $(OBJDIR)/c_flags)
+-$(shell echo $(A52CFLAGS) &gt; $(OBJDIR)/a52_flags)
+-$(shell echo $(OBJS) $(ASMOBJS) $(A52OBJS) $(NASMOBJS) &gt; $(OBJDIR)/objs)
++#(shell echo $(CFLAGS) &gt; $(OBJDIR)/c_flags)
++#$(shell echo $(A52CFLAGS) &gt; $(OBJDIR)/a52_flags)
++#$(shell echo $(OBJS) $(ASMOBJS) $(NASMOBJS) &gt; $(OBJDIR)/objs)
+ $(shell mkdir -p $(DIRS) )
+ 
+ all: $(OUTPUT) $(UTILS)
+ 
+ 
+-$(OUTPUT): $(OBJS) $(ASMOBJS) $(NASMOBJS) $(A52OBJS)
+-	ar rcs $(OUTPUT) `cat $(OBJDIR)/objs`
++$(OUTPUT): $(OBJS) $(ASMOBJS) $(NASMOBJS)
++	ar rcs $(OUTPUT) $(OBJS) $(ASMOBJS) $(NASMOBJS)
+ 
+ 
+ 
+ $(OBJDIR)/mpeg3dump: $(OUTPUT) mpeg3dump.c
+-	$(CC) `cat $(OBJDIR)/c_flags` -o $(OBJDIR)/mpeg3dump mpeg3dump.c $(OUTPUT) $(LIBS)
++	$(CC) $(CFLAGS) -o $(OBJDIR)/mpeg3dump mpeg3dump.c $(OUTPUT) $(LIBS)
+ 
+ $(OBJDIR)/mpeg3peek: $(OUTPUT) mpeg3peek.c
+-	$(CC) `cat $(OBJDIR)/c_flags` -o $(OBJDIR)/mpeg3peek mpeg3peek.c $(OUTPUT) $(LIBS)
++	$(CC) $(CFLAGS) -o $(OBJDIR)/mpeg3peek mpeg3peek.c $(OUTPUT) $(LIBS)
+ 
+ $(OBJDIR)/mpeg3toc: $(OUTPUT) mpeg3toc.c
+-	$(CC) `cat $(OBJDIR)/c_flags` -o $(OBJDIR)/mpeg3toc mpeg3toc.c $(OUTPUT) $(LIBS)
++	$(CC) $(CFLAGS) -o $(OBJDIR)/mpeg3toc mpeg3toc.c $(OUTPUT) $(LIBS)
+ 
+ $(OBJDIR)/mpeg3cat: $(OUTPUT) mpeg3cat.c
+-	$(CC) `cat $(OBJDIR)/c_flags` -o $(OBJDIR)/mpeg3cat mpeg3cat.c $(OUTPUT) $(LIBS)
++	$(CC) $(CFLAGS) -o $(OBJDIR)/mpeg3cat mpeg3cat.c $(OUTPUT) $(LIBS)
+ 
+ #$(OBJDIR)/mpeg3split: $(OUTPUT)
+-#	$(CC) `cat $(OBJDIR)/c_flags` -o $(OBJDIR)/mpeg3split mpeg3split.c $(OUTPUT) $(LIBS)
++#	$(CC) $(CFLAGS) -o $(OBJDIR)/mpeg3split mpeg3split.c $(OUTPUT) $(LIBS)
+ 
+ $(OBJDIR)/mpeg2qt: $(OUTPUT)
+-	$(CC) `cat $(OBJDIR)/c_flags` -o $(OBJDIR)/mpeg2qt mpeg2qt.c \
++	$(CC) $(CFLAGS) -o $(OBJDIR)/mpeg2qt mpeg2qt.c \
+ 		$(OUTPUT) \
+ 		$(LIBS) \
+ 		-I. \
+@@ -191,9 +171,12 @@ $(OBJDIR)/mpeg2qt: $(OUTPUT)
+ 		-ldl
+ 
+ install: 
+-	cp $(UTILS) $(PREFIX)/bin
+-#	cp $(OUTPUT) $(PREFIX)/lib
+-#	cp libmpeg3.h mpeg3private.h $(PREFIX)/include
++	mkdir -p $(DESTDIR)$(PREFIX)/bin
++	cp $(UTILS) $(DESTDIR)$(PREFIX)/bin
++	mkdir -p $(DESTDIR)$(LIBDIR)
++	cp $(OUTPUT) $(DESTDIR)$(LIBDIR)
++	mkdir -p $(DESTDIR)$(PREFIX)/include
++	cp libmpeg3.h mpeg3private.h $(DESTDIR)$(PREFIX)/include
+ 
+ clean:
+ 	rm -rf $(OBJDIR)
+@@ -206,13 +189,13 @@ wc:
+ 	cat *.c *.h audio/*.c audio/*.h video/*.c video/*.h | wc
+ 
+ $(OBJS): 
+-	$(CC) -c `cat $(OBJDIR)/c_flags` $(subst $(OBJDIR)/,, $*.c) -o $*.o
++	$(CC) -c $(CFLAGS) $(subst $(OBJDIR)/,, $*.c) -o $*.o
+ $(ASMOBJS): 
+-	$(CC) -c `cat $(OBJDIR)/c_flags` $(subst $(OBJDIR)/,, $*.S) -o $*.o
++	$(CC) -c $(CFLAGS) $(subst $(OBJDIR)/,, $*.S) -o $*.o
+ $(NASMOBJS): 
+ 	$(NASM) -f elf $(subst $(OBJDIR)/,, $*.s) -o $*.o
+-$(A52OBJS):
+-	$(CC) -c `cat $(OBJDIR)/a52_flags` $(subst $(OBJDIR)/,, $*.c) -o $*.o
++#(A52OBJS):
++#	$(CC) -c $(CFLAGS) $(subst $(OBJDIR)/,, $*.c) -o $*.o
+ 
+ $(OBJDIR)/libmpeg3.o: 				    libmpeg3.c
+ $(OBJDIR)/mpeg3atrack.o: 			    mpeg3atrack.c

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-memcpy.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-memcpy.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-memcpy.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,23 @@
+diff -ur libmpeg3-1.7.orig/audio/mpeg3audio.c libmpeg3-1.7/audio/mpeg3audio.c
+--- libmpeg3-1.7.orig/audio/mpeg3audio.c	2006-02-19 13:43:27.000000000 +0200
++++ libmpeg3-1.7/audio/mpeg3audio.c	2007-08-17 18:06:37.000000000 +0300
+@@ -3,7 +3,7 @@
+ 
+ #include &lt;math.h&gt;
+ #include &lt;stdlib.h&gt;
+-
++#include &lt;string.h&gt;
+ 
+ 
+ 
+diff -ur libmpeg3-1.7.orig/video/subtitle.c libmpeg3-1.7/video/subtitle.c
+--- libmpeg3-1.7.orig/video/subtitle.c	2006-02-27 06:14:00.000000000 +0200
++++ libmpeg3-1.7/video/subtitle.c	2007-08-17 18:07:00.000000000 +0300
+@@ -2,6 +2,7 @@
+ #include &quot;mpeg3protos.h&quot;
+ 
+ #include &lt;stdlib.h&gt;
++#include &lt;string.h&gt;
+ 
+ static unsigned char get_nibble(unsigned char **ptr, int *nibble)
+ {

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-pkgconfig.in.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-pkgconfig.in.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-pkgconfig.in.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,16 @@
+diff -uNr libmpeg3-1.7_spec/libmpeg3.pc.in libmpeg3-1.7/libmpeg3.pc.in
+--- libmpeg3-1.7_spec/libmpeg3.pc.in	1970-01-01 01:00:00.000000000 +0100
++++ libmpeg3-1.7/libmpeg3.pc.in	2007-09-11 22:08:28.000000000 +0200
+@@ -0,0 +1,12 @@
++prefix=@prefix@
++exec_prefix=@prefix@
++libdir=@libdir@
++includedir=@includedir@/mpeg3
++
++Name: @PACKAGE@
++Description: Decoder of various derivatives of MPEG standards
++Version: @VERSION@
++Requires: 
++Conflicts: 
++Libs: -L${libdir} -lmpeg3 -lpthread -la52
++Cflags: -I${includedir}

Added: trunk/rpms/libmpeg3/libmpeg3-1.7-spec_in.patch
===================================================================
--- trunk/rpms/libmpeg3/libmpeg3-1.7-spec_in.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/libmpeg3/libmpeg3-1.7-spec_in.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,164 @@
+diff -uNr libmpeg3-1.7_spec/libmpeg3.spec.in libmpeg3-1.7/libmpeg3.spec.in
+--- libmpeg3-1.7_spec/libmpeg3.spec.in	1970-01-01 01:00:00.000000000 +0100
++++ libmpeg3-1.7/libmpeg3.spec.in	2007-09-11 21:34:13.000000000 +0200
+@@ -0,0 +1,160 @@
++Summary: Decoder of various derivatives of MPEG standards
++Name: libmpeg3
++Version: @VERSION@
++Release: 1%{?dist}
++License: GPLv2+
++Group: System Environment/Libraries
++URL: <A HREF="http://heroinewarrior.com/libmpeg3.php3">http://heroinewarrior.com/libmpeg3.php3</A>
++Source: <A HREF="http://dl.sf.net/heroines/libmpeg3-%{version">http://dl.sf.net/heroines/libmpeg3-%{version</A>}-src.tar.bz2
++BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
++#BuildRequires: nasm
++#BuildRequires: a52dec-devel
++
++#BuildRequires: autoconf, libtool, automake
++
++%description
++LibMPEG3 decodes the many many derivatives of MPEG standards into
++uncompressed data suitable for editing and playback.
++
++libmpeg3 currently decodes:
++ - MPEG-1 Layer II/III Audio and program streams
++ - MPEG-2 Layer III Audio, program streams and transport streams
++ - MPEG-1 and MPEG-2 Video
++ - AC3 Audio
++ - IFO files
++ - VOB files
++
++
++%package utils
++Summary: Utilities from libmpeg3
++Group: Applications/Multimedia
++Requires: %{name} = %{version}-%{release}
++
++%description utils
++LibMPEG3 decodes the many many derivatives of MPEG standards into
++uncompressed data suitable for editing and playback.
++
++This package contains utility programs based on libmpeg3.
++
++
++%package devel
++Summary: Development files for libmpeg3
++Group: Development/Libraries
++Requires: %{name} = %{version}-%{release}
++
++%description devel
++LibMPEG3 decodes the many many derivatives of MPEG standards into
++uncompressed data suitable for editing and playback.
++
++This package contains files needed to build applications that will use
++libmpeg3.
++
++
++%prep
++%setup -q
++
++
++
++
++%build
++%configure --enable-shared --enable-static 
++%ifarch i686 x86_64
++#  --enable-mmx \
++%endif
++
++make %{?_smp_mflags}
++
++
++
++%install
++%{__rm} -rf %{buildroot}
++
++%{__make} install \
++    LIBDIR=%{_libdir} \
++    DESTDIR=%{buildroot} \
++    INSTALL=&quot;install -c -p&quot;
++
++%{__rm} -rf %{buildroot}%{_libdir}/*.la
++
++
++%clean
++%{__rm} -rf %{buildroot}
++
++
++%post -p /sbin/ldconfig
++
++%postun -p /sbin/ldconfig
++
++
++%files
++%defattr(-, root, root, -)
++%doc COPYING
++%{_libdir}/*.so.*
++
++%files utils
++%defattr(-, root, root, -)
++%{_bindir}/mpeg3cat
++%{_bindir}/mpeg3dump
++%{_bindir}/mpeg3peek
++%{_bindir}/mpeg3toc
++#{_bindir}/mpeg2qt
++
++%files devel
++%defattr(-, root, root,-)
++%doc docs/*
++%{_libdir}/*.so
++%{_libdir}/*.a
++%{_includedir}/mpeg3/
++%{_libdir}/pkgconfig/*.pc
++
++
++%changelog
++* Sun Sep  9 2007 kwizart &lt; kwizart at gmail.com &gt; - 1.7-4
++- Add autotools support (default is still static )
++- Remove internal css
++- Build with our cflags (-fPIC is no more necessary )
++
++* Fri Sep  7 2007 kwizart &lt; kwizart at gmail.com &gt; - 1.7-3
++- Add dist tag
++- modified patch for Makefile
++- Add BR's
++
++* Wed Sep 20 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.7-2
++- Run make twice since there is an EOF error that makes the first run abort.
++
++* Mon Jul  3 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.7-1
++- Update to 1.7.
++
++* Fri Mar 17 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.6-2
++- Add -fPIC to the CFLAGS to fix transcode build on x86_64.
++
++* Thu Jan 19 2006 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.6-1
++- Update to 1.6.
++- Split &quot;main&quot; into &quot;utils&quot; (bin) and &quot;devel&quot; (the static lib).
++- Add Makefile patch to ease install and get our CFLAGS used.
++- Don't enable MMX on x86_64, the x86 asm fails.
++
++* Mon Aug 15 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.5.4-5
++- Force __USE_LARGEFILE64 to fix FC4 ppc build.
++
++* Fri Apr 22 2005 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.5.4-4
++- Add gcc4 patch.
++
++* Thu Nov  4 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.5.4-3
++- Remove unneeded /usr/bin fix, since we don't use &quot;make install&quot;.
++- Replace -O? with -O1 in optflags since build fails with O2 and gcc 3.4.
++- Make nasm mandatory : The configure script won't run without it anyway.
++- Use libdir/*.* in order to not catch all debuginfo files too.
++- Added -devel provides for now.
++
++* Sat Jun 26 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5.4-2
++- Fixes for x86_64.
++
++* Wed Apr 07 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5.4-1
++- Updated to release 1.5.4.
++
++* Mon Sep 08 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.5.2-0
++- Updated to release 1.5.2.
++
++* Wed Feb 12 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.4-0
++- Initial package. (using DAR)

Added: trunk/rpms/lighttpd/lighttpd-1.4.17-defaultconf.patch
===================================================================
--- trunk/rpms/lighttpd/lighttpd-1.4.17-defaultconf.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/lighttpd/lighttpd-1.4.17-defaultconf.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,51 @@
+diff -Naupr lighttpd-1.4.17.orig/doc/lighttpd.conf lighttpd-1.4.17/doc/lighttpd.conf
+--- lighttpd-1.4.17.orig/doc/lighttpd.conf	2007-08-14 21:05:57.000000000 +0200
++++ lighttpd-1.4.17/doc/lighttpd.conf	2007-09-05 13:08:33.000000000 +0200
+@@ -37,7 +37,7 @@ server.modules              = (
+ 
+ ## a static document-root, for virtual-hosting take look at the
+ ## server.virtual-* options
+-server.document-root        = &quot;/srv/www/htdocs/&quot;
++server.document-root        = &quot;/srv/www/lighttpd/&quot;
+ 
+ ## where to send error-messages to
+ server.errorlog             = &quot;/var/log/lighttpd/error.log&quot;
+@@ -51,6 +51,7 @@ index-file.names            = ( &quot;index.p
+ 
+ # mimetype mapping
+ mimetype.assign             = (
++  &quot;.rpm&quot;          =&gt;      &quot;application/x-rpm&quot;,
+   &quot;.pdf&quot;          =&gt;      &quot;application/pdf&quot;,
+   &quot;.sig&quot;          =&gt;      &quot;application/pgp-signature&quot;,
+   &quot;.spl&quot;          =&gt;      &quot;application/futuresplash&quot;,
+@@ -147,7 +148,7 @@ static-file.exclude-extensions = ( &quot;.php
+ #server.error-handler-404   = &quot;/error-handler.php&quot;
+ 
+ ## to help the rc.scripts
+-#server.pid-file            = &quot;/var/run/lighttpd.pid&quot;
++server.pid-file            = &quot;/var/run/lighttpd.pid&quot;
+ 
+ 
+ ###### virtual hosts
+@@ -186,10 +187,10 @@ static-file.exclude-extensions = ( &quot;.php
+ #server.chroot              = &quot;/&quot;
+ 
+ ## change uid to &lt;uid&gt; (default: don't care)
+-#server.username            = &quot;wwwrun&quot;
++server.username            = &quot;lighttpd&quot;
+ 
+ ## change uid to &lt;uid&gt; (default: don't care)
+-#server.groupname           = &quot;wwwrun&quot;
++server.groupname           = &quot;lighttpd&quot;
+ 
+ #### compress module
+ #compress.cache-dir         = &quot;/var/cache/lighttpd/compress/&quot;
+@@ -213,7 +214,7 @@ static-file.exclude-extensions = ( &quot;.php
+ #                               ( &quot;localhost&quot; =&gt;
+ #                                 (
+ #                                   &quot;socket&quot; =&gt; &quot;/var/run/lighttpd/php-fastcgi.socket&quot;,
+-#                                   &quot;bin-path&quot; =&gt; &quot;/usr/local/bin/php-cgi&quot;
++#                                   &quot;bin-path&quot; =&gt; &quot;/usr/bin/php-cgi&quot;
+ #                                 )
+ #                               )
+ #                            )

Added: trunk/rpms/lockstat/lockstat-1.4.11-time.patch
===================================================================
--- trunk/rpms/lockstat/lockstat-1.4.11-time.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/lockstat/lockstat-1.4.11-time.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,12 @@
+diff -ur lockstat/lockstat.c lockstat.new/lockstat.c
+--- lockstat/lockstat.c 2004-09-13 19:01:41.000000000 -0400
++++ lockstat.new/lockstat.c     2007-10-08 20:34:13.000000000 -0400
+@@ -36,7 +36,7 @@
+ #include &lt;stdlib.h&gt;
+ #include &lt;string.h&gt;
+ #include &lt;errno.h&gt;
+-#include &lt;sys/time.h&gt;
++#include &lt;time.h&gt;
+ #include &lt;linux/lockmeter.h&gt;
+
+ extern void    closeFiles(void);

Added: trunk/rpms/miro/miro-0.9.9.1-svn.patch
===================================================================
--- trunk/rpms/miro/miro-0.9.9.1-svn.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/miro/miro-0.9.9.1-svn.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- platform/gtk-x11/setup.py.orig	2007-11-16 03:27:04.364443136 +0100
++++ platform/gtk-x11/setup.py	2007-11-16 03:27:13.173104016 +0100
+@@ -342,7 +342,7 @@
+     def install_app_config(self):
+         source = os.path.join(resource_dir, 'app.config.template')
+         dest = '/usr/share/miro/resources/app.config'
+-        revision = util.queryRevision(root_dir)
++        revision = None
+         if revision is None:
+             revision = &quot;unknown&quot;
+             revisionurl = &quot;unknown&quot;

Added: trunk/rpms/mod_suphp/suphp-0.6.0-handler.patch
===================================================================
--- trunk/rpms/mod_suphp/suphp-0.6.0-handler.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/mod_suphp/suphp-0.6.0-handler.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,14 @@
+--- src/apache/mod_suphp.c.orig	2005-08-12 06:28:50.526855736 +0200
++++ src/apache/mod_suphp.c	2005-08-12 06:29:21.277180976 +0200
+@@ -249,9 +249,9 @@
+     {&quot;suPHP_UserGroup&quot;, suphp_handle_cmd_user_group, NULL, 
+      RSRC_CONF|ACCESS_CONF, TAKE2, &quot;User and group scripts shall be run as&quot;},
+ #endif 
+-    {&quot;suPHP_AddHandler&quot;, suphp_handle_cmd_add_handler, NULL, ACCESS_CONF,
++    {&quot;suPHP_AddHandler&quot;, suphp_handle_cmd_add_handler, NULL, RSRC_CONF|ACCESS_CONF,
+      ITERATE, &quot;Tells mod_suphp to handle these MIME-types&quot;},
+-    {&quot;suphp_RemoveHandler&quot;, suphp_handle_cmd_remove_handler, NULL, ACCESS_CONF,
++    {&quot;suphp_RemoveHandler&quot;, suphp_handle_cmd_remove_handler, NULL, RSRC_CONF|ACCESS_CONF,
+      ITERATE, &quot;Tells mod_suphp not to handle these MIME-types&quot;},
+     {NULL}
+ };

Added: trunk/rpms/mod_suphp/suphp-0.6.0-handler2.patch
===================================================================
--- trunk/rpms/mod_suphp/suphp-0.6.0-handler2.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/mod_suphp/suphp-0.6.0-handler2.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,14 @@
+diff -urN ../suphp-0.6.1.orig/src/apache2/mod_suphp.c ./src/apache2/mod_suphp.c
+--- ../suphp-0.6.1.orig/src/apache2/mod_suphp.c 2005-11-26 14:45:49.000000000 -0500
++++ ./src/apache2/mod_suphp.c   2006-02-26 01:28:44.941407805 -0500
+@@ -313,8 +313,8 @@
+     AP_INIT_TAKE2(&quot;suPHP_UserGroup&quot;, suphp_handle_cmd_user_group, NULL, RSRC_CONF | ACCESS_CONF,
+                   &quot;User and group scripts shall be run as&quot;),
+ #endif
+-    AP_INIT_ITERATE(&quot;suPHP_AddHandler&quot;, suphp_handle_cmd_add_handler, NULL, ACCESS_CONF, &quot;Tells mod_suphp to handle these MIME-types&quot;),
+-    AP_INIT_ITERATE(&quot;suPHP_RemoveHandler&quot;, suphp_handle_cmd_remove_handler, NULL, ACCESS_CONF, &quot;Tells mod_suphp not to handle these MIME-types&quot;),
++    AP_INIT_ITERATE(&quot;suPHP_AddHandler&quot;, suphp_handle_cmd_add_handler, NULL, RSRC_CONF|ACCESS_CONF, &quot;Tells mod_suphp to handle these MIME-types&quot;),
++    AP_INIT_ITERATE(&quot;suPHP_RemoveHandler&quot;, suphp_handle_cmd_remove_handler, NULL, RSRC_CONF|ACCESS_CONF, &quot;Tells mod_suphp not to handle these MIME-types&quot;),
+     {NULL}
+ };
+

Added: trunk/rpms/mpack/mpack-1.6-buildfix.patch
===================================================================
--- trunk/rpms/mpack/mpack-1.6-buildfix.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/mpack/mpack-1.6-buildfix.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,22 @@
+diff -urN mpack-1.6.orig/unixos.c mpack-1.6/unixos.c
+--- mpack-1.6.orig/unixos.c	2003-07-22 00:54:05 +0400
++++ mpack-1.6/unixos.c	2005-01-25 14:23:46 +0300
+@@ -39,7 +39,6 @@
+ #endif
+ 
+ extern int errno;
+-extern char *malloc();
+ extern char *getenv();
+ 
+ int overwrite_files = 0;
+diff -urN mpack-1.6.orig/xmalloc.c mpack-1.6/xmalloc.c
+--- mpack-1.6.orig/xmalloc.c	2003-07-22 00:35:31 +0400
++++ mpack-1.6/xmalloc.c	2005-01-25 14:23:40 +0300
+@@ -24,7 +24,6 @@
+  */
+ #include &lt;stdio.h&gt;
+ #include &lt;string.h&gt;
+-extern char *malloc(), *realloc();
+ 
+ char *xmalloc (int size)
+ {

Added: trunk/rpms/ndisgtk/ndisgtk-0.8-centos.patch
===================================================================
--- trunk/rpms/ndisgtk/ndisgtk-0.8-centos.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/ndisgtk/ndisgtk-0.8-centos.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,14 @@
+--- ndisgtk	2007-10-03 10:34:33.000000000 -0500
++++ ndisgtk-centos	2007-10-03 17:16:18.000000000 -0500
+@@ -257,10 +257,7 @@
+ 		Opens the network configuration tool.
+ 		&quot;&quot;&quot;
+ 		
+-		if self.kde:
+-			subprocess.Popen([&quot;kcmshell&quot;, &quot;kcm_knetworkconfmodule&quot;])
+-		else:
+-			subprocess.Popen([&quot;network-admin&quot;])
++		subprocess.Popen([&quot;system-config-network&quot;])
+ 
+ 	def install_driver_open(self, *args):
+ 		&quot;&quot;&quot;

Added: trunk/rpms/nsupdate-gss/nsupdate-gss-ad-sites2.patch
===================================================================
--- trunk/rpms/nsupdate-gss/nsupdate-gss-ad-sites2.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/nsupdate-gss/nsupdate-gss-ad-sites2.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,71 @@
+--- nsupdate-gss.orig	2006-01-23 06:35:10.000000000 +0100
++++ nsupdate-gss	2007-08-01 17:30:35.000000000 +0200
+@@ -5,6 +5,9 @@
+ # <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jmruiz at animatika.net</A>
+ # updated, 2004-Enero
+ 
++# <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
++# updated, 2007-EMC
++
+ 
+ # See draft-ietf-dnsext-gss-tsig-02, RFC2845 and RFC2930
+ 
+@@ -20,21 +23,22 @@
+ 
+ # Integrity of the arguments
+ 
+-if ($#ARGV != 3) {
++if ($#ARGV &lt; 3) {
+     print &quot;
+-Usage: nsupdate-gss.pl HOST DOMAIN IP TTL
++Usage: nsupdate-gss.pl HOST DOMAIN IP TTL [NS]
+ &quot;;
+     exit 1;
+ }
+ 
+ 
+ 
+-
+-my $host = $ARGV[0];
+-my $domain = $ARGV[1];
+-my $ip = $ARGV[2];
++### FIXME: Fill in all information automatically
++my $host = $ARGV[0]; # hostname -s
++my $domain = $ARGV[1]; # domainname
++my $ip = $ARGV[2]; # ifconfig
+ my $ttl = $ARGV[3];
+ my $alg = &quot;gss.microsoft.com&quot;;
++my $ns = $ARGV[4] if ($#ARGV &gt;= 4);
+ 
+ 
+ 
+@@ -229,7 +233,11 @@
+ # find the nameservers
+ my $nameserver = find_nameservers(&quot;$domain.&quot;);
+ 
+-print &quot;Found nameserver $nameserver\n&quot;;
++$nameserver-&gt;nameservers($ns) if (defined($ns));
++#print $nameserver-&gt;print;
++
++#print &quot;Found nameserver $nameserver\n&quot;;
++print &quot;Found &quot;.$nameserver-&gt;nameservers.&quot; nameserver(s)\n&quot;;
+ 
+ if (!defined($nameserver) || $nameserver-&gt;{'errorstring'} ne 'NOERROR') {
+     print &quot;Failed to find a nameserver for domain $domain\n&quot;;
+@@ -238,12 +246,16 @@
+ 
+ # find the name of the DNS server
+ my $server_name = find_server_name($domain);
++$server_name = $ns if (defined($ns));
++
+ if (!defined($server_name)) {
+     print &quot;Failed to find a DNS server name for $domain\n&quot;;
+     exit 1;
+ }
+ print &quot;Using DNS server name $server_name\n&quot;;
+ 
++$nameserver-&gt;nameservers($server_name);
++
+ # use a long random key name
+ my $key_name = int(rand 10000000000000);
+ 

Added: trunk/rpms/nvi/build.patch
===================================================================
--- trunk/rpms/nvi/build.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/nvi/build.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,142 @@
+--- build/Makefile.in.orig	2008-01-10 16:18:46.000000000 +1100
++++ build/Makefile.in	2008-01-10 17:30:12.000000000 +1100
+@@ -76,45 +76,35 @@
+ 
+ install: all install_common
+ 	@echo &quot;Installing vi, ex, view: $(bindir) ...&quot;
+-	[ -d $(bindir) ] || \
+-	    ($(mkdir) $(bindir) &amp;&amp; $(chmod) $(dmode) $(bindir))
+-	cd $(bindir) &amp;&amp; $(rm) -f `echo vi | sed '$(transform)'`
+-	$(cp) nvi $(bindir)/`echo vi | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; [ -f $(strip) ] &amp;&amp; \
++	[ -d $(DESTDIR)$(bindir) ] || \
++	    ($(mkdir) $(DESTDIR)$(bindir) &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(bindir))
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(rm) -f `echo vi | sed '$(transform)'`
++	$(cp) nvi $(DESTDIR)$(bindir)/`echo vi | sed '$(transform)'`
++	cd $(DESTDIR)$(bindir) &amp;&amp; [ -f $(strip) ] &amp;&amp; \
+ 	    $(strip) `echo vi | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; $(chmod) $(emode) `echo vi | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; $(rm) -f `echo ex | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; $(rm) -f `echo view | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; $(ln) \
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(chmod) $(emode) `echo vi | sed '$(transform)'`
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(rm) -f `echo ex | sed '$(transform)'`
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(rm) -f `echo view | sed '$(transform)'`
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(ln) \
+ 		`echo vi | sed '$(transform)'` `echo ex | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; $(ln) \
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(ln) \
+ 		`echo vi | sed '$(transform)'` `echo view | sed '$(transform)'`
+-	[ -d $(mandir) ] || \
+-	    ($(mkdir) $(mandir) &amp;&amp; $(chmod) $(dmode) $(mandir))
+-	[ -d $(mandir)/cat1 ] || \
+-	    ($(mkdir) $(mandir)/cat1 &amp;&amp; $(chmod) $(dmode) $(mandir)/cat1)
+-	@echo &quot;Installing man pages: $(mandir) ...&quot;
+-	cd $(mandir)/cat1 &amp;&amp; $(rm) -f `echo vi.0 | sed '$(transform)'`
+-	$(cp) $(srcdir)/docs/USD.doc/vi.man/vi.0 \
+-	    $(mandir)/cat1/`echo vi.0 | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(chmod) $(fmode) `echo vi.0 | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(rm) -f `echo ex.0 | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(rm) -f `echo view.0 | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(ln) \
+-	    `echo vi.0 | sed '$(transform)'` `echo ex.0 | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(ln) \
+-	    `echo vi.0 | sed '$(transform)'` `echo view.0 | sed '$(transform)'`
+-	[ -d $(mandir)/man1 ] || \
+-	    ($(mkdir) $(mandir)/man1 &amp;&amp; $(chmod) $(dmode) $(mandir)/man1)
+-	cd $(mandir)/man1 &amp;&amp; $(rm) -f `echo vi.1 | sed '$(transform)'`
++	[ -d $(DESTDIR)$(mandir) ] || \
++	    ($(mkdir) $(DESTDIR)$(mandir) &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(mandir))
++	[ -d $(DESTDIR)$(mandir)/cat1 ] || \
++	    ($(mkdir) $(DESTDIR)$(mandir)/cat1 &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(mandir)/cat1)
++	@echo &quot;Installing man pages: $(DESTDIR)$(mandir) ...&quot;
++	[ -d $(DESTDIR)$(mandir)/man1 ] || \
++	    ($(mkdir) $(DESTDIR)$(mandir)/man1 &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(mandir)/man1)
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(rm) -f `echo vi.1 | sed '$(transform)'`
+ 	$(cp) $(srcdir)/docs/USD.doc/vi.man/vi.1 \
+-	    $(mandir)/man1/`echo vi.1 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(chmod) $(fmode) `echo vi.1 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(rm) -f `echo ex.1 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(rm) -f `echo view.1 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(ln) \
++	    $(DESTDIR)$(mandir)/man1/`echo vi.1 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(chmod) $(fmode) `echo vi.1 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(rm) -f `echo ex.1 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(rm) -f `echo view.1 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(ln) \
+ 	    `echo vi.1 | sed '$(transform)'` `echo ex.1 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(ln) \
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(ln) \
+ 	    `echo vi.1 | sed '$(transform)'` `echo view.1 | sed '$(transform)'`
+ 
+ cat=	dutch english french german ru_SU.KOI8-R spanish swedish
+@@ -124,44 +114,34 @@
+ 	[ -f $(ln) ]
+ 	[ -f $(mkdir) ]
+ 	[ -f $(rm) ]
+-	[ -d $(prefix) ] || \
+-	    ($(mkdir) $(prefix) &amp;&amp; $(chmod) $(dmode) $(prefix))
++	[ -d $(DESTDIR)$(prefix) ] || \
++	    ($(mkdir) $(DESTDIR)$(prefix) &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(prefix))
+ 	[ -d $(exec_prefix) ] || \
+-	    ($(mkdir) $(exec_prefix) &amp;&amp; $(chmod) $(dmode) $(exec_prefix))
+-	[ -d $(datadir) ] || \
+-	    ($(mkdir) $(datadir) &amp;&amp; $(chmod) $(dmode) $(datadir))
+-	$(rm) -rf $(datadir)/vi
+-	$(mkdir) $(datadir)/vi &amp;&amp; $(chmod) $(dmode) $(datadir)/vi
+-	@echo &quot;Installing message catalogs: $(datadir)/vi/catalog ...&quot;
+-	$(mkdir) $(datadir)/vi/catalog &amp;&amp; \
+-	    $(chmod) $(dmode) $(datadir)/vi/catalog
+-	(cd $(srcdir)/catalog &amp;&amp; $(cp) $(cat) $(datadir)/vi/catalog &amp;&amp; \
+-	    cd $(datadir)/vi/catalog &amp;&amp; $(chmod) $(fmode) *)
+-	@echo &quot;Installing Perl scripts: $(datadir)/vi/perl ...&quot;
+-	$(mkdir) $(datadir)/vi/perl &amp;&amp; $(chmod) $(dmode) $(datadir)/vi/perl
+-	[ -f VI.pm ] &amp;&amp; $(cp) VI.pm $(datadir)/vi/perl &amp;&amp; \
+-	    cd $(datadir)/vi/perl &amp;&amp; $(chmod) $(fmode) VI.pm)
+-	(cd $(srcdir)/perl_scripts &amp;&amp; $(cp) *.pl $(datadir)/vi/perl &amp;&amp; \
+-	    cd $(datadir)/vi/perl &amp;&amp; $(chmod) $(fmode) *.pl)
+-	@echo &quot;Installing Tcl scripts: $(datadir)/vi/tcl ...&quot;
+-	$(mkdir) $(datadir)/vi/tcl &amp;&amp; $(chmod) $(dmode) $(datadir)/vi/tcl
+-	(cd $(srcdir)/tcl_scripts &amp;&amp; $(cp) *.tcl $(datadir)/vi/tcl &amp;&amp; \
+-	    cd $(datadir)/vi/tcl &amp;&amp; $(chmod) $(fmode) *.tcl)
+-	@echo &quot;Installing recover script: $(datadir)/vi/recover ...&quot;
+-	($(cp) recover $(datadir)/vi/recover &amp;&amp; \
+-	    $(chmod) $(emode) $(datadir)/vi/recover)
++	    ($(mkdir) $(DESTDIR)$(exec_prefix) &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(exec_prefix))
++	[ -d $(DESTDIR)$(datadir) ] || \
++	    ($(mkdir) $(DESTDIR)$(datadir) &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(datadir))
++	$(rm) -rf $(DESTDIR)$(datadir)/vi
++	$(mkdir) $(DESTDIR)$(datadir)/vi &amp;&amp; $(chmod) $(dmode) $(DESTDIR)$(datadir)/vi
++	@echo &quot;Installing message catalogs: $(DESTDIR)$(datadir)/vi/catalog ...&quot;
++	$(mkdir) $(DESTDIR)$(datadir)/vi/catalog &amp;&amp; \
++	    $(chmod) $(dmode) $(DESTDIR)$(datadir)/vi/catalog
++	(cd $(srcdir)/catalog &amp;&amp; $(cp) $(cat) $(DESTDIR)$(datadir)/vi/catalog &amp;&amp; \
++	    cd $(DESTDIR)$(datadir)/vi/catalog &amp;&amp; $(chmod) $(fmode) *)
++	@echo &quot;Installing recover script: $(DESTDIR)$(datadir)/vi/recover ...&quot;
++	($(cp) recover $(DESTDIR)$(datadir)/vi/recover &amp;&amp; \
++	    $(chmod) $(emode) $(DESTDIR)$(datadir)/vi/recover)
+ 
+ uninstall:
+-	$(rm) -rf $(datadir)/vi
+-	cd $(bindir) &amp;&amp; $(rm) -f `echo ex | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; $(rm) -f `echo vi | sed '$(transform)'`
+-	cd $(bindir) &amp;&amp; $(rm) -f `echo view | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(rm) -f `echo ex.0 | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(rm) -f `echo vi.0 | sed '$(transform)'`
+-	cd $(mandir)/cat1 &amp;&amp; $(rm) -f `echo view.0 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(rm) -f `echo ex.1 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(rm) -f `echo vi.1 | sed '$(transform)'`
+-	cd $(mandir)/man1 &amp;&amp; $(rm) -f `echo view.1 | sed '$(transform)'`
++	$(rm) -rf $(DESTDIR)$(datadir)/vi
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(rm) -f `echo ex | sed '$(transform)'`
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(rm) -f `echo vi | sed '$(transform)'`
++	cd $(DESTDIR)$(bindir) &amp;&amp; $(rm) -f `echo view | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/cat1 &amp;&amp; $(rm) -f `echo ex.0 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/cat1 &amp;&amp; $(rm) -f `echo vi.0 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/cat1 &amp;&amp; $(rm) -f `echo view.0 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(rm) -f `echo ex.1 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(rm) -f `echo vi.1 | sed '$(transform)'`
++	cd $(DESTDIR)$(mandir)/man1 &amp;&amp; $(rm) -f `echo view.1 | sed '$(transform)'`
+ 
+ docs:
+ 	cd $(srcdir)/docs/USD.doc/vi.ref &amp;&amp; $(MAKE)

Added: trunk/rpms/openobex-utils/openobex-apps-1.0.0-gcc3.4.patch
===================================================================
--- trunk/rpms/openobex-utils/openobex-apps-1.0.0-gcc3.4.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/openobex-utils/openobex-apps-1.0.0-gcc3.4.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,156 @@
+diff -ruN openobex-apps-1.0.0/src/obex_put_common.c openobex-apps-1.0.0-gcc3.4/src/obex_put_common.c
+--- openobex-apps-1.0.0/src/obex_put_common.c	2002-12-01 18:34:41.000000000 +0100
++++ ./src/obex_put_common.c	2005-10-15 14:16:57.000000000 +0200
+@@ -82,7 +82,7 @@
+ 			break;
+ 		
+ 		default:
+-			printf(__FUNCTION__ &quot;() Skipped header %02x\n&quot;, hi);
++			printf(&quot;%s() Skipped header %02x\n&quot;, __func__, hi);
+ 		}
+ 	}
+ 	if(!body)	{
+@@ -123,7 +123,7 @@
+ 		OBEX_ObjectSetRsp(object, OBEX_RSP_SUCCESS, OBEX_RSP_SUCCESS);
+ 		break;
+ 	default:
+-		printf(__FUNCTION__ &quot;() Denied %02x request\n&quot;, cmd);
++		printf(&quot;%s() Denied %02x request\n&quot;, __func__, cmd);
+ 		OBEX_ObjectSetRsp(object, OBEX_RSP_NOT_IMPLEMENTED, OBEX_RSP_NOT_IMPLEMENTED);
+ 		break;
+ 	}
+diff -ruN openobex-apps-1.0.0/src/obex_test_cable.h openobex-apps-1.0.0-gcc3.4/src/obex_test_cable.h
+--- openobex-apps-1.0.0/src/obex_test_cable.h	2002-12-01 18:34:41.000000000 +0100
++++ ./src/obex_test_cable.h	2005-10-15 14:16:59.000000000 +0200
+@@ -38,7 +38,7 @@
+ #include &lt;openobex/obex.h&gt;
+ 
+ #ifdef CABLE_DEBUG
+-#define CDEBUG(args...) printf(__FUNCTION__ &quot;() &quot; args)
++#define CDEBUG(args...) printf(&quot;%s() %s&quot;, __func__, args)
+ #else
+ #define CDEBUG(args...)
+ #endif
+diff -ruN openobex-apps-1.0.0/src/obex_test_client.c openobex-apps-1.0.0-gcc3.4/src/obex_test_client.c
+--- openobex-apps-1.0.0/src/obex_test_client.c	2002-12-01 18:34:41.000000000 +0100
++++ ./src/obex_test_client.c	2005-10-15 14:16:57.000000000 +0200
+@@ -370,13 +370,13 @@
+ 
+ 	while(OBEX_ObjectGetNextHeader(handle, object, &amp;hi, &amp;hv, &amp;hlen))	{
+ 		if(hi == OBEX_HDR_BODY)	{
+-		printf(__FUNCTION__ &quot;() Found body\n&quot;);
++		printf(&quot;%s() Found body\n&quot;, __func__);
+ 			body = hv.bs;
+ 			body_len = hlen;
+ 			break;
+ 		}
+ 		else	{
+-			printf(__FUNCTION__ &quot;() Skipped header %02x\n&quot;, hi);
++			printf(&quot;%s() Skipped header %02x\n&quot;, __func__, hi);
+ 		}
+ 	}
+ 
+diff -ruN openobex-apps-1.0.0/src/obex_test_server.c openobex-apps-1.0.0-gcc3.4/src/obex_test_server.c
+--- openobex-apps-1.0.0/src/obex_test_server.c	2002-12-01 18:34:41.000000000 +0100
++++ ./src/obex_test_server.c	2005-10-15 14:16:57.000000000 +0200
+@@ -54,17 +54,17 @@
+ 	char *name = NULL;
+ 	char *namebuf = NULL;
+ 
+-	printf(__FUNCTION__ &quot;()\n&quot;);
++	printf(&quot;%s()\n&quot;, __func__);
+ 
+ 	while(OBEX_ObjectGetNextHeader(handle, object, &amp;hi, &amp;hv, &amp;hlen))	{
+ 		switch(hi)	{
+ 		case OBEX_HDR_BODY:
+-			printf(__FUNCTION__ &quot;() Found body\n&quot;);
++			printf(&quot;%s() Found body\n&quot;, __func__);
+ 			body = hv.bs;
+ 			body_len = hlen;
+ 			break;
+ 		case OBEX_HDR_NAME:
+-			printf(__FUNCTION__ &quot;() Found name\n&quot;);
++			printf(&quot;%s() Found name\n&quot;, __func__);
+ 			if( (namebuf = malloc(hlen / 2)))	{
+ 				OBEX_UnicodeToChar(namebuf, hv.bs, hlen);
+ 				name = namebuf;
+@@ -72,7 +72,7 @@
+ 			break;
+ 		
+ 		default:
+-			printf(__FUNCTION__ &quot;() Skipped header %02x\n&quot;, hi);
++			printf(&quot;%s() Skipped header %02x\n&quot;, __func__, hi);
+ 		}
+ 	}
+ 	if(!body)	{
+@@ -103,12 +103,12 @@
+ 	char *name = NULL;
+ 	char *namebuf = NULL;
+ 
+-	printf(__FUNCTION__ &quot;()\n&quot;);
++	printf(&quot;%s()\n&quot;, __func__);
+ 
+ 	while(OBEX_ObjectGetNextHeader(handle, object, &amp;hi, &amp;hv, &amp;hlen))	{
+ 		switch(hi)	{
+ 		case OBEX_HDR_NAME:
+-			printf(__FUNCTION__ &quot;() Found name\n&quot;);
++			printf(&quot;%s() Found name\n&quot;, __func__);
+ 			if( (namebuf = malloc(hlen / 2)))	{
+ 				OBEX_UnicodeToChar(namebuf, hv.bs, hlen);
+ 				name = namebuf;
+@@ -116,16 +116,16 @@
+ 			break;
+ 		
+ 		default:
+-			printf(__FUNCTION__ &quot;() Skipped header %02x\n&quot;, hi);
++			printf(&quot;%s() Skipped header %02x\n&quot;, __func__, hi);
+ 		}
+ 	}
+ 
+ 	if(!name)	{
+-		printf(__FUNCTION__ &quot;() Got a GET without a name-header!\n&quot;);
++		printf(&quot;%s() Got a GET without a name-header!\n&quot;, __func__);
+ 		OBEX_ObjectSetRsp(object, OBEX_RSP_NOT_FOUND, OBEX_RSP_NOT_FOUND);
+ 		return;
+ 	}
+-	printf(__FUNCTION__ &quot;() Got a request for %s\n&quot;, name);
++	printf(&quot;%s() Got a request for %s\n&quot;, __func__, name);
+ 
+ 	buf = easy_readfile(name, &amp;file_size);
+ 	if(buf == NULL) {
+@@ -154,7 +154,7 @@
+ 
+ 	const uint8_t *who = NULL;
+ 	int who_len = 0;
+-	printf(__FUNCTION__ &quot;()\n&quot;);
++	printf(&quot;%s()\n&quot;, __func__);
+ 
+ 	while(OBEX_ObjectGetNextHeader(handle, object, &amp;hi, &amp;hv, &amp;hlen))	{
+ 		if(hi == OBEX_HDR_WHO)	{
+@@ -162,7 +162,7 @@
+ 			who_len = hlen;
+ 		}
+ 		else	{
+-			printf(__FUNCTION__ &quot;() Skipped header %02x\n&quot;, hi);
++			printf(&quot;%s() Skipped header %02x\n&quot;, __func__, hi);
+ 		}
+ 	}
+ 	if (who_len == 6)	{
+@@ -199,7 +199,7 @@
+ 		OBEX_ObjectSetRsp(object, OBEX_RSP_CONTINUE, OBEX_RSP_SUCCESS);
+ 		break;
+ 	default:
+-		printf(__FUNCTION__ &quot;() Denied %02x request\n&quot;, cmd);
++		printf(&quot;%s() Denied %02x request\n&quot;, __func__, cmd);
+ 		OBEX_ObjectSetRsp(object, OBEX_RSP_NOT_IMPLEMENTED, OBEX_RSP_NOT_IMPLEMENTED);
+ 		break;
+ 	}
+@@ -224,7 +224,7 @@
+ 		break;
+ 
+ 	default:
+-		printf(__FUNCTION__ &quot;() Command (%02x) has now finished\n&quot;, obex_cmd);
++		printf(&quot;%s() Command (%02x) has now finished\n&quot;, __func__, obex_cmd);
+ 		break;
+ 	}
+ }

Added: trunk/rpms/pdns/pdns-2.9.21-avoid-version.patch
===================================================================
--- trunk/rpms/pdns/pdns-2.9.21-avoid-version.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/pdns/pdns-2.9.21-avoid-version.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,66 @@
+--- pdns-2.9.21/modules/ldapbackend/Makefile.in.avoid-version	2007-04-24 09:02:39.000000000 +0200
++++ pdns-2.9.21/modules/ldapbackend/Makefile.in	2007-04-24 09:04:35.000000000 +0200
+@@ -214,7 +214,7 @@
+ EXTRA_DIST = OBJECTFILES OBJECTLIBS
+ libldapbackend_la_SOURCES = ldapbackend.cc ldapbackend.hh \
+ 		powerldap.hh powerldap.cc utils.hh
+-
++libldapbackend_la_LDFLAGS = -avoid-version
+ libldapbackend_la_LIBADD = -lldap
+ all: all-am
+ 
+--- pdns-2.9.21/modules/pipebackend/Makefile.in.avoid-version	2007-04-24 09:04:56.000000000 +0200
++++ pdns-2.9.21/modules/pipebackend/Makefile.in	2007-04-24 09:05:12.000000000 +0200
+@@ -217,7 +217,7 @@
+ EXTRA_DIST = OBJECTFILES OBJECTLIBS backend.pl
+ lib_LTLIBRARIES = libpipebackend.la
+ libpipebackend_la_SOURCES = pipebackend.cc pipebackend.hh coprocess.cc coprocess.hh
+-libpipebackend_la_LDFLAGS = -module
++libpipebackend_la_LDFLAGS = -module -avoid-version
+ all: all-am
+ 
+ .SUFFIXES:
+--- pdns-2.9.21/modules/gpgsqlbackend/Makefile.in.avoid-version	2007-04-24 09:00:43.000000000 +0200
++++ pdns-2.9.21/modules/gpgsqlbackend/Makefile.in	2007-04-24 09:01:19.000000000 +0200
+@@ -217,7 +217,7 @@
+ 		spgsql.hh spgsql.cc
+ 
+ libgpgsqlbackend_la_LDFLAGS = @PGSQL_lib@ -Wl,-Bstatic -lpq \
+-	-Wl,-Bdynamic 
++	-Wl,-Bdynamic -avoid-version
+ 
+ libgpgsqlbackend_la_LIBADD = -lssl -lcrypt -lcrypto
+ all: all-am
+--- pdns-2.9.21/modules/gmysqlbackend/Makefile.in.avoid-version	2007-04-24 09:00:14.000000000 +0200
++++ pdns-2.9.21/modules/gmysqlbackend/Makefile.in	2007-04-24 09:00:34.000000000 +0200
+@@ -216,7 +216,7 @@
+ libgmysqlbackend_la_SOURCES = gmysqlbackend.cc gmysqlbackend.hh \
+ 		smysql.hh smysql.cc
+ 
+-libgmysqlbackend_la_LDFLAGS = -module -lmysqlclient 
++libgmysqlbackend_la_LDFLAGS = -module -lmysqlclient -avoid-version
+ all: all-am
+ 
+ .SUFFIXES:
+--- pdns-2.9.21/modules/gsqlite3backend/Makefile.in.avoid-version	2007-04-24 09:02:09.000000000 +0200
++++ pdns-2.9.21/modules/gsqlite3backend/Makefile.in	2007-04-24 09:02:24.000000000 +0200
+@@ -216,7 +216,7 @@
+ libgsqlite3backend_la_SOURCES = gsqlite3backend.cc gsqlite3backend.hh \
+                 ssqlite3.hh ssqlite3.cc
+ 
+-libgsqlite3backend_la_LDFLAGS = -module -lsqlite3
++libgsqlite3backend_la_LDFLAGS = -module -lsqlite3 -avoid-version
+ all: all-am
+ 
+ .SUFFIXES:
+--- pdns-2.9.21/modules/geobackend/Makefile.in.avoid-version	2007-04-24 08:58:20.000000000 +0200
++++ pdns-2.9.21/modules/geobackend/Makefile.in	2007-04-24 08:59:44.000000000 +0200
+@@ -213,7 +213,7 @@
+ EXTRA_DIST = OBJECTFILES OBJECTLIBS
+ lib_LTLIBRARIES = libgeobackend.la
+ libgeobackend_la_SOURCES = geobackend.cc geobackend.hh ippreftree.cc ippreftree.hh
+-libgeobackend_la_LDFLAGS = -module
++libgeobackend_la_LDFLAGS = -module -avoid-version
+ all: all-am
+ 
+ .SUFFIXES:

Added: trunk/rpms/pdns/pdns-2.9.21-fixinit.patch
===================================================================
--- trunk/rpms/pdns/pdns-2.9.21-fixinit.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/pdns/pdns-2.9.21-fixinit.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,26 @@
+--- pdns-2.9.20/pdns/pdns.in.fixinit	2006-12-17 18:14:14.000000000 +0100
++++ pdns-2.9.20/pdns/pdns.in	2006-12-17 18:15:42.000000000 +0100
+@@ -47,6 +47,7 @@
+ 		if test &quot;$NOTRUNNING&quot; = &quot;0&quot; 
+ 		then 
+ 			doPC quit
++			rm -f /var/lock/subsys/pdns
+ 			echo $ret
+ 		else
+ 			echo &quot;not running&quot;
+@@ -57,6 +58,7 @@
+ 	force-stop)
+ 		echo -n &quot;Stopping PowerDNS authoritative nameserver: &quot;
+ 		killall -v -9 pdns_server
++		rm -f /var/lock/subsys/pdns
+ 		echo &quot;killed&quot;
+ 	;;
+ 
+@@ -69,6 +71,7 @@
+ 			$pdns_server --daemon --guardian=yes
+ 			if test &quot;$?&quot; = &quot;0&quot;
+ 			then
++				touch /var/lock/subsys/pdns
+ 				echo &quot;started&quot;	
+ 			fi
+ 		fi 

Added: trunk/rpms/perl-CGI-Persistent/perl-CGI-Persistent-1.00-relpath.patch
===================================================================
--- trunk/rpms/perl-CGI-Persistent/perl-CGI-Persistent-1.00-relpath.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/perl-CGI-Persistent/perl-CGI-Persistent-1.00-relpath.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,63 @@
+Index: formmagick/lib/CGI/Persistent.pm
+diff -u formmagick/lib/CGI/Persistent.pm:1.1.1.1 formmagick/lib/CGI/Persistent.pm:1.2
+--- formmagick/lib/CGI/Persistent.pm:1.1.1.1	Mon Jul 22 13:42:19 2002
++++ formmagick/lib/CGI/Persistent.pm	Fri Aug 16 14:34:05 2002
+@@ -14,22 +14,25 @@
+ use Persistence::Object::Simple; 
+ use vars qw(@ISA $VERSION);
+ use Data::Dumper;
<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">+- at ISA</A> = qw( CGI ); ( $VERSION ) = '$Revision: 1.00 $' =~ /(\d+\.\d+)/; 
++use File::Basename;
<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">++ at ISA</A> = qw( CGI ); ( $VERSION ) = '$Revision: 1.00 $' =~ /(\d+\.\d+)/; 
+ 
+ sub new { 
+ 
+     my ( $class, $dope, $id ) = @_ ; 
+     $dope = &quot;.&quot; unless $dope; 
+     my $cgi = new CGI; # print $cgi-&gt;header ();
+-    my $fn  = $cgi-&gt;param( '.id' ) || $id; 
++    $cgi-&gt;{sessiondir} = dirname($id) if $id;
++    my $fn  = basename($cgi-&gt;param( '.id' ) || $id); 
+ 
+     unless ( $fn ) { 
+         my $po = new Persistence::Object::Simple ( __Dope =&gt; $dope ); 
+-        $cgi-&gt;append( -name =&gt; '.id', -values =&gt; $po-&gt;{ __Fn } );
+-        $fn = $po-&gt;{ __Fn }; undef $po; 
++        $cgi-&gt;append( -name =&gt; '.id', -values =&gt; basename $po-&gt;{ __Fn } );
++        $fn = basename $po-&gt;{ __Fn }; undef $po; 
+     }
+ 
+-    my $po = new Persistence::Object::Simple __Fn =&gt; $fn; 
++    my $po = new Persistence::Object::Simple __Fn =&gt;
++	join &quot;/&quot;, ($cgi-&gt;{sessiondir},$fn); 
+     $po-&gt;{ __DOPE } = undef; 
+     my @names = $cgi-&gt;param (); 
+ 
+@@ -51,7 +54,7 @@
+ sub delete { 
+   
+     my ( $self, $param ) = @_; 
+-    my $fn = $self-&gt;param( '.id' ); 
++    my $fn = join &quot;/&quot;, ($self-&gt;{sessiondir},$self-&gt;param( '.id' )); 
+     my $po = new Persistence::Object::Simple __Fn =&gt; $fn; 
+     delete $po-&gt;{ $param }; $po-&gt;commit ();  
+     $self-&gt;SUPER::delete ( $param ); # delete, is like, overloaded. 
+@@ -61,7 +64,7 @@
+ sub delete_all { 
+ 
+     my ( $self ) = shift; 
+-    $fn = $self-&gt;param( '.id' ); 
++    $fn = join &quot;/&quot;, ($self-&gt;{sessiondir},$self-&gt;param( '.id' )); 
+     my $po = new Persistence::Object::Simple __Fn =&gt; $fn; 
+     $po-&gt;expire; 
+     $self-&gt;SUPER::delete_all ();
+@@ -99,7 +102,7 @@
+ 
+ }
+ 
+-&quot;True Value&quot;;
++1;
+ 
+ =head1 NAME
+ 
+

Added: trunk/rpms/perl-Courier-Filter/Courier-Filter-0.17-message.patch
===================================================================
--- trunk/rpms/perl-Courier-Filter/Courier-Filter-0.17-message.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/perl-Courier-Filter/Courier-Filter-0.17-message.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- lib/Courier/Message.pm.orig	2008-01-26 04:11:08.302317808 +0100
++++ lib/Courier/Message.pm	2008-01-26 04:11:29.775053456 +0100
+@@ -627,7 +627,7 @@
+             
+             $decoded_word = Encode::decode($char_enc, $chunk);
+         }
+-        except {
++        otherwise {
+             # The chunk contains invalid characters, leave the encoded word as is:
+             $decoded_word = $encoded_word;
+         };

Added: trunk/rpms/psi/psi-0.9.2-strip.patch
===================================================================
--- trunk/rpms/psi/psi-0.9.2-strip.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/psi/psi-0.9.2-strip.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,10 @@
+--- ./src/src.pro.strip	2004-06-10 11:40:59.254407224 +0200
++++ ./src/src.pro	2004-06-10 11:41:10.358719112 +0200
+@@ -5,6 +5,7 @@
+ # Configuration
+ TEMPLATE = app
+ CONFIG  += qt thread x11
++QMAKE_STRIP = true
+ 
+ #CONFIG += debug
+ #CONFIG += use_crash

Added: trunk/rpms/rrdtool/rrdtool-1.0.50-configure.patch
===================================================================
--- trunk/rpms/rrdtool/rrdtool-1.0.50-configure.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/rrdtool/rrdtool-1.0.50-configure.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- configure.orig	2005-11-27 18:00:00.117013352 +0100
++++ configure	2005-11-27 18:00:33.385955704 +0100
+@@ -3592,7 +3592,7 @@
+ # This must be Linux ELF.
+ linux*)
+   case $host_cpu in
+-  alpha* | hppa* | i*86 | ia64* | m68* | mips | mipsel | powerpc* | sparc* | s390* | sh*)
++  alpha* | hppa* | i*86 | x86_64 | ia64* | m68* | mips | mipsel | powerpc* | sparc* | s390* | sh*)
+     lt_cv_deplibs_check_method=pass_all ;;
+   *)
+     # glibc up to 2.1.1 does not perform some relocations on ARM

Added: trunk/rpms/streamdvd/streamdvd-0.4-gcc41.patch
===================================================================
--- trunk/rpms/streamdvd/streamdvd-0.4-gcc41.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/streamdvd/streamdvd-0.4-gcc41.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- StreamDVD-0.4/mplex/zalphastrm.hpp	2004-03-08 23:10:53.000000000 +0100
++++ StreamDVD-0.4.new/mplex/zalphastrm.hpp	2006-01-23 13:26:31.000000000 +0100
+@@ -45,7 +45,7 @@
+     virtual bool AUBufferNeedsRefill();
+ 	virtual void NextDTSPTS( clockticks &amp;DTS, clockticks &amp;PTS);
+ 	virtual void ScanFirstSeqHeader();
+-    bool ZAlphaStream::RunOutComplete();
++    bool RunOutComplete();
+ 
+ private:
+     float z_min; 

Added: trunk/rpms/streamdvd/streamdvd-0.4-gui.patch
===================================================================
--- trunk/rpms/streamdvd/streamdvd-0.4-gui.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/streamdvd/streamdvd-0.4-gui.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,10 @@
+--- Gui/StreamDVD/Streams.pm.orig	2005-06-14 17:16:06.000000000 +0200
++++ Gui/StreamDVD/Streams.pm	2005-06-14 17:16:12.000000000 +0200
+@@ -1,6 +1,6 @@
+ # Part of the StreamDVD project
+ 
+-package StreamDVD::Audio;
++package StreamDVD::Streams;
+ 
+ use strict;
+ use vars qw($VERSION @ISA @EXPORT);

Added: trunk/rpms/streamdvd/streamdvd-0.4-lsdvd.patch
===================================================================
--- trunk/rpms/streamdvd/streamdvd-0.4-lsdvd.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/streamdvd/streamdvd-0.4-lsdvd.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,62 @@
+--- contrib/lsdvd/lsdvd.c.orig	2005-06-14 17:25:19.000000000 +0200
++++ contrib/lsdvd/lsdvd.c	2005-06-14 17:31:58.000000000 +0200
+@@ -32,6 +32,14 @@
+  printf(&quot;%s =&gt; &quot;, name);                \
+  printf(x); printf(&quot;,\n&quot;);              \
+ }
++#define HASHI(name) {                                            \
++ INDENT;                                                        \
++ (name ?							\
++   printf((_lvl ? &quot;%d =&gt; {\n&quot; : &quot;our %%%d = (\n&quot;), name) :	\
++   printf(&quot;{\n&quot;));						\
++ _lvl++; _lvl_type[_lvl] = 0;                                   \
++}
++
+ #define HASH(name) {                                            \
+  INDENT;                                                        \
+  (name ?							\
+@@ -287,7 +295,7 @@
+ 		pgc = vts_pgcit-&gt;pgci_srp[ifo[title_set_nr]-&gt;vts_ptt_srpt-&gt;title[vts_ttn - 1].ptt[0].pgcn - 1].pgc;
+ 
+ 		if (opt_p) {
+- 			HASH(0);
++ 			HASHI(0);
+ 			DEF(&quot;ix&quot;, &quot;%d&quot;, j+1);
+ 			DEF(&quot;length&quot;, &quot;%.3f&quot;, dvdtime2msec(&amp;pgc-&gt;playback_time)/1000.0);
+ 			DEF(&quot;vts_id&quot;, &quot;'%.12s'&quot;, vtsi_mat-&gt;vts_identifier);
+@@ -343,7 +351,7 @@
+ 				audio_attr = &amp;vtsi_mat-&gt;vts_audio_attr[i];
+ 				sprintf(lang_code, &quot;%c%c&quot;, audio_attr-&gt;lang_code&gt;&gt;8, audio_attr-&gt;lang_code &amp; 0xff);
+ 				if (!lang_code[0]) { lang_code[0] = 'x'; lang_code[1] = 'x'; }
+-				HASH(0);
++				HASHI(0);
+ 				DEF(&quot;ix&quot;, &quot;%d&quot;, i+1);
+ 				DEF(&quot;langcode&quot;, &quot;'%s'&quot;, lang_code);
+ 				DEF(&quot;language&quot;, &quot;'%s'&quot;, lang_name(lang_code));
+@@ -390,7 +398,7 @@
+ 					ms = ms + dvdtime2msec(&amp;pgc-&gt;cell_playback[cell].playback_time);
+ 					cell++;
+ 				}
+-				HASH(0);
++				HASHI(0);
+ 				DEF(&quot;ix&quot;, &quot;%d&quot;, i+1);
+ 				DEF(&quot;length&quot;, &quot;%.3f&quot;, ms/1000.0);
+ 				DEF(&quot;startcell&quot;, &quot;%d&quot;, pgc-&gt;program_map[i]);
+@@ -427,7 +435,7 @@
+ 			ARRAY(&quot;cell&quot;);
+ 			for (i=0; i&lt;pgc-&gt;nr_of_cells; i++)
+ 			{
+-				HASH(0);
++				HASHI(0);
+ 				DEF(&quot;ix&quot;, &quot;%d&quot;, i+1);
+ 				DEF(&quot;length&quot;, &quot;%.3f&quot;, dvdtime2msec(&amp;pgc-&gt;cell_playback[i].playback_time)/1000.0);
+ 				RETURN;
+@@ -452,7 +460,7 @@
+ 				sprintf(lang_code, &quot;%c%c&quot;, subp_attr-&gt;lang_code&gt;&gt;8, subp_attr-&gt;lang_code &amp; 0xff);
+ 				if (!lang_code[0]) { lang_code[0] = 'x'; lang_code[1] = 'x'; }
+ 	
+-				HASH(0);
++				HASHI(0);
+ 				DEF(&quot;ix&quot;, &quot;%d&quot;, i+1);
+ 				DEF(&quot;langcode&quot;, &quot;'%s'&quot;, lang_code);
+ 				DEF(&quot;language&quot;, &quot;'%s'&quot;, lang_name(lang_code));

Added: trunk/rpms/streamdvd/streamdvd-0.4-makefile.patch
===================================================================
--- trunk/rpms/streamdvd/streamdvd-0.4-makefile.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/streamdvd/streamdvd-0.4-makefile.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,27 @@
+--- Makefile.orig	2005-06-14 08:43:53.000000000 +0200
++++ Makefile	2005-06-14 08:47:18.000000000 +0200
+@@ -1,16 +1,17 @@
+-INSTALLDIR = /usr/local/bin/
++INSTALLDIR=/usr/local/bin
++CFLAGS=
+ 
+ all:
+-	g++ -g -Wall -ldvdread -lm -o streamdvd -I. -Implex streamdvd.c requant.c mplex/*.c mplex/*.cpp
++	g++ -g -Wall $(CFLAGS) -ldvdread -lm -o streamdvd -I. -Implex streamdvd.c requant.c mplex/*.c mplex/*.cpp
+ 
+ addon:
+-	gcc -g -Wall -ldvdread -o streamanalyze contrib/StreamAnalyze/streamanalyze.c
+-	gcc -g -Wall -ldvdread -DVERSION=\&quot;0.9\&quot; -o lsdvd contrib/lsdvd/lsdvd.c
++	gcc -g -Wall $(CFLAGS)  -ldvdread -o streamanalyze contrib/StreamAnalyze/streamanalyze.c
++	gcc -g -Wall $(CFLAGS) -ldvdread -DVERSION=\&quot;0.9\&quot; -o lsdvd contrib/lsdvd/lsdvd.c
+ 
+ gui:
+-	g++ -g -Wall -ldvdread -lm -o streamdvd -I. -Implex streamdvd.c requant.c mplex/*.c mplex/*.cpp
+-	gcc -g -Wall -ldvdread -o streamanalyze contrib/StreamAnalyze/streamanalyze.c
+-	gcc -g -Wall -ldvdread -DVERSION=\&quot;0.9\&quot; -o lsdvd contrib/lsdvd/lsdvd.c
++	g++ -g -Wall $(CFLAGS) -ldvdread -lm -o streamdvd -I. -Implex streamdvd.c requant.c mplex/*.c mplex/*.cpp
++	gcc -g -Wall $(CFLAGS) -ldvdread -o streamanalyze contrib/StreamAnalyze/streamanalyze.c
++	gcc -g -Wall $(CFLAGS) -ldvdread -DVERSION=\&quot;0.9\&quot; -o lsdvd contrib/lsdvd/lsdvd.c
+ 
+ clean: 
+ 	rm -f streamdvd streamanalyze lsdvd

Added: trunk/rpms/streamdvd/streamdvd-0.4-streamdvd.patch
===================================================================
--- trunk/rpms/streamdvd/streamdvd-0.4-streamdvd.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/streamdvd/streamdvd-0.4-streamdvd.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,35 @@
+--- streamdvd.c.orig	2005-06-14 17:33:13.000000000 +0200
++++ streamdvd.c	2005-06-14 17:34:12.000000000 +0200
+@@ -173,7 +173,7 @@
+    }
+ 
+    pts_diff = ( (double)v_pts/90000. ) - ( (double)a_pts/90000. );
+-   gl-&gt;av_delay = pts_diff * 1000.;
++   gl-&gt;av_delay = (int)(pts_diff * 1000.);
+ 
+    fprintf(stderr, &quot;AV Delay: %d ms\n&quot;, gl-&gt;av_delay);
+ }
+--- requant.c.orig	2005-06-14 17:36:50.000000000 +0200
++++ requant.c	2005-06-14 17:41:47.000000000 +0200
+@@ -1308,10 +1308,10 @@
+ #define NEXT_MACROBLOCK											\
+ do {															\
+     h_offset += 16;												\
+-    if (h_offset == horizontal_size_value) 						\
++    if (h_offset == (int)horizontal_size_value) 						\
+ 	{															\
+ 		v_offset += 16;											\
+-		if (v_offset &gt; (vertical_size_value - 16)) return;		\
++		if (v_offset &gt; (int)(vertical_size_value - 16)) return;		\
+ 		h_offset = 0;											\
+     }															\
+ } while (0)
+@@ -1431,7 +1431,7 @@
+ 		v_offset += 16;
+     }
+ 
+-    if (v_offset &gt; (vertical_size_value - 16)) return 1;
++    if (v_offset &gt; (int)(vertical_size_value - 16)) return 1;
+ 
+     return 0;
+ 

Added: trunk/rpms/subversion/subversion-1.4.4-macropen.patch
===================================================================
--- trunk/rpms/subversion/subversion-1.4.4-macropen.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/subversion/subversion-1.4.4-macropen.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,184 @@
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/uuids-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/uuids-table.c
+@@ -47,7 +47,7 @@
+   BDB_ERR(db_create(&amp;uuids, env, 0));
+   BDB_ERR(uuids-&gt;set_re_len(uuids, APR_UUID_FORMATTED_LENGTH));
+ 
+-  error = uuids-&gt;open(SVN_BDB_OPEN_PARAMS(uuids, NULL),
++  error = (uuids-&gt;open)(SVN_BDB_OPEN_PARAMS(uuids, NULL),
+                       &quot;uuids&quot;, 0, DB_RECNO,
+                       open_flags, 0666);
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/strings-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/strings-table.c
+@@ -44,10 +44,10 @@
+   BDB_ERR(db_create(&amp;strings, env, 0));
+ 
+   /* Enable duplicate keys. This allows the data to be spread out across
+-     multiple records. Note: this must occur before -&gt;open().  */
++     multiple records. Note: this must occur before (-&gt;open)().  */
+   BDB_ERR(strings-&gt;set_flags(strings, DB_DUP));
+ 
+-  BDB_ERR(strings-&gt;open(SVN_BDB_OPEN_PARAMS(strings, NULL),
++  BDB_ERR((strings-&gt;open)(SVN_BDB_OPEN_PARAMS(strings, NULL),
+                         &quot;strings&quot;, 0, DB_BTREE,
+                         open_flags, 0666));
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/changes-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/changes-table.c
+@@ -51,10 +51,10 @@
+   BDB_ERR(db_create(&amp;changes, env, 0));
+ 
+   /* Enable duplicate keys. This allows us to store the changes
+-     one-per-row.  Note: this must occur before -&gt;open().  */
++     one-per-row.  Note: this must occur before (-&gt;open)().  */
+   BDB_ERR(changes-&gt;set_flags(changes, DB_DUP));
+ 
+-  BDB_ERR(changes-&gt;open(SVN_BDB_OPEN_PARAMS(changes, NULL),
++  BDB_ERR((changes-&gt;open)(SVN_BDB_OPEN_PARAMS(changes, NULL),
+                         &quot;changes&quot;, 0, DB_BTREE,
+                         open_flags, 0666));
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/lock-tokens-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/lock-tokens-table.c
+@@ -43,7 +43,7 @@
+ 
+   BDB_ERR(svn_fs_bdb__check_version());
+   BDB_ERR(db_create(&amp;lock_tokens, env, 0));
+-  error = lock_tokens-&gt;open(SVN_BDB_OPEN_PARAMS(lock_tokens, NULL),
++  error = (lock_tokens-&gt;open)(SVN_BDB_OPEN_PARAMS(lock_tokens, NULL),
+                             &quot;lock-tokens&quot;, 0, DB_BTREE,
+                             open_flags, 0666);
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/env.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/env.c
+@@ -626,7 +626,7 @@
+   flags |= DB_THREAD;
+ #endif
+   SVN_ERR(convert_bdb_error
+-          (bdb, bdb-&gt;env-&gt;open(bdb-&gt;env, bdb-&gt;path_bdb, flags, mode)));
++          (bdb, (bdb-&gt;env-&gt;open)(bdb-&gt;env, bdb-&gt;path_bdb, flags, mode)));
+ 
+ #if SVN_BDB_AUTO_COMMIT
+   /* Assert the BDB_AUTO_COMMIT flag on the opened environment. This
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/copies-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/copies-table.c
+@@ -43,7 +43,7 @@
+ 
+   BDB_ERR(svn_fs_bdb__check_version());
+   BDB_ERR(db_create(&amp;copies, env, 0));
+-  BDB_ERR(copies-&gt;open(SVN_BDB_OPEN_PARAMS(copies, NULL),
++  BDB_ERR((copies-&gt;open)(SVN_BDB_OPEN_PARAMS(copies, NULL),
+                        &quot;copies&quot;, 0, DB_BTREE,
+                        open_flags, 0666));
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/nodes-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/nodes-table.c
+@@ -50,7 +50,7 @@
+ 
+   BDB_ERR(svn_fs_bdb__check_version());
+   BDB_ERR(db_create(&amp;nodes, env, 0));
+-  BDB_ERR(nodes-&gt;open(SVN_BDB_OPEN_PARAMS(nodes, NULL),
++  BDB_ERR((nodes-&gt;open)(SVN_BDB_OPEN_PARAMS(nodes, NULL),
+                       &quot;nodes&quot;, 0, DB_BTREE,
+                       open_flags, 0666));
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/locks-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/locks-table.c
+@@ -44,7 +44,7 @@
+ 
+   BDB_ERR(svn_fs_bdb__check_version());
+   BDB_ERR(db_create(&amp;locks, env, 0));
+-  error = locks-&gt;open(SVN_BDB_OPEN_PARAMS(locks, NULL),
++  error = (locks-&gt;open)(SVN_BDB_OPEN_PARAMS(locks, NULL),
+                       &quot;locks&quot;, 0, DB_BTREE,
+                       open_flags, 0666);
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/txn-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/txn-table.c
+@@ -51,7 +51,7 @@
+ 
+   BDB_ERR(svn_fs_bdb__check_version());
+   BDB_ERR(db_create(&amp;txns, env, 0));
+-  BDB_ERR(txns-&gt;open(SVN_BDB_OPEN_PARAMS(txns, NULL),
++  BDB_ERR((txns-&gt;open)(SVN_BDB_OPEN_PARAMS(txns, NULL),
+                      &quot;transactions&quot;, 0, DB_BTREE,
+                      open_flags, 0666));
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/reps-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/reps-table.c
+@@ -44,7 +44,7 @@
+ 
+   BDB_ERR(svn_fs_bdb__check_version());
+   BDB_ERR(db_create(&amp;reps, env, 0));
+-  BDB_ERR(reps-&gt;open(SVN_BDB_OPEN_PARAMS(reps, NULL),
++  BDB_ERR((reps-&gt;open)(SVN_BDB_OPEN_PARAMS(reps, NULL),
+                      &quot;representations&quot;, 0, DB_BTREE,
+                      open_flags, 0666));
+ 
+--- subversion-1.4.4/subversion/libsvn_fs_base/bdb/rev-table.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs_base/bdb/rev-table.c
+@@ -40,7 +40,7 @@
+ 
+   BDB_ERR(svn_fs_bdb__check_version());
+   BDB_ERR(db_create(&amp;revisions, env, 0));
+-  BDB_ERR(revisions-&gt;open(SVN_BDB_OPEN_PARAMS(revisions, NULL),
++  BDB_ERR((revisions-&gt;open)(SVN_BDB_OPEN_PARAMS(revisions, NULL),
+                           &quot;revisions&quot;, 0, DB_RECNO,
+                           open_flags, 0666));
+ 
+--- subversion-1.4.4/subversion/libsvn_ra/ra_loader.c.macropen
++++ subversion-1.4.4/subversion/libsvn_ra/ra_loader.c
+@@ -291,8 +291,8 @@
+   session-&gt;pool = pool;
+ 
+   /* Ask the library to open the session. */
+-  SVN_ERR(vtable-&gt;open(session, repos_URL, callbacks, callback_baton,
+-                       config, pool));
++  SVN_ERR((vtable-&gt;open)(session, repos_URL, callbacks, callback_baton,
++                         config, pool));
+ 
+   *session_p = session;
+   return SVN_NO_ERROR;
+--- subversion-1.4.4/subversion/tests/libsvn_ra_local/ra-local-test.c.macropen
++++ subversion-1.4.4/subversion/tests/libsvn_ra_local/ra-local-test.c
+@@ -95,7 +95,7 @@
+   SVN_ERR(current_directory_url(&amp;url, repos_name, pool));
+ 
+   /* Open an RA session into this repository. */
+-  SVN_ERR((*plugin)-&gt;open(session, url, cbtable, NULL, NULL, pool));
++  SVN_ERR(((*plugin)-&gt;open)(session, url, cbtable, NULL, NULL, pool));
+ 
+   return SVN_NO_ERROR;
+ }
+--- subversion-1.4.4/subversion/libsvn_fs/fs-loader.c.macropen
++++ subversion-1.4.4/subversion/libsvn_fs/fs-loader.c
+@@ -364,7 +364,7 @@
+ 
+   SVN_ERR(fs_library_vtable(&amp;vtable, path, pool));
+   *fs_p = svn_fs_new(fs_config, pool);
+-  SVN_ERR(vtable-&gt;open(*fs_p, path, pool));
++  SVN_ERR((vtable-&gt;open)(*fs_p, path, pool));
+   return serialized_init(*fs_p, pool);
+ }
+ 
+@@ -423,7 +423,7 @@
+   fs_library_vtable_t *vtable;
+ 
+   SVN_ERR(fs_library_vtable(&amp;vtable, path, fs-&gt;pool));
+-  SVN_ERR(vtable-&gt;open(fs, path, fs-&gt;pool));
++  SVN_ERR((vtable-&gt;open)(fs, path, fs-&gt;pool));
+   return serialized_init(fs, fs-&gt;pool);
+ }
+ 
+--- subversion-1.4.4/build/generator/swig/header_wrappers.py.macropen
++++ subversion-1.4.4/build/generator/swig/header_wrappers.py
+@@ -103,7 +103,7 @@
+         self.ofile.write(
+           &quot;static svn_error_t *%s_invoke_%s(\n&quot; % (struct[:-2], name) +
+           &quot;  %s *_obj, %s) {\n&quot; % (struct, params) +
+-          &quot;  return _obj-&gt;%s(%s);\n&quot; % (name, param_names) +
++          &quot;  return (_obj-&gt;%s)(%s);\n&quot; % (name, param_names) +
+           &quot;}\n\n&quot;)
+ 
+     self.ofile.write(&quot;%}\n&quot;)

Added: trunk/rpms/subversion/subversion-1.4.4-swig1333.patch
===================================================================
--- trunk/rpms/subversion/subversion-1.4.4-swig1333.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/subversion/subversion-1.4.4-swig1333.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,21 @@
+
+<A HREF="http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=453166">http://bugs.debian.org/cgi-bin/bugreport.cgi?bug=453166</A>
+
+# For some reason, rubyhead.swg is included without being needed (at least 
+# for the current swig 1.3.33 version). This leads to a redefinition of 
+# _mSWIG. The documentation of SWIG only talks about including just 
+# the external_runtime file, not any additional includes. Also, the other
+# bindings do not include anything from SWIG apart from the external 
+# runtime. So I think this patch should suffice.  
+#
+#  -- Torsten Landschoff
+
+Index: subversion/bindings/swig/ruby/libsvn_swig_ruby/swigutil_rb.c
+===================================================================
+--- subversion-1.4.4/subversion/bindings/swig/ruby/libsvn_swig_ruby/swigutil_rb.c.swig133
++++ subversion-1.4.4/subversion/bindings/swig/ruby/libsvn_swig_ruby/swigutil_rb.c
+@@ -1,4 +1,3 @@
+-#include &quot;rubyhead.swg&quot;
+ #include &quot;swig_ruby_external_runtime.swg&quot;
+ #include &quot;swigutil_rb.h&quot;
+ #include &lt;st.h&gt;

Added: trunk/rpms/tn5250/tn5250-0.16.5-bhc.patch
===================================================================
--- trunk/rpms/tn5250/tn5250-0.16.5-bhc.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/tn5250/tn5250-0.16.5-bhc.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,23 @@
+--- tn5250-0.16.5/linux/Makefile.in.bhc	2003-03-19 16:33:23.000000000 +0100
++++ tn5250-0.16.5/linux/Makefile.in	2003-03-19 16:34:04.000000000 +0100
+@@ -252,20 +252,12 @@
+ 	@( good=no ; \
+ 	  if [ &quot;$$(uname -s)&quot; = &quot;Linux&quot; ]; then \
+             if which tic &gt;/dev/null 2&gt;&amp;1 ; then \
+-	      if [ &quot;`whoami`&quot; = &quot;root&quot; ]; then \
+ 		rm -f /usr/share/terminfo/x/xterm-5250 ; \
+ 		rm -f /usr/share/terminfo/5/5250 ; \
+ 		rm -f /usr/lib/terminfo/x/xterm-5250 ; \
+ 		rm -f /usr/lib/terminfo/5/5250 ; \
+ 		good=yes ; \
+ 		tic $(srcdir)/5250.terminfo || good=no ; \
+-	      else \
+-		mkdir -p ~/.terminfo || exit $$? ; \
+-		rm -f ~/.terminfo/x/xterm-5250 ; \
+-		rm -f ~/.terminfo/5/5250 ; \
+-		good=yes ; \
+-		tic $(srcdir)/5250.terminfo || good=no ; \
+-	      fi ; \
+ 	    fi ; \
+ 	  else \
+ 	    good=yes ; \

Added: trunk/rpms/tn5250/tn5250-0.17.3-multilib.patch
===================================================================
--- trunk/rpms/tn5250/tn5250-0.17.3-multilib.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/tn5250/tn5250-0.17.3-multilib.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,376 @@
+--- tn5250-0.17.3/configure.multilib	2006-05-23 10:12:22.000000000 +0200
++++ tn5250-0.17.3/configure	2006-05-23 10:12:44.000000000 +0200
+@@ -23642,363 +23642,6 @@
+ echo &quot;$as_me:$LINENO: result: $ac_cv_type_long&quot; &gt;&amp;5
+ echo &quot;${ECHO_T}$ac_cv_type_long&quot; &gt;&amp;6
+ 
+-echo &quot;$as_me:$LINENO: checking size of long&quot; &gt;&amp;5
+-echo $ECHO_N &quot;checking size of long... $ECHO_C&quot; &gt;&amp;6
+-if test &quot;${ac_cv_sizeof_long+set}&quot; = set; then
+-  echo $ECHO_N &quot;(cached) $ECHO_C&quot; &gt;&amp;6
+-else
+-  if test &quot;$ac_cv_type_long&quot; = yes; then
+-  # The cast to unsigned long works around a bug in the HP C Compiler
+-  # version HP92453-01 B.11.11.23709.GP, which incorrectly rejects
+-  # declarations like `int a3[[(sizeof (unsigned char)) &gt;= 0]];'.
+-  # This bug is HP SR number 8606223364.
+-  if test &quot;$cross_compiling&quot; = yes; then
+-  # Depending upon the size, compute the lo and hi bounds.
+-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h &gt;&gt;conftest.$ac_ext
+-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-int
+-main ()
+-{
+-static int test_array [1 - 2 * !(((long) (sizeof (long))) &gt;= 0)];
+-test_array [0] = 0
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_compile) 2&gt;conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 &gt;conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err &gt;&amp;5
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); } &amp;&amp;
+-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
+-			 || test ! -s conftest.err'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; } &amp;&amp;
+-	 { ac_try='test -s conftest.$ac_objext'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; }; then
+-  ac_lo=0 ac_mid=0
+-  while :; do
+-    cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h &gt;&gt;conftest.$ac_ext
+-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-int
+-main ()
+-{
+-static int test_array [1 - 2 * !(((long) (sizeof (long))) &lt;= $ac_mid)];
+-test_array [0] = 0
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_compile) 2&gt;conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 &gt;conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err &gt;&amp;5
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); } &amp;&amp;
+-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
+-			 || test ! -s conftest.err'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; } &amp;&amp;
+-	 { ac_try='test -s conftest.$ac_objext'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; }; then
+-  ac_hi=$ac_mid; break
+-else
+-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+-
+-ac_lo=`expr $ac_mid + 1`
+-		    if test $ac_lo -le $ac_mid; then
+-		      ac_lo= ac_hi=
+-		      break
+-		    fi
+-		    ac_mid=`expr 2 '*' $ac_mid + 1`
+-fi
+-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+-  done
+-else
+-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+-
+-cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h &gt;&gt;conftest.$ac_ext
+-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-int
+-main ()
+-{
+-static int test_array [1 - 2 * !(((long) (sizeof (long))) &lt; 0)];
+-test_array [0] = 0
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_compile) 2&gt;conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 &gt;conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err &gt;&amp;5
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); } &amp;&amp;
+-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
+-			 || test ! -s conftest.err'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; } &amp;&amp;
+-	 { ac_try='test -s conftest.$ac_objext'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; }; then
+-  ac_hi=-1 ac_mid=-1
+-  while :; do
+-    cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h &gt;&gt;conftest.$ac_ext
+-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-int
+-main ()
+-{
+-static int test_array [1 - 2 * !(((long) (sizeof (long))) &gt;= $ac_mid)];
+-test_array [0] = 0
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_compile) 2&gt;conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 &gt;conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err &gt;&amp;5
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); } &amp;&amp;
+-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
+-			 || test ! -s conftest.err'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; } &amp;&amp;
+-	 { ac_try='test -s conftest.$ac_objext'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; }; then
+-  ac_lo=$ac_mid; break
+-else
+-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+-
+-ac_hi=`expr '(' $ac_mid ')' - 1`
+-		       if test $ac_mid -le $ac_hi; then
+-			 ac_lo= ac_hi=
+-			 break
+-		       fi
+-		       ac_mid=`expr 2 '*' $ac_mid`
+-fi
+-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+-  done
+-else
+-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+-
+-ac_lo= ac_hi=
+-fi
+-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+-fi
+-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+-# Binary search between lo and hi bounds.
+-while test &quot;x$ac_lo&quot; != &quot;x$ac_hi&quot;; do
+-  ac_mid=`expr '(' $ac_hi - $ac_lo ')' / 2 + $ac_lo`
+-  cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h &gt;&gt;conftest.$ac_ext
+-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-int
+-main ()
+-{
+-static int test_array [1 - 2 * !(((long) (sizeof (long))) &lt;= $ac_mid)];
+-test_array [0] = 0
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest.$ac_objext
+-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_compile\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_compile) 2&gt;conftest.er1
+-  ac_status=$?
+-  grep -v '^ *+' conftest.er1 &gt;conftest.err
+-  rm -f conftest.er1
+-  cat conftest.err &gt;&amp;5
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); } &amp;&amp;
+-	 { ac_try='test -z &quot;$ac_c_werror_flag&quot;
+-			 || test ! -s conftest.err'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; } &amp;&amp;
+-	 { ac_try='test -s conftest.$ac_objext'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; }; then
+-  ac_hi=$ac_mid
+-else
+-  echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+-
+-ac_lo=`expr '(' $ac_mid ')' + 1`
+-fi
+-rm -f conftest.err conftest.$ac_objext conftest.$ac_ext
+-done
+-case $ac_lo in
+-?*) ac_cv_sizeof_long=$ac_lo;;
+-'') { { echo &quot;$as_me:$LINENO: error: cannot compute sizeof (long), 77
+-See \`config.log' for more details.&quot; &gt;&amp;5
+-echo &quot;$as_me: error: cannot compute sizeof (long), 77
+-See \`config.log' for more details.&quot; &gt;&amp;2;}
+-   { (exit 1); exit 1; }; } ;;
+-esac
+-else
+-  if test &quot;$cross_compiling&quot; = yes; then
+-  { { echo &quot;$as_me:$LINENO: error: cannot run test program while cross compiling
+-See \`config.log' for more details.&quot; &gt;&amp;5
+-echo &quot;$as_me: error: cannot run test program while cross compiling
+-See \`config.log' for more details.&quot; &gt;&amp;2;}
+-   { (exit 1); exit 1; }; }
+-else
+-  cat &gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* confdefs.h.  */
+-_ACEOF
+-cat confdefs.h &gt;&gt;conftest.$ac_ext
+-cat &gt;&gt;conftest.$ac_ext &lt;&lt;_ACEOF
+-/* end confdefs.h.  */
+-$ac_includes_default
+-long longval () { return (long) (sizeof (long)); }
+-unsigned long ulongval () { return (long) (sizeof (long)); }
+-#include &lt;stdio.h&gt;
+-#include &lt;stdlib.h&gt;
+-int
+-main ()
+-{
+-
+-  FILE *f = fopen (&quot;conftest.val&quot;, &quot;w&quot;);
+-  if (! f)
+-    exit (1);
+-  if (((long) (sizeof (long))) &lt; 0)
+-    {
+-      long i = longval ();
+-      if (i != ((long) (sizeof (long))))
+-	exit (1);
+-      fprintf (f, &quot;%ld\n&quot;, i);
+-    }
+-  else
+-    {
+-      unsigned long i = ulongval ();
+-      if (i != ((long) (sizeof (long))))
+-	exit (1);
+-      fprintf (f, &quot;%lu\n&quot;, i);
+-    }
+-  exit (ferror (f) || fclose (f) != 0);
+-
+-  ;
+-  return 0;
+-}
+-_ACEOF
+-rm -f conftest$ac_exeext
+-if { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_link\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_link) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); } &amp;&amp; { ac_try='./conftest$ac_exeext'
+-  { (eval echo &quot;$as_me:$LINENO: \&quot;$ac_try\&quot;&quot;) &gt;&amp;5
+-  (eval $ac_try) 2&gt;&amp;5
+-  ac_status=$?
+-  echo &quot;$as_me:$LINENO: \$? = $ac_status&quot; &gt;&amp;5
+-  (exit $ac_status); }; }; then
+-  ac_cv_sizeof_long=`cat conftest.val`
+-else
+-  echo &quot;$as_me: program exited with status $ac_status&quot; &gt;&amp;5
+-echo &quot;$as_me: failed program was:&quot; &gt;&amp;5
+-sed 's/^/| /' conftest.$ac_ext &gt;&amp;5
+-
+-( exit $ac_status )
+-{ { echo &quot;$as_me:$LINENO: error: cannot compute sizeof (long), 77
+-See \`config.log' for more details.&quot; &gt;&amp;5
+-echo &quot;$as_me: error: cannot compute sizeof (long), 77
+-See \`config.log' for more details.&quot; &gt;&amp;2;}
+-   { (exit 1); exit 1; }; }
+-fi
+-rm -f core *.core gmon.out bb.out conftest$ac_exeext conftest.$ac_objext conftest.$ac_ext
+-fi
+-fi
+-rm -f conftest.val
+-else
+-  ac_cv_sizeof_long=0
+-fi
+-fi
+-echo &quot;$as_me:$LINENO: result: $ac_cv_sizeof_long&quot; &gt;&amp;5
+-echo &quot;${ECHO_T}$ac_cv_sizeof_long&quot; &gt;&amp;6
+-cat &gt;&gt;confdefs.h &lt;&lt;_ACEOF
+-#define SIZEOF_LONG $ac_cv_sizeof_long
+-_ACEOF
+-
+-
+ 
+ cat &gt;&gt;confdefs.h &lt;&lt;_ACEOF
+ #define SOCKET_TYPE int
+--- tn5250-0.17.3/configure.in.multilib	2006-05-23 10:12:34.000000000 +0200
++++ tn5250-0.17.3/configure.in	2006-05-23 10:12:45.000000000 +0200
+@@ -294,7 +294,6 @@
+ 
+ AC_CHECK_SIZEOF(short, 2)
+ AC_CHECK_SIZEOF(int, 4)
+-AC_CHECK_SIZEOF(long, 4)
+ 
+ dnl * True for anything other than Windoze.
+ AC_DEFINE_UNQUOTED(SOCKET_TYPE,int)

Added: trunk/rpms/usbsink/usbsink-utils.patch
===================================================================
--- trunk/rpms/usbsink/usbsink-utils.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/usbsink/usbsink-utils.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- src/utils.cc	2007-04-30 12:30:18.000000000 -0800
++++ utils.cc	2007-09-04 01:10:29.000000000 -0800
+@@ -53,7 +53,7 @@
+ static const guint64 KILOBYTE = 1024;
+ static const guint64 MEGABYTE = 1048576; // 1024 * 1024;
+ static const guint64 GIGABYTE = 1073741824; // 1024 * 1024 * 1024;
+-static const guint64 TERABYTE = 1099511627776; // 1024 * 1024 * 1024 * 1024;
++//static const guint64 TERABYTE = 1099511627776; // 1024 * 1024 * 1024 * 1024;
+ 
+ Glib::ustring
+ i18n_printf(const Glib::ustring&amp; format, ...)

Added: trunk/rpms/viruskiller/viruskiller-1.0-makefile.patch
===================================================================
--- trunk/rpms/viruskiller/viruskiller-1.0-makefile.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/viruskiller/viruskiller-1.0-makefile.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,54 @@
+--- makefile.orig	2005-05-21 19:03:45.000000000 +0200
++++ makefile	2008-01-11 02:40:22.556181856 +0100
+@@ -7,19 +7,17 @@
+ RELEASE = 1
+ USEPAK = 1
+ 
+-PREFIX=$(DESTDIR)/usr
++PREFIX = $(DESTDIR)/usr
+ BINDIR = $(PREFIX)/games/
+-DATADIR = $(PREFIX)/share/games/parallelrealities/
+-DOCDIR = $(PREFIX)/share/doc/$(PROG)-$(VERSION)-$(RELEASE)/
+-ICONDIR = $(PREFIX)/share/icons/
+-KDE = $(PREFIX)/share/applnk/Games/Arcade/
+-GNOME = $(PREFIX)/share/gnome/apps/Games/
++DATADIR = $(PREFIX)/share/games/viruskiller/
++ICONDIR = $(PREFIX)/share/pixmaps/
++GNOME = $(PREFIX)/share/applications/
+ 
+ SAFEDIR = /tmp/
+ 
+-CFLAGS += `sdl-config --cflags` -DVERSION=$(VERSION) -DRELEASE=$(RELEASE) -DUSEPAK=$(USEPAK)
++CFLAGS += $(OPTFLAGS) `sdl-config --cflags` -DVERSION=$(VERSION) -DRELEASE=$(RELEASE) -DUSEPAK=$(USEPAK)
+ CFLAGS += -DPAKNAME=\&quot;$(PAKNAME)\&quot; -DPAKLOCATION=\&quot;$(DATADIR)\&quot; -DSAFEDIR=\&quot;$(SAFEDIR)\&quot; -DUNIX -DGAMEPLAYMANUAL=\&quot;$(DOCDIR)manual.html\&quot; -Wall
+-LIBS = `sdl-config --libs` -lSDL_mixer -lSDL_image -lSDL_ttf
++LIBS = `sdl-config --libs` -lz -lSDL_mixer -lSDL_image -lSDL_ttf
+ 
+ OBJS += CAudio.o 
+ OBJS += CBase.o
+@@ -75,21 +73,10 @@
+ install:
+ 
+ 	./pak data gfx music sound $(PAKNAME)
+-	mkdir -p $(BINDIR)
+-	mkdir -p $(DATADIR)
+-	mkdir -p $(DOCDIR)
+ 	mkdir -p $(ICONDIR)
+-	mkdir -p $(ICONDIR)mini
+-	mkdir -p $(ICONDIR)large
+-	mkdir -p $(KDE)
+ 	mkdir -p $(GNOME)
+ 
+-	strip $(PROG)
+-	install -o root -g games -m 755 $(PROG) $(BINDIR)$(PROG)
+-	install -o root -g games -m 644 $(PAKNAME) $(DATADIR)$(PAKNAME)
+-	cp $(DOCS) $(DOCDIR)
+-	cp $(ICONS)$(PROG).png $(ICONDIR)
+-	cp $(ICONS)$(PROG)-mini.png $(ICONDIR)mini/$(PROG).png
+-	cp $(ICONS)$(PROG)-large.png $(ICONDIR)large/$(PROG).png
+-	cp $(ICONS)$(PROG).desktop $(KDE)
+-	cp $(ICONS)$(PROG).desktop $(GNOME)
++	install -Dp -m0755 $(PROG) $(BINDIR)$(PROG)
++	install -Dp -m0644 $(PAKNAME) $(DATADIR)$(PAKNAME)
++	install -Dp -m0644 $(ICONS)$(PROG).png $(ICONDIR)$(PROG).png
++	install -Dp -m0644 $(ICONS)$(PROG).desktop $(GNOME)$(PROG).desktop

Added: trunk/rpms/x264/x264-snapshot-20070529-2245-glibc232.patch
===================================================================
--- trunk/rpms/x264/x264-snapshot-20070529-2245-glibc232.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/x264/x264-snapshot-20070529-2245-glibc232.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- /dar/build/x264-snapshot-20070529-2245/common/cpu.c.orig	2007-06-03 22:48:45.000000000 +0200
++++ /dar/build/x264-snapshot-20070529-2245/common/cpu.c	2007-06-03 22:49:22.000000000 +0200
+@@ -217,7 +217,7 @@
+     int np;
+     cpu_set_t p_aff;
+     memset( &amp;p_aff, 0, sizeof(p_aff) );
+-    sched_getaffinity( 0, sizeof(p_aff), &amp;p_aff );
++    sched_getaffinity( 0, &amp;p_aff );
+     for( np = 0, bit = 0; bit &lt; sizeof(p_aff); bit++ )
+         np += (((uint8_t *)&amp;p_aff)[bit / 8] &gt;&gt; (bit % 8)) &amp; 1;
+     return np;

Added: trunk/rpms/xmms/xmms-1.2.10-configfile-safe-write.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-configfile-safe-write.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-configfile-safe-write.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,72 @@
+--- xmms-1.2.10/libxmms/configfile.c.bak	2003-05-20 00:22:07.000000000 +0300
++++ xmms-1.2.10/libxmms/configfile.c	2006-12-30 15:08:31.045540619 +0200
+@@ -123,12 +123,27 @@ gboolean xmms_cfg_write_file(ConfigFile 
+ 	GList *section_list, *line_list;
+ 	ConfigSection *section;
+ 	ConfigLine *line;
++	gchar *tmpfn;
++	int tmpfnfd;
+ 
+ 	g_return_val_if_fail(cfg != NULL, FALSE);
+ 	g_return_val_if_fail(filename != NULL, FALSE);
+ 
+-	if (!(file = fopen(filename, &quot;w&quot;)))
++	tmpfn = g_strconcat(filename, &quot;.XXXXXX&quot;, NULL);
++	if (!tmpfn)
+ 		return FALSE;
++	tmpfnfd = mkstemp(tmpfn);
++	if (tmpfnfd == -1) {
++		free (tmpfn);
++		return FALSE;
++	}
++	file = fdopen(tmpfnfd, &quot;w&quot;);
++	if (!file) {
++		unlink (tmpfn);
++		g_free (tmpfn);
++		close (tmpfnfd);		
++		return FALSE;
++	}
+ 
+ 	section_list = cfg-&gt;sections;
+ 	while (section_list)
+@@ -136,20 +151,36 @@ gboolean xmms_cfg_write_file(ConfigFile 
+ 		section = (ConfigSection *) section_list-&gt;data;
+ 		if (section-&gt;lines)
+ 		{
+-			fprintf(file, &quot;[%s]\n&quot;, section-&gt;name);
++			if (fprintf(file, &quot;[%s]\n&quot;, section-&gt;name) &lt; 0)
++				goto err;
+ 			line_list = section-&gt;lines;
+ 			while (line_list)
+ 			{
+ 				line = (ConfigLine *) line_list-&gt;data;
+-				fprintf(file, &quot;%s=%s\n&quot;, line-&gt;key, line-&gt;value);
++				if (fprintf(file, &quot;%s=%s\n&quot;, line-&gt;key, line-&gt;value) &lt; 0)
++					goto err;
+ 				line_list = g_list_next(line_list);
+ 			}
+-			fprintf(file, &quot;\n&quot;);
++			if (fprintf(file, &quot;\n&quot;) &lt; 0)
++				goto err;
+ 		}
+ 		section_list = g_list_next(section_list);
+ 	}
+-	fclose(file);
++	if (fflush (file) == EOF)
++		goto err;
++	if (fsync (tmpfnfd) == -1) /* dir not synced */
++		goto err;
++	if (fclose(file) == EOF)
++		goto err;
++	if (rename (tmpfn, filename) == -1)
++		goto err;
+ 	return TRUE;
++
++err:
++	fclose(file);
++	unlink(tmpfn);
++	g_free (tmpfn);
++	return FALSE;
+ }
+ 
+ gboolean xmms_cfg_write_default_file(ConfigFile * cfg)

Added: trunk/rpms/xmms/xmms-1.2.10-crossfade-0.3.9.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-crossfade-0.3.9.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-crossfade-0.3.9.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,101 @@
+diff -ur xmms-1.2.10/xmms/input.c xmms-1.2.10.patched/xmms/input.c
+--- xmms-1.2.10/xmms/input.c	2003-08-08 19:10:44.000000000 +0200
++++ xmms-1.2.10.patched/xmms/input.c	2005-11-25 00:12:36.000000000 +0100
+@@ -285,6 +285,14 @@
+ 	}
+ }
+ 
++gboolean input_stopped_for_restart = FALSE;  /* crossfade */
++void input_stop_for_restart()  /* crossfade */
++{
++	input_stopped_for_restart = TRUE;
++	input_stop();
++	input_stopped_for_restart = FALSE;
++}
++
+ void input_stop(void)
+ {
+ 	if (ip_data-&gt;playing &amp;&amp; get_current_input_plugin())
+diff -ur xmms-1.2.10/xmms/input.h xmms-1.2.10.patched/xmms/input.h
+--- xmms-1.2.10/xmms/input.h	2000-02-16 22:05:57.000000000 +0100
++++ xmms-1.2.10.patched/xmms/input.h	2005-11-25 00:12:36.000000000 +0100
+@@ -34,6 +34,7 @@
+ gboolean input_check_file(gchar * filename);
+ void input_play(char *filename);
+ void input_stop(void);
++void input_stop_for_restart(void);
+ void input_pause(void);
+ int input_get_time(void);
+ void input_set_eq(int on, float preamp, float *bands);
+diff -ur xmms-1.2.10/xmms/main.c xmms-1.2.10.patched/xmms/main.c
+--- xmms-1.2.10/xmms/main.c	2004-02-23 21:31:43.000000000 +0100
++++ xmms-1.2.10.patched/xmms/main.c	2005-11-25 00:12:36.000000000 +0100
+@@ -881,8 +881,10 @@
+ 	mainwin_set_shade(!cfg.player_shaded);
+ }
+ 
++gboolean is_quitting = FALSE;  /* crossfade */
+ void mainwin_quit_cb(void)
+ {
++	is_quitting = TRUE;  /* crossfade */
+ 	input_stop();
+ 	gtk_widget_hide(equalizerwin);
+ 	gtk_widget_hide(playlistwin);
+@@ -1523,7 +1525,8 @@
+ 		int *pos;
+ 
+ 		if (get_input_playing())
+-			input_stop();
++			input_stop_for_restart();
++		
+ 		pos = gtk_clist_get_row_data(clist, GPOINTER_TO_INT(clist-&gt;selection-&gt;data));
+ 		playlist_set_position(*pos);
+ 		playlist_play();
+diff -ur xmms-1.2.10/xmms/playlist.c xmms-1.2.10.patched/xmms/playlist.c
+--- xmms-1.2.10/xmms/playlist.c	2004-02-23 21:31:43.000000000 +0100
++++ xmms-1.2.10.patched/xmms/playlist.c	2005-11-25 00:12:36.000000000 +0100
+@@ -124,7 +124,7 @@
+ 		if (get_input_playing())
+ 		{
+ 			PL_UNLOCK();
+-			input_stop();
++			input_stop_for_restart();
+ 			PL_LOCK();
+ 			*restart_playing = TRUE;
+ 		}
+@@ -570,7 +570,7 @@
+ 	}
+ 
+ 	if (get_input_playing())
+-		input_stop();
++		input_stop_for_restart();
+ 
+ 	vis_clear_data(mainwin_vis);
+ 	vis_clear_data(playlistwin_vis);
+@@ -668,7 +668,7 @@
+ 	{
+ 		/* We need to stop before changing playlist_position */
+ 		PL_UNLOCK();
+-		input_stop();
++		input_stop_for_restart();
+ 		PL_LOCK();
+ 		restart_playing = TRUE;
+ 	}
+@@ -723,7 +723,7 @@
+ 	{
+ 		/* We need to stop before changing playlist_position */
+ 		PL_UNLOCK();
+-		input_stop();
++		input_stop_for_restart();
+ 		PL_LOCK();
+ 		restart_playing = TRUE;
+ 	}
+@@ -852,7 +852,7 @@
+ 	{
+ 		/* We need to stop before changing playlist_position */
+ 		PL_UNLOCK();
+-		input_stop();
++		input_stop_for_restart();
+ 		PL_LOCK();
+ 		restart_playing = TRUE;
+ 	}

Added: trunk/rpms/xmms/xmms-1.2.10-gcc4.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-gcc4.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-gcc4.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,24 @@
+--- xmms-1.2.10/General/ir/ir.h.orig	2001-03-05 23:17:44.000000000 +1000
++++ xmms-1.2.10/General/ir/ir.h	2005-03-24 20:48:31.000000000 +1000
+@@ -49,8 +49,6 @@
+ }
+ irConfig;
+ 
+-extern pthread_t irapp_thread;
+-extern gboolean keepGoing;
+ extern irConfig ircfg;
+ extern gboolean irconf_is_going;
+ 
+--- xmms-1.2.10/xmms/sm.c.orig	2004-01-11 18:33:00.000000000 +0100
++++ xmms-1.2.10/xmms/sm.c	2004-04-12 22:44:28.000000000 +0200
+@@ -147,8 +147,9 @@
+ 
+ #else
+ 
+-void sm_init(int argc, char **argv, const char *previous_session_id)
++const char * sm_init(int argc, char **argv, const char *previous_session_id)
+ {
++	return NULL;
+ }
+ 
+ void sm_cleanup(void)

Added: trunk/rpms/xmms/xmms-1.2.10-joycrash.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-joycrash.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-joycrash.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,21 @@
+===================================================================
+RCS file: /cvs/xmms/General/joystick/joy.c,v
+retrieving revision 1.8
+retrieving revision 1.9
+diff -u -p -r1.8 -r1.9
+--- xmms/General/joystick/joy.c	2001/02/04 18:00:11	1.8
++++ xmms/General/joystick/joy.c	2004/07/17 21:54:55	1.9
+@@ -177,8 +177,11 @@ static void init(void)
+ /* ---------------------------------------------------------------------- */
+ static void cleanup(void)
+ {
+-	keep_going = FALSE;
+-	pthread_join(joyapp_thread, NULL);
++	if (keep_going)
++	{
++		keep_going = FALSE;
++		pthread_join(joyapp_thread, NULL);
++	}
+ 	if (joy_fd1 &gt; 0)
+ 		close(joy_fd1);
+ 	if (joy_fd2 &gt; 0)

Added: trunk/rpms/xmms/xmms-1.2.10-multidevel.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-multidevel.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-multidevel.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,126 @@
+--- xmms-1.2.10/xmms-config.in~	2001-04-06 03:35:49.000000000 +0300
++++ xmms-1.2.10/xmms-config.in	2006-05-25 00:22:21.000000000 +0300
+@@ -18,24 +18,6 @@
+ data_dir=&quot;@datadir@/@PACKAGE@&quot;
+ 
+ version=&quot;@VERSION@&quot;
+-include_dir=&quot;@includedir@&quot;
+-xmms_include_dir=&quot;@includedir@/@PACKAGE@&quot;
+-lib_dir=&quot;@libdir@&quot;
+-
+-if ( (gtk-config --version) &gt; /dev/null 2&gt;&amp;1)  then
+-   gtk_libs=`gtk-config --libs`
+-   gtk_cflags=`gtk-config --cflags`
+-else
+-   gtk_libs=&quot;@GTK_LIBS@&quot;
+-   gtk_cflags=&quot;@GTK_CFLAGS@&quot;
+-fi
+-
+-plugin_dir=&quot;@plugindir@&quot;
+-visualization_plugin_dir=&quot;@plugindir@/@VISUALIZATION_PLUGIN_DIR@&quot;
+-input_plugin_dir=&quot;@plugindir@/@INPUT_PLUGIN_DIR@&quot;
+-output_plugin_dir=&quot;@plugindir@/@OUTPUT_PLUGIN_DIR@&quot;
+-effect_plugin_dir=&quot;@plugindir@/@EFFECT_PLUGIN_DIR@&quot;
+-general_plugin_dir=&quot;@plugindir@/@GENERAL_PLUGIN_DIR@&quot;
+ 
+ usage()
+ {
+@@ -146,24 +128,12 @@
+     echo $exec_prefix
+ fi
+ 
+-if test &quot;$include_dir&quot; != &quot;/usr/include&quot;; then
+-    cflags=&quot;-I$include_dir -I$xmms_include_dir $gtk_cflags&quot;
+-else
+-    cflags=&quot;-I$xmms_include_dir $gtk_cflags&quot;
+-fi
+-
+-if test &quot;$lib_dir&quot; != &quot;/usr/lib&quot;; then
+-    libs=&quot;-L$lib_dir $gtk_libs -lxmms&quot;
+-else
+-    libs=&quot;$gtk_libs -lxmms&quot;
+-fi
+-
+ if test &quot;$echo_cflags&quot; = &quot;yes&quot;; then
+-    echo $cflags
++    pkg-config xmms --cflags
+ fi
+ 
+ if test &quot;$echo_libs&quot; = &quot;yes&quot;; then
+-    echo $libs
++    pkg-config xmms --libs
+ fi
+ 
+ if test &quot;$echo_data_dir&quot; = &quot;yes&quot;; then
+@@ -171,25 +141,25 @@
+ fi
+ 
+ if test &quot;$echo_plugin_dir&quot; = &quot;yes&quot;; then
+-    echo $plugin_dir
++    pkg-config xmms --variable=plugin_dir
+ fi
+ 
+ if test &quot;$echo_visualization_plugin_dir&quot; = &quot;yes&quot;; then
+-    echo $visualization_plugin_dir
++    pkg-config xmms --variable=visualization_plugin_dir
+ fi
+ 
+ if test &quot;$echo_input_plugin_dir&quot; = &quot;yes&quot;; then
+-    echo $input_plugin_dir
++    pkg-config xmms --variable=input_plugin_dir
+ fi
+ 
+ if test &quot;$echo_output_plugin_dir&quot; = &quot;yes&quot;; then
+-    echo $output_plugin_dir
++    pkg-config xmms --variable=output_plugin_dir
+ fi
+ 
+ if test &quot;$echo_general_plugin_dir&quot; = &quot;yes&quot;; then
+-    echo $general_plugin_dir
++    pkg-config xmms --variable=general_plugin_dir
+ fi
+ 
+ if test &quot;$echo_effect_plugin_dir&quot; = &quot;yes&quot;; then
+-    echo $effect_plugin_dir
++    pkg-config xmms --variable=effect_plugin_dir
+ fi
+--- xmms-1.2.10/configure~	2004-02-23 23:44:32.000000000 +0200
++++ xmms-1.2.10/configure	2006-05-24 23:55:50.000000000 +0300
+@@ -19201,7 +19201,7 @@
+ 
+ 
+ 
+-                                                                                                                                                                                                                                                                                                                                                                        ac_config_files=&quot;$ac_config_files Makefile xmms.1 wmxmms.1 xmms.spec xmms-config xmms/Makefile xmms/defskin/Makefile Output/Makefile Output/OSS/Makefile Output/esd/Makefile Output/disk_writer/Makefile Output/solaris/Makefile Output/sun/Makefile Output/alsa/Makefile Input/Makefile Input/wav/Makefile Input/mpg123/Makefile Input/mikmod/Makefile Input/cdaudio/Makefile Input/tonegen/Makefile Input/vorbis/Makefile Effect/Makefile Effect/voice/Makefile Effect/echo_plugin/Makefile Effect/stereo_plugin/Makefile General/Makefile General/ir/Makefile General/joystick/Makefile General/song_change/Makefile Visualization/Makefile Visu!
 alization/blur_scope/Makefile Visualization/sanalyzer/Makefile Visualization/opengl_spectrum/Makefile wmxmms/Makefile po/Makefile.in intl/Makefile&quot;
++                                                                                                                                                                                                                                                                                                                                                                        ac_config_files=&quot;$ac_config_files Makefile xmms.1 wmxmms.1 xmms.spec xmms-config xmms.pc xmms/Makefile xmms/defskin/Makefile Output/Makefile Output/OSS/Makefile Output/esd/Makefile Output/disk_writer/Makefile Output/solaris/Makefile Output/sun/Makefile Output/alsa/Makefile Input/Makefile Input/wav/Makefile Input/mpg123/Makefile Input/mikmod/Makefile Input/cdaudio/Makefile Input/tonegen/Makefile Input/vorbis/Makefile Effect/Makefile Effect/voice/Makefile Effect/echo_plugin/Makefile Effect/stereo_plugin/Makefile General/Makefile General/ir/Makefile General/joystick/Makefile General/song_change/Makefile Visualization/Makef!
 ile Visualization/blur_scope/Makefile Visualization/sanalyzer/Makefile Visualization/opengl_spectrum/Makefile wmxmms/Makefile po/Makefile.in intl/Makefile&quot;
+           ac_config_commands=&quot;$ac_config_commands default&quot;
+ cat &gt;confcache &lt;&lt;\_ACEOF
+ # This file is a shell script that caches the results of configure
+@@ -19861,6 +19861,7 @@
+   &quot;wmxmms.1&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES wmxmms.1&quot; ;;
+   &quot;xmms.spec&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES xmms.spec&quot; ;;
+   &quot;xmms-config&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES xmms-config&quot; ;;
++  &quot;xmms.pc&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES xmms.pc&quot; ;;
+   &quot;xmms/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES xmms/Makefile&quot; ;;
+   &quot;xmms/defskin/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES xmms/defskin/Makefile&quot; ;;
+   &quot;Output/Makefile&quot; ) CONFIG_FILES=&quot;$CONFIG_FILES Output/Makefile&quot; ;;
+--- xmms-1.2.10/xmms.pc.in~	2006-05-24 23:54:59.000000000 +0300
++++ xmms-1.2.10/xmms.pc.in	2006-05-24 23:54:48.000000000 +0300
+@@ -0,0 +1,18 @@
++prefix=@prefix@
++exec_prefix=@exec_prefix@
++libdir=@libdir@
++includedir=@includedir@
++data_dir=@datadir@
++plugin_dir=@plugindir@
++visualization_plugin_dir=${plugin_dir}/@VISUALIZATION_PLUGIN_DIR@
++input_plugin_dir=${plugin_dir}/@INPUT_PLUGIN_DIR@
++output_plugin_dir=${plugin_dir}/@OUTPUT_PLUGIN_DIR@
++effect_plugin_dir=${plugin_dir}/@EFFECT_PLUGIN_DIR@
++general_plugin_dir=${plugin_dir}/@GENERAL_PLUGIN_DIR@
++
++Name: XMMS
++Description: The X MultiMedia System, a media player
++Version: @VERSION@
++Requires: gtk+
++Libs: -L${libdir} -lxmms
++Cflags: -I${includedir} -I${includedir}/@PACKAGE@

Added: trunk/rpms/xmms/xmms-1.2.10-pls-188603.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-pls-188603.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-pls-188603.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,32 @@
+diff -u -p -r1.84 -r1.85
+--- xmms/xmms/playlist.c	2004/03/21 16:41:56	1.84
++++ xmms/xmms/playlist.c	2004/04/12 19:06:58	1.85
+@@ -1633,14 +1640,14 @@ static GList *playlist_shuffle_list(GLis
+ 	for (node = list, i = 0; i &lt; len; node = g_list_next(node), i++)
+ 		ptrs[i] = node;
+ 
+-	j = random() % len;
++	j = (int)(random() / (RAND_MAX + 1.0) * len); 
+ 	list = ptrs[j];
+ 	ptrs[j]-&gt;next = NULL;
+ 	ptrs[j] = ptrs[0];
+ 
+ 	for (i = 1; i &lt; len; i++)
+ 	{
+-		j = random() % (len - i);
++		j = (int)(random() / (RAND_MAX + 1.0) * (len - i));
+ 		list-&gt;prev = ptrs[i + j];
+ 		ptrs[i + j]-&gt;next = list;
+ 		list = ptrs[i + j];
+diff -u -p -r1.88 -r1.89
+--- xmms/xmms/playlist.c	2005/05/06 23:57:03	1.88
++++ xmms/xmms/playlist.c	2005/05/07 01:47:35	1.89
+@@ -563,7 +563,7 @@ void playlist_play(void)
+ 		/* If there are entries */
+ 		if (g_list_length(skinlist)) {
+ 			/* Get a random value to select the skin to use */
+-			int randval = random() % (g_list_length(skinlist) + 1);
++			int randval = (gint)(random() / (RAND_MAX + 1.0) * (g_list_length(skinlist) + 1));
+ 			/* If the random value is 0, use the default skin */
+ 			/* Otherwise subtract 1 from the random value and */
+ 			/* select the skin */

Added: trunk/rpms/xmms/xmms-1.2.10-reposition.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-reposition.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-reposition.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,20 @@
+--- xmms-1.2.10/xmms/dock.c.bak	2001-03-08 07:48:38.000000000 +0200
++++ xmms-1.2.10/xmms/dock.c	2007-01-12 22:32:36.156705327 +0200
+@@ -625,6 +625,17 @@
+ 	
+ void dock_set_uposition(GtkWidget *w, gint x, gint y)
+ {
++	gint maxx, maxy;
++
++	maxx = gdk_screen_width();
++	maxy = gdk_screen_height();	
++	if ((maxx &lt; (x + 15)) || (maxy &lt; (y + 15))) {
++		x = maxx / 2;
++		y = maxy / 2;
++		g_warning(&quot;%s: current screen size %dx%d smaller than &quot;
++			  &quot;window position specified in config file, resetting to &quot;
++			  &quot;x=%d y=%d\n&quot;, __FUNCTION__, maxx, maxy, x, y);
++	}
+ 	gtk_widget_set_uposition(w, x, y);
+ 	gtk_object_set_data(GTK_OBJECT(w), &quot;window_x&quot;, GINT_TO_POINTER(x));
+ 	gtk_object_set_data(GTK_OBJECT(w), &quot;window_y&quot;, GINT_TO_POINTER(y));

Added: trunk/rpms/xmms/xmms-1.2.10-ubuntu-CVE-2007-0653.patch
===================================================================
--- trunk/rpms/xmms/xmms-1.2.10-ubuntu-CVE-2007-0653.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-1.2.10-ubuntu-CVE-2007-0653.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,44 @@
+--- xmms-1.2.10+cvs20060429.orig/xmms/bmp.c
++++ xmms-1.2.10+cvs20060429/xmms/bmp.c
+@@ -19,6 +19,12 @@
+  */
+ #include &quot;xmms.h&quot;
+ 
++#if HAVE_STDINT_H
++#include &lt;stdint.h&gt;
++#elif !defined(UINT32_MAX)
++#define UINT32_MAX 0xffffffffU
++#endif
++
+ typedef struct tagRGBQUAD
+ {
+ 	guchar rgbBlue;
+@@ -184,7 +190,7 @@
+ 	}
+ 	else if (bitcount != 24 &amp;&amp; bitcount != 16 &amp;&amp; bitcount != 32)
+ 	{
+-		gint ncols, i;
++		guint32 ncols, i;
+ 
+ 		ncols = offset - headSize - 14;
+ 		if (headSize == 12)
+@@ -200,10 +206,18 @@
+ 		}
+ 	}
+ 	fseek(file, offset, SEEK_SET);
++	/* verify buffer size */
++	if (!h || !w ||
++	    w &gt; (((UINT32_MAX - 3) / 3) / h) ||
++	    h &gt; (((UINT32_MAX - 3) / 3) / w)) {
++		g_warning(&quot;read_bmp(): width(%u)*height(%u) too large&quot;, w, h);
++		fclose(file);
++		return NULL;
++	}
++	data = g_malloc0((w * 3 * h) + 3);	/* +3 is just for safety */
+ 	buffer = g_malloc(imgsize);
+ 	fread(buffer, imgsize, 1, file);
+ 	fclose(file);
+-	data = g_malloc0((w * 3 * h) + 3);	/* +3 is just for safety */
+ 
+ 	if (bitcount == 1)
+ 		read_1b_rgb(buffer, imgsize, data, w, h, rgb_quads);

Added: trunk/rpms/xmms/xmms-cd-mountpoint.patch
===================================================================
--- trunk/rpms/xmms/xmms-cd-mountpoint.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/xmms/xmms-cd-mountpoint.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,11 @@
+--- Input/cdaudio/cdaudio.c~	2004-01-28 01:09:39.000000000 +0200
++++ Input/cdaudio/cdaudio.c	2005-04-30 18:39:04.000000000 +0300
+@@ -78,7 +78,7 @@
+ #   define CDDA_DIRECTORY &quot;/cdrom/cdrom0&quot;
+ #  endif
+ # else
+-#   define CDDA_DIRECTORY &quot;/mnt/cdrom&quot;
++#   define CDDA_DIRECTORY &quot;/media/cdrecorder&quot;
+ # endif
+ #endif
+ 

Added: trunk/rpms/zope/zope-2.7.3-config.patch
===================================================================
--- trunk/rpms/zope/zope-2.7.3-config.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/zope/zope-2.7.3-config.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,27 @@
+--- ./skel/etc/zope.conf.in.config	2004-09-28 20:08:52.000000000 +0200
++++ ./skel/etc/zope.conf.in	2004-12-10 18:27:55.393492142 +0100
+@@ -138,6 +138,7 @@
+ #
+ #    effective-user chrism
+ 
++effective-user &lt;&lt;ZOPE_USER&gt;&gt;
+ 
+ # Directive: enable-product-installation
+ #
+@@ -295,6 +296,7 @@
+ #
+ #     mime-types  $INSTANCE/etc/mime.types
+ 
++mime-types /etc/mime.types
+ 
+ # Directive: structured-text-header-level
+ #
+@@ -491,7 +493,7 @@
+ #
+ # Example:
+ #
+-#    security-policy-implementation python
++security-policy-implementation python
+ 
+ # Directive: skip-authentication-checking
+ #

Added: trunk/rpms/zope/zope-2.8.3-pythonwarning.patch
===================================================================
--- trunk/rpms/zope/zope-2.8.3-pythonwarning.patch	2008-02-26 10:55:57 UTC (rev 6177)
+++ trunk/rpms/zope/zope-2.8.3-pythonwarning.patch	2008-02-26 15:23:06 UTC (rev 6178)
@@ -0,0 +1,13 @@
+--- ./lib/python/App/dtml/zope_quick_start.dtml.pythonwarning	2005-10-25 15:23:22.000000000 +0200
++++ ./lib/python/App/dtml/zope_quick_start.dtml	2005-10-25 15:35:55.000000000 +0200
+@@ -134,5 +134,10 @@
+ 
+ &lt;/ul&gt;
+ 
++&lt;p style=&quot;color: red; font-weight: bold&quot;&gt;
++WARNING: you are running Zope 2.8.X with python 2.4.X, this is not a supported
++combination. Don't file bugreports or ask for support on zope.org.
++&lt;/p&gt;
++
+ &lt;/body&gt;
+ &lt;/html&gt;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004976.html">[svn] r6177 - in trunk/rpms: aircrack-ng collectd ddrescue dstat	eboard glabels iozone mpg123 perl-Archive-Rar perl-Carp-Clan	perl-Catalyst-Engine-Apache perl-Config-IniHash	perl-Crypt-Cracklib perl-DBD-Multi perl-DBD-Pg	perl-Devel-TrackObjects perl-Egg-Plugin-SessionKit	perl-ExtUtils-ParseXS perl-File-Remove perl-Gnome2-VFS	perl-HTTP-Body perl-I18N-Charset perl-IO-Socket-INET6	perl-IPC-ShareLite perl-Image-Size	perl-Locale-Currency-Format perl-Mail-IMAPClient	perl-Math-MatrixReal perl-Math-Prime-XS	perl-Math-Random-MT-Auto perl-Net-DBus perl-Net-SIP	perl-OLE-Storage_Lite perl-Object-InsideOut	perl-Smart-Comments perl-Sub-Name perl-Sys-Virt	perl-TermReadKey perl-Test-Exception perl-Test-Simple synbak zvbi
</A></li>
	<LI>Next message: <A HREF="004978.html">[svn] r6179 - trunk/rpms/mailgraph
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4977">[ date ]</a>
              <a href="thread.html#4977">[ thread ]</a>
              <a href="subject.html#4977">[ subject ]</a>
              <a href="author.html#4977">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
