<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r2296 - in trunk/rpms: . epydoc flumotion gstreamer	gstreamer-ffmpeg gstreamer-plugins gstreamer-python python-imaging
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2296%20-%20in%20trunk/rpms%3A%20.%20epydoc%20flumotion%20gstreamer%0A%09gstreamer-ffmpeg%20gstreamer-plugins%20gstreamer-python%20python-imaging&In-Reply-To=%3C20041021193525.8912718A35%40web22.us.megagiga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001101.html">
   <LINK REL="Next"  HREF="001103.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r2296 - in trunk/rpms: . epydoc flumotion gstreamer	gstreamer-ffmpeg gstreamer-plugins gstreamer-python python-imaging</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2296%20-%20in%20trunk/rpms%3A%20.%20epydoc%20flumotion%20gstreamer%0A%09gstreamer-ffmpeg%20gstreamer-plugins%20gstreamer-python%20python-imaging&In-Reply-To=%3C20041021193525.8912718A35%40web22.us.megagiga.com%3E"
       TITLE="[SVN] r2296 - in trunk/rpms: . epydoc flumotion gstreamer	gstreamer-ffmpeg gstreamer-plugins gstreamer-python python-imaging">svn-commits at rpmforge.net
       </A><BR>
    <I>Thu Oct 21 21:35:25 CEST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001101.html">[SVN] r2295 - in trunk/rpms: perl-XML-LibXML	perl-XML-NamespaceSupport
</A></li>
        <LI>Next message: <A HREF="001103.html">[SVN] r2297 - trunk/rpms/sudosh
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1102">[ date ]</a>
              <a href="thread.html#1102">[ thread ]</a>
              <a href="subject.html#1102">[ subject ]</a>
              <a href="author.html#1102">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dude
Date: 2004-10-21 21:35:22 +0200 (Thu, 21 Oct 2004)
New Revision: 2296

Added:
   trunk/rpms/epydoc/
   trunk/rpms/epydoc/epydoc.spec
   trunk/rpms/flumotion/
   trunk/rpms/flumotion/flumotion.spec
   trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.4-vorbis-seek-workaround.patch
   trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.5-dv.patch
   trunk/rpms/gstreamer/gstreamer-0.7.5-nops.patch
Removed:
   trunk/rpms/gstreamer-plugins/gst-fionread.m4
   trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.2-alsa-fixes.patch
Modified:
   trunk/rpms/gstreamer-ffmpeg/gstreamer-ffmpeg.spec
   trunk/rpms/gstreamer-plugins/gstreamer-plugins.spec
   trunk/rpms/gstreamer-python/gstreamer-python.spec
   trunk/rpms/gstreamer/gstreamer.spec
   trunk/rpms/python-imaging/python-imaging.spec
Log:
Additions, minor and major updates for flumotion and dependencies.


Added: trunk/rpms/epydoc/epydoc.spec
===================================================================
--- trunk/rpms/epydoc/epydoc.spec	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/epydoc/epydoc.spec	2004-10-21 19:35:22 UTC (rev 2296)
@@ -0,0 +1,62 @@
+# $Id$
+
+Summary: Edward Loper's Python API documentation generation tool
+Name: epydoc
+Version: 2.1
+Release: 1
+Group: Development/Tools
+License: MIT
+URL: <A HREF="http://epydoc.sourceforge.net/">http://epydoc.sourceforge.net/</A>
+Source: <A HREF="http://dl.sf.net/epydoc/epydoc-%{version">http://dl.sf.net/epydoc/epydoc-%{version</A>}.tar.gz
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+BuildRequires: python
+
+%description
+Epydoc  is a tool for generating API documentation for Python modules,
+based  on their docstrings. For an example of epydoc's output, see the
+API  documentation for epydoc itself (html, pdf). A lightweight markup
+language  called  epytext can be used to format docstrings, and to add
+information  about  specific  fields,  such as parameters and instance
+variables.    Epydoc    also   understands   docstrings   written   in
+ReStructuredText, Javadoc, and plaintext.
+
+
+%prep
+%setup -q
+
+
+%build
+%{__python} setup.py build
+
+
+%install
+%{__rm} -rf %{buildroot}
+%{__python} setup.py install --root=%{buildroot}
+
+# Also install the man pages
+%{__install} -D man/epydoc.1    %{buildroot}%{_mandir}/man1/epydoc.1
+%{__install} -D man/epydocgui.1 %{buildroot}%{_mandir}/man1/epydocgui.1
+
+
+%clean
+%{__rm} -rf %{buildroot}
+
+
+%files
+%defattr(-, root, root, 0755)
+%doc LICENSE.TXT README.TXT doc/
+%{_bindir}/epydoc
+%{_bindir}/epydocgui
+%{_libdir}/python?.?/site-packages/epydoc/
+%{_mandir}/man1/epydoc.1*
+%{_mandir}/man1/epydocgui.1*
+
+
+%changelog
+* Thu Oct 21 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 2.1-1
+- Picked up and rebuilt.
+- Added doc and man pages.
+
+* Fri May 07 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
+- 2.1-0.fdr.1: Initial package
+


Property changes on: trunk/rpms/epydoc/epydoc.spec
___________________________________________________________________
Name: svn:keywords
   + Id

Added: trunk/rpms/flumotion/flumotion.spec
===================================================================
--- trunk/rpms/flumotion/flumotion.spec	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/flumotion/flumotion.spec	2004-10-21 19:35:22 UTC (rev 2296)
@@ -0,0 +1,135 @@
+# $Id$
+
+Summary: Flumotion - the Fluendo Streaming Server
+Name: flumotion
+Version: 0.1.0
+Release: 0
+Group: Applications/Internet
+License: GPL
+URL: <A HREF="http://www.fluendo.com/">http://www.fluendo.com/</A>
+Source: <A HREF="http://www.fluendo.com/downloads/flumotion-%{version">http://www.fluendo.com/downloads/flumotion-%{version</A>}.tar.bz2
+BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
+Requires(post): openssl
+Requires: python &gt;= 2.3
+Requires: gstreamer &gt;= 0.8.5
+Requires: gstreamer-python &gt;= 0.7.93
+Requires: python-twisted &gt;= 1.3.0
+Requires: pygtk2 &gt;= 2.4.0
+Requires: python-imaging
+BuildRequires: pkgconfig
+BuildRequires: gstreamer-devel &gt;= 0.8.5, gstreamer-python &gt;= 0.7.93
+BuildRequires: python, python-devel &gt;= 2.3, python-twisted &gt;= 1.3.0
+BuildRequires: pygtk2-devel &gt;= 2.4.0
+BuildRequires: epydoc
+BuildArch: noarch
+
+%description
+Fluendo Streaming Server.
+
+
+%prep
+%setup -q
+
+
+%build
+%configure
+%{__make} %{?_smp_mflags}
+
+
+%install
+%{__rm} -rf %{buildroot}
+%makeinstall
+%{__mkdir_p} %{buildroot}%{_sysconfdir}/flumotion/managers/default/flows
+%{__mkdir_p} %{buildroot}%{_sysconfdir}/flumotion/workers
+
+# Install init script
+%{__install} -D -m 0755 doc/redhat/init.d/flu-manager \
+    %{buildroot}%{_sysconfdir}/rc.d/init.d/flu-manager
+%{__install} -D -m 0755 doc/redhat/init.d/flu-worker \
+    %{buildroot}%{_sysconfdir}/rc.d/init.d/flu-worker
+
+# Install sysconfig files
+%{__install} -D -m 0644 doc/redhat/sysconfig/flumotion-manager \
+    %{buildroot}%{_sysconfdir}/sysconfig/flumotion-manager
+%{__install} -D -m 0644 doc/redhat/sysconfig/flumotion-worker \
+    %{buildroot}%{_sysconfdir}/sysconfig/flumotion-worker
+
+# Create a .flumotion in the new home
+# FIXME: needs to be done more gracefully
+%{__mkdir_p} %{buildroot}%{_datadir}/flumotion/.flumotion
+
+# Create log directory
+%{__mkdir_p} %{buildroot}%{_var}/log/flumotion
+
+
+%clean
+%{__rm} -rf %{buildroot}
+
+
+%pre
+/usr/sbin/useradd -s /sbin/nologin -r -d %{_datadir}/flumotion -M -r \
+    flumotion &gt;/dev/null 2&gt;&amp;1 || :
+
+%post
+/sbin/chkconfig --add flu-manager
+/sbin/chkconfig --add flu-worker
+# Generate a default .pem certificate
+PEM_FILE=&quot;%{_sysconfdir}/flumotion/managers/default/default.pem&quot;
+if ! test -e ${PEM_FILE}; then
+    sh %{_datadir}/ssl/certs/make-dummy-cert ${PEM_FILE}
+    chgrp flumotion ${PEM_FILE}
+    chmod 640 ${PEM_FILE}
+fi
+
+# If we have no .xml file in the default manager, create one
+# The default account is user/test (only listens on localhost, don't panic!)
+if ! ls %{_sysconfdir}/flumotion/managers/default/*.xml &gt;/dev/null 2&gt;&amp;1; then
+    cat &gt; %{_sysconfdir}/flumotion/managers/default/planet.xml &lt;&lt; EOF
+&lt;planet&gt;
+
+  &lt;manager&gt;
+    &lt;component name=&quot;manager-bouncer&quot; type=&quot;htpasswdcrypt&quot;&gt;
+      &lt;data&gt;&lt;![CDATA[
+user:PSfNpHTkpTx1M
+]]&gt;&lt;/data&gt;
+    &lt;/component&gt;
+  &lt;/manager&gt;
+
+&lt;/planet&gt;
+EOF
+fi
+
+%preun
+if [ $1 -eq 0 ]; then
+    /sbin/service flu-manager stop &gt;/dev/null 2&gt;&amp;1
+    /sbin/service flu-worker stop &gt;/dev/null 2&gt;&amp;1
+    /sbin/chkconfig --del flu-manager
+    /sbin/chkconfig --del flu-worker
+fi
+
+
+%files
+%defattr(-, root, root, 0755)
+%doc ChangeLog COPYING README AUTHORS
+%doc conf/ doc/reference/html/
+%{_sysconfdir}/rc.d/init.d/flu-manager
+%{_sysconfdir}/rc.d/init.d/flu-worker
+%attr(0750, flumotion, flumotion) %{_sysconfdir}/flumotion/
+%config(noreplace) %{_sysconfdir}/sysconfig/flumotion-manager
+%config(noreplace) %{_sysconfdir}/sysconfig/flumotion-worker
+%{_bindir}/flumotion-admin
+%{_bindir}/flumotion-manager
+%{_bindir}/flumotion-tester
+%{_bindir}/flumotion-worker
+%{_libdir}/flumotion/
+%attr(0750, flumotion, flumotion) %{_datadir}/flumotion/
+%attr(0750, flumotion, flumotion) %{_var}/log/flumotion/
+
+
+%changelog
+* Thu Oct 21 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.1.0-0
+- Picked up, minor changes.
+
+* Mon Jun 07 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
+- first package
+


Property changes on: trunk/rpms/flumotion/flumotion.spec
___________________________________________________________________
Name: svn:keywords
   + Id

Added: trunk/rpms/gstreamer/gstreamer-0.7.5-nops.patch
===================================================================
--- trunk/rpms/gstreamer/gstreamer-0.7.5-nops.patch	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer/gstreamer-0.7.5-nops.patch	2004-10-21 19:35:22 UTC (rev 2296)
@@ -0,0 +1,20 @@
+--- gstreamer-0.7.5/docs/manuals.mak.nops	2004-02-27 08:52:16.000000000 +0100
++++ gstreamer-0.7.5/docs/manuals.mak	2004-02-27 08:52:48.000000000 +0100
+@@ -42,7 +42,7 @@
+ 
+ # can we generate PS ?
+ if     DOC_PS
+-PS_DAT = $(DOC).ps
++PS_DAT =
+ else  #!DOC_PS
+ PS_DAT =
+ endif #DOC_PS
+@@ -50,7 +50,7 @@
+ 
+ # can we generate PDF ?
+ if     DOC_PDF
+-PDF_DAT = $(DOC).pdf
++PDF_DAT =
+ else  #!DOC_PDF
+ PDF_DAT =
+ endif #DOC_PDF

Modified: trunk/rpms/gstreamer/gstreamer.spec
===================================================================
--- trunk/rpms/gstreamer/gstreamer.spec	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer/gstreamer.spec	2004-10-21 19:35:22 UTC (rev 2296)
@@ -1,52 +1,50 @@
-%define		majorminor	0.8
-%define 	_glib2		2.2
-%define 	_libxml2	2.4.0
-%define		gstreamer	gstreamer
-%define		register	%{_bindir}/gst-register-%{majorminor} &gt;/dev/null 2&gt;&amp;1 || :
+%define _glib2		2.3.0
+%define _libxml2	2.4.9
 
-Name: 		%{gstreamer}
-Version: 	0.8.1
-Release: 	0
-Summary: 	GStreamer streaming media framework runtime
+Name: gstreamer
+Version: 0.8.7
+# keep in sync with the VERSION.  gstreamer can append a .0.1 to CVS snapshots.
+%define majmin  0.8
+%define po_package %{name}-%{majmin}
 
-Group: 		Applications/Multimedia
-License: 	LGPL
-URL:		<A HREF="http://gstreamer.net/">http://gstreamer.net/</A>
-Source: 	<A HREF="http://freedesktop.org/~gstreamer/src/gstreamer/gstreamer-%{version">http://freedesktop.org/~gstreamer/src/gstreamer/gstreamer-%{version</A>}.tar.gz
-BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
+Release: 0
+Summary: GStreamer streaming media framework runtime.
+Group: Applications/Multimedia
+License: LGPL
+URL: <A HREF="http://gstreamer.net/">http://gstreamer.net/</A>
+Source: <A HREF="http://gstreamer.net/releases/%{version">http://gstreamer.net/releases/%{version</A>}/src/%{name}-%{version}.tar.bz2
+BuildRoot: %{_tmppath}/%{name}-%{version}-root
+# There was problems generating pdf and postscript:
+Patch1: gstreamer-0.7.5-nops.patch
 
-Requires:	gstreamer-tools &gt;= %{version}
+Requires: glib2 &gt;= %_glib2
+Requires: libxml2 &gt;= %_libxml2
+Requires: popt &gt; 1.6
 
-Obsoletes:	gstreamer08
+BuildRequires: glib2-devel &gt;= %_glib2
+BuildRequires: libxml2-devel &gt;= %_libxml2
+BuildRequires: bison flex
+BuildRequires: gtk-doc &gt;= 1.1
+BuildRequires: zlib-devel
+BuildRequires: popt &gt; 1.6
+BuildRequires: gettext
+# for autopoint, should be depended on by gettext-devel
+BuildRequires: cvs 
+BuildRequires: flex
+BuildRequires: ghostscript
+Prereq: /sbin/ldconfig
 
-BuildRequires: 	glib2-devel &gt;= %{_glib2}
-BuildRequires: 	libxml2-devel &gt;= %{_libxml2}
-BuildRequires: 	bison
-BuildRequires: 	flex
-BuildRequires: 	m4
-BuildRequires: 	gtk-doc &gt;= 1.1
-BuildRequires: 	gcc
-BuildRequires: 	zlib-devel
-BuildRequires:  popt &gt; 1.6
-BuildRequires:	gettext
-# because AM_PROG_LIBTOOL was used in configure.ac
-BuildRequires:	gcc-c++
-Requires(pre):	/sbin/ldconfig
-Requires(post):	/sbin/ldconfig
+### documentation requirements
+BuildRequires: openjade
+BuildRequires: python2
+BuildRequires: docbook-style-dsssl
+BuildRequires: docbook-style-xsl
+BuildRequires: docbook-dtds
+BuildRequires: docbook-utils 
+BuildRequires: transfig xfig
+BuildRequires: netpbm-progs
 
-### documentation requirements; work on rh9 and f1
-BuildRequires:  python2
-BuildRequires:  openjade
-BuildRequires:  jadetex
-BuildRequires:	libxslt
-BuildRequires:  docbook-style-dsssl
-BuildRequires:  docbook-style-xsl
-BuildRequires:  docbook-utils
-BuildRequires:	transfig
-BuildRequires:  xfig
-BuildRequires:  netpbm-progs
-BuildRequires:  tetex-dvips
-BuildRequires:  ghostscript
+BuildRequires: autoconf, automake, libtool
 
 %description
 GStreamer is a streaming-media framework, based on graphs of filters which
@@ -57,15 +55,12 @@
 plugins.
 
 %package devel
-Summary: 	Libraries/include files for GStreamer streaming media framework
-Group: 		Development/Libraries
+Summary: Libraries/include files for GStreamer streaming media framework.
+Group: Development/Libraries
+Requires: %{name} = %{version}-%{release}
+Requires: glib2-devel &gt;= %_glib2
+Requires: libxml2-devel &gt;= %_libxml2
 
-Requires: 	%{name} = %{version}
-Requires: 	glib2-devel &gt;= %{_glib2}
-Requires: 	libxml2-devel &gt;= %{_libxml2}
-
-Obsoletes:	gstreamer08-devel
-
 %description devel
 GStreamer is a streaming-media framework, based on graphs of filters which
 operate on media data. Applications using this library can do anything
@@ -75,210 +70,276 @@
 plugins.
 
 This package contains the libraries and includes files necessary to develop
-applications and plugins for GStreamer, as well as general and API
-documentation.
+applications and plugins for GStreamer.
 
-%package -n gstreamer-tools
-Summary: 	common tools and files for GStreamer streaming media framework
-Group: 		Applications/Multimedia
+%package tools
+Summary: tools for GStreamer streaming media framework.
+Group: Applications/Multimedia
 
-%description -n gstreamer-tools
+%description tools
 GStreamer is a streaming-media framework, based on graphs of filters which
 operate on media data. Applications using this library can do anything
 from real-time sound processing to playing videos, and just about anything
 else media-related.  Its plugin-based architecture means that new data
-types or processing capabilities can be added simply by installing new   
+types or processing capabilities can be added simply by installing new
 plugins.
 
-This package contains wrapper scripts for the command-line tools that work
-with different major/minor versions of GStreamer.
+This package contains the basic command-line tools used for GStreamer, like
+gst-register and gst-launch.  It is split off to allow parallel-installability
+in the future.
 
 %prep
-%setup -q -n gstreamer-%{version}
+%setup -q
+%patch1 -p1 -b .nops
 
-# 0.7.5 tarball was generated with glib 2.3, and the gstmarshal files
-# are included; so delete them to regenerate them.
-rm -f gst/gstmarshal.{c,h}
+# openjade doesn't support xml catalogs, so we have to patch in the right dtd reference
+find -name &quot;*.xml&quot; | xargs grep -l &quot;<A HREF="http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd">http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd</A>&quot; | xargs perl -pi -e 's#<A HREF="http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd#/usr/share/sgml/docbook/xml-dtd-4.2-1.0-24/docbookx.dtd#g">http://www.oasis-open.org/docbook/xml/4.2/docbookx.dtd#/usr/share/sgml/docbook/xml-dtd-4.2-1.0-24/docbookx.dtd#g</A>'
 
+# The nopdf patch touches automake makefile sources
+NOCONFIGURE=1 ./autogen.sh
+
 %build
-%configure \
-  --enable-debug \
-  --with-cachedir=%{_localstatedir}/cache/gstreamer-%{majorminor} \
-  --disable-tests \
-  --disable-examples
 
+## FIXME should re-enable the docs build when it works
+%configure --disable-plugin-builddir --disable-tests --disable-examples \
+	 --with-cachedir=%{_localstatedir}/cache/gstreamer-%{majmin} \
+	--enable-docs-build --with-html-dir=$RPM_BUILD_ROOT%{_datadir}/gtk-doc/html \
+	--enable-debug
+
 make %{?_smp_mflags}
 
 %install  
-rm -rf $RPM_BUILD_ROOT
+[ -n &quot;$RPM_BUILD_ROOT&quot; -a &quot;$RPM_BUILD_ROOT&quot; != / ] &amp;&amp; rm -rf $RPM_BUILD_ROOT
 
-# Install doc temporarily in order to be included later by rpm
-%makeinstall docdir=&quot;`pwd`/installed-doc&quot;
+# build documentation to a different location so it doesn't end up in
+# a gstreamer-devel-(version) dir and doesn't get deleted by %doc scripts
+%makeinstall docdir=$RPM_BUILD_ROOT%{_datadir}/gstreamer-%{majmin}/doc
 
-%find_lang gstreamer-%{majorminor}
-# Clean out files that should not be part of the rpm. 
-mkdir -p $RPM_BUILD_ROOT%{_localstatedir}/cache/gstreamer-%{majorminor}
-rm -f $RPM_BUILD_ROOT%{_libdir}/gstreamer-%{majorminor}/*.la
-rm -f $RPM_BUILD_ROOT%{_libdir}/gstreamer-%{majorminor}/*.a
-rm -f $RPM_BUILD_ROOT%{_libdir}/*.a
-rm -f $RPM_BUILD_ROOT%{_libdir}/*.la
-# Create empty cache directory
-mkdir -p $RPM_BUILD_ROOT%{_localstatedir}/cache/gstreamer-%{majorminor}
+mkdir -p $RPM_BUILD_ROOT%{_localstatedir}/cache/gstreamer-%{majmin}
 
+/bin/rm -f $RPM_BUILD_ROOT%{_libdir}/gstreamer-%{majmin}/*.a
+/bin/rm -f $RPM_BUILD_ROOT%{_libdir}/gstreamer-%{majmin}/*.la
+/bin/rm -f $RPM_BUILD_ROOT%{_libdir}/*.a
+/bin/rm -f $RPM_BUILD_ROOT%{_libdir}/*.la
+/bin/rm -f $RPM_BUILD_ROOT%{_libdir}/libgstmedia-info*.so.0.0.0
+
+%find_lang %{po_package}
+
 %clean
-rm -rf $RPM_BUILD_ROOT
+[ -n &quot;$RPM_BUILD_ROOT&quot; -a &quot;$RPM_BUILD_ROOT&quot; != / ] &amp;&amp; rm -rf $RPM_BUILD_ROOT
 
 %post
 /sbin/ldconfig
-%{register}
+env DISPLAY= %{_bindir}/gst-register-%{majmin} &gt; /dev/null 2&gt; /dev/null
 
-%postun
-/sbin/ldconfig
-rm -rf %{_localstatedir}/cache/gstreamer-%{majorminor} || :
+%postun -p /sbin/ldconfig
 
-%files -f gstreamer-%{majorminor}.lang
-%defattr(-, root, root, -)
-%doc AUTHORS COPYING NEWS README RELEASE TODO REQUIREMENTS DOCBUILDING
-%dir %{_libdir}/gstreamer-%{majorminor}
-%{_libdir}/libgstreamer-%{majorminor}.so.*
-%{_libdir}/libgstcontrol-%{majorminor}.so.*
-%{_libdir}/gstreamer-%{majorminor}/libgstbasicgthreadscheduler.so
-%{_libdir}/gstreamer-%{majorminor}/libgstbasicomegascheduler.so
-%{_libdir}/gstreamer-%{majorminor}/libgstentrygthreadscheduler.so
-%{_libdir}/gstreamer-%{majorminor}/libgstentryomegascheduler.so
-%{_libdir}/gstreamer-%{majorminor}/libgstoptscheduler.so
-%{_libdir}/gstreamer-%{majorminor}/libgstoptomegascheduler.so
-%{_libdir}/gstreamer-%{majorminor}/libgstoptgthreadscheduler.so
-%{_libdir}/gstreamer-%{majorminor}/libgstelements.so
-%{_libdir}/gstreamer-%{majorminor}/libgstgetbits.so
-%{_libdir}/gstreamer-%{majorminor}/libgstspider.so
-%{_libdir}/gstreamer-%{majorminor}/libgstindexers.so
-%{_libdir}/gstreamer-%{majorminor}/libgstbytestream.so
-%{_bindir}/gst-complete-%{majorminor}
-%{_bindir}/gst-compprep-%{majorminor}
-%{_bindir}/gst-feedback-%{majorminor}
-%{_bindir}/gst-inspect-%{majorminor}
-%{_bindir}/gst-launch-%{majorminor}
-%{_bindir}/gst-md5sum-%{majorminor}
-%{_bindir}/gst-register-%{majorminor}
-%{_bindir}/gst-typefind-%{majorminor}
-%{_bindir}/gst-xmlinspect-%{majorminor}
-%{_bindir}/gst-xmllaunch-%{majorminor}
-%{_mandir}/man1/gst-complete-%{majorminor}.*
-%{_mandir}/man1/gst-compprep-%{majorminor}.*
-%{_mandir}/man1/gst-feedback-%{majorminor}.*
-%{_mandir}/man1/gst-inspect-%{majorminor}.*
-%{_mandir}/man1/gst-launch-%{majorminor}.*
-%{_mandir}/man1/gst-md5sum-%{majorminor}.*
-%{_mandir}/man1/gst-register-%{majorminor}.*
-%{_mandir}/man1/gst-typefind-%{majorminor}.*
-%{_mandir}/man1/gst-xmllaunch-%{majorminor}.*
-%dir %{_localstatedir}/cache/gstreamer-%{majorminor}
+%files -f %{po_package}.lang
+%defattr(-, root, root)
+%doc AUTHORS COPYING README TODO ABOUT-NLS REQUIREMENTS DOCBUILDING 
+%dir %{_libdir}/gstreamer-%{majmin}
+%dir %{_localstatedir}/cache/gstreamer-%{majmin}
+%{_libdir}/gstreamer-%{majmin}/*.so*
+%{_libdir}/*.so.*
+%{_bindir}/*-%{majmin}
+%{_mandir}/man1/*-%{majmin}.1.gz
 
-%files -n gstreamer-tools
-%defattr(-, root, root, -)
-%{_bindir}/gst-complete
-%{_bindir}/gst-compprep
-%{_bindir}/gst-feedback
-%{_bindir}/gst-inspect
-%{_bindir}/gst-launch
-%{_bindir}/gst-md5sum
-%{_bindir}/gst-register
-%{_bindir}/gst-typefind
-%{_bindir}/gst-xmlinspect
-%{_bindir}/gst-xmllaunch
-
 %files devel
-%defattr(-, root, root, -)
-%doc installed-doc/*
-%dir %{_includedir}/gstreamer-%{majorminor}
-%dir %{_includedir}/gstreamer-%{majorminor}/gst
-%{_includedir}/gstreamer-%{majorminor}/gst/*.h
-%dir %{_includedir}/gstreamer-%{majorminor}/gst/control
-%{_includedir}/gstreamer-%{majorminor}/gst/control/*.h
-%dir %{_includedir}/gstreamer-%{majorminor}/gst/getbits
-%{_includedir}/gstreamer-%{majorminor}/gst/getbits/getbits.h
-%{_includedir}/gstreamer-%{majorminor}/gst/bytestream/bytestream.h
-%{_libdir}/libgstreamer-%{majorminor}.so
-%{_libdir}/libgstcontrol-%{majorminor}.so
-%{_datadir}/aclocal/gst-element-check-%{majorminor}.m4
-%{_libdir}/pkgconfig/gstreamer-%{majorminor}.pc
-%{_libdir}/pkgconfig/gstreamer-control-%{majorminor}.pc
+%defattr(-, root, root)
+%dir %{_includedir}/%{name}-%{majmin}
+%{_includedir}/%{name}-%{majmin}/*
+%{_libdir}/libgstreamer-%{majmin}.so
+%{_libdir}/libgstcontrol-%{majmin}.so
+%{_libdir}/pkgconfig/gstreamer*.pc
+%{_datadir}/aclocal/*
+%{_datadir}/gtk-doc/html/*
+%{_datadir}/gstreamer-%{majmin}/doc
 
-%doc %{_datadir}/gtk-doc/html/gstreamer-%{majorminor}/*
-%doc %{_datadir}/gtk-doc/html/gstreamer-libs-%{majorminor}/*
+%files tools
+%defattr(-, root, root)
+%{_bindir}/*
+%exclude %{_bindir}/*-%{majmin}
+%{_mandir}/man1/*
+%exclude %{_mandir}/man1/*-%{majmin}.1.gz
 
 %changelog
-* Mon Apr 19 2004 Mattias Saou &lt;<A HREF="http://fresrhrpms.net/">http://fresrhrpms.net/</A>&gt; 0.8.1-0
-- Nothing :-)
+* Wed Oct 13 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.7-3
+- Quote %%configure in changelog (135412)
 
-* Thu Apr 15 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- 0.8.1-0.fdr.1: update for new GStreamer release
+* Thu Oct 07 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.7-2
+- BuildRequire gettext-devel
 
-* Thu Apr 15 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- add entry schedulers, clean up scheduler file section
+* Wed Oct  6 2004 Alexander Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; - 0.8.7-1
+- update to 0.8.7
 
-* Tue Mar 16 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- 0.8.0-0.fdr.1: update for new GStreamer release, renamed base to gstreamer
+* Tue Oct  5 2004 Alexander Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; - 0.8.6-1
+- update to 0.8.6
+- Put the real lib .so symlinks in the -devel package
+- Do not put .so plugins in the -devel package
+- Correct docbook dtd version reference
 
-* Tue Mar 09 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- 0.7.6-0.fdr.1: updated for new GStreamer release, with maj/min set to 0.8
+* Tue Sep 28 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.5-2
+- Move .so symlinks to -devel package
 
-* Mon Mar 08 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- 0.7.5-0.fdr.3: fix postun script
+* Tue Aug 16 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.5-1
+- Update to 0.8.5
 
-* Fri Mar 05 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- 0.7.5-0.fdr.2: new release
+* Tue Jul 26 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.4-1
+- Update to 0.8.4
 
-* Wed Feb 11 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- 0.7.4-0.fdr.1: synchronize with Matthias's package
+* Tue Jul 20 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.3.3-1
+- Update
 
-* Sat Feb 07 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- make the package name gstreamer07 since this is an unstable release
+* Tue Jul 05 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.3-3
+- Another rebuild to placate beehive!
 
-* Wed Feb 04 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- put versioned tools inside base package, and put unversioned tools in tools
+* Tue Jul 05 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.3-2
+- Rebuild to placate beehive
 
-* Mon Dec 01 2003 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- changed documentation buildrequires
+* Wed Jun 23 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.3-1
+- Update to 0.8.3, now that I am convinced it is safe.
+- Remove backported cpufix patch.
+- &quot;cvs remove&quot; a bunch of obsoleted patches.
 
-* Sun Nov 09 2003 Christian Schaller &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Uraeus at gnome.org</A>&gt;
-- Fix spec to handle new bytestream library 
+* Mon Jun 21 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.1-5
+- BuildRequire gettext-devel
 
-* Sun Aug 17 2003 Christian Schaller &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">uraeus at gnome.org</A>&gt;
-- Remove docs build from RPM as the build is broken
-- Fix stuff since more files are versioned now
-- Remove wingo schedulers
-- Remove putbits stuff
+* Mon Jun 21 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.1-4
+- BuildRequire ghostscript
 
-* Sun May 18 2003 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- devhelp files are now generated by gtk-doc, changed accordingly
+* Mon Jun 21 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.1-3
+- Apply register-clobbering patch from upstream CVS.
 
-* Sun Mar 16 2003 Christian F.K. Schaller &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Uraeus at gnome.org</A>&gt;
-- Add gthread scheduler
+* Tue Jun 15 2004 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt; 0.8.1-2
+- rebuilt
 
-* Sat Dec 07 2002 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
-- define majorminor and use it everywhere
-- full parallel installability
+* Mon Apr 15 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.1-1
+- Update to 0.8.1
+- Delete registry patches which have been upstreamed
+- COPYING.LIB is gone
 
-* Tue Nov 05 2002 Christian Schaller &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Uraeus at linuxrising.org</A>&gt;
-- Add optwingo scheduler
-* Sat Oct 12 2002 Christian Schaller &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Uraeus at linuxrising.org</A>&gt;
-- Updated to work better with default RH8 rpm
-- Added missing unspeced files
-- Removed .a and .la files from buildroot
+* Mon Apr 05 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.0-4
+- I have discovered that it is helpful, when adding patches
+  to a package, to actually add the &quot;%patchN&quot; lines.
 
-* Sat Sep 21 2002 Thomas Vander Stichele &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">thomas at apestaart.org</A>&gt;
-- added gst-md5sum
+* Mon Mar 22 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.0-3
+- Add BuildRequires on flex
+- Add patch to avoid calling opendir() on files
 
-* Tue Sep 17 2002 Thomas Vander Stichele &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">thomas at apestaart.org</A>&gt;
-- adding flex to buildrequires
+* Mon Mar 22 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; 0.8.0-2
+- Add patch to avoid setting mtime on registry
 
-* Fri Sep 13 2002 Christian F.K. Schaller &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Uraeus at linuxrising.org</A>&gt;
-- Fixed the schedulers after the renaming
-* Sun Sep 08 2002 Thomas Vander Stichele &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">thomas at apestaart.org</A>&gt;
-- added transfig to the BuildRequires:
+* Tue Mar 16 2004 Alex Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; 0.8.0-1
+- update to 0.8.0
 
+* Wed Mar 10 2004 Alexander Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; 0.7.6-1
+- update to 0.7.6
+
+* Thu Mar  4 2004 Jeremy Katz &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">katzj at redhat.com</A>&gt; - 0.7.5-2
+- fix plugin dir with respect to %%_lib
+
+* Tue Mar 02 2004 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt;
+- rebuilt
+
+* Tue Feb 24 2004 Alexander Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; 0.7.5-1
+- update to 0.7.5
+- clean up specfile some
+- enable docs
+
+* Fri Feb 13 2004 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt;
+- rebuilt
+
+* Wed Feb  4 2004 Bill Nottingham &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">notting at redhat.com</A>&gt; 0.7.3-4
+- fix %%post
+
+* Wed Jan 28 2004 Alexander Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; 0.7.3-3
+- add s390 patch
+
+* Tue Jan 27 2004 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt; 0.7.3-1
+- new version
+
+* Thu Sep 11 2003 Alexander Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; 0.6.3-1
+- Update to 0.6.3 (gnome 2.4 final)
+
+* Tue Aug 19 2003 Alexander Larsson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">alexl at redhat.com</A>&gt; 0.6.2-6
+- 0.6.2
+
+* Wed Jun 04 2003 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt;
+- rebuilt
+
+* Mon Feb 17 2003 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt; 0.6.0-5
+- ppc64 patch
+
+* Wed Feb 12 2003 Bill Nottingham &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">notting at redhat.com</A>&gt; 0.6.0-4
+- fix group
+
+* Tue Feb 11 2003 Bill Nottingham &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">notting at redhat.com</A>&gt; 0.6.0-3
+- prereq, not require, gstreamer-tools
+
+* Tue Feb 11 2003 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt; 0.6.0-2
+- unset the DISPLAY when running gst-register
+
+* Mon Feb  3 2003 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt; 0.6.0-1
+- yes it is needed.  Readding
+
+* Sat Feb 01 2003 Florian La Roche &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">Florian.LaRoche at redhat.de</A>&gt;
+- remove &quot;tools&quot; sub-rpm, this is not needed at all
+
+* Thu Jan 30 2003 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt; 0.5.2-7
+- stopped using %%configure so we need to pass in all the args
+
+* Mon Jan 27 2003 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt;
+- remove -Werror explicitly as the configure macro isn't working.
+
+* Wed Jan 22 2003 Tim Powers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">timp at redhat.com</A>&gt;
+- rebuilt
+
+* Thu Dec 19 2002 Elliot Lee &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">sopwith at redhat.com</A>&gt; 0.5.0-10
+- Add patch1 to fix C++ plugins on ia64
+
+* Wed Dec 18 2002 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt;
+- %post -p was wrong
+
+* Tue Dec 17 2002 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt; 0.5.0-7
+- explicitly add %{_libdir}/libgstreamer-{majmin}.so
+- explicitly add %{_libdir}/libgstcontrol-{majmin}.so
+
+* Mon Dec 16 2002 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt;
+- bump release
+
+* Fri Dec 13 2002 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt;
+- move .so files out of -devel
+
+* Tue Dec 10 2002 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt;
+- new version 0.5.0
+- require docbook-style-xsl
+- add gstreamer-tools package too
+- New patch to use the right docbook prefix.
+
+* Tue Dec 10 2002 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt;
+- downgrade to a release candidate.  Should work better on other arches
+- build without Werror
+
+* Mon Dec  9 2002 Jonathan Blandford &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">jrb at redhat.com</A>&gt;
+- update to new version.  Remove ExcludeArch
+
+* Tue Dec  3 2002 Havoc Pennington &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">hp at redhat.com</A>&gt;
+- excludearch some arches
+
+* Mon Dec  2 2002 Havoc Pennington &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">hp at redhat.com</A>&gt;
+- import into CVS and build &quot;officially&quot;
+- use smp_mflags
+- temporarily disable docs build, doesn't seem to work
+
+* Thu Nov  7 2002 Jeremy Katz &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">katzj at redhat.com</A>&gt;
+- 0.4.2
+
+* Mon Sep 23 2002 Jeremy Katz &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">katzj at redhat.com</A>&gt;
+- 0.4.1
+
+* Sun Sep 22 2002 Jeremy Katz &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">katzj at redhat.com</A>&gt;
+- minor cleanups
+
 * Sat Jun 22 2002 Thomas Vander Stichele &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">thomas at apestaart.org</A>&gt;
 - moved header location
 

Modified: trunk/rpms/gstreamer-ffmpeg/gstreamer-ffmpeg.spec
===================================================================
--- trunk/rpms/gstreamer-ffmpeg/gstreamer-ffmpeg.spec	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer-ffmpeg/gstreamer-ffmpeg.spec	2004-10-21 19:35:22 UTC (rev 2296)
@@ -5,7 +5,7 @@
 %define		register	%{_bindir}/gst-register-%{majorminor} &gt; /dev/null 2&gt;&amp;1 || :
 
 Name: 		%{gstreamer}-ffmpeg
-Version: 	0.8.1
+Version: 	0.8.2
 Release: 	0
 Summary: 	GStreamer FFmpeg-based streaming media framework plugin
 
@@ -74,6 +74,9 @@
 %{_libdir}/gstreamer-%{majorminor}/libgstffmpeg.so
 
 %changelog
+* Wed Oct 20 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.2-0
+- Update to 0.8.2.
+
 * Thu Jul 29 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 0.8.1-0
 - Update to 0.8.1.
 

Deleted: trunk/rpms/gstreamer-plugins/gst-fionread.m4
===================================================================
--- trunk/rpms/gstreamer-plugins/gst-fionread.m4	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer-plugins/gst-fionread.m4	2004-10-21 19:35:22 UTC (rev 2296)
@@ -1,42 +0,0 @@
-AC_DEFUN([GST_CHECK_FIONREAD], [
-
-  AC_MSG_CHECKING(for FIONREAD in sys/ioctl.h)
-  AC_CACHE_VAL(GST_FIONREAD_IN_SYS_IOCTL, [
-    AC_TRY_COMPILE([
-#include &lt;sys/types.h&gt;
-#include &lt;sys/ioctl.h&gt;
-], [
-int x = FIONREAD;
-if ( x )
-  return 0;
-    ], GST_FIONREAD_IN_SYS_IOCTL=&quot;yes&quot;,GST_FIONREAD_IN_SYS_IOCTL=&quot;no&quot;)
-  ])
-
-  AC_MSG_RESULT($GST_FIONREAD_IN_SYS_IOCTL)
-
-  if test &quot;$GST_FIONREAD_IN_SYS_IOCTL&quot; = &quot;yes&quot;; then
-    AC_DEFINE([HAVE_FIONREAD_IN_SYS_IOCTL], 1, [FIONREAD ioctl found in sys/ioclt.h])
-
-  else
-
-    AC_MSG_CHECKING(for FIONREAD in sys/filio.h)
-    AC_CACHE_VAL(GST_FIONREAD_IN_SYS_FILIO, [
-      AC_TRY_COMPILE([
-  #include &lt;sys/types.h&gt;
-  #include &lt;sys/filio.h&gt;
-  ], [
-  int x = FIONREAD;
-  if ( x )
-    return 0;
-      ], GST_FIONREAD_IN_SYS_FILIO=&quot;yes&quot;,GST_FIONREAD_IN_SYS_FILIO=&quot;no&quot;)
-    ])
-
-    AC_MSG_RESULT($GST_FIONREAD_IN_SYS_FILIO)
-
-    if test &quot;$GST_FIONREAD_IN_SYS_FILIO&quot; = &quot;yes&quot;; then   
-      AC_DEFINE([HAVE_FIONREAD_IN_SYS_FILIO], 1, [FIONREAD ioctl found in sys/filio.h])
-    fi
-
-  fi
-
-])

Deleted: trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.2-alsa-fixes.patch
===================================================================
--- trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.2-alsa-fixes.patch	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.2-alsa-fixes.patch	2004-10-21 19:35:22 UTC (rev 2296)
@@ -1,690 +0,0 @@
---- gst-plugins-0.8.2/ext/alsa/gstalsa.c	2004-06-23 08:31:58.000000000 -0400
-+++ gst-plugins/ext/alsa/gstalsa.c	2004-07-14 12:13:01.000000000 -0400
-@@ -1085,7 +1085,8 @@
-       if (!(GST_FLAG_IS_SET (element, GST_ALSA_RUNNING) ||
-               gst_alsa_start_audio (this)))
-         return GST_STATE_FAILURE;
--      this-&gt;transmitted = 0;
-+      this-&gt;played = 0;
-+      this-&gt;captured = 0;
-       break;
-     case GST_STATE_PAUSED_TO_PLAYING:
-       if (snd_pcm_state (this-&gt;handle) == SND_PCM_STATE_PAUSED) {
-@@ -1130,7 +1131,7 @@
-       break;
- 
-     default:
--      g_assert_not_reached ();
-+      break;
-   }
- 
-   if (GST_ELEMENT_CLASS (parent_class)-&gt;change_state)
-@@ -1212,6 +1213,7 @@
-       ERROR_CHECK (snd_pcm_prepare (this-&gt;handle), &quot;error preparing: %s&quot;);
-     case SND_PCM_STATE_SUSPENDED:
-     case SND_PCM_STATE_PREPARED:
-+      this-&gt;captured = 0;
-       ERROR_CHECK (snd_pcm_start (this-&gt;handle), &quot;error starting playback: %s&quot;);
-       break;
-     case SND_PCM_STATE_PAUSED:
-@@ -1249,8 +1251,6 @@
-     gettimeofday (&amp;now, 0);
-     snd_pcm_status_get_trigger_tstamp (status, &amp;tstamp);
-     timersub (&amp;now, &amp;tstamp, &amp;diff);
--    GST_INFO_OBJECT (this, &quot;alsa: xrun of at least %.3f msecs&quot;,
--        diff.tv_sec * 1000 + diff.tv_usec / 1000.0);
- 
-     /* if we're allowed to recover, ... */
-     if (this-&gt;autorecover) {
-@@ -1264,12 +1264,11 @@
-         this-&gt;period_count *= 2;
-       }
-     }
--  }
--
--  if (!(gst_alsa_stop_audio (this) &amp;&amp; gst_alsa_start_audio (this))) {
--    GST_ELEMENT_ERROR (this, RESOURCE, FAILED, (NULL),
--        (&quot;Error restarting audio after xrun&quot;));
--    return FALSE;
-+    if (!(gst_alsa_stop_audio (this) &amp;&amp; gst_alsa_start_audio (this))) {
-+      GST_ELEMENT_ERROR (this, RESOURCE, FAILED, (NULL),
-+          (&quot;Error restarting audio after xrun&quot;));
-+      return FALSE;
-+    }
-   }
- 
-   return TRUE;
-@@ -1580,6 +1579,7 @@
-       break;
-   }
- 
-+  GST_DEBUG (&quot;stopped alsa&quot;);
-   GST_FLAG_UNSET (this, GST_ALSA_RUNNING);
-   return TRUE;
- }
---- gst-plugins-0.8.2/ext/alsa/gstalsa.h	2004-06-23 08:31:58.000000000 -0400
-+++ gst-plugins/ext/alsa/gstalsa.h	2004-07-14 12:13:01.000000000 -0400
-@@ -156,11 +156,12 @@
- 
-   /* clocking */
-   GstAlsaClock *		clock;		/* our provided clock */
--  snd_pcm_uframes_t		transmitted; 	/* samples transmitted since last sync 
-+  snd_pcm_uframes_t		played; 	/* samples transmitted since last sync 
- 						   This thing actually is our master clock.
- 						   We will event insert silent samples or
- 						   drop some to sync to incoming timestamps.
- 						 */
-+  snd_pcm_uframes_t		captured;
-   GstClockTime			max_discont;	/* max difference between current
-   						   playback timestamp and buffers timestamps
- 						 */
---- gst-plugins-0.8.2/ext/alsa/gstalsaplugin.c	2004-06-23 08:31:58.000000000 -0400
-+++ gst-plugins/ext/alsa/gstalsaplugin.c	2004-07-14 12:13:02.000000000 -0400
-@@ -34,6 +34,7 @@
- gst_alsa_error_wrapper (const char *file, int line, const char *function,
-     int err, const char *fmt, ...)
- {
-+#ifndef GST_DISABLE_GST_DEBUG
-   va_list args;
-   gchar *str;
- 
-@@ -47,6 +48,7 @@
-       &quot;alsalib error: %s%s%s&quot;, str, err ? &quot;: &quot; : &quot;&quot;,
-       err ? snd_strerror (err) : &quot;&quot;);
-   g_free (str);
-+#endif
- }
- 
- static gboolean
---- gst-plugins-0.8.2/ext/alsa/gstalsasink.c	2004-06-23 09:19:48.000000000 -0400
-+++ gst-plugins/ext/alsa/gstalsasink.c	2004-07-14 12:13:02.000000000 -0400
-@@ -160,18 +160,21 @@
- static inline void
- gst_alsa_sink_flush_one_pad (GstAlsaSink * sink, gint i)
- {
-+  GST_DEBUG_OBJECT (sink, &quot;flushing pad %d&quot;, i);
-   switch (sink-&gt;behaviour[i]) {
-     case 0:
--      if (sink-&gt;buf[i])
--        gst_data_unref (GST_DATA (sink-&gt;buf[i]));
--      sink-&gt;buf[i] = NULL;
--      sink-&gt;data[i] = NULL;
-+      if (sink-&gt;gst_data[i]) {
-+        GST_DEBUG_OBJECT (sink, &quot;unreffing gst data %p&quot;, sink-&gt;gst_data[i]);
-+        gst_data_unref (GST_DATA (sink-&gt;gst_data[i]));
-+      }
-+      sink-&gt;gst_data[i] = NULL;
-+      sink-&gt;buf_data[i] = NULL;
-       sink-&gt;behaviour[i] = 0;
-       sink-&gt;size[i] = 0;
-       break;
-     case 1:
--      g_free (sink-&gt;data[i]);
--      sink-&gt;data[i] = NULL;
-+      g_free (sink-&gt;buf_data[i]);
-+      sink-&gt;buf_data[i] = NULL;
-       sink-&gt;behaviour[i] = 0;
-       sink-&gt;size[i] = 0;
-       break;
-@@ -196,9 +199,14 @@
- gst_alsa_sink_check_event (GstAlsaSink * sink, gint pad_nr)
- {
-   gboolean cont = TRUE;
--  GstEvent *event = GST_EVENT (sink-&gt;buf[pad_nr]);
-+  GstEvent *event;
-   GstAlsa *this = GST_ALSA (sink);
- 
-+  /* we get the event from our internal buffer and clear the internal one */
-+  event = GST_EVENT (sink-&gt;gst_data[pad_nr]);
-+  sink-&gt;gst_data[pad_nr] = 0;
-+  GST_LOG_OBJECT (sink, &quot;checking event %p of type %d on sink pad %d&quot;,
-+      event, GST_EVENT_TYPE (event), pad_nr);
-   if (event) {
-     switch (GST_EVENT_TYPE (event)) {
-       case GST_EVENT_EOS:
-@@ -217,16 +225,18 @@
-           break;
-         }
-         delay = (this-&gt;format == NULL) ? 0 :
--            GST_SECOND * this-&gt;transmitted / this-&gt;format-&gt;rate -
-+            GST_SECOND * this-&gt;played / this-&gt;format-&gt;rate -
-             gst_alsa_sink_get_time (this);
-         if (gst_event_discont_get_value (event, GST_FORMAT_TIME, &amp;value)) {
--          gst_element_set_time_delay (GST_ELEMENT (this), MIN (value, delay), delay);
--        } else if (this-&gt;format &amp;&amp;
--            (gst_event_discont_get_value (event, GST_FORMAT_DEFAULT, &amp;value) ||
--                gst_event_discont_get_value (event, GST_FORMAT_BYTES,
-+          gst_element_set_time_delay (GST_ELEMENT (this), value,
-+              MIN (value, delay));
-+        } else if (this-&gt;format
-+            &amp;&amp; (gst_event_discont_get_value (event, GST_FORMAT_DEFAULT, &amp;value)
-+                || gst_event_discont_get_value (event, GST_FORMAT_BYTES,
-                     &amp;value))) {
-           value = gst_alsa_samples_to_timestamp (this, value);
--          gst_element_set_time_delay (GST_ELEMENT (this), MIN (value, delay), delay);
-+          gst_element_set_time_delay (GST_ELEMENT (this), value, MIN (value,
-+                  delay));
-         } else {
-           GST_WARNING_OBJECT (this,
-               &quot;couldn't extract time from discont event. Bad things might happen!&quot;);
-@@ -239,8 +249,10 @@
-             GST_EVENT_TYPE (event));
-         break;
-     }
-+    GST_LOG_OBJECT (sink, &quot;unreffing event %p of type %d with refcount %d&quot;,
-+        event, GST_EVENT_TYPE (event), GST_DATA_REFCOUNT (event));
-     gst_event_unref (event);
--    sink-&gt;buf[pad_nr] = NULL;
-+    sink-&gt;gst_data[pad_nr] = NULL;
-   } else {
-     /* the element at the top of the chain did not emit an event. */
-     g_assert_not_reached ();
-@@ -264,14 +276,14 @@
-   if (((GstElement *) this)-&gt;numpads == 1) {
-     /* interleaved */
-     for (i = 0; i &lt; this-&gt;format-&gt;channels; i++) {
--      src[i].addr = sink-&gt;data[0];
-+      src[i].addr = sink-&gt;buf_data[0];
-       src[i].first = i * width;
-       src[i].step = this-&gt;format-&gt;channels * width;
-     }
-   } else {
-     /* noninterleaved */
-     for (i = 0; i &lt; this-&gt;format-&gt;channels; i++) {
--      src[i].addr = sink-&gt;data[i];
-+      src[i].addr = sink-&gt;buf_data[i];
-       src[i].first = 0;
-       src[i].step = width;
-     }
-@@ -307,11 +319,11 @@
- 
-   if (((GstElement *) this)-&gt;numpads == 1) {
-     /* interleaved */
--    err = snd_pcm_writei (this-&gt;handle, sink-&gt;data[0], *avail);
-+    err = snd_pcm_writei (this-&gt;handle, sink-&gt;buf_data[0], *avail);
-   } else {
-     /* noninterleaved */
-     for (i = 0; i &lt; this-&gt;format-&gt;channels; i++) {
--      channels[i] = sink-&gt;data[i];
-+      channels[i] = sink-&gt;buf_data[i];
-     }
-     err = snd_pcm_writen (this-&gt;handle, channels, *avail);
-   }
-@@ -352,43 +364,54 @@
-     }
- 
-     /* check how many bytes we still have in all our bytestreams */
--    /* initialize this value to a somewhat sane state, we might alloc this much data below (which would be a bug, but who knows)... */
-+    /* initialize this value to a somewhat sane state, we might alloc
-+     * this much data below (which would be a bug, but who knows)... */
-     bytes = this-&gt;period_size * this-&gt;period_count * element-&gt;numpads * 8;      /* must be &gt; max sample size in bytes */
-     for (i = 0; i &lt; element-&gt;numpads; i++) {
-+      GstBuffer *buf;
-+
-       g_assert (this-&gt;pad[i] != NULL);
-       while (sink-&gt;size[i] == 0) {
--        if (!sink-&gt;buf[i])
--          sink-&gt;buf[i] = GST_BUFFER (gst_pad_pull (this-&gt;pad[i]));
--        if (GST_IS_EVENT (sink-&gt;buf[i])) {
-+        if (!sink-&gt;gst_data[i]) {
-+          sink-&gt;gst_data[i] = gst_pad_pull (this-&gt;pad[i]);
-+          GST_LOG_OBJECT (sink, &quot;pulled data %p from pad %d&quot;,
-+              sink-&gt;gst_data[i], i);
-+        }
-+
-+        if (GST_IS_EVENT (sink-&gt;gst_data[i])) {
-+          GST_LOG_OBJECT (sink, &quot;pulled data %p is an event, checking&quot;,
-+              sink-&gt;gst_data[i]);
-           if (gst_alsa_sink_check_event (sink, i))
-             continue;
-           return;
-         }
--        /* caps nego failed somewhere */
-+        /* it's a buffer */
-+        g_return_if_fail (GST_IS_BUFFER (sink-&gt;gst_data[i]));
-+        buf = GST_BUFFER (sink-&gt;gst_data[i]);
-+        /* check if caps nego failed somewhere */
-         if (this-&gt;format == NULL) {
-           GST_ELEMENT_ERROR (this, CORE, NEGOTIATION, (NULL),
-               (&quot;ALSA format not negotiated&quot;));
-         }
--        samplestamp =
--            gst_alsa_timestamp_to_samples (this,
--            GST_BUFFER_TIMESTAMP (sink-&gt;buf[i]));
-+        samplestamp = gst_alsa_timestamp_to_samples (this,
-+            GST_BUFFER_TIMESTAMP (buf));
-         max_discont = gst_alsa_timestamp_to_samples (this, this-&gt;max_discont);
-         /* optimization: check if we're using our own clock
--         * This optimization is important because if we're using our own clock 
--         * gst_element_get_time calls snd_pcm_delay and the following code assumes
--         * that both calls return the same value. However they can be wildly 
--         * different, since snd_pcm_delay goes deep into the kernel.
-+         * This optimization is important because if we're using our own clock
-+         * gst_element_get_time calls snd_pcm_delay and the following code
-+         * assumes that both calls return the same value. However they can be
-+         * wildly different, since snd_pcm_delay goes deep into the kernel.
-          */
-         if (gst_element_get_clock (element) == GST_CLOCK (this-&gt;clock)) {
--          /* FIXME: this is ugly because of the variables it uses but I don't know a 
--           * better way to get this info */
-+          /* FIXME: this is ugly because of the variables it uses but I
-+           * don't know a better way to get this info */
-           if (element-&gt;base_time &gt; this-&gt;clock-&gt;start_time) {
-             expected =
--                this-&gt;transmitted - gst_alsa_timestamp_to_samples (this,
-+                this-&gt;played - gst_alsa_timestamp_to_samples (this,
-                 element-&gt;base_time - this-&gt;clock-&gt;start_time);
-           } else {
-             expected =
--                this-&gt;transmitted + gst_alsa_timestamp_to_samples (this,
-+                this-&gt;played + gst_alsa_timestamp_to_samples (this,
-                 this-&gt;clock-&gt;start_time - element-&gt;base_time);
-           }
-         } else {
-@@ -402,13 +425,13 @@
-         }
-         sample_diff = samplestamp - expected;
- 
--        if ((!GST_BUFFER_TIMESTAMP_IS_VALID (sink-&gt;buf[i])) ||
-+        if ((!GST_BUFFER_TIMESTAMP_IS_VALID (buf)) ||
-             (-max_discont &lt;= sample_diff &amp;&amp; sample_diff &lt;= max_discont)) {
- 
-           /* difference between expected and current is &lt; GST_ALSA_DEVIATION */
-         no_difference:
--          sink-&gt;size[i] = sink-&gt;buf[i]-&gt;size;
--          sink-&gt;data[i] = sink-&gt;buf[i]-&gt;data;
-+          sink-&gt;size[i] = GST_BUFFER_SIZE (buf);
-+          sink-&gt;buf_data[i] = GST_BUFFER_DATA (buf);
-           sink-&gt;behaviour[i] = 0;
-         } else if (sample_diff &gt; 0) {
-           /* there are empty samples in front of us, fill them with silence */
-@@ -420,28 +443,28 @@
-           GST_INFO_OBJECT (this,
-               &quot;Allocating %d bytes (%ld samples) now to resync: sample %lu expected, but got %ld&quot;,
-               size, MIN (bytes, sample_diff), expected, samplestamp);
--          sink-&gt;data[i] = g_try_malloc (size);
--          if (!sink-&gt;data[i]) {
-+          sink-&gt;buf_data[i] = g_try_malloc (size);
-+          if (!sink-&gt;buf_data[i]) {
-             GST_WARNING_OBJECT (this,
-                 &quot;error allocating %d bytes, buffers unsynced now.&quot;, size);
-             goto no_difference;
-           }
-           sink-&gt;size[i] = size;
-           if (0 != snd_pcm_format_set_silence (this-&gt;format-&gt;format,
--                  sink-&gt;data[i], samples)) {
-+                  sink-&gt;buf_data[i], samples)) {
-             GST_WARNING_OBJECT (this,
-                 &quot;error silencing buffer, enjoy the noise.&quot;);
-           }
-           sink-&gt;behaviour[i] = 1;
--        } else if (gst_alsa_samples_to_bytes (this,
--                -sample_diff) &gt;= sink-&gt;buf[i]-&gt;size) {
-+        } else if (gst_alsa_samples_to_bytes (this, -sample_diff) &gt;=
-+            GST_BUFFER_SIZE (buf)) {
-           GST_INFO_OBJECT (this,
-               &quot;Skipping %lu samples to resync (complete buffer): sample %lu expected, but got %ld&quot;,
--              gst_alsa_bytes_to_samples (this, sink-&gt;buf[i]-&gt;size), expected,
-+              gst_alsa_bytes_to_samples (this, GST_BUFFER_SIZE (buf)), expected,
-               samplestamp);
-           /* this buffer is way behind */
--          gst_buffer_unref (sink-&gt;buf[i]);
--          sink-&gt;buf[i] = NULL;
-+          gst_buffer_unref (buf);
-+          sink-&gt;gst_data[i] = NULL;
-           continue;
-         } else if (sample_diff &lt; 0) {
-           gint difference = gst_alsa_samples_to_bytes (this, -sample_diff);
-@@ -450,8 +473,8 @@
-               &quot;Skipping %lu samples to resync: sample %lu expected, but got %ld&quot;,
-               (gulong) - sample_diff, expected, samplestamp);
-           /* this buffer is only a bit behind */
--          sink-&gt;size[i] = sink-&gt;buf[i]-&gt;size - difference;
--          sink-&gt;data[i] = sink-&gt;buf[i]-&gt;data + difference;
-+          sink-&gt;size[i] = GST_BUFFER_SIZE (buf) - difference;
-+          sink-&gt;buf_data[i] = GST_BUFFER_DATA (buf) + difference;
-           sink-&gt;behaviour[i] = 0;
-         } else {
-           g_assert_not_reached ();
-@@ -477,13 +500,14 @@
-         return;
-     }
- 
--    /* FIXME: lotsa stuff can have happened while fetching data. Do we need to check something? */
-+    /* FIXME: lotsa stuff can have happened while fetching data.
-+     * Do we need to check something? */
- 
-     /* put this data into alsa */
-     if ((copied = this-&gt;transmit (this, &amp;avail)) &lt; 0)
-       return;
-     /* update our clock */
--    this-&gt;transmitted += copied;
-+    this-&gt;played += copied;
-     /* flush the data */
-     bytes = gst_alsa_samples_to_bytes (this, copied);
-     for (i = 0; i &lt; element-&gt;numpads; i++) {
-@@ -493,7 +517,7 @@
-       }
-       g_assert (sink-&gt;size[i] &gt; 0);
-       if (sink-&gt;behaviour[i] != 1)
--        sink-&gt;data[i] += bytes;
-+        sink-&gt;buf_data[i] += bytes;
-     }
-   }
- 
-@@ -524,7 +548,7 @@
-     case GST_STATE_READY_TO_NULL:
-       break;
-     default:
--      g_assert_not_reached ();
-+      break;
-   }
- 
-   if (GST_ELEMENT_CLASS (sink_parent_class)-&gt;change_state)
-@@ -541,11 +565,11 @@
-   if (!this-&gt;format)
-     return 0;
-   if (snd_pcm_delay (this-&gt;handle, &amp;delay) != 0) {
--    return this-&gt;transmitted / this-&gt;format-&gt;rate;
-+    return this-&gt;played / this-&gt;format-&gt;rate;
-   }
--  if (this-&gt;transmitted &lt;= delay) {
-+  if (this-&gt;played &lt;= delay) {
-     return 0;
-   }
- 
--  return GST_SECOND * (this-&gt;transmitted - delay) / this-&gt;format-&gt;rate;
-+  return GST_SECOND * (this-&gt;played - delay) / this-&gt;format-&gt;rate;
- }
---- gst-plugins-0.8.2/ext/alsa/gstalsasink.h	2004-06-23 08:31:58.000000000 -0400
-+++ gst-plugins/ext/alsa/gstalsasink.h	2004-07-14 12:13:02.000000000 -0400
-@@ -39,9 +39,9 @@
-   GstAlsaMixer parent;
- 
-   /* array of the data on the channels */
--  guint8    *data[GST_ALSA_MAX_TRACKS];      /* pointer into buffer */
-+  guint8    *buf_data[GST_ALSA_MAX_TRACKS];  /* pointer into buffer */
-   guint      size[GST_ALSA_MAX_TRACKS];      /* sink: bytes left in buffer */
--  GstBuffer *buf[GST_ALSA_MAX_TRACKS];       /* current buffer */
-+  GstData   *gst_data[GST_ALSA_MAX_TRACKS];  /* current data */
-   guint      behaviour[GST_ALSA_MAX_TRACKS]; /* 0 = data points into buffer (so unref when size == 0),
-                                                   1 = data should be freed, use buffer after that */
- };
---- gst-plugins-0.8.2/ext/alsa/gstalsasrc.c	2004-06-23 11:43:53.000000000 -0400
-+++ gst-plugins/ext/alsa/gstalsasrc.c	2004-07-14 12:13:02.000000000 -0400
-@@ -43,7 +43,6 @@
- static void gst_alsa_src_loop (GstElement * element);
- static void gst_alsa_src_flush (GstAlsaSrc * src);
- static GstElementStateReturn gst_alsa_src_change_state (GstElement * element);
--
- static GstClockTime gst_alsa_src_get_time (GstAlsa * this);
- 
- static GstAlsa *src_parent_class = NULL;
-@@ -118,6 +117,7 @@
- 
-   element_class-&gt;change_state = gst_alsa_src_change_state;
- }
-+
- static void
- gst_alsa_src_init (GstAlsaSrc * src)
- {
-@@ -134,8 +134,53 @@
-   gst_object_ref (GST_OBJECT (this-&gt;clock));
-   gst_object_sink (GST_OBJECT (this-&gt;clock));
- 
-+  src-&gt;status = NULL;
-   gst_element_set_loop_function (GST_ELEMENT (this), gst_alsa_src_loop);
- }
-+
-+/* alsasrc provides a clock starting from the trigger tstamp
-+ * (last play/pause/stop), and added to that the time for the currently
-+ * processed samples, and the current fill state of the buffer */
-+static GstClockTime
-+gst_alsa_src_get_time (GstAlsa * this)
-+{
-+  struct timeval trigger;
-+  snd_pcm_sframes_t delay;
-+  GstClockTime gct_trigger, gct_captured, gct_delay, retval =
-+      GST_CLOCK_TIME_NONE;
-+  int err;
-+  GstAlsaSrc *src = GST_ALSA_SRC (this);
-+
-+  GTimeVal now;
-+
-+  g_get_current_time (&amp;now);
-+  return GST_TIMEVAL_TO_TIME (now);
-+
-+  if (src-&gt;status == NULL)
-+    return GST_CLOCK_TIME_NONE;
-+
-+  if ((err = snd_pcm_status (this-&gt;handle, src-&gt;status)) &lt; 0) {
-+    GST_ERROR_OBJECT (this, &quot;status error: %s&quot;, snd_strerror (err));
-+    return GST_CLOCK_TIME_NONE;
-+  }
-+
-+  /* trigger tstamp is the last time the device got started/stopped/paused */
-+  snd_pcm_status_get_trigger_tstamp (src-&gt;status, &amp;trigger);
-+  gct_trigger = GST_TIMEVAL_TO_TIME (trigger);
-+
-+  /* captured is the number of samples already sent out as buffers */
-+  gct_captured = gst_alsa_samples_to_timestamp (this, this-&gt;captured);
-+
-+  /* delay is the number of samples in the buffer not yet processed */
-+  delay = snd_pcm_status_get_delay (src-&gt;status);
-+  gct_delay = gst_alsa_samples_to_timestamp (this, delay);
-+
-+  retval = gct_trigger + gct_captured + gct_delay;
-+  GST_LOG_OBJECT (src, &quot;returning clock time of %&quot; GST_TIME_FORMAT,
-+      GST_TIME_ARGS (retval));
-+  return retval;
-+}
-+
- static int
- gst_alsa_src_mmap (GstAlsa * this, snd_pcm_sframes_t * avail)
- {
-@@ -311,6 +356,30 @@
-   return FALSE;
- }
- 
-+inline snd_pcm_sframes_t
-+gst_alsa_src_update_avail (GstAlsa * this)
-+{
-+  snd_pcm_sframes_t avail = -1;
-+
-+  while (avail &lt; 0) {
-+    avail = snd_pcm_avail_update (this-&gt;handle);
-+    if (avail &lt; 0) {
-+      if (avail == -EPIPE) {
-+        gst_alsa_xrun_recovery (this);
-+      } else {
-+        GST_WARNING_OBJECT (this, &quot;unknown ALSA avail_update return value (%d)&quot;,
-+            (int) avail);
-+      }
-+    }
-+    if (snd_pcm_state (this-&gt;handle) != SND_PCM_STATE_RUNNING) {
-+      if (!gst_alsa_start (this)) {
-+        return 0;
-+      }
-+    }
-+  }
-+  return avail;
-+}
-+
- /* we transmit buffers of period_size frames */
- static void
- gst_alsa_src_loop (GstElement * element)
-@@ -331,22 +400,7 @@
- 
-   /* the cast to long is explicitly needed;
-    * with avail = -32 and period_size = 100, avail &lt; period_size is false */
--  while ((avail = gst_alsa_update_avail (this)) &lt; (long) this-&gt;period_size) {
--    if (avail == -EPIPE) {
--      GST_DEBUG_OBJECT (this, &quot;got EPIPE when checking for available bytes&quot;);
--      continue;
--    }
--    if (avail &lt; 0) {
--      GST_DEBUG_OBJECT (this,
--          &quot;got error %s (%d) when checking for available bytes&quot;,
--          snd_strerror (avail));
--      return;
--    }
--    if (snd_pcm_state (this-&gt;handle) != SND_PCM_STATE_RUNNING) {
--      if (!gst_alsa_start (this))
--        return;
--      continue;
--    };
-+  while ((avail = gst_alsa_src_update_avail (this)) &lt; this-&gt;period_size) {
-     /* wait */
-     if (gst_alsa_pcm_wait (this) == FALSE)
-       return;
-@@ -359,28 +413,73 @@
-     src-&gt;buf[i] =
-         gst_buffer_new_and_alloc (gst_alsa_samples_to_bytes (this, avail));
-   }
-+
-   /* fill buffer with data */
-   if ((copied = this-&gt;transmit (this, &amp;avail)) &lt;= 0)
-     return;
--  /* push the buffers out and let them have fun */
--  for (i = 0; i &lt; element-&gt;numpads; i++) {
--    GstBuffer *buf;
- 
--    if (!src-&gt;buf[i])
--      return;
--    if (copied != this-&gt;period_size)
--      GST_BUFFER_SIZE (src-&gt;buf[i]) = gst_alsa_samples_to_bytes (this, copied);
--    GST_BUFFER_TIMESTAMP (src-&gt;buf[i]) =
--        gst_alsa_samples_to_timestamp (this, this-&gt;transmitted);
--    GST_BUFFER_DURATION (src-&gt;buf[i]) =
--        gst_alsa_samples_to_timestamp (this, copied);
--    GST_BUFFER_OFFSET (src-&gt;buf[i]) = this-&gt;transmitted;
--    GST_BUFFER_OFFSET_END (src-&gt;buf[i]) = this-&gt;transmitted + copied;
--    buf = src-&gt;buf[i];
--    src-&gt;buf[i] = NULL;
--    gst_pad_push (this-&gt;pad[i], GST_DATA (buf));
-+  {
-+    gint outsize;
-+    GstClockTime outtime, outdur, outreal, outideal, startalsa, outalsa;
-+    gint64 diff, offset;
-+    struct timeval tstamp;
-+    int err;
-+
-+
-+    if ((err = snd_pcm_status (this-&gt;handle, src-&gt;status)) &lt; 0)
-+      GST_ERROR_OBJECT (this, &quot;status error: %s&quot;, snd_strerror (err));
-+
-+    offset = this-&gt;captured;
-+
-+    /* duration of buffer is just the time of the samples */
-+    outdur = gst_alsa_samples_to_timestamp (this, copied);
-+
-+    /* The real capture time is the time of the clock minus the duration and
-+     * what is now in the buffer */
-+    outreal = gst_element_get_time (GST_ELEMENT (this)) - outdur;
-+    /* ideal time is counting samples */
-+    outideal = gst_alsa_samples_to_timestamp (this, offset);
-+
-+    snd_pcm_status_get_trigger_tstamp (src-&gt;status, &amp;tstamp);
-+    startalsa = GST_TIMEVAL_TO_TIME (tstamp) - element-&gt;base_time;
-+    outalsa = startalsa + outideal;
-+
-+    outsize = gst_alsa_samples_to_bytes (this, copied);
-+    outtime = GST_CLOCK_TIME_NONE;
-+
-+    if (GST_ELEMENT_CLOCK (this)) {
-+      if (GST_CLOCK (GST_ALSA (this)-&gt;clock) == GST_ELEMENT_CLOCK (this)) {
-+        outtime = outalsa;
-+        diff = outideal - outreal;
-+        GST_DEBUG_OBJECT (this, &quot;ideal %lld, real %lld, diff %lld\n&quot;, outideal,
-+            outreal, diff);
-+        offset = gst_alsa_timestamp_to_samples (this, outtime);
-+      } else {
-+        outtime = outreal;
-+        offset = gst_alsa_timestamp_to_samples (this, outtime);
-+      }
-+    }
-+
-+    /* push the buffers out and let them have fun */
-+    for (i = 0; i &lt; element-&gt;numpads; i++) {
-+      GstBuffer *buf;
-+
-+      if (!src-&gt;buf[i])
-+        return;
-+      if (copied != this-&gt;period_size)
-+        GST_BUFFER_SIZE (src-&gt;buf[i]) = outsize;
-+
-+      GST_BUFFER_TIMESTAMP (src-&gt;buf[i]) = outtime;
-+      GST_BUFFER_DURATION (src-&gt;buf[i]) = outdur;
-+      GST_BUFFER_OFFSET (src-&gt;buf[i]) = offset;
-+      GST_BUFFER_OFFSET_END (src-&gt;buf[i]) = offset + copied;
-+
-+      buf = src-&gt;buf[i];
-+      src-&gt;buf[i] = NULL;
-+      gst_pad_push (this-&gt;pad[i], GST_DATA (buf));
-+    }
-+    this-&gt;captured += copied;
-   }
--  this-&gt;transmitted += copied;
- }
- 
- static void
-@@ -395,6 +494,7 @@
-     }
-   }
- }
-+
- static GstElementStateReturn
- gst_alsa_src_change_state (GstElement * element)
- {
-@@ -405,17 +505,23 @@
- 
-   switch (GST_STATE_TRANSITION (element)) {
-     case GST_STATE_NULL_TO_READY:
-+      break;
-     case GST_STATE_READY_TO_PAUSED:
-+      snd_pcm_status_malloc (&amp;src-&gt;status);
-+      break;
-     case GST_STATE_PAUSED_TO_PLAYING:
-+      break;
-     case GST_STATE_PLAYING_TO_PAUSED:
-       break;
-     case GST_STATE_PAUSED_TO_READY:
-+      snd_pcm_status_free (src-&gt;status);
-+      src-&gt;status = NULL;
-       gst_alsa_src_flush (src);
-       break;
-     case GST_STATE_READY_TO_NULL:
-       break;
-     default:
--      g_assert_not_reached ();
-+      break;
-   }
- 
-   if (GST_ELEMENT_CLASS (src_parent_class)-&gt;change_state)
-@@ -423,15 +529,3 @@
- 
-   return GST_STATE_SUCCESS;
- }
--
--static GstClockTime
--gst_alsa_src_get_time (GstAlsa * this)
--{
--  snd_pcm_sframes_t delay;
--
--  if (snd_pcm_delay (this-&gt;handle, &amp;delay) == 0 &amp;&amp; this-&gt;format) {
--    return GST_SECOND * (this-&gt;transmitted + delay) / this-&gt;format-&gt;rate;
--  } else {
--    return 0;
--  }
--}
---- gst-plugins-0.8.2/ext/alsa/gstalsasrc.h	2004-06-23 08:31:58.000000000 -0400
-+++ gst-plugins/ext/alsa/gstalsasrc.h	2004-07-14 12:13:02.000000000 -0400
-@@ -38,6 +38,8 @@
- struct _GstAlsaSrc {
-   GstAlsaMixer   parent;
-   GstBuffer     *buf[GST_ALSA_MAX_TRACKS];
-+  snd_pcm_status_t *status;
-+  GstClockTime  base_time; /* FIXME: move this up ? already present in element ? */
- };
- 
- struct _GstAlsaSrcClass {

Added: trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.4-vorbis-seek-workaround.patch
===================================================================
--- trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.4-vorbis-seek-workaround.patch	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.4-vorbis-seek-workaround.patch	2004-10-21 19:35:22 UTC (rev 2296)
@@ -0,0 +1,13 @@
+--- gst-plugins-0.8.4/ext/vorbis/vorbisdec.c	22 Sep 2004 21:48:20 -0400	1.44
++++ gst-plugins-0.8.4/ext/vorbis/vorbisdec.c	24 Sep 2004 17:23:31 -0400	
+@@ -377,10 +377,6 @@
+   if (packet.packet[0] &amp; 1) {
+     /* header packet */
+     if (packet.packet[0] / 2 != packet.packetno) {
+-      /* FIXME: just skip? */
+-      GST_ELEMENT_ERROR (GST_ELEMENT (vd), STREAM, DECODE,
+-          (NULL), (&quot;unexpected packet type %d, expected %d&quot;,
+-              (gint) packet.packet[0], (gint) packet.packetno));
+       gst_data_unref (data);
+       return;
+     }

Added: trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.5-dv.patch
===================================================================
--- trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.5-dv.patch	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer-plugins/gstreamer-plugins-0.8.5-dv.patch	2004-10-21 19:35:22 UTC (rev 2296)
@@ -0,0 +1,795 @@
+unchanged:
+--- gst-plugins/ext/raw1394/gstdv1394src.c	2004/09/03 16:45:36	1.24
++++ gst-plugins/ext/raw1394/gstdv1394src.c	2004/10/15 14:35:54	1.26
+@@ -1,6 +1,8 @@
++/* -*- Mode: C; tab-width: 2; indent-tabs-mode: t; c-basic-offset: 2 -*- */
+ /* GStreamer
+  * Copyright (C) &lt;1999&gt; Erik Walthinsen &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">omega at cse.ogi.edu</A>&gt;
+  *               &lt;2000&gt; Daniel Fischer &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dan at f3c.com</A>&gt;
++ *               &lt;2004&gt; Wim Taymans &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">wim at fluendo.com</A>&gt;
+  *
+  * This library is free software; you can redistribute it and/or
+  * modify it under the terms of the GNU Library General Public
+@@ -23,26 +25,47 @@
+ #endif
+ #include &lt;gst/gst.h&gt;
+ #include &lt;string.h&gt;
++#include &lt;libavc1394/avc1394.h&gt;
++#include &lt;libavc1394/avc1394_vcr.h&gt;
++#include &lt;libavc1394/rom1394.h&gt;
++
+ #include &quot;gstdv1394src.h&quot;
+ 
+-#define N_BUFFERS_IN_POOL 3
++GST_DEBUG_CATEGORY_STATIC (dv1394src_debug);
++#define GST_CAT_DEFAULT (dv1394src_debug)
+ 
+ #define PAL_FRAMESIZE 144000
++#define PAL_FRAMERATE 25
++
+ #define NTSC_FRAMESIZE 120000
++#define NTSC_FRAMERATE 30
+ 
+ /* Filter signals and args */
+ enum
+ {
++  SIGNAL_FRAME_DROPPED,
+   /* FILL ME */
+   LAST_SIGNAL
+ };
+ 
++#define DEFAULT_PORT		-1
++#define DEFAULT_CHANNEL		63
++#define DEFAULT_CONSECUTIVE	1
++#define DEFAULT_SKIP		0
++#define DEFAULT_DROP_INCOMPLETE	TRUE
++#define DEFAULT_USE_AVC		TRUE
++#define DEFAULT_GUID		0
++
+ enum
+ {
+   ARG_0,
++  ARG_PORT,
++  ARG_CHANNEL,
+   ARG_CONSECUTIVE,
+   ARG_SKIP,
+-  ARG_DROP_INCOMPLETE
++  ARG_DROP_INCOMPLETE,
++  ARG_USE_AVC,
++  ARG_GUID
+ };
+ 
+ static GstElementDetails gst_dv1394src_details =
+@@ -50,32 +73,18 @@
+     &quot;Source/Video&quot;,
+     &quot;Source for DV video data from firewire port&quot;,
+     &quot;Erik Walthinsen &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">omega at temple-baptist.com</A>&gt;\n&quot;
+-    &quot;Daniel Fischer &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dan at f3c.com</A>&gt;&quot;);
++    &quot;Daniel Fischer &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dan at f3c.com</A>&gt;\n&quot; &quot;Wim Taymans &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">wim at fluendo.com</A>&gt;&quot;);
+ 
+-#if 0
+-static GstPadTemplate *
+-gst_dv1394src_factory (void)
+-{
+-  static GstPadTemplate *template = NULL;
+-
+-  if (!template) {
+-    template = gst_pad_template_new (&quot;src&quot;,
+-        GST_PAD_SRC,
+-        GST_PAD_ALWAYS,
+-        GST_STATIC_CAPS (&quot;dv1394src&quot;,
+-            &quot;video/x-dv&quot;,
+-            gst_props_new (&quot;format&quot;, GST_PROPS_LIST (G_TYPE_STRING (&quot;NTSC&quot;),
+-                    G_TYPE_STRING (&quot;PAL&quot;)
+-                ), NULL)
+-        ), NULL);
+-  }
+-  return template;
+-}
+-#endif
++static GstStaticPadTemplate src_factory = GST_STATIC_PAD_TEMPLATE (&quot;src&quot;,
++    GST_PAD_SRC,
++    GST_PAD_ALWAYS,
++    GST_STATIC_CAPS (&quot;video/x-dv, &quot; &quot;format = (string) { NTSC, PAL }&quot;)
++    );
+ 
+ static void gst_dv1394src_base_init (gpointer g_class);
+ static void gst_dv1394src_class_init (GstDV1394SrcClass * klass);
+ static void gst_dv1394src_init (GstDV1394Src * filter);
++static void gst_dv1394src_dispose (GObject * obj);
+ 
+ static void gst_dv1394src_set_property (GObject * object, guint prop_id,
+     const GValue * value, GParamSpec * pspec);
+@@ -86,9 +95,24 @@
+ 
+ static GstData *gst_dv1394src_get (GstPad * pad);
+ 
++static const GstEventMask *gst_dv1394src_get_event_mask (GstPad * pad);
++static gboolean gst_dv1394src_event (GstPad * pad, GstEvent * event);
++static const GstFormat *gst_dv1394src_get_formats (GstPad * pad);
++static gboolean gst_dv1394src_convert (GstPad * pad,
++    GstFormat src_format, gint64 src_value,
++    GstFormat * dest_format, gint64 * dest_value);
++
++static const GstQueryType *gst_dv1394src_get_query_types (GstPad * pad);
++static gboolean gst_dv1394src_query (GstPad * pad, GstQueryType type,
++    GstFormat * format, gint64 * value);
++
++
+ static GstElementClass *parent_class = NULL;
+ 
+-/*static guint gst_filter_signals[LAST_SIGNAL] = { 0 }; */
++static void gst_dv1394src_uri_handler_init (gpointer g_iface,
++    gpointer iface_data);
++
++static guint gst_dv1394src_signals[LAST_SIGNAL] = { 0 };
+ 
+ GType
+ gst_dv1394src_get_type (void)
+@@ -107,10 +131,21 @@
+       0,
+       (GInstanceInitFunc) gst_dv1394src_init,
+     };
++    static const GInterfaceInfo urihandler_info = {
++      gst_dv1394src_uri_handler_init,
++      NULL,
++      NULL,
++    };
+ 
+     gst_dv1394src_type =
+         g_type_register_static (GST_TYPE_ELEMENT, &quot;DV1394Src&quot;,
+         &amp;gst_dv1394src_info, 0);
++
++    g_type_add_interface_static (gst_dv1394src_type, GST_TYPE_URI_HANDLER,
++        &amp;urihandler_info);
++
++    GST_DEBUG_CATEGORY_INIT (dv1394src_debug, &quot;dv1394src&quot;, 0,
++        &quot;DV firewire source&quot;);
+   }
+   return gst_dv1394src_type;
+ }
+@@ -120,6 +155,9 @@
+ {
+   GstElementClass *element_class = GST_ELEMENT_CLASS (g_class);
+ 
++  gst_element_class_add_pad_template (element_class,
++      gst_static_pad_template_get (&amp;src_factory));
++
+   gst_element_class_set_details (element_class, &amp;gst_dv1394src_details);
+ }
+ 
+@@ -132,21 +170,42 @@
+   gobject_class = (GObjectClass *) klass;
+   gstelement_class = (GstElementClass *) klass;
+ 
++  gst_dv1394src_signals[SIGNAL_FRAME_DROPPED] =
++      g_signal_new (&quot;frame-dropped&quot;, G_TYPE_FROM_CLASS (klass),
++      G_SIGNAL_RUN_LAST, G_STRUCT_OFFSET (GstDV1394SrcClass, frame_dropped),
++      NULL, NULL, g_cclosure_marshal_VOID__VOID, G_TYPE_NONE, 0);
++
++  g_object_class_install_property (G_OBJECT_CLASS (klass), ARG_PORT,
++      g_param_spec_int (&quot;port&quot;, &quot;Port&quot;, &quot;Port number (-1 automatic)&quot;,
++          -1, 16, DEFAULT_PORT, G_PARAM_READWRITE));
++  g_object_class_install_property (G_OBJECT_CLASS (klass), ARG_CHANNEL,
++      g_param_spec_int (&quot;channel&quot;, &quot;Channel&quot;, &quot;Channel number for listening&quot;,
++          0, 64, DEFAULT_CHANNEL, G_PARAM_READWRITE));
+   g_object_class_install_property (G_OBJECT_CLASS (klass), ARG_CONSECUTIVE,
+       g_param_spec_int (&quot;consecutive&quot;, &quot;consecutive frames&quot;,
+-          &quot;send n consecutive frames after skipping&quot;, 1, G_MAXINT, 1,
+-          G_PARAM_READWRITE));
++          &quot;send n consecutive frames after skipping&quot;, 1, G_MAXINT,
++          DEFAULT_CONSECUTIVE, G_PARAM_READWRITE));
+   g_object_class_install_property (G_OBJECT_CLASS (klass), ARG_SKIP,
+-      g_param_spec_int (&quot;skip&quot;, &quot;skip frames&quot;, &quot;skip n frames&quot;, 0, G_MAXINT, 1,
+-          G_PARAM_READWRITE));
++      g_param_spec_int (&quot;skip&quot;, &quot;skip frames&quot;, &quot;skip n frames&quot;,
++          0, G_MAXINT, DEFAULT_SKIP, G_PARAM_READWRITE));
+   g_object_class_install_property (G_OBJECT_CLASS (klass), ARG_DROP_INCOMPLETE,
+       g_param_spec_boolean (&quot;drop_incomplete&quot;, &quot;drop_incomplete&quot;,
+-          &quot;drop incomplete frames&quot;, TRUE, G_PARAM_READWRITE));
++          &quot;drop incomplete frames&quot;, DEFAULT_DROP_INCOMPLETE,
++          G_PARAM_READWRITE));
++  g_object_class_install_property (G_OBJECT_CLASS (klass), ARG_USE_AVC,
++      g_param_spec_boolean (&quot;use-avc&quot;, &quot;Use AV/C&quot;, &quot;Use AV/C VTR control&quot;,
++          DEFAULT_USE_AVC, G_PARAM_READWRITE));
++  g_object_class_install_property (G_OBJECT_CLASS (klass), ARG_GUID,
++      g_param_spec_uint64 (&quot;guid&quot;, &quot;GUID&quot;,
++          &quot;select one of multiple DV devices by its GUID. use a hexadecimal &quot;
++          &quot;like 0xhhhhhhhhhhhhhhhh. (0 = no guid)&quot;, 0, G_MAXUINT64,
++          DEFAULT_GUID, G_PARAM_READWRITE));
+ 
+   parent_class = g_type_class_ref (GST_TYPE_ELEMENT);
+ 
+   gobject_class-&gt;set_property = gst_dv1394src_set_property;
+   gobject_class-&gt;get_property = gst_dv1394src_get_property;
++  gobject_class-&gt;dispose = gst_dv1394src_dispose;
+ 
+   gstelement_class-&gt;change_state = gst_dv1394src_change_state;
+ }
+@@ -154,25 +213,47 @@
+ static void
+ gst_dv1394src_init (GstDV1394Src * dv1394src)
+ {
+-  dv1394src-&gt;srcpad = gst_pad_new (&quot;src&quot;, GST_PAD_SRC);
++  dv1394src-&gt;srcpad =
++      gst_pad_new_from_template (gst_element_get_pad_template (GST_ELEMENT
++          (dv1394src), &quot;src&quot;), &quot;src&quot;);
+   gst_pad_set_get_function (dv1394src-&gt;srcpad, gst_dv1394src_get);
+   gst_pad_use_explicit_caps (dv1394src-&gt;srcpad);
++  gst_pad_set_event_function (dv1394src-&gt;srcpad, gst_dv1394src_event);
++  gst_pad_set_event_mask_function (dv1394src-&gt;srcpad,
++      gst_dv1394src_get_event_mask);
++  gst_pad_set_convert_function (dv1394src-&gt;srcpad, gst_dv1394src_convert);
++  gst_pad_set_query_function (dv1394src-&gt;srcpad, gst_dv1394src_query);
++  gst_pad_set_query_type_function (dv1394src-&gt;srcpad,
++      gst_dv1394src_get_query_types);
++  gst_pad_set_formats_function (dv1394src-&gt;srcpad, gst_dv1394src_get_formats);
++
+   gst_element_add_pad (GST_ELEMENT (dv1394src), dv1394src-&gt;srcpad);
+ 
+-  dv1394src-&gt;card = 0;
+-  dv1394src-&gt;port = 0;
+-  dv1394src-&gt;channel = 63;
+-
+-  dv1394src-&gt;consecutive = 1;
+-  dv1394src-&gt;skip = 0;
+-  dv1394src-&gt;drop_incomplete = TRUE;
++  dv1394src-&gt;port = DEFAULT_PORT;
++  dv1394src-&gt;channel = DEFAULT_CHANNEL;
++
++  dv1394src-&gt;consecutive = DEFAULT_CONSECUTIVE;
++  dv1394src-&gt;skip = DEFAULT_SKIP;
++  dv1394src-&gt;drop_incomplete = DEFAULT_DROP_INCOMPLETE;
++  dv1394src-&gt;use_avc = DEFAULT_USE_AVC;
++  dv1394src-&gt;guid = DEFAULT_GUID;
+ 
+   /* initialized when first header received */
+-  dv1394src-&gt;frameSize = 0;
++  dv1394src-&gt;frame_size = 0;
+ 
+   dv1394src-&gt;buf = NULL;
+   dv1394src-&gt;frame = NULL;
+-  dv1394src-&gt;frameSequence = 0;
++  dv1394src-&gt;frame_sequence = 0;
++}
++
++static void
++gst_dv1394src_dispose (GObject * obj)
++{
++  GstDV1394Src *dv1394src;
++
++  dv1394src = GST_DV1394SRC (obj);
++
++  G_OBJECT_CLASS (parent_class)-&gt;dispose (obj);
+ }
+ 
+ static void
+@@ -186,6 +267,12 @@
+   filter = GST_DV1394SRC (object);
+ 
+   switch (prop_id) {
++    case ARG_PORT:
++      filter-&gt;port = g_value_get_int (value);
++      break;
++    case ARG_CHANNEL:
++      filter-&gt;channel = g_value_get_int (value);
++      break;
+     case ARG_SKIP:
+       filter-&gt;skip = g_value_get_int (value);
+       break;
+@@ -195,6 +282,12 @@
+     case ARG_DROP_INCOMPLETE:
+       filter-&gt;drop_incomplete = g_value_get_boolean (value);
+       break;
++    case ARG_USE_AVC:
++      filter-&gt;use_avc = g_value_get_boolean (value);
++      break;
++    case ARG_GUID:
++      filter-&gt;guid = g_value_get_uint64 (value);
++      break;
+     default:
+       break;
+   }
+@@ -211,6 +304,12 @@
+   filter = GST_DV1394SRC (object);
+ 
+   switch (prop_id) {
++    case ARG_PORT:
++      g_value_set_int (value, filter-&gt;port);
++      break;
++    case ARG_CHANNEL:
++      g_value_set_int (value, filter-&gt;channel);
++      break;
+     case ARG_SKIP:
+       g_value_set_int (value, filter-&gt;skip);
+       break;
+@@ -220,6 +319,12 @@
+     case ARG_DROP_INCOMPLETE:
+       g_value_set_boolean (value, filter-&gt;drop_incomplete);
+       break;
++    case ARG_USE_AVC:
++      g_value_set_boolean (value, filter-&gt;use_avc);
++      break;
++    case ARG_GUID:
++      g_value_set_uint64 (value, filter-&gt;guid);
++      break;
+     default:
+       G_OBJECT_WARN_INVALID_PROPERTY_ID (object, prop_id, pspec);
+       break;
+@@ -251,7 +356,8 @@
+         // figure format (NTSC/PAL)
+         if (p[3] &amp; 0x80) {
+           // PAL
+-          dv1394src-&gt;frameSize = PAL_FRAMESIZE;
++          dv1394src-&gt;frame_size = PAL_FRAMESIZE;
++          dv1394src-&gt;frame_rate = PAL_FRAMERATE;
+           GST_DEBUG (&quot;PAL data&quot;);
+           if (!gst_pad_set_explicit_caps (dv1394src-&gt;srcpad,
+                   gst_caps_new_simple (&quot;video/x-dv&quot;,
+@@ -262,7 +368,8 @@
+           }
+         } else {
+           // NTSC (untested)
+-          dv1394src-&gt;frameSize = NTSC_FRAMESIZE;
++          dv1394src-&gt;frame_size = NTSC_FRAMESIZE;
++          dv1394src-&gt;frame_rate = NTSC_FRAMERATE;
+           GST_DEBUG
+               (&quot;NTSC data [untested] - please report success/failure to &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dan at f3c.com</A>&gt;&quot;);
+           if (!gst_pad_set_explicit_caps (dv1394src-&gt;srcpad,
+@@ -277,25 +384,43 @@
+       }
+       // drop last frame when not complete
+       if (!dv1394src-&gt;drop_incomplete
+-          || dv1394src-&gt;bytesInFrame == dv1394src-&gt;frameSize) {
++          || dv1394src-&gt;bytes_in_frame == dv1394src-&gt;frame_size) {
+         dv1394src-&gt;buf = dv1394src-&gt;frame;
+       } else {
+         GST_INFO_OBJECT (GST_ELEMENT (dv1394src), &quot;incomplete frame dropped&quot;);
++        g_signal_emit (G_OBJECT (dv1394src),
++            gst_dv1394src_signals[SIGNAL_FRAME_DROPPED], 0);
++        if (dv1394src-&gt;frame) {
++          gst_buffer_unref (dv1394src-&gt;frame);
++        }
+       }
+       dv1394src-&gt;frame = NULL;
++      if ((dv1394src-&gt;frame_sequence + 1) % (dv1394src-&gt;skip +
++              dv1394src-&gt;consecutive) &lt; dv1394src-&gt;consecutive) {
++        GstFormat format;
++        GstBuffer *buf;
+ 
+-      dv1394src-&gt;frameSequence++;
++        buf = gst_buffer_new_and_alloc (dv1394src-&gt;frame_size);
++        /* fill in default offset */
++        format = GST_FORMAT_DEFAULT;
++        gst_dv1394src_query (dv1394src-&gt;srcpad, GST_QUERY_POSITION, &amp;format,
++            &amp;GST_BUFFER_OFFSET (buf));
++        /* fill in timestamp */
++        format = GST_FORMAT_TIME;
++        gst_dv1394src_query (dv1394src-&gt;srcpad, GST_QUERY_POSITION, &amp;format,
++            &amp;GST_BUFFER_TIMESTAMP (buf));
++        /* fill in duration by converting one frame to time */
++        gst_dv1394src_convert (dv1394src-&gt;srcpad, GST_FORMAT_DEFAULT, 1,
++            &amp;format, &amp;GST_BUFFER_DURATION (buf));
+ 
+-      if (dv1394src-&gt;frameSequence % (dv1394src-&gt;skip +
+-              dv1394src-&gt;consecutive) &lt; dv1394src-&gt;consecutive) {
+-        dv1394src-&gt;frame = gst_buffer_new_and_alloc (dv1394src-&gt;frameSize);
++        dv1394src-&gt;frame = buf;
+       }
+-      dv1394src-&gt;bytesInFrame = 0;
++      dv1394src-&gt;frame_sequence++;
++      dv1394src-&gt;bytes_in_frame = 0;
+     }
+ 
+     if (dv1394src-&gt;frame != NULL) {
+-      void *data = GST_BUFFER_DATA (dv1394src-&gt;frame);
+-
++      guint8 *data = GST_BUFFER_DATA (dv1394src-&gt;frame);
+ 
+       switch (section_type) {
+         case 0:                /* 1 Header block */
+@@ -323,10 +448,10 @@
+                   dif_block) * 80, p, 480);
+           break;
+ 
+-        default:               /* we can&#180;t handle any other data */
++        default:               /* we can't handle any other data */
+           break;
+       }
+-      dv1394src-&gt;bytesInFrame += 480;
++      dv1394src-&gt;bytes_in_frame += 480;
+     }
+   }
+ 
+@@ -353,6 +478,73 @@
+   return GST_DATA (dv1394src-&gt;buf);
+ }
+ 
++static int
++gst_dv1394src_discover_avc_node (GstDV1394Src * src)
++{
++  int node = -1;
++  int i, j = 0;
++  int m = src-&gt;num_ports;
++
++  if (src-&gt;port &gt;= 0) {
++    /* search on explicit port */
++    j = src-&gt;port;
++    m = j + 1;
++  }
++
++  /* loop over all our ports */
++  for (; j &lt; m &amp;&amp; node == -1; j++) {
++    raw1394handle_t handle;
++    gint n_ports;
++    struct raw1394_portinfo pinf[16];
++
++    /* open the port */
++    handle = raw1394_new_handle ();
++    if (!handle) {
++      g_warning (&quot;raw1394 - failed to get handle: %s.\n&quot;, strerror (errno));
++      continue;
++    }
++    if ((n_ports = raw1394_get_port_info (handle, pinf, 16)) &lt; 0) {
++      g_warning (&quot;raw1394 - failed to get port info: %s.\n&quot;, strerror (errno));
++      goto next;
++    }
++
++    /* tell raw1394 which host adapter to use */
++    if (raw1394_set_port (handle, j) &lt; 0) {
++      g_warning (&quot;raw1394 - failed to set set port: %s.\n&quot;, strerror (errno));
++      goto next;
++    }
++
++    /* now loop over all the nodes */
++    for (i = 0; i &lt; raw1394_get_nodecount (handle); i++) {
++      /* are we looking for an explicit GUID */
++      if (src-&gt;guid != 0) {
++        if (src-&gt;guid == rom1394_get_guid (handle, i)) {
++          node = i;
++          src-&gt;port = j;
++          break;
++        }
++      } else {
++        rom1394_directory rom_dir;
++
++        /* select first AV/C Tape Reccorder Player node */
++        if (rom1394_get_directory (handle, i, &amp;rom_dir) &lt; 0) {
++          g_warning (&quot;error reading config rom directory for node %d\n&quot;, i);
++          continue;
++        }
++        if ((rom1394_get_node_type (&amp;rom_dir) == ROM1394_NODE_TYPE_AVC) &amp;&amp;
++            avc1394_check_subunit_type (handle, i, AVC1394_SUBUNIT_TYPE_VCR)) {
++          node = i;
++          src-&gt;port = j;
++          break;
++        }
++      }
++    }
++  next:
++    raw1394_destroy_handle (handle);
++  }
++  return node;
++}
++
+ static GstElementStateReturn
+ gst_dv1394src_change_state (GstElement * element)
+ {
+@@ -363,34 +555,41 @@
+ 
+   switch (GST_STATE_TRANSITION (element)) {
+     case GST_STATE_NULL_TO_READY:
++      /* create a handle */
+       if ((dv1394src-&gt;handle = raw1394_new_handle ()) == NULL) {
+         GST_ELEMENT_ERROR (dv1394src, RESOURCE, NOT_FOUND, (NULL),
+             (&quot;can't get raw1394 handle&quot;));
+         return GST_STATE_FAILURE;
+       }
++      /* set this plugin as the user data */
+       raw1394_set_userdata (dv1394src-&gt;handle, dv1394src);
+-      dv1394src-&gt;numcards =
++      /* get number of ports */
++      dv1394src-&gt;num_ports =
+           raw1394_get_port_info (dv1394src-&gt;handle, dv1394src-&gt;pinfo, 16);
+-      if (dv1394src-&gt;numcards == 0) {
++      if (dv1394src-&gt;num_ports == 0) {
+         GST_ELEMENT_ERROR (dv1394src, RESOURCE, NOT_FOUND, (NULL),
+-            (&quot;no cards available for raw1394&quot;));
++            (&quot;no ports available for raw1394&quot;));
+         return GST_STATE_FAILURE;
+       }
+-      if (dv1394src-&gt;pinfo[dv1394src-&gt;card].nodes &lt;= 1) {
+-        GST_ELEMENT_ERROR (dv1394src, RESOURCE, NOT_FOUND, (NULL),
+-            (&quot;there are no nodes on the 1394 bus&quot;));
+-        return GST_STATE_FAILURE;
++
++      if (dv1394src-&gt;use_avc || dv1394src-&gt;port == -1) {
++        /* discover AVC and optionally the port */
++        dv1394src-&gt;avc_node = gst_dv1394src_discover_avc_node (dv1394src);
+       }
++
++      /* configure our port now */
+       if (raw1394_set_port (dv1394src-&gt;handle, dv1394src-&gt;port) &lt; 0) {
+         GST_ELEMENT_ERROR (dv1394src, RESOURCE, SETTINGS, (NULL),
+             (&quot;can't set 1394 port %d&quot;, dv1394src-&gt;port));
+         return GST_STATE_FAILURE;
+       }
++      /* set the callbacks */
+       raw1394_set_iso_handler (dv1394src-&gt;handle, dv1394src-&gt;channel,
+           gst_dv1394src_iso_receive);
+       raw1394_set_bus_reset_handler (dv1394src-&gt;handle,
+           gst_dv1394src_bus_reset);
+       dv1394src-&gt;started = FALSE;
++
+       GST_DEBUG_OBJECT (dv1394src, &quot;successfully opened up 1394 connection&quot;);
+       break;
+     case GST_STATE_PAUSED_TO_PLAYING:
+@@ -399,11 +598,31 @@
+             (&quot;can't start 1394 iso receive&quot;));
+         return GST_STATE_FAILURE;
+       }
++      if (dv1394src-&gt;use_avc) {
++        /* start the VCR */
++        if (!avc1394_vcr_is_recording (dv1394src-&gt;handle, dv1394src-&gt;avc_node)
++            &amp;&amp; avc1394_vcr_is_playing (dv1394src-&gt;handle, dv1394src-&gt;avc_node)
++            != AVC1394_VCR_OPERAND_PLAY_FORWARD) {
++          avc1394_vcr_play (dv1394src-&gt;handle, dv1394src-&gt;avc_node);
++        }
++      }
+       break;
+     case GST_STATE_PLAYING_TO_PAUSED:
+       raw1394_stop_iso_rcv (dv1394src-&gt;handle, dv1394src-&gt;channel);
++      if (dv1394src-&gt;use_avc) {
++        /* pause the VCR */
++        if (!avc1394_vcr_is_recording (dv1394src-&gt;handle, dv1394src-&gt;avc_node)
++            &amp;&amp; (avc1394_vcr_is_playing (dv1394src-&gt;handle, dv1394src-&gt;avc_node)
++                != AVC1394_VCR_OPERAND_PLAY_FORWARD_PAUSE)) {
++          avc1394_vcr_pause (dv1394src-&gt;handle, dv1394src-&gt;avc_node);
++        }
++      }
+       break;
+     case GST_STATE_READY_TO_NULL:
++      if (dv1394src-&gt;use_avc) {
++        /* stop the VCR */
++        avc1394_vcr_stop (dv1394src-&gt;handle, dv1394src-&gt;avc_node);
++      }
+       raw1394_destroy_handle (dv1394src-&gt;handle);
+       break;
+     default:
+@@ -416,3 +635,168 @@
+ 
+   return GST_STATE_SUCCESS;
+ }
++
++
++static const GstEventMask *
++gst_dv1394src_get_event_mask (GstPad * pad)
++{
++  static const GstEventMask masks[] = {
++    {0,}
++  };
++
++  return masks;
++}
++
++static gboolean
++gst_dv1394src_event (GstPad * pad, GstEvent * event)
++{
++  return FALSE;
++}
++
++static const GstFormat *
++gst_dv1394src_get_formats (GstPad * pad)
++{
++  static GstFormat formats[] = {
++    GST_FORMAT_TIME,
++    GST_FORMAT_BYTES,
++    GST_FORMAT_DEFAULT,
++    0
++  };
++
++  return formats;
++}
++
++static gboolean
++gst_dv1394src_convert (GstPad * pad,
++    GstFormat src_format, gint64 src_value,
++    GstFormat * dest_format, gint64 * dest_value)
++{
++  GstDV1394Src *src;
++
++  src = GST_DV1394SRC (gst_pad_get_parent (pad));
++
++  switch (src_format) {
++    case GST_FORMAT_TIME:
++      switch (*dest_format) {
++        case GST_FORMAT_BYTES:
++          src_value *= src-&gt;frame_size;
++        case GST_FORMAT_DEFAULT:
++          *dest_value = src_value * src-&gt;frame_rate / GST_SECOND;
++          break;
++        default:
++          return FALSE;
++      }
++      break;
++    case GST_FORMAT_BYTES:
++      src_value /= src-&gt;frame_size;
++    case GST_FORMAT_DEFAULT:
++      switch (*dest_format) {
++        case GST_FORMAT_BYTES:
++          *dest_value = src_value * src-&gt;frame_size;
++          break;
++        case GST_FORMAT_TIME:
++          if (src-&gt;frame_rate != 0)
++            *dest_value = src_value * GST_SECOND / src-&gt;frame_rate;
++          else
++            return FALSE;
++          break;
++        default:
++          return FALSE;
++      }
++      break;
++    default:
++      break;
++  }
++
++  return TRUE;
++}
++
++static const GstQueryType *
++gst_dv1394src_get_query_types (GstPad * pad)
++{
++  static const GstQueryType src_query_types[] = {
++    GST_QUERY_POSITION,
++    0
++  };
++
++  return src_query_types;
++}
++
++static gboolean
++gst_dv1394src_query (GstPad * pad, GstQueryType type,
++    GstFormat * format, gint64 * value)
++{
++  gboolean res = TRUE;
++  GstDV1394Src *src;
++
++  src = GST_DV1394SRC (gst_pad_get_parent (pad));
++
++  switch (type) {
++    case GST_QUERY_POSITION:
++      /* bring our current frame to the requested format */
++      res = gst_pad_convert (src-&gt;srcpad,
++          GST_FORMAT_DEFAULT, src-&gt;frame_sequence, format, value);
++      break;
++    default:
++      res = FALSE;
++      break;
++  }
++  return res;
++}
++
++/*** GSTURIHANDLER INTERFACE *************************************************/
++
++static guint
++gst_dv1394src_uri_get_type (void)
++{
++  return GST_URI_SRC;
++}
++static gchar **
++gst_dv1394src_uri_get_protocols (void)
++{
++  static gchar *protocols[] = { &quot;dv&quot;, NULL };
++
++  return protocols;
++}
++static const gchar *
++gst_dv1394src_uri_get_uri (GstURIHandler * handler)
++{
++  GstDV1394Src *gst_dv1394src = GST_DV1394SRC (handler);
++
++  return gst_dv1394src-&gt;uri;
++}
++
++static gboolean
++gst_dv1394src_uri_set_uri (GstURIHandler * handler, const gchar * uri)
++{
++  gchar *protocol, *location;
++  gboolean ret;
++
++  ret = TRUE;
++
++  GstDV1394Src *gst_dv1394src = GST_DV1394SRC (handler);
++
++  protocol = gst_uri_get_protocol (uri);
++  if (strcmp (protocol, &quot;dv&quot;) != 0) {
++    g_free (protocol);
++    return FALSE;
++  }
++  g_free (protocol);
++
++  location = gst_uri_get_location (uri);
++  gst_dv1394src-&gt;port = strtol (location, NULL, 10);
++  g_free (location);
++
++  return ret;
++}
++
++static void
++gst_dv1394src_uri_handler_init (gpointer g_iface, gpointer iface_data)
++{
++  GstURIHandlerInterface *iface = (GstURIHandlerInterface *) g_iface;
++
++  iface-&gt;get_type = gst_dv1394src_uri_get_type;
++  iface-&gt;get_protocols = gst_dv1394src_uri_get_protocols;
++  iface-&gt;get_uri = gst_dv1394src_uri_get_uri;
++  iface-&gt;set_uri = gst_dv1394src_uri_set_uri;
++}
+only in patch2:
+unchanged:
+--- gst-plugins/ext/raw1394/gstdv1394src.h	2004/03/15 16:32:36	1.7
++++ gst-plugins/ext/raw1394/gstdv1394src.h	2004/10/15 14:35:54	1.9
+@@ -55,8 +55,12 @@
+   gint skip;
+   gboolean drop_incomplete;
+ 
+-  int numcards,numports;
+-  int card,port,channel;
++  gint num_ports;
++  gint port;
++  gint channel;
++  octlet_t guid;
++  gint avc_node;
++  gboolean use_avc;
+ 
+   struct raw1394_portinfo pinfo[16];
+   raw1394handle_t handle;
+@@ -65,15 +69,21 @@
+   GstBuffer *buf;
+   
+   GstBuffer *frame;
+-  guint frameSize;
+-  guint bytesInFrame;
+-  guint frameSequence;
++  guint frame_size;
++  guint frame_rate;
++  guint bytes_in_frame;
++  guint frame_sequence;
+ 
+   gboolean negotiated;
++
++  gchar *uri;
+ };
+ 
+ struct _GstDV1394SrcClass {
+   GstElementClass parent_class;
++
++  /* signal */
++  void (*frame_dropped)  (GstElement *elem);
+ };
+ 
+ GType gst_dv1394src_get_type(void);
+diff -Naupr gst-plugins-0.8.5.orig/configure.ac gst-plugins-0.8.5/configure.ac
+--- gst-plugins-0.8.5.orig/configure.ac 2004-10-06 18:15:09.000000000 +0200
++++ gst-plugins-0.8.5/configure.ac      2004-10-21 16:20:51.114200472 +0200
+@@ -1385,7 +1385,7 @@ GST_CHECK_FEATURE(PANGO, [pango], pango,
+ dnl *** raw1394 ***
+ translit(dnm, m, l) AM_CONDITIONAL(USE_RAW1394, true)
+ GST_CHECK_FEATURE(RAW1394, [raw1394 library], dv1394src, [
+-  GST_CHECK_LIBHEADER(RAW1394, raw1394, raw1394_new_handle,, libraw1394/raw1394.h, RAW1394_LIBS=&quot;-lraw1394&quot;)
++  GST_CHECK_LIBHEADER(RAW1394, raw1394, raw1394_new_handle,, libraw1394/raw1394.h, RAW1394_LIBS=&quot;-lraw1394 -lavc1394 -lrom1394&quot;)
+   AC_SUBST(RAW1394_LIBS)
+ ])
+
+diff -Naupr gst-plugins-0.8.5.orig/configure gst-plugins-0.8.5/configure
+--- gst-plugins-0.8.5.orig/configure	2004-10-06 18:15:54.000000000 +0200
++++ gst-plugins-0.8.5/configure	2004-10-21 16:20:39.095027664 +0200
+@@ -48545,7 +48545,7 @@ fi
+ 
+ 
+     if test &quot;x$HAVE_RAW1394&quot; = &quot;xyes&quot;; then
+-            RAW1394_LIBS=&quot;-lraw1394&quot;
++            RAW1394_LIBS=&quot;-lraw1394 -lavc1394 -lrom1394&quot;
+     else
+       :
+     fi

Modified: trunk/rpms/gstreamer-plugins/gstreamer-plugins.spec
===================================================================
--- trunk/rpms/gstreamer-plugins/gstreamer-plugins.spec	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer-plugins/gstreamer-plugins.spec	2004-10-21 19:35:22 UTC (rev 2296)
@@ -3,21 +3,22 @@
 
 Summary: GStreamer Streaming-media framework plugins
 Name: gstreamer-plugins
-Version: 0.8.2
+Version: 0.8.5
 %define majmin 0.8
 %define po_package gst-plugins-%{majmin}
-Release: 2.1
+Release: 0
 License: LGPL
 Group: Applications/Multimedia
 Source: gst-plugins-%{version}.tar.bz2
 #Source2: patch-tarball.sh
 #Source3: removed-sources.txt
 Source4: <A HREF="http://clanlib.org/download/files/Hermes-%{hermes_version">http://clanlib.org/download/files/Hermes-%{hermes_version</A>}.tar.bz2
-Source5: gst-fionread.m4
+#Source5: gst-fionread.m4
 BuildRoot: %{_tmppath}/%{name}-%{version}-root
 
 Patch1: gstreamer-plugins-0.7.5-alsa.patch
-Patch2: gstreamer-plugins-0.8.2-alsa-fixes.patch
+Patch2: gstreamer-plugins-0.8.4-vorbis-seek-workaround.patch
+Patch3: gstreamer-plugins-0.8.5-dv.patch
 
 Requires: glib2 &gt;= %_glib2
 Requires: gstreamer &gt;= %{version}
@@ -44,6 +45,7 @@
 BuildRequires: SDL-devel &gt;= 1.2.0
 BuildRequires: libogg-devel &gt;= 1.0
 BuildRequires: libvorbis-devel &gt;= 0:1.0beta4
+BuildRequires: libtheora-devel &gt;= 1.0
 BuildRequires: xmms-devel
 BuildRequires: autoconf automake libtool
 BuildRequires: libraw1394-devel
@@ -54,6 +56,9 @@
 BuildRequires: libdv-devel
 %endif
 
+BuildRequires: gdk-pixbuf-devel, gtk2-devel, libmng-devel, libmusicbrainz-devel
+BuildRequires: libavc1394-devel
+
 %description
 GStreamer is a streaming-media framework, based on graphs of filters which
 operate on media data. Applications using this library can do anything
@@ -82,8 +87,11 @@
 %prep
 %setup -q -n gst-plugins-%{version} -a 4
 %patch1 -p1 -b .alsa
-%patch2 -p1 -b .alsa-fixes
+%patch2 -p1 -b .vorbis-seek-workaround
+%patch3 -p1 -b .dv
 
+#mkdir gst-libs/ext/ffmpeg
+
 for docfile in AUTHORS COPYING README ; do
 	cp Hermes-%{hermes_version}/${docfile} ${docfile}.Hermes
 done
@@ -92,10 +100,10 @@
 hermes_top=`pwd`/Hermes-install
 
 pushd Hermes-%{hermes_version}
-aclocal
-libtoolize --force --copy
-automake
-autoconf
+#aclocal
+#libtoolize --force --copy
+#automake
+#autoconf
 CFLAGS=&quot;$RPM_OPT_FLAGS -fPIC&quot;; export CFLAGS
 ./configure --disable-shared --enable-static \
 	--prefix=${hermes_top} \
@@ -104,11 +112,11 @@
 make all install
 popd
 
-cp %{SOURCE5} m4/
-aclocal -I m4  -I common/m4
-libtoolize --force --copy
-automake
-autoconf
+#cp %{SOURCE5} m4/
+#aclocal -I m4  -I common/m4
+#libtoolize --force --copy
+#automake
+#autoconf
 
 CFLAGS=&quot;$RPM_OPT_FLAGS -I${hermes_top}/include&quot;; export CFLAGS
 CPPFLAGS=&quot;-I${hermes_top}/include&quot;; export CPPFLAGS
@@ -120,11 +128,14 @@
 %else
   --enable-qcam \
 %endif
+  --disable-ffmpeg \
+  --disable-faad \
+  --disable-sndfile \
   --enable-DEBUG --disable-tests --disable-examples
 
-make ##%{?_smp_mflags}
+make %{?_smp_mflags}
 
-cp %{SOURCE3} .
+#cp %{SOURCE3} .
 
 %install
 rm -rf $RPM_BUILD_ROOT
@@ -136,8 +147,6 @@
 rm -f $RPM_BUILD_ROOT%{_libdir}/gstreamer-%{majmin}/*.a
 rm -f $RPM_BUILD_ROOT%{_libdir}/*.a
 rm -f $RPM_BUILD_ROOT%{_libdir}/*.la
-rm -f $RPM_BUILD_ROOT%{_includedir}/gstreamer-%{majmin}/gst/media-info/media-info.h
-rm -f $RPM_BUILD_ROOT%{_libdir}/libgstmedia-info*.so*
 
 %find_lang %{po_package}
 
@@ -159,15 +168,142 @@
 
 %files -f %{po_package}.lang
 %defattr(-, root, root)
-%doc AUTHORS COPYING README removed-sources.txt
+%doc AUTHORS COPYING README
 %doc AUTHORS.Hermes COPYING.Hermes README.Hermes
 %{_sysconfdir}/gconf/schemas/gstreamer-%{majmin}.schemas
 %{_bindir}/*
 %{_libdir}/*so.*
 %dir %{_libdir}/gstreamer-%{majmin}
-%{_libdir}/gstreamer-%{majmin}/*
+%ifarch %{ix86} ia64 ppc ppc64 x86_64
+%{_libdir}/gstreamer-%{majmin}/libgst1394.*
+%endif
+%{_libdir}/gstreamer-%{majmin}/libgstac3parse.*
+%{_libdir}/gstreamer-%{majmin}/libgstadder.*
+%{_libdir}/gstreamer-%{majmin}/libgstalpha.*
+%{_libdir}/gstreamer-%{majmin}/libgstalaw.*
+%{_libdir}/gstreamer-%{majmin}/libgstalsa.*
+%{_libdir}/gstreamer-%{majmin}/libgstalphacolor.*
+%{_libdir}/gstreamer-%{majmin}/libgstarts.*
+%{_libdir}/gstreamer-%{majmin}/libgstaudiorate.*
+%{_libdir}/gstreamer-%{majmin}/libgstartsdsink.*
+%{_libdir}/gstreamer-%{majmin}/libgstasf.*
+%{_libdir}/gstreamer-%{majmin}/libgstaudio.*
+%{_libdir}/gstreamer-%{majmin}/libgstaudioconvert.*
+%{_libdir}/gstreamer-%{majmin}/libgstaudiofile.*
+%{_libdir}/gstreamer-%{majmin}/libgstaudiofilter.*
+%{_libdir}/gstreamer-%{majmin}/libgstaudioscale.*
+%{_libdir}/gstreamer-%{majmin}/libgstauparse.*
+%{_libdir}/gstreamer-%{majmin}/libgstavi.*
+%{_libdir}/gstreamer-%{majmin}/libgstcdparanoia.*
+%{_libdir}/gstreamer-%{majmin}/libgstcdplayer.*
+%{_libdir}/gstreamer-%{majmin}/libgstcdxaparse.*
+%{_libdir}/gstreamer-%{majmin}/libgstchart.*
+%{_libdir}/gstreamer-%{majmin}/libgstcolorspace.*
+%{_libdir}/gstreamer-%{majmin}/libgstcutter.*
+%{_libdir}/gstreamer-%{majmin}/libgstdeinterlace.*
+%{_libdir}/gstreamer-%{majmin}/libgstdebug.*
+%{_libdir}/gstreamer-%{majmin}/libgstdecodebin.*
+%ifnarch s390 s390x
+%{_libdir}/gstreamer-%{majmin}/libgstdvdec.*
+%endif
+%{_libdir}/gstreamer-%{majmin}/libgstefence.*
+%{_libdir}/gstreamer-%{majmin}/libgsteffectv.*
+%{_libdir}/gstreamer-%{majmin}/libgstesd.*
+%{_libdir}/gstreamer-%{majmin}/libgstfestival.*
+%{_libdir}/gstreamer-%{majmin}/libgstfilter.*
+%{_libdir}/gstreamer-%{majmin}/libgstflac.*
+%{_libdir}/gstreamer-%{majmin}/libgstffmpegcolorspace.*
+%{_libdir}/gstreamer-%{majmin}/libgstflxdec.*
+%{_libdir}/gstreamer-%{majmin}/libgstgamma.*
+%{_libdir}/gstreamer-%{majmin}/libgstgdkpixbuf.*
+%{_libdir}/gstreamer-%{majmin}/libgstglimagesink.*
+%{_libdir}/gstreamer-%{majmin}/libgstgnomevfs.*
+%{_libdir}/gstreamer-%{majmin}/libgstgoom.*
+%{_libdir}/gstreamer-%{majmin}/libgsthermescolorspace.*
+%{_libdir}/gstreamer-%{majmin}/libgstidct.*
+%{_libdir}/gstreamer-%{majmin}/libgstinterleave.*
+%{_libdir}/gstreamer-%{majmin}/libgstjpeg.*
+%{_libdir}/gstreamer-%{majmin}/libgstlevel.*
+%{_libdir}/gstreamer-%{majmin}/libgstmatroska.*
+%{_libdir}/gstreamer-%{majmin}/libgstmedian.*
+%{_libdir}/gstreamer-%{majmin}/libgstmikmod.*
+%{_libdir}/gstreamer-%{majmin}/libgstmng.*
+%{_libdir}/gstreamer-%{majmin}/libgstmodplug.*
+%{_libdir}/gstreamer-%{majmin}/libgstmonoscope.*
+%{_libdir}/gstreamer-%{majmin}/libgstmultifilesink.*
+%{_libdir}/gstreamer-%{majmin}/libgstmulaw.*
+%{_libdir}/gstreamer-%{majmin}/libgstmultipart.*
+%{_libdir}/gstreamer-%{majmin}/libgstnavigationtest.*
+%{_libdir}/gstreamer-%{majmin}/libgstogg.*
+%{_libdir}/gstreamer-%{majmin}/libgstossaudio.*
+%{_libdir}/gstreamer-%{majmin}/libgstoverlay.*
+%{_libdir}/gstreamer-%{majmin}/libgstpassthrough.*
+%{_libdir}/gstreamer-%{majmin}/libgstplayondemand.*
+%{_libdir}/gstreamer-%{majmin}/libgstplaybin.*
+%{_libdir}/gstreamer-%{majmin}/libgstpng.*
+%ifarch %{ix86}
+%{_libdir}/gstreamer-%{majmin}/libgstqcam.*
+%endif
+%{_libdir}/gstreamer-%{majmin}/libgstqtdemux.*
+%{_libdir}/gstreamer-%{majmin}/libgstresample.*
+%{_libdir}/gstreamer-%{majmin}/libgstriff.*
+%{_libdir}/gstreamer-%{majmin}/libgstrmdemux.*
+%{_libdir}/gstreamer-%{majmin}/libgstrtjpeg.*
+%{_libdir}/gstreamer-%{majmin}/libgstrtp.*
+%{_libdir}/gstreamer-%{majmin}/libgstsdlvideosink.*
+%{_libdir}/gstreamer-%{majmin}/libgstsilence.*
+%{_libdir}/gstreamer-%{majmin}/libgstsinesrc.*
+%{_libdir}/gstreamer-%{majmin}/libgstsmooth.*
+%{_libdir}/gstreamer-%{majmin}/libgstsmoothwave.*
+%{_libdir}/gstreamer-%{majmin}/libgstsmpte.*
+%{_libdir}/gstreamer-%{majmin}/libgstsnapshot.*
+%{_libdir}/gstreamer-%{majmin}/libgstspectrum.*
+%{_libdir}/gstreamer-%{majmin}/libgstspeed.*
+%{_libdir}/gstreamer-%{majmin}/libgststereo.*
+%{_libdir}/gstreamer-%{majmin}/libgstswitch.*
+%{_libdir}/gstreamer-%{majmin}/libgstsynaesthesia.*
+%{_libdir}/gstreamer-%{majmin}/libgsttagedit.*
+%{_libdir}/gstreamer-%{majmin}/libgsttcp.*
+%{_libdir}/gstreamer-%{majmin}/libgsttrm.*
+%{_libdir}/gstreamer-%{majmin}/libgsttextoverlay.*
+%{_libdir}/gstreamer-%{majmin}/libgsttheora.*
+%{_libdir}/gstreamer-%{majmin}/libgsttimeoverlay.*
+%{_libdir}/gstreamer-%{majmin}/libgsttypefindfunctions.*
+%{_libdir}/gstreamer-%{majmin}/libgstudp.*
+%{_libdir}/gstreamer-%{majmin}/libgstvbidec.*
+%{_libdir}/gstreamer-%{majmin}/libgstvcdsrc.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideo.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideo4linux.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideobalance.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideocrop.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideodrop.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideofilter.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideobox.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideomixer.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideorate.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideoflip.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideoscale.*
+%{_libdir}/gstreamer-%{majmin}/libgstvideotestsrc.*
+%{_libdir}/gstreamer-%{majmin}/libgstvolenv.*
+%{_libdir}/gstreamer-%{majmin}/libgstvolume.*
+%{_libdir}/gstreamer-%{majmin}/libgstvorbis.*
+%{_libdir}/gstreamer-%{majmin}/libgstwavenc.*
+%{_libdir}/gstreamer-%{majmin}/libgstwavparse.*
+%{_libdir}/gstreamer-%{majmin}/libgstximagesink.*
+%{_libdir}/gstreamer-%{majmin}/libgstxvimagesink.*
+%{_libdir}/gstreamer-%{majmin}/libgstxwindowlistener.*
+%{_libdir}/gstreamer-%{majmin}/libgsty4menc.*
+%{_libdir}/gstreamer-%{majmin}/libgstmixmatrix.*
 %{_mandir}/man*/*
 
+# Added when using pristine sources
+%{_libdir}/gstreamer-%{majmin}/libgstmp1videoparse.*
+%{_libdir}/gstreamer-%{majmin}/libgstmpeg1systemencode.*
+%{_libdir}/gstreamer-%{majmin}/libgstmpeg2subt.*
+%{_libdir}/gstreamer-%{majmin}/libgstmpegaudio.*
+%{_libdir}/gstreamer-%{majmin}/libgstmpegaudioparse.*
+%{_libdir}/gstreamer-%{majmin}/libgstmpegstream.*
+
 %files devel
 %defattr(-, root, root)
 %{_includedir}/gstreamer-%{majmin}/gst/*
@@ -175,10 +311,44 @@
 %{_libdir}/*so
 
 %changelog
-* Fri Jul 16 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.2-2.1
-- Rebuild for FC2
+* Wed Oct 06 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.5-1
+- Update to 0.8.5
+- Add mngsink
+- Remove speex for now, configure check is buggy
+
+* Fri Sep 24 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.4-2
+- Add gstreamer-plugins-0.8.4-vorbis-seek-workaround.patch for 133411
+
+* Mon Aug 31 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.4-1
+- Update to 0.8.4
+- Add gstglimagesink
+
+* Mon Aug 07 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.3-2
+- Restore media-info, which was not shipped for some unknown reason (#129392)
+
+* Mon Aug 02 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.3-1
+- Update to 0.8.3
+- Remove alsa fixes
+- Kill off lame plugin
+- Add alphacolor, decodebin, multifilesink, and playbin.
+
+* Wed Jul 28 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.2-6
+- Really restore ffmpegcolorspace
+- Reinstate checks for exact plugins installed, i was a
+  bit shortsighted in removing it
+- BuildRequire libtheora-devel
+- Ensure we disable faad and sndfile even if they are installed
+
+* Tue Jul 27 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.2-5
+- Re-add ffmpegcolorspace, since it does not have patent issues
+- Restore smp_mflags
+
+* Fri Jul 16 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.2-4
 - Backported ALSA fixes from CVS HEAD
 
+* Tue Jul 05 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.2-3
+- Another rebuild to placate beehive!
+
 * Tue Jul 05 2004 Colin Walters &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">walters at redhat.com</A>&gt; - 0.8.2-2
 - Rebuild to placate beehive
 

Modified: trunk/rpms/gstreamer-python/gstreamer-python.spec
===================================================================
--- trunk/rpms/gstreamer-python/gstreamer-python.spec	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/gstreamer-python/gstreamer-python.spec	2004-10-21 19:35:22 UTC (rev 2296)
@@ -4,16 +4,16 @@
 
 Summary: Python bindings for GStreamer
 Name: %{gstreamer}-python
-Version: 0.7.92
+Version: 0.7.93
 Release: 1
 Group: Development/Languages
 License: LGPL
 URL: <A HREF="http://gstreamer.net/">http://gstreamer.net/</A>
-Source: <A HREF="http://gstreamer.freedesktop.org/src/gst-python/gst-python-%{version">http://gstreamer.freedesktop.org/src/gst-python/gst-python-%{version</A>}.tar.gz
+Source: <A HREF="http://gstreamer.freedesktop.org/src/gst-python/gst-python-%{version">http://gstreamer.freedesktop.org/src/gst-python/gst-python-%{version</A>}.tar.bz2
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
 Requires: gnome-python2, pygtk2
 Requires: %{gstreamer}, %{gstreamer}-plugins
-BuildRequires: gcc-c++, python &gt;= 2, python-devel &gt;= 2, pygtk2-devel
+BuildRequires: gcc-c++, python &gt;= 2, python-devel &gt;= 2, pygtk2-devel &gt;= 2.4.0
 BuildRequires: %{gstreamer}-devel, %{gstreamer}-plugins-devel, xmlto, links
 # xwindowlistener needs X11 headers
 BuildRequires: XFree86-devel
@@ -53,6 +53,9 @@
 
 
 %changelog
+* Wed Oct 20 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net">http://freshrpms.net</A>&gt; 0.7.93-1
+- Update to 0.7.93.
+
 * Wed Jun 23 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net">http://freshrpms.net</A>&gt; 0.7.92-1
 - Spec file changes.
 

Modified: trunk/rpms/python-imaging/python-imaging.spec
===================================================================
--- trunk/rpms/python-imaging/python-imaging.spec	2004-10-20 18:13:56 UTC (rev 2295)
+++ trunk/rpms/python-imaging/python-imaging.spec	2004-10-21 19:35:22 UTC (rev 2296)
@@ -2,12 +2,12 @@
 # Authority: dag
 
 %{?dist: %{expand: %%define %dist 1}}
-%define pyver %(python2 -c 'import sys; print sys.version[:3]')
+%define pyver %(%{__python} -c 'import sys; print sys.version[:3]' || echo 2.0)
 
 Summary: Python's own image processing library
 Name: python-imaging
 Version: 1.1.4
-Release: 1
+Release: 2
 License: Distributable
 Group: Development/Libraries
 URL: <A HREF="http://www.pythonware.com/products/pil/">http://www.pythonware.com/products/pil/</A>
@@ -15,12 +15,12 @@
 Packager: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 Vendor: Dag Apt Repository, <A HREF="http://dag.wieers.com/apt/">http://dag.wieers.com/apt/</A>
 
-Source: <A HREF="http://www.pythonware.com/downloads/Imaging-%{version">http://www.pythonware.com/downloads/Imaging-%{version</A>}.tar.gz
-Source1: Imaging-doc.tar.bz2
+Source: <A HREF="http://effbot.org/downloads/Imaging-%{version">http://effbot.org/downloads/Imaging-%{version</A>}.tar.gz
+Patch: python-imaging-1.1.4-setup.patch
 BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}-root
-
-BuildPreReq: libjpeg-devel &gt;= 6b, zlib-devel &gt;= 1.1.2, libpng-devel &gt;= 1.0.1, tk
-Requires: python &gt;= %{pyver}, libjpeg &gt;= 6b, zlib &gt;= 1.1.2, libpng &gt;= 1.0.1
+Requires: python &gt;= %{pyver}
+BuildRequires: python, python-devel, gtk+-devel
+BuildRequires: libjpeg-devel, libpng-devel, freetype-devel, zlib-devel
 Obsoletes: PIL &lt;= %{version}
 Provides: PIL = %{version}-%{release}
 
@@ -31,46 +31,54 @@
 This library provides extensive file format support, an efficient
 internal representation, and powerful image processing capabilities.
 
+
 %prep
-%setup -n Imaging-%{version} -a1
-%{__perl} -pi.orig -e 's|/usr/local|%{_prefix}|g' *.in Makefile libImaging/configure libImaging/Makefile.in Scripts/*.py
-
+%setup -n Imaging-%{version}
+%patch -p1 -b .setup
+%{__perl} -pi -e 's|/usr/local|%{_prefix}|' \
+    Setup.in Scripts/*.py libImaging/Makefile.in libImaging/configure
 %{?fc2:%{__perl} -pi.orig -e 's|^(#include &lt;freetype/freetype.h&gt;)$|#include &lt;ft2build.h&gt;\n$1|' _imagingft.c}
-%{?fc2:%{__perl} -pi.orig -e 's|\@DEFS\@|-DHAVE_CONFIG_H|; s|tcl8.3|tcl8.4|; s|tk8.3|tk8.4|;' Makefile* Setup*}
 
+
 %build
-cd libImaging
-%configure
-%{__make} \
-	OPT=&quot;%{optflags}&quot;
-cd -
+pushd libImaging
+    %configure
+    %{__make} OPT=&quot;%{optflags}&quot;
+popd
+%{__python} setup.py build
 
-#python2 setup.py build_ext -i
-%{__make} -f Makefile.pre.in boot
-%{__make} \
-	OPT=&quot;%{optflags}&quot;
 
 %install
 %{__rm} -rf %{buildroot}
-%{__install} -D -m0644 PIL.pth %{buildroot}%{_libdir}/python%{pyver}/site-packages/PIL.pth
-%{__install} -D -m0755 _imaging.so %{buildroot}%{_libdir}/python%{pyver}/lib-dynload/_imaging.so
-%{__install} -D -m0755 _imagingtk.so %{buildroot}%{_libdir}/python%{pyver}/lib-dynload/_imagingtk.so
-%{__cp} -av  PIL/* %{buildroot}%{_libdir}/python%{pyver}/site-packages/
+%{__python} setup.py install --root=%{buildroot}
 
-%{__install} -d -m0755 %{buildroot}%{_includedir}/python%{pyver}/
-%{__cp} -av  libImaging/*.h %{buildroot}%{_includedir}/python%{pyver}/
 
 %clean
 %{__rm} -rf %{buildroot}
 
+
 %files
 %defattr(-, root, root, 0755)
-%doc CHANGES* CONTENTS README handbook/ Images/ notes/ Sane/ Scripts/
-%{_libdir}/python*/lib-dynload/*
-%{_libdir}/python*/site-packages/*
-%{_includedir}/python*/*.h
+%doc CHANGES* CONTENTS README Images/ Sane/ Scripts/
+%{_libdir}/python*/site-packages/PIL.pth
+%{_libdir}/python*/site-packages/PIL/
 
+
 %changelog
+* Thu Oct 21 2004 Matthias Saou &lt;<A HREF="http://freshrpms.net/">http://freshrpms.net/</A>&gt; 1.1.4-2
+- Further spec file updates.
+- Build without tcl/tk... which shouldn't harm for a python/gtk module!
+
+* Mon Oct 18 2004 Thomas Vander Stichele &lt;thomas at apestaart dot org&gt;
+- 1.1.4-2.fdr.1: adapted for Fedora
+
+* Sat Oct 16 2004 Johan Dahlin &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">johan at fluendo.com</A>&gt; - 1.1.4-2
+- stole dags spec
+- remove includes
+- install in PIL/ with .pth
+- install freetype bindings
+- don't depend on doc package
+
 * Mon Dec 08 2003 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 1.1.4-1
 - Fixed python location for RHFC1. (Ian Burrell)
 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001101.html">[SVN] r2295 - in trunk/rpms: perl-XML-LibXML	perl-XML-NamespaceSupport
</A></li>
	<LI>Next message: <A HREF="001103.html">[SVN] r2297 - trunk/rpms/sudosh
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1102">[ date ]</a>
              <a href="thread.html#1102">[ thread ]</a>
              <a href="subject.html#1102">[ subject ]</a>
              <a href="author.html#1102">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
