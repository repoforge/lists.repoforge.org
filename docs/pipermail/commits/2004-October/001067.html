<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [SVN] r2261 - in trunk/rpms: acroread afick airsnort
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2261%20-%20in%20trunk/rpms%3A%20acroread%20afick%20airsnort&In-Reply-To=%3C20041009222828.0A7B517F77%40web22.us.megagiga.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001066.html">
   <LINK REL="Next"  HREF="001068.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[SVN] r2261 - in trunk/rpms: acroread afick airsnort</H1>
    <B>svn-commits at rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5BSVN%5D%20r2261%20-%20in%20trunk/rpms%3A%20acroread%20afick%20airsnort&In-Reply-To=%3C20041009222828.0A7B517F77%40web22.us.megagiga.com%3E"
       TITLE="[SVN] r2261 - in trunk/rpms: acroread afick airsnort">svn-commits at rpmforge.net
       </A><BR>
    <I>Sun Oct 10 00:28:28 CEST 2004</I>
    <P><UL>
        <LI>Previous message: <A HREF="001066.html">[SVN] r2260 - trunk/tools/yam
</A></li>
        <LI>Next message: <A HREF="001068.html">[SVN] r2262 - in trunk/rpms: alevt alleyoop alphapplet amsn apollon	apolos arrows asp2php avidemux avidemux2 avifile awesum
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1067">[ date ]</a>
              <a href="thread.html#1067">[ thread ]</a>
              <a href="subject.html#1067">[ subject ]</a>
              <a href="author.html#1067">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2004-10-10 00:28:27 +0200 (Sun, 10 Oct 2004)
New Revision: 2261

Modified:
   trunk/rpms/acroread/acroread.spec
   trunk/rpms/afick/afick.spec
   trunk/rpms/airsnort/airsnort.spec
Log:
First SPEC files with rpmforge desktop_vendor.


Modified: trunk/rpms/acroread/acroread.spec
===================================================================
--- trunk/rpms/acroread/acroread.spec	2004-10-08 00:28:52 UTC (rev 2260)
+++ trunk/rpms/acroread/acroread.spec	2004-10-09 22:28:27 UTC (rev 2261)
@@ -7,6 +7,8 @@
 %{?el2:%define _without_freedesktop 1}
 %{?rh6:%define _without_freedesktop 1}
 
+%define desktop_vendor rpmforge
+
 %define real_version 509
 
 Summary: Adobe Reader for viewing PDF files
@@ -127,7 +129,7 @@
         %{__install} -D -m0644 acroread.desktop %{buildroot}%{_datadir}/gnome/apps/Graphics/acroread.desktop
 %else
         %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-        desktop-file-install --vendor net                  \
+        desktop-file-install --vendor %{desktop_vendor}    \
                 --add-category X-Red-Hat-Base              \
                 --dir %{buildroot}%{_datadir}/applications \
                 acroread.desktop
@@ -147,7 +149,7 @@
 %{_prefix}/X11R6/%{_lib}/X11/app-defaults/*
 %{_datadir}/pixmaps/acroread.png
 %{?_without_freedesktop:%{_datadir}/gnome/apps/Graphics/acroread.desktop}
-%{!?_without_freedesktop:%{_datadir}/applications/net-acroread.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-acroread.desktop}
 
 %files -n mozilla-acroread
 %defattr(-, root, root, 0755)

Modified: trunk/rpms/afick/afick.spec
===================================================================
--- trunk/rpms/afick/afick.spec	2004-10-08 00:28:52 UTC (rev 2260)
+++ trunk/rpms/afick/afick.spec	2004-10-09 22:28:27 UTC (rev 2261)
@@ -7,6 +7,8 @@
 %{?rh7:%define _without_freedesktop 1}
 %{?el2:%define _without_freedesktop 1}
 
+%define desktop_vendor rpmforge
+
 %define real_version %{version}-0
 
 Summary: File integrity checker
@@ -87,9 +89,10 @@
 	%{__install} -D -m0644 afick.desktop %{buildroot}%{_datadir}/gnome/apps/System/afick.desktop
 %else
         %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-        desktop-file-install --vendor gnome --delete-original \
-                --add-category X-Red-Hat-Base                 \
-                --dir %{buildroot}%{_datadir}/applications    \
+        desktop-file-install --vendor %{desktop_vendor}    \
+		--delete-original                          \
+                --add-category X-Red-Hat-Base              \
+                --dir %{buildroot}%{_datadir}/applications \
 		afick.desktop
 %endif
 
@@ -121,7 +124,7 @@
 %{_bindir}/afick-tk.pl
 %{_datadir}/pixmaps/afick.png
 %{?_without_freedesktop:%{_datadir}/gnome/apps/System/afick.desktop}
-%{!?_without_freedesktop:%{_datadir}/applications/gnome-afick.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-afick.desktop}
 
 %changelog
 * Tue Jun 15 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 2.2-2

Modified: trunk/rpms/airsnort/airsnort.spec
===================================================================
--- trunk/rpms/airsnort/airsnort.spec	2004-10-08 00:28:52 UTC (rev 2260)
+++ trunk/rpms/airsnort/airsnort.spec	2004-10-09 22:28:27 UTC (rev 2261)
@@ -2,8 +2,14 @@
 # Authority: dag
 # Upstream: Snax &lt;snax$shmoo,com&gt;
 
-%define dfi %(which desktop-file-install &amp;&gt;/dev/null; echo $?)
+%{?dist: %{expand: %%define %dist 1}}
 
+%{?rh7:%define _without_freedesktop 1}
+%{?el2:%define _without_freedesktop 1}
+%{?rh6:%define _without_freedesktop 1}
+
+%define desktop_vendor rpmforge
+
 %define real_version 0.2.4a
 
 Summary: Wireless LAN (WLAN) tool which recovers encryption keys
@@ -32,7 +38,7 @@
 %prep
 %setup -n %{name}-%{real_version}
 
-%{__cat} &lt;&lt;EOF &gt;%{name}.desktop
+%{__cat} &lt;&lt;EOF &gt;airsnort.desktop
 [Desktop Entry]
 Name=Airsnort Wireless Sniffer
 Comment=Recover wireless encryption keys.
@@ -54,15 +60,14 @@
 %{__install} -d -m0755 %{buildroot}%{_mandir}/man1/
 %{__install} -m0644 man/*.1 %{buildroot}%{_mandir}/man1/
 
-%if %{dfi}
-        %{__install} -d -m0755 %{buildroot}%{_datadir}/gnome/apps/Network/
-        %{__install} -m0644 %{name}.desktop %{buildroot}%{_datadir}/gnome/apps/Network/
+%if %{?_without_freedesktop:1}0
+        %{__install} -D -m0644 airsnort.desktop %{buildroot}%{_datadir}/gnome/apps/Network/airsnort.desktop
 %else
         %{__install} -d -m0755 %{buildroot}%{_datadir}/applications/
-        desktop-file-install --vendor gnome                \
+        desktop-file-install --vendor %{desktop_vendor}    \
                 --add-category X-Red-Hat-Base              \
                 --dir %{buildroot}%{_datadir}/applications \
-                %{name}.desktop
+                airsnort.desktop
 %endif
 
 %clean
@@ -71,13 +76,10 @@
 %files
 %defattr(-, root, root, 0755)
 %doc AUTHORS ChangeLog LICENSE README* TODO *.txt
-%doc %{_mandir}/man?/*
+%doc %{_mandir}/man1/*
 %{_bindir}/*
-%if %{dfi}
-        %{_datadir}/gnome/apps/Network/*.desktop
-%else
-        %{_datadir}/applications/*.desktop
-%endif
+%{?_without_freedesktop:%{_datadir}/gnome/apps/Network/airsnort.desktop}
+%{!?_without_freedesktop:%{_datadir}/applications/%{desktop_vendor}-airsnort.desktop}
 
 %changelog
 * Thu Apr 15 2004 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.2.4-0.a


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001066.html">[SVN] r2260 - trunk/tools/yam
</A></li>
	<LI>Next message: <A HREF="001068.html">[SVN] r2262 - in trunk/rpms: alevt alleyoop alphapplet amsn apollon	apolos arrows asp2php avidemux avidemux2 avifile awesum
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1067">[ date ]</a>
              <a href="thread.html#1067">[ thread ]</a>
              <a href="subject.html#1067">[ subject ]</a>
              <a href="author.html#1067">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
