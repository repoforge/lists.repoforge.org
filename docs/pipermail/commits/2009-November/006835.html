<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r8040 - in trunk/tools/dstat: . docs plugins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8040%20-%20in%20trunk/tools/dstat%3A%20.%20docs%20plugins&In-Reply-To=%3C200911251134.nAPBYa6W032066%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006834.html">
   <LINK REL="Next"  HREF="006836.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r8040 - in trunk/tools/dstat: . docs plugins</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8040%20-%20in%20trunk/tools/dstat%3A%20.%20docs%20plugins&In-Reply-To=%3C200911251134.nAPBYa6W032066%40surya.karan.org%3E"
       TITLE="[svn] r8040 - in trunk/tools/dstat: . docs plugins">packagers at lists.rpmforge.net
       </A><BR>
    <I>Wed Nov 25 12:34:36 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006834.html">[svn] r8039 - trunk/rpms/perl-JSON
</A></li>
        <LI>Next message: <A HREF="006836.html">[svn] r8041 - in trunk/tools/dstat: . docs plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6835">[ date ]</a>
              <a href="thread.html#6835">[ thread ]</a>
              <a href="subject.html#6835">[ subject ]</a>
              <a href="author.html#6835">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2009-11-25 11:34:35 +0000 (Wed, 25 Nov 2009)
New Revision: 8040

Added:
   trunk/tools/dstat/plugins/dstat_mysql5_cmds.py
Removed:
   trunk/tools/dstat/plugins/dstat.py
   trunk/tools/dstat/plugins/dstat_mysql5_com.py
Modified:
   trunk/tools/dstat/ChangeLog
   trunk/tools/dstat/Makefile
   trunk/tools/dstat/docs/dstat.1
   trunk/tools/dstat/docs/performance.txt
   trunk/tools/dstat/dstat
   trunk/tools/dstat/dstat.spec
   trunk/tools/dstat/plugins/dstat_battery.py
   trunk/tools/dstat/plugins/dstat_battery_remain.py
   trunk/tools/dstat/plugins/dstat_cpufreq.py
   trunk/tools/dstat/plugins/dstat_dbus.py
   trunk/tools/dstat/plugins/dstat_disk_util.py
   trunk/tools/dstat/plugins/dstat_fan.py
   trunk/tools/dstat/plugins/dstat_freespace.py
   trunk/tools/dstat/plugins/dstat_gpfs.py
   trunk/tools/dstat/plugins/dstat_gpfs_ops.py
   trunk/tools/dstat/plugins/dstat_helloworld.py
   trunk/tools/dstat/plugins/dstat_innodb_buffer.py
   trunk/tools/dstat/plugins/dstat_innodb_io.py
   trunk/tools/dstat/plugins/dstat_innodb_ops.py
   trunk/tools/dstat/plugins/dstat_lustre.py
   trunk/tools/dstat/plugins/dstat_memcache_hits.py
   trunk/tools/dstat/plugins/dstat_mysql5_conn.py
   trunk/tools/dstat/plugins/dstat_mysql5_io.py
   trunk/tools/dstat/plugins/dstat_mysql5_keys.py
   trunk/tools/dstat/plugins/dstat_mysql_io.py
   trunk/tools/dstat/plugins/dstat_net_packets.py
   trunk/tools/dstat/plugins/dstat_nfs3.py
   trunk/tools/dstat/plugins/dstat_nfs3_ops.py
   trunk/tools/dstat/plugins/dstat_nfsd3.py
   trunk/tools/dstat/plugins/dstat_nfsd3_ops.py
   trunk/tools/dstat/plugins/dstat_ntp.py
   trunk/tools/dstat/plugins/dstat_postfix.py
   trunk/tools/dstat/plugins/dstat_power.py
   trunk/tools/dstat/plugins/dstat_proc_count.py
   trunk/tools/dstat/plugins/dstat_rpc.py
   trunk/tools/dstat/plugins/dstat_rpcd.py
   trunk/tools/dstat/plugins/dstat_sendmail.py
   trunk/tools/dstat/plugins/dstat_snooze.py
   trunk/tools/dstat/plugins/dstat_thermal.py
   trunk/tools/dstat/plugins/dstat_top_bio.py
   trunk/tools/dstat/plugins/dstat_top_cpu.py
   trunk/tools/dstat/plugins/dstat_top_cputime.py
   trunk/tools/dstat/plugins/dstat_top_io.py
   trunk/tools/dstat/plugins/dstat_top_latency.py
   trunk/tools/dstat/plugins/dstat_top_mem.py
   trunk/tools/dstat/plugins/dstat_top_oom.py
Log:
Preparing 0.7.0 release for real.

Modified: trunk/tools/dstat/ChangeLog
===================================================================
--- trunk/tools/dstat/ChangeLog	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/ChangeLog	2009-11-25 11:34:35 UTC (rev 8040)
@@ -29,6 +29,7 @@
 - Improvements to timing when writing to screen so that it feels nicer
 - Added external dstat_disk_util to show per disk utilization rates in percentage
 - Added new --float option to force float values on screen
+- Reduce the number of paths used for importing modules (CVE-2009-3894)
 - Mass rename plugins to follow better convention (impacts existing options)
 - This release was 'sponsored' by the Linux Foundation during the Japan Linux Symposium
 

Modified: trunk/tools/dstat/Makefile
===================================================================
--- trunk/tools/dstat/Makefile	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/Makefile	2009-11-25 11:34:35 UTC (rev 8040)
@@ -37,7 +37,7 @@
 	svn list -R | pax -d -w -x ustar -s ,^,$(name)-$(version)/, | bzip2 &gt;../$(name)-$(version).tar.bz2
 
 rpm: dist
-	rpmbuild -tb --clean --rmsource --rmspec --define &quot;_rpmfilename %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm&quot; --define &quot;_rpmdir ../&quot; ../$(name)-$(version).tar.bz2
+	rpmbuild -tb --clean --rmspec --define &quot;_rpmfilename %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm&quot; --define &quot;_rpmdir ../&quot; ../$(name)-$(version).tar.bz2
 
 srpm: dist
-	rpmbuild -ts --clean --rmsource --rmspec --define &quot;_rpmfilename %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm&quot; --define &quot;_srcrpmdir ../&quot; ../$(name)-$(version).tar.bz2
+	rpmbuild -ts --clean --rmspec --define &quot;_rpmfilename %%{NAME}-%%{VERSION}-%%{RELEASE}.%%{ARCH}.rpm&quot; --define &quot;_srcrpmdir ../&quot; ../$(name)-$(version).tar.bz2

Modified: trunk/tools/dstat/docs/dstat.1
===================================================================
--- trunk/tools/dstat/docs/dstat.1	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/docs/dstat.1	2009-11-25 11:34:35 UTC (rev 8040)
@@ -2,7 +2,7 @@
 .\&quot; It was generated using the DocBook XSL Stylesheets (version 1.69.1).
 .\&quot; Instead of manually editing it, you probably should edit the DocBook XML
 .\&quot; source for it and then use the DocBook XSL Stylesheets to regenerate it.
-.TH &quot;DSTAT&quot; &quot;1&quot; &quot;11/24/2009&quot; &quot;\  0.7.0&quot; &quot;\ &quot;
+.TH &quot;DSTAT&quot; &quot;1&quot; &quot;11/25/2009&quot; &quot;\  0.7.0&quot; &quot;\ &quot;
 .\&quot; disable hyphenation
 .nh
 .\&quot; disable justification (adjust text to left margin only)

Modified: trunk/tools/dstat/docs/performance.txt
===================================================================
--- trunk/tools/dstat/docs/performance.txt	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/docs/performance.txt	2009-11-25 11:34:35 UTC (rev 8040)
@@ -44,7 +44,7 @@
 ------------------
 The following documents may be useful to tune a system for performance
 
-+ <A HREF="http://people.redhat.com/alikins/system_tuning.html[">http://people.redhat.com/alikins/system_tuning.html[</A>]
+ * <A HREF="http://people.redhat.com/alikins/system_tuning.html[">http://people.redhat.com/alikins/system_tuning.html[</A>]
 
 
 NOTE: Please send me improvements to this document.

Modified: trunk/tools/dstat/dstat
===================================================================
--- trunk/tools/dstat/dstat	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/dstat	2009-11-25 11:34:35 UTC (rev 8040)
@@ -20,19 +20,17 @@
 
 theme = { 'default': '' }
 
-def inspath(path):
+def addpath(path):
     if os.path.isdir(path) and path not in sys.path:
-        sys.path.insert(0, path)
+        sys.path.append(path)
 
 try:
     import sys, os, time, sched, re
     import types, resource, getpass, glob
-    inspath('/usr/local/share/dstat/')
-    inspath('/usr/share/dstat/')
-    inspath(os.path.abspath(os.path.dirname(sys.argv[0])) + '/plugins/')    # binary path + /plugins/
-    inspath(os.getcwd() + '/plugins/')                                      # current path + /plugins/
-    inspath(os.getcwd())                                                    # current path
-    inspath(os.path.expanduser('~/.dstat/'))                                # home + /.dstat/
+    addpath(os.path.expanduser('~/.dstat/'))                                # home + /.dstat/
+    addpath(os.path.abspath(os.path.dirname(sys.argv[0])) + '/plugins/')    # binary path + /plugins/
+    addpath('/usr/share/dstat/')
+    addpath('/usr/local/share/dstat/')
 except KeyboardInterrupt, e:
     pass
 
@@ -1586,7 +1584,7 @@
         theme = {
             'title': ansi['darkblue'],
             'subtitle': ansi['darkcyan'] + ansi['underline'],
-            'frame': ansi['darkgray'],
+            'frame': ansi['darkblue'],
             'default': ansi['default'],
             'error': ansi['white'] + ansi['redbg'],
             'roundtrip': ansi['darkblue'],
@@ -1594,6 +1592,8 @@
             'input': ansi['darkgray'],
             'text_lo': ansi['black'],
             'text_hi': ansi['darkgray'],
+            'unit_lo': ansi['black'],
+            'unit_hi': ansi['darkgray'],
             'colors_lo': (ansi['darkred'], ansi['darkmagenta'], ansi['darkgreen'], ansi['darkblue'],
                           ansi['darkcyan'], ansi['gray'], ansi['red'], ansi['green']),
             'colors_hi': (ansi['red'], ansi['magenta'], ansi['green'], ansi['blue'],
@@ -1603,7 +1603,7 @@
         theme = {
             'title': ansi['darkblue'],
             'subtitle': ansi['blue'] + ansi['underline'],
-            'frame': ansi['darkgray'],
+            'frame': ansi['darkblue'],
             'default': ansi['default'],
             'error': ansi['white'] + ansi['redbg'],
             'roundtrip': ansi['darkblue'],
@@ -1611,6 +1611,8 @@
             'input': ansi['darkgray'],
             'text_lo': ansi['gray'],
             'text_hi': ansi['darkgray'],
+            'unit_lo': ansi['darkgray'],
+            'unit_hi': ansi['darkgray'],
             'colors_lo': (ansi['red'], ansi['yellow'], ansi['green'], ansi['blue'],
                           ansi['cyan'], ansi['white'], ansi['darkred'], ansi['darkgreen']),
             'colors_hi': (ansi['darkred'], ansi['darkyellow'], ansi['darkgreen'], ansi['darkblue'],
@@ -1786,13 +1788,14 @@
     else:
         units = (' ', 'k', 'M', 'G', 'T', 'P', 'E', 'Z', 'Y')
 
-    zero = theme['text_hi']
     if step == op.delay:
         colors = theme['colors_lo']
-        text = theme['text_lo']
+        ctext = theme['text_lo']
+        cunit = theme['unit_lo']
     else:
         colors = theme['colors_hi']
-        text = theme['text_hi']
+        ctext = theme['text_hi']
+        cunit = theme['unit_hi']
 
     ### Convert value to string given base and field-length
     if op.integer and type in ('d', 'p', 'f'):
@@ -1804,17 +1807,17 @@
     elif type in ('f'):
         ret, c = fchg(var, width, base)
     elif type in ('s'):
-        ret, c = str(var), text
+        ret, c = str(var), ctext
     elif type in ('t'):
-        ret, c = '%2dh%02d' % (var / 60, var % 60), text
+        ret, c = '%2dh%02d' % (var / 60, var % 60), ctext
     else:
         raise Exception, 'Type %s not known to dstat.' % type
 
     ### Set the counter color
     if ret == '0':
-        color = zero
+        color = cunit
     elif scale &lt;= 0:
-        color = text
+        color = ctext
     elif scale not in (1000, 1024):
         color = colors[int(var/scale)%len(colors)]
     elif type in ('p'):
@@ -1822,7 +1825,7 @@
     elif type in ('d', 'f'):
         color = colors[c%len(colors)]
     else:
-        color = text
+        color = ctext
 
     ### Justify value to left if string
     if type in ('s',):
@@ -1833,9 +1836,9 @@
     ### Add unit to output
     if unit:
         if c != -1 and round(var) != 0:
-            ret = ret + text + units[c]
+            ret += cunit + units[c]
         else:
-            ret = ret + ' '
+            ret += ' '
 
     return ret
 

Modified: trunk/tools/dstat/dstat.spec
===================================================================
--- trunk/tools/dstat/dstat.spec	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/dstat.spec	2009-11-25 11:34:35 UTC (rev 8040)
@@ -54,6 +54,7 @@
 %changelog
 * Wed Nov 25 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.0-1
 - Updated to release 0.7.0.
+- Reduce the number of paths used for importing modules (CVE-2009-3894)
 
 * Tue Dec 02 2008 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.6.9-1
 - Updated to release 0.6.9.

Deleted: trunk/tools/dstat/plugins/dstat.py
===================================================================
--- trunk/tools/dstat/plugins/dstat.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1 +0,0 @@
-link ../dstat
\ No newline at end of file

Modified: trunk/tools/dstat/plugins/dstat_battery.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_battery.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_battery.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,10 @@
-### Dstat battery plugin
-### Displays battery information from ACPI
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Percentage of remaining battery power as reported by ACPI.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.file = file
         self.name = 'battery'

Modified: trunk/tools/dstat/plugins/dstat_battery_remain.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_battery_remain.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_battery_remain.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,13 @@
-### Dstat battery plugin
-### Displays battery information from ACPI
-##
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Remaining battery time.
+
+    Calculated from power drain and remaining battery power. Information is
+    retrieved from ACPI.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'remain'
         self.type = 't'

Modified: trunk/tools/dstat/plugins/dstat_cpufreq.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_cpufreq.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_cpufreq.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,12 +1,10 @@
-### Dstat cpu frequency plugin
-### Displays CPU frequency information (from ACPI)
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
 
-global glob
-import glob
-
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    CPU frequency in percentage as reported by ACPI.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'frequency'
         self.type = 'p'

Modified: trunk/tools/dstat/plugins/dstat_dbus.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_dbus.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_dbus.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,10 @@
-### Dstat DBUS plugin
-### Displays dbus sessions
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Number of active dbus sessions.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'dbus'
         self.type = 'd'

Modified: trunk/tools/dstat/plugins/dstat_disk_util.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_disk_util.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_disk_util.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,8 +1,12 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 class dstat_plugin(dstat):
     &quot;&quot;&quot;
-    Percentage of CPU time during which I/O requests were issued to the device
-    (bandwidth utilization for the device). Device saturation occurs when
-    this value is close to 100%.
+    Percentage of bandwidth utilization for block devices.
+
+    Displays percentage of CPU time during which I/O requests were issued
+    to the device (bandwidth utilization for the device). Device saturation
+    occurs when this value is close to 100%.
     &quot;&quot;&quot;
 
     def __init__(self):
@@ -22,7 +26,7 @@
             name = l[2]
             ret.append(name)
         for item in objlist: ret.append(item)
-        if not ret: 
+        if not ret:
             raise Exception, &quot;No suitable block devices found to monitor&quot;
         return ret
 

Modified: trunk/tools/dstat/plugins/dstat_fan.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_fan.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_fan.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,4 +1,10 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Fan speed in RPM (rotations per minute) as reported by ACPI.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'fan'
         self.type = 'd'

Modified: trunk/tools/dstat/plugins/dstat_freespace.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_freespace.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_freespace.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,13 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 ### FIXME: This module needs infrastructure to provide a list of mountpoints
 ### FIXME: Would be nice to have a total by default (half implemented)
 
-### FIXME: Apparently needs python 2.0, possibly python 2.2
+class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Amount of used and free space per mountpoint.
+    &quot;&quot;&quot;
 
-class dstat_plugin(dstat):
     def __init__(self):
         self.open('/etc/mtab')
         self.nick = ('used', 'free')

Modified: trunk/tools/dstat/plugins/dstat_gpfs.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_gpfs.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_gpfs.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,4 +1,10 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Total amount of read and write throughput (in bytes) on a GPFS filesystem.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'gpfs i/o'
         self.vars = ('_br_', '_bw_')

Modified: trunk/tools/dstat/plugins/dstat_gpfs_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_gpfs_ops.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_gpfs_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,4 +1,10 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Number of operations performed on a GPFS filesystem.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'gpfs file operations'
         self.type = 'd'
@@ -30,11 +36,11 @@
             for name in self.vars:
                 self.val[name] = (self.set2[name] - self.set1[name]) * 1.0 / elapsed
         except IOError, e:
+            if op.debug &gt; 1: print '%s: lost pipe to mmpmon, %s' % (self.filename, e)
             for name in self.vars: self.val[name] = -1
-#           print self.filename + ': lost pipe to mmpmon,', e
         except Exception, e:
+            if op.debug &gt; 1: print '%s: exception %s' % (self.filename, e)
             for name in self.vars: self.val[name] = -1
-#           print 'dstat_gpfs: exception', e
 
         if step == op.delay:
             self.set1.update(self.set2)

Modified: trunk/tools/dstat/plugins/dstat_helloworld.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_helloworld.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_helloworld.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,10 @@
-### Dstat Hello World plugin
-### Displays hello world
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Example &quot;Hello world!&quot; output plugin for aspiring Dstat developers.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.type = 's'
         self.width = 12

Modified: trunk/tools/dstat/plugins/dstat_innodb_buffer.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_innodb_buffer.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_innodb_buffer.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 global mysql_options
 mysql_options = os.getenv('DSTAT_MYSQL')
 

Modified: trunk/tools/dstat/plugins/dstat_innodb_io.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_innodb_io.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_innodb_io.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 global mysql_options
 mysql_options = os.getenv('DSTAT_MYSQL')
 

Modified: trunk/tools/dstat/plugins/dstat_innodb_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_innodb_ops.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_innodb_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;dag$wieers,com&gt;
+
 global mysql_options
 mysql_options = os.getenv('DSTAT_MYSQL')
 

Modified: trunk/tools/dstat/plugins/dstat_lustre.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_lustre.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_lustre.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,8 +1,5 @@
-# Authority: Brock Palen &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">brockp at mlds-networks.com</A>&gt;, Kilian Vavalotti &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">kilian at stanford.edu</A>&gt;
+# Author: Brock Palen &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">brockp at mlds-networks.com</A>&gt;, Kilian Vavalotti &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">kilian at stanford.edu</A>&gt;
 
-global os
-import os
-
 class dstat_plugin(dstat):
     def __init__(self):
         self.nick = ('read', 'write')

Modified: trunk/tools/dstat/plugins/dstat_memcache_hits.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_memcache_hits.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_memcache_hits.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,11 @@
-### Dstat Display Memcache Hit Count plugin
-### Displays the number of Memcache &quot;get_hits&quot; and &quot;get_misses&quot;
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dean.wilson at gmail.com</A>
+### Author: Dean Wilson &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dean.wilson at gmail.com</A>&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Memcache hit count plugin.
+
+    Displays the number of memcache get_hits and get_misses.
+    &quot;&quot;&quot;
     def __init__(self):
         self.name = 'Memcache Hits'
         self.type = 'd'
@@ -22,6 +24,5 @@
 
     def extract(self):
         stats = self.mc.get_stats()
-
-        self.val['get_hits'] = int( stats[0][1]['get_hits'] )
-        self.val['get_misses'] = int( stats[0][1]['get_misses'] )
+        for key in self.vars:
+            self.val[key] = long(stats[0][1][key])

Copied: trunk/tools/dstat/plugins/dstat_mysql5_cmds.py (from rev 8036, trunk/tools/dstat/plugins/dstat_mysql5_com.py)
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_cmds.py	                        (rev 0)
+++ trunk/tools/dstat/plugins/dstat_mysql5_cmds.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -0,0 +1,47 @@
+### Author: &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">lefred at inuits.be</A>&gt;
+
+global mysql_user
+mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
+global mysql_pwd
+mysql_pwd = os.getenv('DSTAT_MYSQL_PWD')
+
+class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Plugin for MySQL 5 commands.
+    &quot;&quot;&quot;
+    def __init__(self):
+        self.name = 'mysql5 cmds'
+        self.type = 'i'
+        self.width = 5
+        self.scale = 1
+        self.nick = ('sel', 'ins','upd','del')
+        self.vars = ('Com_select', 'Com_insert','Com_update','Com_delete')
+
+    def check(self): 
+        global MySQLdb
+        import MySQLdb
+        try:
+            self.db = MySQLdb.connect(user=mysql_user, passwd=mysql_pwd)
+        except Exception, e:
+            raise Exception, 'Cannot interface with MySQL server: %s' % e
+
+    def extract(self):
+        try:
+            c = self.db.cursor()
+            for name in self.vars:
+                c.execute(&quot;&quot;&quot;show global status like '%s';&quot;&quot;&quot; % name)
+                line = c.fetchone()
+                if line[0] in self.vars:
+                    self.set2[line[0]] = long(line[1])
+
+            for name in self.vars:
+                self.val[name] = self.set2[name] * 1.0 / elapsed
+
+            if step == op.delay:
+                self.set1.update(self.set2)
+
+        except Exception, e:
+            for name in self.vars:
+                self.val[name] = -1
+
+# vim:ts=4:sw=4:et

Deleted: trunk/tools/dstat/plugins/dstat_mysql5_com.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_com.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_mysql5_com.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,45 +0,0 @@
-# dstat plugin for MySQL 5 Commands 
-# 2007-09-04 - <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">lefred at inuits.be</A>
-global MySQLdb
-import MySQLdb
-
-global mysql_user
-global mysql_pwd
-mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
-mysql_pwd = os.getenv('DSTAT_MYSQL_PWD')
-
-class dstat_plugin(dstat):
-    def __init__(self):
-        self.name = 'mysql5 com'
-        self.type = 'i'
-        self.width = 5
-        self.scale = 1
-        self.vars = ('Com_select', 'Com_insert','Com_update','Com_delete')
-        self.nick = ('sel', 'ins','upd','del')
-
-    def check(self): 
-        try:
-            self.db = MySQLdb.connect(user=mysql_user, passwd=mysql_pwd)
-        except:
-            raise Exception, 'Cannot interface with MySQL server'
-
-    def extract(self):
-        try:
-            c = self.db.cursor()
-            for name in self.vars:
-              c.execute(&quot;&quot;&quot;show global status like '%s';&quot;&quot;&quot; % name)
-              line = c.fetchone()
-              if line[0] in self.vars:
-                    self.set2[line[0]] = int(line[1])
-
-            for name in self.vars:
-                self.val[name] = self.set2[name] * 1.0 / elapsed
-
-            if step == op.delay:
-                self.set1.update(self.set2)
-
-        except Exception, e:
-            for name in self.vars:
-                self.val[name] = -1
-
-# vim:ts=4:sw=4:et

Modified: trunk/tools/dstat/plugins/dstat_mysql5_conn.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_conn.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_mysql5_conn.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,27 +1,31 @@
-# dstat plugin for MySQL 5 connections 
-# 2007-09-04 - <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">lefred at inuits.be</A>
-global MySQLdb
-import MySQLdb
+### Author: &lt;lefred$inuits,be&gt;
 
 global mysql_user
+mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
+
 global mysql_pwd
-mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
 mysql_pwd = os.getenv('DSTAT_MYSQL_PWD')
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Plugin for MySQL 5 connections.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'mysql5 conn'
         self.type = 'f'
         self.width = 4
         self.scale = 1
+        self.nick = ('ThCon', '%Con')
         self.vars = ('Threads_connected', 'Threads')
-        self.nick = ('ThCon', '%Con')
 
     def check(self): 
+        global MySQLdb
+        import MySQLdb
         try:
             self.db = MySQLdb.connect(user=mysql_user, passwd=mysql_pwd)
-        except:
-            raise Exception, 'Cannot interface with MySQL server'
+        except Exception, e:
+            raise Exception, 'Cannot interface with MySQL server, %s' % e
 
     def extract(self):
         try:
@@ -31,8 +35,8 @@
             c.execute(&quot;&quot;&quot;show global status like 'Threads_connected';&quot;&quot;&quot;)
             thread = c.fetchone()
             if thread[0] in self.vars:
-                    self.set2[thread[0]] = float(thread[1])
-                    self.set2['Threads'] = (float(thread[1]) / float(max[1]) * float(100)) 
+                self.set2[thread[0]] = float(thread[1])
+                self.set2['Threads'] = float(thread[1] / float(max[1]) 1.0 * 100)
 
             for name in self.vars:
                 self.val[name] = self.set2[name] * 1.0 / elapsed

Modified: trunk/tools/dstat/plugins/dstat_mysql5_io.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_io.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_mysql5_io.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,20 +1,24 @@
-# dstat plugin for MySQL 5 I/O 
-# 2007-09-04 - <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">lefred at inuits.be</A>
-global MySQLdb
-import MySQLdb
+### Author: &lt;lefred$inuits,be&gt;
 
 global mysql_user
+mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
+
 global mysql_pwd
-mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
 mysql_pwd = os.getenv('DSTAT_MYSQL_PWD')
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Plugin for MySQL 5 I/O.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'mysql5 io'
+        self.nick = ('recv', 'sent')
         self.vars = ('Bytes_received', 'Bytes_sent')
-        self.nick = ('recv', 'sent')
 
     def check(self): 
+        global MySQLdb
+        import MySQLdb
         try:
             self.db = MySQLdb.connect(user=mysql_user, passwd=mysql_pwd)
         except:

Modified: trunk/tools/dstat/plugins/dstat_mysql5_keys.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_keys.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_mysql5_keys.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,23 +1,27 @@
-# dstat plugin for MySQL 5 Keys 
-# 2007-09-04 - <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">lefred at inuits.be</A>
-global MySQLdb
-import MySQLdb
+### Author: &lt;lefred$inuits,be&gt;
 
 global mysql_user
+mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
+
 global mysql_pwd
-mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
 mysql_pwd = os.getenv('DSTAT_MYSQL_PWD') 
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Plugin for MySQL 5 Keys.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'mysql5 key status'
         self.type = 'f'
         self.width = 4
         self.scale = 1000
+        self.nick = ('used', 'read', 'writ', 'rreq', 'wreq')
         self.vars = ('Key_blocks_used', 'Key_reads', 'Key_writes', 'Key_read_requests', 'Key_write_requests')
-        self.nick = ('used', 'read', 'writ', 'rreq', 'wreq')
 
     def check(self): 
+        global MySQLdb
+        import MySQLdb
         try:
             self.db = MySQLdb.connect(user=mysql_user, passwd=mysql_pwd)
         except:

Modified: trunk/tools/dstat/plugins/dstat_mysql_io.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql_io.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_mysql_io.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -4,8 +4,8 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'mysql io'
+        self.nick = ('recv', 'sent')
         self.vars = ('Bytes_received', 'Bytes_sent')
-        self.nick = ('recv', 'sent')
 
     def check(self): 
         if not os.access('/usr/bin/mysql', os.X_OK):

Modified: trunk/tools/dstat/plugins/dstat_net_packets.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_net_packets.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_net_packets.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,4 +1,10 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Number of packets received and send per interface.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.type = 'f'
         self.width = 5

Modified: trunk/tools/dstat/plugins/dstat_nfs3.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfs3.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_nfs3.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'nfs3 client'

Modified: trunk/tools/dstat/plugins/dstat_nfs3_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfs3_ops.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_nfs3_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'extended nfs3 client operations'

Modified: trunk/tools/dstat/plugins/dstat_nfsd3.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfsd3.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_nfsd3.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'nfs3 server'

Modified: trunk/tools/dstat/plugins/dstat_nfsd3_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfsd3_ops.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_nfsd3_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'extended nfs3 server operations'

Modified: trunk/tools/dstat/plugins/dstat_ntp.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_ntp.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_ntp.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,13 +1,5 @@
-### Dstat NTP plugin
-### Displays time from an NTP server
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
-### Beware that this dstat plugin typically takes a lot longer to run than
-### system plugins and for that reason it is important to use an NTP server
-### located nearby as well as make sure that it does not impact your other
-### counters too much.
-
 global socket
 import socket
 
@@ -18,6 +10,15 @@
 ### FIXME: Interrupts socket if data is overdue (more than 250ms ?)
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Time from an NTP server.
+
+    BEWARE: this dstat plugin typically takes a lot longer to run than
+    system plugins and for that reason it is important to use an NTP server
+    located nearby as well as make sure that it does not impact your other
+    counters too much.
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'ntp'
         self.timefmt = os.getenv('DSTAT_TIMEFMT') or '%d-%m %H:%M:%S'

Modified: trunk/tools/dstat/plugins/dstat_postfix.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_postfix.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_postfix.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,5 +1,4 @@
-global glob
-import glob
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
 class dstat_plugin(dstat):
     def __init__(self):

Modified: trunk/tools/dstat/plugins/dstat_power.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_power.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_power.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,14 @@
-### Dstat power usage plugin
-### Displays power usage information from ACPI
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Power usage information from ACPI.
+
+    Displays the power usage in mwh of your system's battery using ACPI
+    information. This information is only available when the battery is
+    being used (or being charged).
+    &quot;&quot;&quot;
+
     def __init__(self):
         self.name = 'power'
         self.type = 'f'

Modified: trunk/tools/dstat/plugins/dstat_proc_count.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_proc_count.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_proc_count.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,7 +1,9 @@
-### Dstat Display Process Count plugin
-### Displays the number of processes on a machine
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Total Number of processes on this system.
+    &quot;&quot;&quot;
     def __init__(self):
         self.name   = 'procs'
         self.type = 'd'

Modified: trunk/tools/dstat/plugins/dstat_rpc.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_rpc.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_rpc.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'rpc client'
@@ -13,8 +15,10 @@
             if not l or l[0] != 'rpc': continue
             for i, name in enumerate(self.vars):
                 self.set2[name] = long(l[i+1])
+
         for name in self.vars:
             self.val[name] = (self.set2[name] - self.set1[name]) * 1.0 / elapsed
+
         if step == op.delay:
             self.set1.update(self.set2)
 

Modified: trunk/tools/dstat/plugins/dstat_rpcd.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_rpcd.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_rpcd.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'rpc server'
@@ -13,8 +15,10 @@
             if not l or l[0] != 'rpc': continue
             for i, name in enumerate(self.vars):
                 self.set2[name] = long(l[i+1])
+
         for name in self.vars:
             self.val[name] = (self.set2[name] - self.set1[name]) * 1.0 / elapsed
+
         if step == op.delay:
             self.set1.update(self.set2)
 

Modified: trunk/tools/dstat/plugins/dstat_sendmail.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_sendmail.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_sendmail.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,6 +1,6 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 ### FIXME: Should read /var/log/mail/statistics or /etc/mail/statistics (format ?)
-global glob
-import glob
 
 class dstat_plugin(dstat):
     def __init__(self):

Modified: trunk/tools/dstat/plugins/dstat_snooze.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_snooze.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_snooze.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -19,8 +19,11 @@
     def show(self):
         if self.val['snooze'] &gt; step + 1:
             return ansi['default'] + '     -'
+
         color = 'white'
         if step != op.delay:
             color = 'gray'
+
         snoze, c = fchg(self.val['snooze'], 7, 1000)
+
         return ansi[color] + snoze

Modified: trunk/tools/dstat/plugins/dstat_thermal.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_thermal.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_thermal.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'thermal'

Modified: trunk/tools/dstat/plugins/dstat_top_bio.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_bio.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_top_bio.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,11 @@
-### Dstat most expensive block I/O process plugin
-### Displays the name of the most expensive block I/O process
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Top most expesnive block I/O process.
+
+    Displays the name of the most expensive block I/O process.
+    &quot;&quot;&quot;
     def __init__(self):
         self.name = 'most expensive'
         self.type = 's'
@@ -66,7 +68,7 @@
                 self.pidset1[pid].update(self.pidset2[pid])
 
         if self.val['usage'] != 0.0:
-            self.val['block i/o process'] = '%-*s%s:%s' % (self.width-11, self.val['name'][0:self.width-11], cprint(self.val['read_usage'], 'd', 5, 1024), cprint(self.val['write_usage'], 'd', 5, 1024))
+            self.val['block i/o process'] = '%-*s%s %s' % (self.width-11, self.val['name'][0:self.width-11], cprint(self.val['read_usage'], 'd', 5, 1024), cprint(self.val['write_usage'], 'd', 5, 1024))
 
         ### Debug (show PID)
 #        self.val['block i/o process'] = '%*s %-*s' % (5, self.val['pid'], self.width-6, self.val['name'])

Modified: trunk/tools/dstat/plugins/dstat_top_cpu.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_cpu.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_top_cpu.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,11 +1,13 @@
-### Dstat most expensive process plugin
-### Displays the name of the most expensive process
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Authority: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
-global cpunr
+class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Most expensive CPU process.
 
-class dstat_plugin(dstat):
+    Displays the process that uses the CPU the most during the monitored
+    interval. The value displayed is the percentage of CPU time for the total
+    amount of CPU processing power. Based on per process CPU information.
+    &quot;&quot;&quot;
     def __init__(self):
         self.name = 'most expensive'
         self.type = 's'

Modified: trunk/tools/dstat/plugins/dstat_top_cputime.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_cputime.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_top_cputime.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -65,7 +65,7 @@
                 self.pidset1[pid].update(self.pidset2[pid])
 
         if self.val['result'] != 0.0:
-            self.val['cputime process'] = '%-*s%s' % (self.width-4, self.val['name'][0:self.width-4], cprint(self.val['result'], 'f', 4, 100))
+            self.val['cputime process'] = '%-*s%s' % (self.width-4, self.val['name'][0:self.width-4], cprint(self.val['result'], 'd', 4, 100))
 
         ### Debug (show PID)
 #       self.val['cputime process'] = '%*s %-*s' % (5, self.val['pid'], self.width-6, self.val['name'])

Modified: trunk/tools/dstat/plugins/dstat_top_io.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_io.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_top_io.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -67,7 +67,7 @@
                 self.pidset1[pid].update(self.pidset2[pid])
 
         if self.val['usage'] != 0.0:
-            self.val['i/o process'] = '%-*s%s:%s' % (self.width-11, self.val['name'][0:self.width-11], cprint(self.val['read_usage'], 'd', 5, 1024), cprint(self.val['write_usage'], 'd', 5, 1024))
+            self.val['i/o process'] = '%-*s%s %s' % (self.width-11, self.val['name'][0:self.width-11], cprint(self.val['read_usage'], 'd', 5, 1024), cprint(self.val['write_usage'], 'd', 5, 1024))
 
         ### Debug (show PID)
 #       self.val['i/o process'] = '%*s %-*s' % (5, self.val['pid'], self.width-6, self.val['name'])

Modified: trunk/tools/dstat/plugins/dstat_top_latency.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_latency.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_top_latency.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,12 +1,16 @@
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Authority: Dag Wieers &lt;dag$wieers,com&gt;
 
-### For more information, see:
-###     <A HREF="http://eaglet.rain.com/rick/linux/schedstat/">http://eaglet.rain.com/rick/linux/schedstat/</A>
-
 class dstat_plugin(dstat):
     &quot;&quot;&quot;
-    Name and total amount of CPU time waited in milliseconds of the process
-    that has the highest total amount waited for the measured timeframe.
+    Top process with highest total latency.
+
+    Displays name and total amount of CPU time waited in milliseconds of
+    the process that has the highest total amount waited for the measured
+    timeframe.
+
+    For more information see:
+
+        <A HREF="http://eaglet.rain.com/rick/linux/schedstat/">http://eaglet.rain.com/rick/linux/schedstat/</A>
     &quot;&quot;&quot;
 
     def __init__(self):
@@ -65,7 +69,7 @@
                 self.pidset1[pid].update(self.pidset2[pid])
 
         if self.val['result'] != 0.0:
-            self.val['latency process'] = '%-*s%s' % (self.width-4, self.val['name'][0:self.width-4], cprint(self.val['result'], 'f', 4, 100))
+            self.val['latency process'] = '%-*s%s' % (self.width-4, self.val['name'][0:self.width-4], cprint(self.val['result'], 'd', 4, 100))
 
         ### Debug (show PID)
 #       self.val['latency process'] = '%*s %-*s' % (5, self.val['pid'], self.width-6, self.val['name'])

Modified: trunk/tools/dstat/plugins/dstat_top_mem.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_mem.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_top_mem.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -1,9 +1,13 @@
-### Dstat most expensive process plugin
-### Displays the name of the most expensive process
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
+### Authority: Dag Wieers &lt;dag$wieers,com&gt;
 
 class dstat_plugin(dstat):
+    &quot;&quot;&quot;
+    Most expensive CPU process.
+
+    Displays the process that uses the CPU the most during the monitored
+    interval. The value displayed is the percentage of CPU time for the total
+    amount of CPU processing power. Based on per process CPU information.
+    &quot;&quot;&quot;
     def __init__(self):
         self.name = 'most expensive'
         self.type = 's'

Modified: trunk/tools/dstat/plugins/dstat_top_oom.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_oom.py	2009-11-24 13:07:39 UTC (rev 8039)
+++ trunk/tools/dstat/plugins/dstat_top_oom.py	2009-11-25 11:34:35 UTC (rev 8040)
@@ -3,6 +3,9 @@
 ###
 ### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
 
+### More information:
+###    <A HREF="http://lwn.net/Articles/317814/">http://lwn.net/Articles/317814/</A>
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'out of memory'


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006834.html">[svn] r8039 - trunk/rpms/perl-JSON
</A></li>
	<LI>Next message: <A HREF="006836.html">[svn] r8041 - in trunk/tools/dstat: . docs plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6835">[ date ]</a>
              <a href="thread.html#6835">[ thread ]</a>
              <a href="subject.html#6835">[ subject ]</a>
              <a href="author.html#6835">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
