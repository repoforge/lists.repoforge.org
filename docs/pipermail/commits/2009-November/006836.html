<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r8041 - in trunk/tools/dstat: . docs plugins
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8041%20-%20in%20trunk/tools/dstat%3A%20.%20docs%20plugins&In-Reply-To=%3C200911260239.nAQ2d1fN025791%40surya.karan.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006835.html">
   <LINK REL="Next"  HREF="006837.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r8041 - in trunk/tools/dstat: . docs plugins</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r8041%20-%20in%20trunk/tools/dstat%3A%20.%20docs%20plugins&In-Reply-To=%3C200911260239.nAQ2d1fN025791%40surya.karan.org%3E"
       TITLE="[svn] r8041 - in trunk/tools/dstat: . docs plugins">packagers at lists.rpmforge.net
       </A><BR>
    <I>Thu Nov 26 03:39:01 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006835.html">[svn] r8040 - in trunk/tools/dstat: . docs plugins
</A></li>
        <LI>Next message: <A HREF="006837.html">[svn] r8042 - trunk/tools/dstat/docs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6836">[ date ]</a>
              <a href="thread.html#6836">[ thread ]</a>
              <a href="subject.html#6836">[ subject ]</a>
              <a href="author.html#6836">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2009-11-26 02:39:00 +0000 (Thu, 26 Nov 2009)
New Revision: 8041

Added:
   trunk/tools/dstat/docs/performance.html
Modified:
   trunk/tools/dstat/ChangeLog
   trunk/tools/dstat/docs/dstat-paper.html
   trunk/tools/dstat/docs/dstat-paper.txt
   trunk/tools/dstat/docs/dstat.1
   trunk/tools/dstat/docs/dstat.1.html
   trunk/tools/dstat/docs/dstat.1.txt
   trunk/tools/dstat/dstat
   trunk/tools/dstat/dstat.spec
   trunk/tools/dstat/plugins/dstat_battery.py
   trunk/tools/dstat/plugins/dstat_dbus.py
   trunk/tools/dstat/plugins/dstat_disk_util.py
   trunk/tools/dstat/plugins/dstat_freespace.py
   trunk/tools/dstat/plugins/dstat_gpfs.py
   trunk/tools/dstat/plugins/dstat_gpfs_ops.py
   trunk/tools/dstat/plugins/dstat_helloworld.py
   trunk/tools/dstat/plugins/dstat_innodb_buffer.py
   trunk/tools/dstat/plugins/dstat_innodb_io.py
   trunk/tools/dstat/plugins/dstat_innodb_ops.py
   trunk/tools/dstat/plugins/dstat_memcache_hits.py
   trunk/tools/dstat/plugins/dstat_mysql5_cmds.py
   trunk/tools/dstat/plugins/dstat_mysql5_conn.py
   trunk/tools/dstat/plugins/dstat_mysql5_keys.py
   trunk/tools/dstat/plugins/dstat_mysql_keys.py
   trunk/tools/dstat/plugins/dstat_net_packets.py
   trunk/tools/dstat/plugins/dstat_nfs3.py
   trunk/tools/dstat/plugins/dstat_nfs3_ops.py
   trunk/tools/dstat/plugins/dstat_nfsd3.py
   trunk/tools/dstat/plugins/dstat_nfsd3_ops.py
   trunk/tools/dstat/plugins/dstat_ntp.py
   trunk/tools/dstat/plugins/dstat_postfix.py
   trunk/tools/dstat/plugins/dstat_power.py
   trunk/tools/dstat/plugins/dstat_proc_count.py
   trunk/tools/dstat/plugins/dstat_rpc.py
   trunk/tools/dstat/plugins/dstat_rpcd.py
   trunk/tools/dstat/plugins/dstat_sendmail.py
   trunk/tools/dstat/plugins/dstat_snooze.py
   trunk/tools/dstat/plugins/dstat_top_bio.py
   trunk/tools/dstat/plugins/dstat_top_cpu.py
   trunk/tools/dstat/plugins/dstat_top_cputime.py
   trunk/tools/dstat/plugins/dstat_top_cputime_avg.py
   trunk/tools/dstat/plugins/dstat_top_io.py
   trunk/tools/dstat/plugins/dstat_top_latency.py
   trunk/tools/dstat/plugins/dstat_top_latency_avg.py
   trunk/tools/dstat/plugins/dstat_top_mem.py
   trunk/tools/dstat/plugins/dstat_top_oom.py
   trunk/tools/dstat/plugins/dstat_utmp.py
   trunk/tools/dstat/plugins/dstat_vm_memctl.py
   trunk/tools/dstat/plugins/dstat_vmk_hba.py
   trunk/tools/dstat/plugins/dstat_vmk_int.py
   trunk/tools/dstat/plugins/dstat_vmk_nic.py
   trunk/tools/dstat/plugins/dstat_vz_cpu.py
   trunk/tools/dstat/plugins/dstat_vz_io.py
   trunk/tools/dstat/plugins/dstat_vz_ubc.py
   trunk/tools/dstat/plugins/dstat_wifi.py
Log:
- Fix top-plugins on python 2.2 and older
- Documentation improvements


Modified: trunk/tools/dstat/ChangeLog
===================================================================
--- trunk/tools/dstat/ChangeLog	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/ChangeLog	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,3 +1,7 @@
+* 0.7.0svn - ... - release 26/11/2009
+- Fix top-plugins on python 2.2 and older
+- Documentation improvements
+
 * 0.7.0 - Tokyo - release 25/11/2009
 - Fixed dstat_disk plugin for total calculation on 2.6.25+ kernels (Noel J. Bergman)
 - Precompile regular expressions used as a disk filter (self.diskfilter)

Modified: trunk/tools/dstat/docs/dstat-paper.html
===================================================================
--- trunk/tools/dstat/docs/dstat-paper.html	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/docs/dstat-paper.html	2009-11-26 02:39:00 UTC (rev 8041)
@@ -855,6 +855,11 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+battery-remain: remaining battery time
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 cpufreq: CPU frequency
 &lt;/p&gt;
 &lt;/li&gt;
@@ -865,6 +870,11 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+disk-util: disk utilization percentage
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 fan: Fan speed
 &lt;/p&gt;
 &lt;/li&gt;
@@ -875,12 +885,12 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-gpfsop: GPFS operations counters
+gpfs: GPFS IO counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-gpfs: GPFS IO counters
+gpfs-ops: GPFS operations counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -890,22 +900,22 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-innodb_buffer: innodb buffer counters
+innodb-buffer: innodb buffer counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-innodb_io: innodb I/O counters
+innodb-io: innodb I/O counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-innodb_keys: innodb key operation counters
+innodb-keys: innodb key operation counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-innodb_ops: innodb operations counters
+innodb-ops: innodb operations counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -915,42 +925,42 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-memcache_hits: Memcache hit counters
+memcache-hits: Memcache hit counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-mysql5_com: MySQL communication counters
+mysql5-cmds: MySQL communication counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-mysql5_conn: MySQL connection counters
+mysql5-conn: MySQL connection counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-mysql5_io: MySQL I/O counters
+mysql5-io: MySQL I/O counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-mysql5_keys: MySQL keys counters
+mysql5-keys: MySQL keys counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-mysql_io: MySQL I/O counters
+mysql-io: MySQL I/O counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-mysql_ops: MySQL operations counters
+mysql-ops: MySQL operations counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-nfs3op: NFS3 client operations counters
+nfs3-ops: NFS3 client operations counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -960,7 +970,7 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-nfsd3op: NFS3 server operations counters
+nfsd3-ops: NFS3 server operations counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -1010,62 +1020,82 @@
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-topbio: most expensive block I/O process
+top-bio: most expensive block I/O process
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-topcpu: most expensive cpu process
+top-cpu: most expensive cpu process
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-topio: most expensive I/O process
+top-cputime: process using the most CPU time
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-topmem: most expensive memory process
+top-cputime-avg: process having the highest average CPU time
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-topoom: process first shot by OOM killer
+top-io: most expensive I/O process
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
+top-latency: process with the highest total latency
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+top-latency-avg: process with the highest average latency
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+top-mem: most expensive memory process
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
+top-oom: process first shot by OOM killer
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;li&gt;
+&lt;p&gt;
 utmp: utmp counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-vmkhba: VMware kernel HBA counters
+vmk-hba: VMware kernel HBA counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-vmkint: VMware kernel interrupt counters
+vmk-int: VMware kernel interrupt counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-vmknic: VMware kernel NIC counters
+vmk-nic: VMware kernel NIC counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-vmmemctl: VMware guest memory counters
+vm-memctl: VMware guest memory counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-vzcpu: OpenVZ CPU counters
+vz-cpu: OpenVZ CPU counters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
 &lt;p&gt;
-vzubc: OpenVZ user beancounters
+vz-ubc: OpenVZ user beancounters
 &lt;/p&gt;
 &lt;/li&gt;
 &lt;li&gt;
@@ -1122,7 +1152,7 @@
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;The internal plugins have short and/or long options within Dstat, eg. &lt;tt&gt;-c&lt;/tt&gt; or
 &lt;tt&gt;--cpu&lt;/tt&gt; will enable the cpu counters.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;The external plugins are enable by a long option including their name,
-eg. --topcpu&lt;/p&gt;&lt;/div&gt;
+eg. &lt;tt&gt;--top-cpu&lt;/tt&gt;&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;The following examples will enable the time, cpu and disk plugins, and are
 equal.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
@@ -1236,14 +1266,14 @@
 &lt;/tr&gt;&lt;/table&gt;
 &lt;/div&gt;
 &lt;h3 id=&quot;_what_is_this_system_doing_now&quot;&gt;What is this system doing now ?&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;I often run both the &lt;tt&gt;dstat_topcpu&lt;/tt&gt; and &lt;tt&gt;dstat_topmem&lt;/tt&gt; programs on a system,
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;I often run both the &lt;tt&gt;dstat_top_cpu&lt;/tt&gt; and &lt;tt&gt;dstat_top_mem&lt;/tt&gt; programs on a system,
 just to see what a system is doing. Having a quick look at what application
 is using the most CPU over a few minutes and to see what the general usage
 of memory is of the top application gives away a lot about a system.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;title&quot;&gt;Sample output&lt;/div&gt;
 &lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at horsea</A> dag]$ dstat -c --topcpu -dng --topmem
+&lt;pre&gt;&lt;tt&gt;[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at horsea</A> dag]$ dstat -c --top-cpu -dng --top-mem
 ----total-cpu-usage---- -most-expensive- -dsk/total- -net/total- ---paging-- -most-expensive-
 usr sys idl wai hiq siq|  cpu process   | read  writ| recv  send|  in   out | memory process
   9   2  80   9   0   0|kswapd         0| 123k  164k|   0     0 |9196B   18k|rsync        74M
@@ -1261,17 +1291,17 @@
 causing it and why ? As of now you can do:&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;screen dstat -tcy --topcpu 120
-screen dstat -tmgs --topmem 120
-screen dstat -tdi --topio 120&lt;/tt&gt;&lt;/pre&gt;
+&lt;pre&gt;&lt;tt&gt;screen dstat -tcy --top-cpu 120
+screen dstat -tmgs --top-mem 120
+screen dstat -tdi --top-io 120&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;to see what process is using the most CPU, the most memory and the most I/O
 resources.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;And hopefully one day we can do:&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;dstat -tn --topnet 120
-dstat -tn --topx 120&lt;/tt&gt;&lt;/pre&gt;
+&lt;pre&gt;&lt;tt&gt;dstat -tn --top-net 120
+dstat -tn --top-x 120&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Leave it running during the night and in the morning you can see the light.&lt;/p&gt;&lt;/div&gt;
 &lt;h3 id=&quot;_what_device_is_slowing_down_my_system&quot;&gt;What device is slowing down my system ?&lt;/h3&gt;&lt;div style=&quot;clear:left&quot;&gt;&lt;/div&gt;
@@ -1591,12 +1621,12 @@
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;As you can see, getting the CPU counters and calculating the CPU usage takes
 up 0.5 milliseconds on this particular system. But if we look at the usage of
-the &lt;tt&gt;dstat_topcpu&lt;/tt&gt; plugin:&lt;/p&gt;&lt;/div&gt;
+the &lt;tt&gt;dstat_top_cpu&lt;/tt&gt; plugin:&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
-&lt;div class=&quot;title&quot;&gt;The cost of running the &lt;tt&gt;dstat_topcpu&lt;/tt&gt; plugin&lt;/div&gt;
+&lt;div class=&quot;title&quot;&gt;The cost of running the &lt;tt&gt;dstat_top_cpu&lt;/tt&gt; plugin&lt;/div&gt;
 &lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> dstat]$ dstat --topcpu --debug
-Module dstat_topcpu
+&lt;pre&gt;&lt;tt&gt;[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> dstat]$ dstat --top-cpu --debug
+Module dstat_top_cpu
 -most-expensive-
   cpu process
 Xorg           2 43.82ms
@@ -1604,7 +1634,7 @@
 firefox-bin    2 33.54ms
 Xorg           1 33.24ms&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;we see that processing the &lt;em&gt;/proc/pid&lt;/em&gt; files causes the topcpu plugin to use
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;we see that processing the &lt;em&gt;/proc/pid&lt;/em&gt; files causes the top-cpu plugin to use
 an additional 33ms.&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;admonitionblock&quot;&gt;
 &lt;table&gt;&lt;tr&gt;
@@ -1740,7 +1770,7 @@
 &lt;div id=&quot;footnotes&quot;&gt;&lt;hr /&gt;&lt;/div&gt;
 &lt;div id=&quot;footer&quot;&gt;
 &lt;div id=&quot;footer-text&quot;&gt;
-Last updated 2009-11-23 01:38:45 CEST
+Last updated 2009-11-25 13:04:13 CEST
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/body&gt;

Modified: trunk/tools/dstat/docs/dstat-paper.txt
===================================================================
--- trunk/tools/dstat/docs/dstat-paper.txt	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/docs/dstat-paper.txt	2009-11-26 02:39:00 UTC (rev 8041)
@@ -214,28 +214,30 @@
 into Dstat. A set of 'external' modules exist for:
 
     - battery: battery usage
+    - battery-remain: remaining battery time
     - cpufreq: CPU frequency
     - dbus: DBUS connections
+    - disk-util: disk utilization percentage
     - fan: Fan speed
     - freespace: free space on filesystems
-    - gpfsop: GPFS operations counters
     - gpfs: GPFS IO counters
+    - gpfs-ops: GPFS operations counters
     - helloworld: Hello world dispenser
-    - innodb_buffer: innodb buffer counters
-    - innodb_io: innodb I/O counters
-    - innodb_keys: innodb key operation counters
-    - innodb_ops: innodb operations counters
+    - innodb-buffer: innodb buffer counters
+    - innodb-io: innodb I/O counters
+    - innodb-keys: innodb key operation counters
+    - innodb-ops: innodb operations counters
     - lustre: lustre throughput counters
-    - memcache_hits: Memcache hit counters
-    - mysql5_com: MySQL communication counters
-    - mysql5_conn: MySQL connection counters
-    - mysql5_io: MySQL I/O counters
-    - mysql5_keys: MySQL keys counters
-    - mysql_io: MySQL I/O counters
-    - mysql_ops: MySQL operations counters
-    - nfs3op: NFS3 client operations counters
+    - memcache-hits: Memcache hit counters
+    - mysql5-cmds: MySQL communication counters
+    - mysql5-conn: MySQL connection counters
+    - mysql5-io: MySQL I/O counters
+    - mysql5-keys: MySQL keys counters
+    - mysql-io: MySQL I/O counters
+    - mysql-ops: MySQL operations counters
+    - nfs3-ops: NFS3 client operations counters
     - nfs3: NFS3 client counters
-    - nfsd3op: NFS3 server operations counters
+    - nfsd3-ops: NFS3 server operations counters
     - nfsd3: NFS3 server counters
     - ntp: NTP time counters
     - postfix: postfix queue counters
@@ -245,18 +247,22 @@
     - sendmail: sendmail queue counters
     - snooze: Dstat time delay counters
     - thermal: Thermal counters
-    - topbio: most expensive block I/O process
-    - topcpu: most expensive cpu process
-    - topio: most expensive I/O process
-    - topmem: most expensive memory process
-    - topoom: process first shot by OOM killer
+    - top-bio: most expensive block I/O process
+    - top-cpu: most expensive cpu process
+    - top-cputime: process using the most CPU time
+    - top-cputime-avg: process having the highest average CPU time
+    - top-io: most expensive I/O process
+    - top-latency: process with the highest total latency
+    - top-latency-avg: process with the highest average latency
+    - top-mem: most expensive memory process
+    - top-oom: process first shot by OOM killer
     - utmp: utmp counters
-    - vmkhba: VMware kernel HBA counters
-    - vmkint: VMware kernel interrupt counters
-    - vmknic: VMware kernel NIC counters
-    - vmmemctl: VMware guest memory counters
-    - vzcpu: OpenVZ CPU counters
-    - vzubc: OpenVZ user beancounters
+    - vmk-hba: VMware kernel HBA counters
+    - vmk-int: VMware kernel interrupt counters
+    - vmk-nic: VMware kernel NIC counters
+    - vm-memctl: VMware guest memory counters
+    - vz-cpu: OpenVZ CPU counters
+    - vz-ubc: OpenVZ user beancounters
     - wifi: WIFI quality information
 
 
@@ -287,7 +293,7 @@
 +--cpu+ will enable the cpu counters.
 
 The external plugins are enable by a long option including their name,
-eg. --topcpu
+eg. +--top-cpu+
 
 The following examples will enable the time, cpu and disk plugins, and are
 equal.
@@ -379,14 +385,14 @@
 
 
 === What is this system doing now ?
-I often run both the +dstat_topcpu+ and +dstat_topmem+ programs on a system,
+I often run both the +dstat_top_cpu+ and +dstat_top_mem+ programs on a system,
 just to see what a system is doing. Having a quick look at what application
 is using the most CPU over a few minutes and to see what the general usage
 of memory is of the top application gives away a lot about a system.
 
 .Sample output
 ----
-[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at horsea</A> dag]$ dstat -c --topcpu -dng --topmem
+[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at horsea</A> dag]$ dstat -c --top-cpu -dng --top-mem
 ----total-cpu-usage---- -most-expensive- -dsk/total- -net/total- ---paging-- -most-expensive-
 usr sys idl wai hiq siq|  cpu process   | read  writ| recv  send|  in   out | memory process 
   9   2  80   9   0   0|kswapd         0| 123k  164k|   0     0 |9196B   18k|rsync        74M
@@ -406,9 +412,9 @@
 causing it and why ? As of now you can do:
 
 ----
-screen dstat -tcy --topcpu 120
-screen dstat -tmgs --topmem 120
-screen dstat -tdi --topio 120
+screen dstat -tcy --top-cpu 120
+screen dstat -tmgs --top-mem 120
+screen dstat -tdi --top-io 120
 ----
 
 to see what process is using the most CPU, the most memory and the most I/O
@@ -417,8 +423,8 @@
 And hopefully one day we can do:
 
 ----
-dstat -tn --topnet 120
-dstat -tn --topx 120
+dstat -tn --top-net 120
+dstat -tn --top-x 120
 ----
 
 Leave it running during the night and in the morning you can see the light.
@@ -731,12 +737,12 @@
 
 As you can see, getting the CPU counters and calculating the CPU usage takes
 up 0.5 milliseconds on this particular system. But if we look at the usage of
-the +dstat_topcpu+ plugin:
+the +dstat_top_cpu+ plugin:
 
-.The cost of running the +dstat_topcpu+ plugin
+.The cost of running the +dstat_top_cpu+ plugin
 ----
-[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> dstat]$ dstat --topcpu --debug
-Module dstat_topcpu
+[<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at rhun</A> dstat]$ dstat --top-cpu --debug
+Module dstat_top_cpu
 -most-expensive-
   cpu process
 Xorg           2 43.82ms
@@ -745,7 +751,7 @@
 Xorg           1 33.24ms
 ----
 
-we see that processing the _/proc/pid_ files causes the topcpu plugin to use
+we see that processing the _/proc/pid_ files causes the top-cpu plugin to use
 an additional 33ms.
 
 WARNING: These values show the time it takes to process the plugins and does

Modified: trunk/tools/dstat/docs/dstat.1
===================================================================
--- trunk/tools/dstat/docs/dstat.1	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/docs/dstat.1	2009-11-26 02:39:00 UTC (rev 8041)
@@ -195,130 +195,130 @@
 Hello world example dstat plugin
 .TP
 \-\-innodb\-buffer
-TBD
+show innodb buffer stats
 .TP
 \-\-innodb\-io
-TBD
+show innodb I/O stats
 .TP
 \-\-innodb\-ops
-TBD
+show innodb operations counters
 .TP
 \-\-lustre
-TBD
+show lustre I/O throughput
 .TP
 \-\-memcache\-hits
-TBD
+show the number of hits and misses from memcache
 .TP
-\-\-mysql5\-com
-TBD
+\-\-mysql5\-cmds
+show the MySQL5 command stats
 .TP
 \-\-mysql5\-conn
-TBD
+show the MySQL5 connection stats
 .TP
 \-\-mysql5\-io
-TBD
+show the MySQL5 I/O stats
 .TP
 \-\-mysql5\-keys
-TBD
+show the MySQL5 keys stats
 .TP
 \-\-mysql\-io
-TBD
+show the MySQL I/O stats
 .TP
 \-\-mysql\-keys
-TBD
+show the MySQL keys stats
 .TP
 \-\-net\-packets
-TBD
+show the number of packets received and transmitted
 .TP
 \-\-nfs3
-NFS v3 client operations
+show NFS v3 client operations
 .TP
 \-\-nfs3\-ops
-Extended NFS v3 client operations
+show extended NFS v3 client operations
 .TP
 \-\-nfsd3
-NFS v3 server operations
+show NFS v3 server operations
 .TP
 \-\-nfsd3\-ops
-Extended NFS v3 server operations
+show extended NFS v3 server operations
 .TP
 \-\-ntp
-TBD
+show NTP time from an NTP server
 .TP
 \-\-postfix
-postfix queue size (needs postfix)
+show postfix queue sizes (needs postfix)
 .TP
 \-\-power
-TBD
+show power usage
 .TP
 \-\-proc\-count
-TBD
+show total number of processes
 .TP
 \-\-rpc
-RPC client calls
+show RPC client calls stats
 .TP
 \-\-rpcd
-RPC server calls
+show RPC server calls stats
 .TP
 \-\-sendmail
-sendmail queue size (needs sendmail)
+show sendmail queue size (needs sendmail)
 .TP
 \-\-snooze
-number of ticks per second
+show number of ticks per second
 .TP
 \-\-test
-TBD
+show test plugin output
 .TP
 \-\-thermal
 system temperature sensors
 .TP
 \-\-top\-bio
-TBD
+show most expensive block I/O process
 .TP
 \-\-top\-cpu
-TBD
+show most expensive CPU process
 .TP
 \-\-top\-cputime
-TBD
+show process using the most CPU time (in ms)
 .TP
 \-\-top\-cputime\-avg
-TBD
+show process with the highest average timeslice (in ms)
 .TP
 \-\-top\-io
-TBD
+show most expensive I/O process
 .TP
 \-\-top\-latency
-TBD
+show process with highest total latency (in ms)
 .TP
 \-\-top\-latency\-avg
-TBD
+show process with the highest average latency (in ms)
 .TP
 \-\-top\-mem
-TBD
+show process using the most memory
 .TP
 \-\-top\-oom
-TBD
+show process that will be killed by OOM the first
 .TP
 \-\-utmp
-Number of utmp connections (needs python\-utmp)
+show number of utmp connections (needs python\-utmp)
 .TP
 \-\-vmk\-hba
-TBD
+show VMware ESX kernel vmhba stats
 .TP
 \-\-vmk\-int
-TBD
+show VMware ESX kernel interrupt stats
 .TP
 \-\-vmk\-nic
-TBD
+show VMware ESX kernel port stats
 .TP
 \-\-vm\-memctl
-TBD
+show ballooning status inside VMware guests
 .TP
 \-\-vz\-io
-TBD
+show CPU usage per OpenVZ guest
 .TP
 \-\-vz\-ubc
-TBD
+show OpenVZ user beancounters
 .TP
 \-\-wifi
 wireless link quality and signal to noise ratio
@@ -347,17 +347,17 @@
 .nf
 dstat \-taf \-\-debug
 .fi
-Using the time plugin together with cpu, net, disk, system, load, proc and topcpu plugins:
+Using the time plugin together with cpu, net, disk, system, load, proc and top_cpu plugins:
 .sp
 .sp
 .nf
-dstat \-tcndylp \-\-topcpu
+dstat \-tcndylp \-\-top\-cpu
 .fi
 this is identical to
 .sp
 .sp
 .nf
-dstat \-\-time \-\-cpu \-\-net \-\-disk \-\-sys \-\-load \-\-proc \-\-topcpu
+dstat \-\-time \-\-cpu \-\-net \-\-disk \-\-sys \-\-load \-\-proc \-\-top\-cpu
 .fi
 Using dstat to relate cpu stats with interrupts per device:
 .sp
@@ -382,8 +382,6 @@
 .sp
 .nf
 ~/.dstat/
-./
-./plugins/
 (path of binary)/plugins/
 /usr/share/dstat/
 /usr/local/share/dstat/

Modified: trunk/tools/dstat/docs/dstat.1.html
===================================================================
--- trunk/tools/dstat/docs/dstat.1.html	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/docs/dstat.1.html	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1032,7 +1032,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show innodb buffer stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1040,7 +1040,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show innodb I/O stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1048,7 +1048,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show innodb operations counters
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1056,7 +1056,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show lustre I/O throughput
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1064,15 +1064,15 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the number of hits and misses from memcache
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
---mysql5-com
+--mysql5-cmds
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the MySQL5 command stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1080,7 +1080,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the MySQL5 connection stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1088,7 +1088,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the MySQL5 I/O stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1096,7 +1096,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the MySQL5 keys stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1104,7 +1104,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the MySQL I/O stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1112,7 +1112,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the MySQL keys stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1120,7 +1120,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show the number of packets received and transmitted
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1128,7 +1128,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    NFS v3 client operations
+    show NFS v3 client operations
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1136,7 +1136,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    Extended NFS v3 client operations
+    show extended NFS v3 client operations
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1144,7 +1144,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    NFS v3 server operations
+    show NFS v3 server operations
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1152,7 +1152,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    Extended NFS v3 server operations
+    show extended NFS v3 server operations
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1160,7 +1160,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show NTP time from an NTP server
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1168,7 +1168,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    postfix queue size (needs postfix)
+    show postfix queue sizes (needs postfix)
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1176,7 +1176,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show power usage
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1184,7 +1184,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show total number of processes
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1192,7 +1192,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    RPC client calls
+    show RPC client calls stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1200,7 +1200,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    RPC server calls
+    show RPC server calls stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1208,7 +1208,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    sendmail queue size (needs sendmail)
+    show sendmail queue size (needs sendmail)
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1216,7 +1216,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    number of ticks per second
+    show number of ticks per second
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1224,7 +1224,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show test plugin output
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1240,7 +1240,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show most expensive block I/O process
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1248,7 +1248,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show most expensive CPU process
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1256,7 +1256,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show process using the most CPU time (in ms)
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1264,7 +1264,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show process with the highest average timeslice (in ms)
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1272,7 +1272,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show most expensive I/O process
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1280,7 +1280,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show process with highest total latency (in ms)
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1288,7 +1288,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show process with the highest average latency (in ms)
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1296,7 +1296,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show process using the most memory
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1304,7 +1304,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show process that will be killed by OOM the first
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1312,7 +1312,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    Number of utmp connections (needs python-utmp)
+    show number of utmp connections (needs python-utmp)
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1320,7 +1320,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show VMware ESX kernel vmhba stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1328,7 +1328,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show VMware ESX kernel interrupt stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1336,7 +1336,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show VMware ESX kernel port stats
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1344,7 +1344,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show ballooning status inside VMware guests
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1352,7 +1352,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show CPU usage per OpenVZ guest
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1360,7 +1360,7 @@
 &lt;/dt&gt;
 &lt;dd&gt;
 &lt;p&gt;
-    TBD
+    show OpenVZ user beancounters
 &lt;/p&gt;
 &lt;/dd&gt;
 &lt;dt class=&quot;hdlist1&quot;&gt;
@@ -1402,15 +1402,16 @@
 &lt;div class=&quot;content&quot;&gt;
 &lt;pre&gt;&lt;tt&gt;dstat -taf --debug&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
-&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Using the time plugin together with cpu, net, disk, system, load, proc and topcpu plugins:&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Using the time plugin together with cpu, net, disk, system, load, proc and
+top_cpu plugins:&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;dstat -tcndylp --topcpu&lt;/tt&gt;&lt;/pre&gt;
+&lt;pre&gt;&lt;tt&gt;dstat -tcndylp --top-cpu&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;this is identical to&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
 &lt;div class=&quot;content&quot;&gt;
-&lt;pre&gt;&lt;tt&gt;dstat --time --cpu --net --disk --sys --load --proc --topcpu&lt;/tt&gt;&lt;/pre&gt;
+&lt;pre&gt;&lt;tt&gt;dstat --time --cpu --net --disk --sys --load --proc --top-cpu&lt;/tt&gt;&lt;/pre&gt;
 &lt;/div&gt;&lt;/div&gt;
 &lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Using dstat to relate cpu stats with interrupts per device:&lt;/p&gt;&lt;/div&gt;
 &lt;div class=&quot;listingblock&quot;&gt;
@@ -1440,8 +1441,6 @@
 &lt;div class=&quot;literalblock&quot;&gt;
 &lt;div class=&quot;content&quot;&gt;
 &lt;pre&gt;&lt;tt&gt;~/.dstat/
-./
-./plugins/
 (path of binary)/plugins/
 /usr/share/dstat/
 /usr/local/share/dstat/&lt;/tt&gt;&lt;/pre&gt;
@@ -1512,7 +1511,7 @@
 &lt;div id=&quot;footer&quot;&gt;
 &lt;div id=&quot;footer-text&quot;&gt;
 Version 0.7.0&lt;br /&gt;
-Last updated 2009-11-24 02:39:47 CEST
+Last updated 2009-11-25 12:59:57 CEST
 &lt;/div&gt;
 &lt;/div&gt;
 &lt;/body&gt;

Modified: trunk/tools/dstat/docs/dstat.1.txt
===================================================================
--- trunk/tools/dstat/docs/dstat.1.txt	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/docs/dstat.1.txt	2009-11-26 02:39:00 UTC (rev 8041)
@@ -124,7 +124,7 @@
 --vm::
     enable vm stats (hard pagefaults, soft pagefaults, allocated, free)
 
---stat1 --stat2::
+--plugin-name::
     enable (external) plugins by plugin name, see *PLUGINS* for options
 
 Possible internal stats are::
@@ -144,15 +144,15 @@
 -v, --vmstat::
     equals -pmgdsc -D total
 
---bw, --blackonwhite::
-    change colors for white background terminal
-
 --float::
     force float values on screen (mutual exclusive with *--integer*)
 
 --integer::
     force integer values on screen (mutual exclusive with *--float*)
 
+--bw, --blackonwhite::
+    change colors for white background terminal
+
 --nocolor::
     disable colors (implies *--noupdate*)
 
@@ -202,130 +202,130 @@
     Hello world example dstat plugin
 
 --innodb-buffer::
-    TBD
+    show innodb buffer stats
 
 --innodb-io::
-    TBD
+    show innodb I/O stats
 
 --innodb-ops::
-    TBD
+    show innodb operations counters
 
 --lustre::
-    TBD
+    show lustre I/O throughput
 
 --memcache-hits::
-    TBD
+    show the number of hits and misses from memcache
 
---mysql5-com::
-    TBD
+--mysql5-cmds::
+    show the MySQL5 command stats
 
 --mysql5-conn::
-    TBD
+    show the MySQL5 connection stats
 
 --mysql5-io::
-    TBD
+    show the MySQL5 I/O stats
 
 --mysql5-keys::
-    TBD
+    show the MySQL5 keys stats
 
 --mysql-io::
-    TBD
+    show the MySQL I/O stats
 
 --mysql-keys::
-    TBD
+    show the MySQL keys stats
 
 --net-packets::
-    TBD
+    show the number of packets received and transmitted
 
 --nfs3::
-    NFS v3 client operations
+    show NFS v3 client operations
 
 --nfs3-ops::
-    Extended NFS v3 client operations
+    show extended NFS v3 client operations
 
 --nfsd3::
-    NFS v3 server operations
+    show NFS v3 server operations
 
 --nfsd3-ops::
-    Extended NFS v3 server operations
+    show extended NFS v3 server operations
 
 --ntp::
-    TBD
+    show NTP time from an NTP server
 
 --postfix::
-    postfix queue size (needs postfix)
+    show postfix queue sizes (needs postfix)
 
 --power::
-    TBD
+    show power usage
 
 --proc-count::
-    TBD
+    show total number of processes
 
 --rpc::
-    RPC client calls
+    show RPC client calls stats
 
 --rpcd::
-    RPC server calls
+    show RPC server calls stats
 
 --sendmail::
-    sendmail queue size (needs sendmail)
+    show sendmail queue size (needs sendmail)
 
 --snooze::
-    number of ticks per second
+    show number of ticks per second
 
 --test::
-    TBD
+    show test plugin output
 
 --thermal::
     system temperature sensors
 
 --top-bio::
-    TBD
+    show most expensive block I/O process
 
 --top-cpu::
-    TBD
+    show most expensive CPU process
 
 --top-cputime::
-    TBD
+    show process using the most CPU time (in ms)
 
 --top-cputime-avg::
-    TBD
+    show process with the highest average timeslice (in ms)
 
 --top-io::
-    TBD
+    show most expensive I/O process
 
 --top-latency::
-    TBD
+    show process with highest total latency (in ms)
 
 --top-latency-avg::
-    TBD
+    show process with the highest average latency (in ms)
 
 --top-mem::
-    TBD
+    show process using the most memory
 
 --top-oom::
-    TBD
+    show process that will be killed by OOM the first
 
 --utmp::
-    Number of utmp connections (needs python-utmp)
+    show number of utmp connections (needs python-utmp)
 
 --vmk-hba::
-    TBD
+    show VMware ESX kernel vmhba stats
 
 --vmk-int::
-    TBD
+    show VMware ESX kernel interrupt stats
 
 --vmk-nic::
-    TBD
+    show VMware ESX kernel port stats
 
 --vm-memctl::
-    TBD
+    show ballooning status inside VMware guests
 
 --vz-io::
-    TBD
+    show CPU usage per OpenVZ guest
 
 --vz-ubc::
-    TBD
+    show OpenVZ user beancounters
 
 --wifi::
     wireless link quality and signal to noise ratio
@@ -362,13 +362,14 @@
 dstat -taf --debug
 ----
 
-Using the time plugin together with cpu, net, disk, system, load, proc and topcpu plugins:
+Using the time plugin together with cpu, net, disk, system, load, proc and
+top_cpu plugins:
 ----
-dstat -tcndylp --topcpu
+dstat -tcndylp --top-cpu
 ----
 this is identical to
 ----
-dstat --time --cpu --net --disk --sys --load --proc --topcpu
+dstat --time --cpu --net --disk --sys --load --proc --top-cpu
 ----
 
 Using dstat to relate cpu stats with interrupts per device:
@@ -392,8 +393,6 @@
 Paths that may contain external dstat_*.py plugins:
 
     ~/.dstat/
-    ./
-    ./plugins/
     (path of binary)/plugins/
     /usr/share/dstat/
     /usr/local/share/dstat/

Added: trunk/tools/dstat/docs/performance.html
===================================================================
--- trunk/tools/dstat/docs/performance.html	                        (rev 0)
+++ trunk/tools/dstat/docs/performance.html	2009-11-26 02:39:00 UTC (rev 8041)
@@ -0,0 +1,607 @@
+&lt;!DOCTYPE html PUBLIC &quot;-//W3C//DTD XHTML 1.1//EN&quot;
+    &quot;<A HREF="http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd</A>&quot;&gt;
+&lt;html xmlns=&quot;<A HREF="http://www.w3.org/1999/xhtml">http://www.w3.org/1999/xhtml</A>&quot; xml:lang=&quot;en&quot;&gt;
+&lt;head&gt;
+&lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=UTF-8&quot; /&gt;
+&lt;meta name=&quot;generator&quot; content=&quot;AsciiDoc 8.5.1&quot; /&gt;
+&lt;title&gt;Dstat performance&lt;/title&gt;
+&lt;style type=&quot;text/css&quot;&gt;
+/* Debug borders */
+p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
+/*
+  border: 1px solid red;
+*/
+}
+
+body {
+  margin: 1em 5% 1em 5%;
+}
+
+a {
+  color: blue;
+  text-decoration: underline;
+}
+a:visited {
+  color: fuchsia;
+}
+
+em {
+  font-style: italic;
+  color: navy;
+}
+
+strong {
+  font-weight: bold;
+  color: #083194;
+}
+
+tt {
+  color: navy;
+}
+
+h1, h2, h3, h4, h5, h6 {
+  color: #527bbd;
+  font-family: sans-serif;
+  margin-top: 1.2em;
+  margin-bottom: 0.5em;
+  line-height: 1.3;
+}
+
+h1, h2, h3 {
+  border-bottom: 2px solid silver;
+}
+h2 {
+  padding-top: 0.5em;
+}
+h3 {
+  float: left;
+}
+h3 + * {
+  clear: left;
+}
+
+div.sectionbody {
+  font-family: serif;
+  margin-left: 0;
+}
+
+hr {
+  border: 1px solid silver;
+}
+
+p {
+  margin-top: 0.5em;
+  margin-bottom: 0.5em;
+}
+
+ul, ol, li &gt; p {
+  margin-top: 0;
+}
+
+pre {
+  padding: 0;
+  margin: 0;
+}
+
+span#author {
+  color: #527bbd;
+  font-family: sans-serif;
+  font-weight: bold;
+  font-size: 1.1em;
+}
+span#email {
+}
+span#revnumber, span#revdate, span#revremark {
+  font-family: sans-serif;
+}
+
+div#footer {
+  font-family: sans-serif;
+  font-size: small;
+  border-top: 2px solid silver;
+  padding-top: 0.5em;
+  margin-top: 4.0em;
+}
+div#footer-text {
+  float: left;
+  padding-bottom: 0.5em;
+}
+div#footer-badges {
+  float: right;
+  padding-bottom: 0.5em;
+}
+
+div#preamble {
+  margin-top: 1.5em;
+  margin-bottom: 1.5em;
+}
+div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
+div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
+div.admonitionblock {
+  margin-top: 0.25em;
+  margin-bottom: 1.5em;
+}
+div.admonitionblock {
+  margin-top: 2.5em;
+  margin-bottom: 2.5em;
+}
+
+div.content { /* Block element content. */
+  padding: 0;
+}
+
+/* Block element titles. */
+div.title, caption.title {
+  color: #527bbd;
+  font-family: sans-serif;
+  font-weight: bold;
+  text-align: left;
+  margin-top: 1.0em;
+  margin-bottom: 0.5em;
+}
+div.title + * {
+  margin-top: 0;
+}
+
+td div.title:first-child {
+  margin-top: 0.0em;
+}
+div.content div.title:first-child {
+  margin-top: 0.0em;
+}
+div.content + div.title {
+  margin-top: 0.0em;
+}
+
+div.sidebarblock &gt; div.content {
+  background: #ffffee;
+  border: 1px solid silver;
+  padding: 0.5em;
+}
+
+div.listingblock &gt; div.content {
+  border: 1px solid silver;
+  background: #f4f4f4;
+  padding: 0.5em;
+}
+
+div.quoteblock {
+  padding-left: 2.0em;
+  margin-right: 10%;
+}
+div.quoteblock &gt; div.attribution {
+  padding-top: 0.5em;
+  text-align: right;
+}
+
+div.verseblock {
+  padding-left: 2.0em;
+  margin-right: 10%;
+}
+div.verseblock &gt; div.content {
+  white-space: pre;
+}
+div.verseblock &gt; div.attribution {
+  padding-top: 0.75em;
+  text-align: left;
+}
+/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
+div.verseblock + div.attribution {
+  text-align: left;
+}
+
+div.admonitionblock .icon {
+  vertical-align: top;
+  font-size: 1.1em;
+  font-weight: bold;
+  text-decoration: underline;
+  color: #527bbd;
+  padding-right: 0.5em;
+}
+div.admonitionblock td.content {
+  padding-left: 0.5em;
+  border-left: 2px solid silver;
+}
+
+div.exampleblock &gt; div.content {
+  border-left: 2px solid silver;
+  padding: 0.5em;
+}
+
+div.imageblock div.content { padding-left: 0; }
+span.image img { border-style: none; }
+a.image:visited { color: white; }
+
+dl {
+  margin-top: 0.8em;
+  margin-bottom: 0.8em;
+}
+dt {
+  margin-top: 0.5em;
+  margin-bottom: 0;
+  font-style: normal;
+  color: navy;
+}
+dd &gt; *:first-child {
+  margin-top: 0.1em;
+}
+
+ul, ol {
+    list-style-position: outside;
+}
+ol.arabic {
+  list-style-type: decimal;
+}
+ol.loweralpha {
+  list-style-type: lower-alpha;
+}
+ol.upperalpha {
+  list-style-type: upper-alpha;
+}
+ol.lowerroman {
+  list-style-type: lower-roman;
+}
+ol.upperroman {
+  list-style-type: upper-roman;
+}
+
+div.compact ul, div.compact ol,
+div.compact p, div.compact p,
+div.compact div, div.compact div {
+  margin-top: 0.1em;
+  margin-bottom: 0.1em;
+}
+
+div.tableblock &gt; table {
+  border: 3px solid #527bbd;
+}
+thead {
+  font-family: sans-serif;
+  font-weight: bold;
+}
+tfoot {
+  font-weight: bold;
+}
+td &gt; div.verse {
+  white-space: pre;
+}
+p.table {
+  margin-top: 0;
+}
+/* Because the table frame attribute is overriden by CSS in most browsers. */
+div.tableblock &gt; table[frame=&quot;void&quot;] {
+  border-style: none;
+}
+div.tableblock &gt; table[frame=&quot;hsides&quot;] {
+  border-left-style: none;
+  border-right-style: none;
+}
+div.tableblock &gt; table[frame=&quot;vsides&quot;] {
+  border-top-style: none;
+  border-bottom-style: none;
+}
+
+
+div.hdlist {
+  margin-top: 0.8em;
+  margin-bottom: 0.8em;
+}
+div.hdlist tr {
+  padding-bottom: 15px;
+}
+dt.hdlist1.strong, td.hdlist1.strong {
+  font-weight: bold;
+}
+td.hdlist1 {
+  vertical-align: top;
+  font-style: normal;
+  padding-right: 0.8em;
+  color: navy;
+}
+td.hdlist2 {
+  vertical-align: top;
+}
+div.hdlist.compact tr {
+  margin: 0;
+  padding-bottom: 0;
+}
+
+.comment {
+  background: yellow;
+}
+
+.footnote, .footnoteref {
+  font-size: 0.8em;
+}
+
+span.footnote, span.footnoteref {
+  vertical-align: super;
+}
+
+#footnotes {
+  margin: 20px 0 20px 0;
+  padding: 7px 0 0 0;
+}
+
+#footnotes div.footnote {
+  margin: 0 0 5px 0;
+}
+
+#footnotes hr {
+  border: none;
+  border-top: 1px solid silver;
+  height: 1px;
+  text-align: left;
+  margin-left: 0;
+  width: 20%;
+  min-width: 100px;
+}
+
+
<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">+ at media</A> print {
+  div#footer-badges { display: none; }
+}
+
+div#toctitle {
+  color: #527bbd;
+  font-family: sans-serif;
+  font-size: 1.1em;
+  font-weight: bold;
+  margin-top: 1.0em;
+  margin-bottom: 0.1em;
+}
+
+div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
+  margin-top: 0;
+  margin-bottom: 0;
+}
+div.toclevel2 {
+  margin-left: 2em;
+  font-size: 0.9em;
+}
+div.toclevel3 {
+  margin-left: 4em;
+  font-size: 0.9em;
+}
+div.toclevel4 {
+  margin-left: 6em;
+  font-size: 0.9em;
+}
+/* Workarounds for IE6's broken and incomplete CSS2. */
+
+div.sidebar-content {
+  background: #ffffee;
+  border: 1px solid silver;
+  padding: 0.5em;
+}
+div.sidebar-title, div.image-title {
+  color: #527bbd;
+  font-family: sans-serif;
+  font-weight: bold;
+  margin-top: 0.0em;
+  margin-bottom: 0.5em;
+}
+
+div.listingblock div.content {
+  border: 1px solid silver;
+  background: #f4f4f4;
+  padding: 0.5em;
+}
+
+div.quoteblock-attribution {
+  padding-top: 0.5em;
+  text-align: right;
+}
+
+div.verseblock-content {
+  white-space: pre;
+}
+div.verseblock-attribution {
+  padding-top: 0.75em;
+  text-align: left;
+}
+
+div.exampleblock-content {
+  border-left: 2px solid silver;
+  padding-left: 0.5em;
+}
+
+/* IE6 sets dynamically generated links as visited. */
+div#toc a:visited { color: blue; }
+&lt;/style&gt;
+&lt;script type=&quot;text/javascript&quot;&gt;
+/*&lt;![CDATA[*/
+window.onload = function(){asciidoc.footnotes();}
+var asciidoc = {  // Namespace.
+
+/////////////////////////////////////////////////////////////////////
+// Table Of Contents generator
+/////////////////////////////////////////////////////////////////////
+
+/* Author: Mihai Bazon, September 2002
+ * <A HREF="http://students.infoiasi.ro/~mishoo">http://students.infoiasi.ro/~mishoo</A>
+ *
+ * Table Of Content generator
+ * Version: 0.4
+ *
+ * Feel free to use this script under the terms of the GNU General Public
+ * License, as long as you do not remove or alter this notice.
+ */
+
+ /* modified by Troy D. Hanson, September 2006. License: GPL */
+ /* modified by Stuart Rackham, 2006, 2009. License: GPL */
+
+// toclevels = 1..4.
+toc: function (toclevels) {
+
+  function getText(el) {
+    var text = &quot;&quot;;
+    for (var i = el.firstChild; i != null; i = i.nextSibling) {
+      if (i.nodeType == 3 /* Node.TEXT_NODE */) // IE doesn't speak constants.
+        text += i.data;
+      else if (i.firstChild != null)
+        text += getText(i);
+    }
+    return text;
+  }
+
+  function TocEntry(el, text, toclevel) {
+    this.element = el;
+    this.text = text;
+    this.toclevel = toclevel;
+  }
+
+  function tocEntries(el, toclevels) {
+    var result = new Array;
+    var re = new RegExp('[hH]([2-'+(toclevels+1)+'])');
+    // Function that scans the DOM tree for header elements (the DOM2
+    // nodeIterator API would be a better technique but not supported by all
+    // browsers).
+    var iterate = function (el) {
+      for (var i = el.firstChild; i != null; i = i.nextSibling) {
+        if (i.nodeType == 1 /* Node.ELEMENT_NODE */) {
+          var mo = re.exec(i.tagName);
+          if (mo)
+            result[result.length] = new TocEntry(i, getText(i), mo[1]-1);
+          iterate(i);
+        }
+      }
+    }
+    iterate(el);
+    return result;
+  }
+
+  var toc = document.getElementById(&quot;toc&quot;);
+  var entries = tocEntries(document.getElementById(&quot;content&quot;), toclevels);
+  for (var i = 0; i &lt; entries.length; ++i) {
+    var entry = entries[i];
+    if (entry.element.id == &quot;&quot;)
+      entry.element.id = &quot;_toc_&quot; + i;
+    var a = document.createElement(&quot;a&quot;);
+    a.href = &quot;#&quot; + entry.element.id;
+    a.appendChild(document.createTextNode(entry.text));
+    var div = document.createElement(&quot;div&quot;);
+    div.appendChild(a);
+    div.className = &quot;toclevel&quot; + entry.toclevel;
+    toc.appendChild(div);
+  }
+  if (entries.length == 0)
+    toc.parentNode.removeChild(toc);
+},
+
+
+/////////////////////////////////////////////////////////////////////
+// Footnotes generator
+/////////////////////////////////////////////////////////////////////
+
+/* Based on footnote generation code from:
+ * <A HREF="http://www.brandspankingnew.net/archive/2005/07/format_footnote.html">http://www.brandspankingnew.net/archive/2005/07/format_footnote.html</A>
+ */
+
+footnotes: function () {
+  var cont = document.getElementById(&quot;content&quot;);
+  var noteholder = document.getElementById(&quot;footnotes&quot;);
+  var spans = cont.getElementsByTagName(&quot;span&quot;);
+  var refs = {};
+  var n = 0;
+  for (i=0; i&lt;spans.length; i++) {
+    if (spans[i].className == &quot;footnote&quot;) {
+      n++;
+      // Use [\s\S] in place of . so multi-line matches work.
+      // Because JavaScript has no s (dotall) regex flag.
+      note = spans[i].innerHTML.match(/\s*\[([\s\S]*)]\s*/)[1];
+      noteholder.innerHTML +=
+        &quot;&lt;div class='footnote' id='_footnote_&quot; + n + &quot;'&gt;&quot; +
+        &quot;&lt;a href='#_footnoteref_&quot; + n + &quot;' title='Return to text'&gt;&quot; +
+        n + &quot;&lt;/a&gt;. &quot; + note + &quot;&lt;/div&gt;&quot;;
+      spans[i].innerHTML =
+        &quot;[&lt;a id='_footnoteref_&quot; + n + &quot;' href='#_footnote_&quot; + n +
+        &quot;' title='View footnote' class='footnote'&gt;&quot; + n + &quot;&lt;/a&gt;]&quot;;
+      var id =spans[i].getAttribute(&quot;id&quot;);
+      if (id != null) refs[&quot;#&quot;+id] = n;
+    }
+  }
+  if (n == 0)
+    noteholder.parentNode.removeChild(noteholder);
+  else {
+    // Process footnoterefs.
+    for (i=0; i&lt;spans.length; i++) {
+      if (spans[i].className == &quot;footnoteref&quot;) {
+        var href = spans[i].getElementsByTagName(&quot;a&quot;)[0].getAttribute(&quot;href&quot;);
+        href = href.match(/#.*/)[0];  // Because IE return full URL.
+        n = refs[href];
+        spans[i].innerHTML =
+          &quot;[&lt;a href='#_footnote_&quot; + n +
+          &quot;' title='View footnote' class='footnote'&gt;&quot; + n + &quot;&lt;/a&gt;]&quot;;
+      }
+    }
+  }
+}
+
+}
+/*]]&gt;*/
+&lt;/script&gt;
+&lt;/head&gt;
+&lt;body&gt;
+&lt;div id=&quot;header&quot;&gt;
+&lt;h1&gt;Dstat performance&lt;/h1&gt;
+&lt;/div&gt;
+&lt;div id=&quot;content&quot;&gt;
+&lt;h2 id=&quot;_introduction&quot;&gt;Introduction&lt;/h2&gt;
+&lt;div class=&quot;sectionbody&quot;&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Since dstat is written in python, it is not optimized for performance.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;When doing performance analysis, it is always important to verify that
+the monitoring tool is not messing with the performance numbers.
+(eg. writing to disk, using cpu/memory/network, increasing load)&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Depending on the stats being used and the load on the server itself
+the impact Dstat has on the system you are monitoring might be
+considerable. A lot of plugins are pretty fast (less than 0.1ms on
+an modest 1.2Ghz laptop, but some plugins may use up to 3ms using
+up to 2% of your CPU).&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Before performing any tests please verify for yourself what impact
+Dstat has on your test results and keep that in mind when analysing
+the results afterwards.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;In case the impact is higher than expected, reduce the number of stats
+and remove expensive stats or even look at the plugin you&amp;#8217;re using and
+send me optimisations.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Newer python versions are also faster than older ones, and hardware is
+only becoming faster at a pace that these considerations may not hold
+anylonger.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;If you need feedback about plugin performance, use the --debug option
+to profile different plugins. If you use -t together with --debug, you
+can see the time deviation on your system in relation to load/plugins.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;Remember that invisible plugins (that run out of your terminal window)
+do take up cycles because the information is still being collected and
+possibly written to CSV output.&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;It should be possible to write plugins in C to improve the impact on
+the system, but I have no experience with writing python modules in C.
+Any feedback on this is welcomed.&lt;/p&gt;&lt;/div&gt;
+&lt;/div&gt;
+&lt;h2 id=&quot;_performance_tuning&quot;&gt;Performance tuning&lt;/h2&gt;
+&lt;div class=&quot;sectionbody&quot;&gt;
+&lt;div class=&quot;paragraph&quot;&gt;&lt;p&gt;The following documents may be useful to tune a system for performance&lt;/p&gt;&lt;/div&gt;
+&lt;div class=&quot;ulist&quot;&gt;&lt;ul&gt;
+&lt;li&gt;
+&lt;p&gt;
+&lt;a href=&quot;<A HREF="http://people.redhat.com/alikins/system_tuning.html">http://people.redhat.com/alikins/system_tuning.html</A>&quot;&gt;<A HREF="http://people.redhat.com/alikins/system_tuning.html&lt;/a">http://people.redhat.com/alikins/system_tuning.html&lt;/a</A>&gt;
+&lt;/p&gt;
+&lt;/li&gt;
+&lt;/ul&gt;&lt;/div&gt;
+&lt;div class=&quot;admonitionblock&quot;&gt;
+&lt;table&gt;&lt;tr&gt;
+&lt;td class=&quot;icon&quot;&gt;
+&lt;div class=&quot;title&quot;&gt;Note&lt;/div&gt;
+&lt;/td&gt;
+&lt;td class=&quot;content&quot;&gt;Please send me improvements to this document.&lt;/td&gt;
+&lt;/tr&gt;&lt;/table&gt;
+&lt;/div&gt;
+&lt;/div&gt;
+&lt;/div&gt;
+&lt;div id=&quot;footnotes&quot;&gt;&lt;hr /&gt;&lt;/div&gt;
+&lt;div id=&quot;footer&quot;&gt;
+&lt;div id=&quot;footer-text&quot;&gt;
+Last updated 2009-11-24 02:49:07 CEST
+&lt;/div&gt;
+&lt;/div&gt;
+&lt;/body&gt;
+&lt;/html&gt;

Modified: trunk/tools/dstat/dstat
===================================================================
--- trunk/tools/dstat/dstat	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/dstat	2009-11-26 02:39:00 UTC (rev 8041)
@@ -16,7 +16,7 @@
 
 from __future__ import generators
 
-VERSION = '0.7.0'
+VERSION = '0.7.0svn'
 
 theme = { 'default': '' }
 
@@ -299,9 +299,10 @@
   -f, --full             automatically expand -C, -D, -I, -N and -S lists
   -v, --vmstat           equals -pmgdsc -D total
 
-  --bw, --blackonwhite   change colors for white background terminal
   --float                force float values on screen
   --integer              force integer values on screen
+
+  --bw, --blackonwhite   change colors for white background terminal
   --nocolor              disable colors (implies --noupdate)
   --noheaders            disable repetitive headers
   --noupdate             disable intermediate updates
@@ -2211,7 +2212,7 @@
 
                     ### TODO: Would using .pyc help with anything ?
                     ### Try loading python plugin
-                    if description[0] in ('.py'):
+                    if description[0] in ('.py', ):
                         execfile(pathname)
                         exec 'o = dstat_plugin(); o.filename = &quot;%s&quot;; o.check(); o.prepare(); del(dstat_plugin);' % pluginfile
 

Modified: trunk/tools/dstat/dstat.spec
===================================================================
--- trunk/tools/dstat/dstat.spec	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/dstat.spec	2009-11-26 02:39:00 UTC (rev 8041)
@@ -4,7 +4,7 @@
 
 Summary: Versatile resource statistics tool
 Name: dstat
-Version: 0.7.0
+Version: 0.7.0svn
 Release: 1
 License: GPL
 Group: System Environment/Base
@@ -52,9 +52,12 @@
 %{_datadir}/dstat/
 
 %changelog
+* Thu Nov 26 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.0svn-1
+- Updated to release 0.7.0svn.
+
 * Wed Nov 25 2009 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.7.0-1
 - Updated to release 0.7.0.
-- Reduce the number of paths used for importing modules (CVE-2009-3894)
+- Reduce the number of paths used for importing modules. {CVE-2009-3894}
 
 * Tue Dec 02 2008 Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt; - 0.6.9-1
 - Updated to release 0.6.9.

Modified: trunk/tools/dstat/plugins/dstat_battery.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_battery.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_battery.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -6,7 +6,6 @@
     &quot;&quot;&quot;
 
     def __init__(self):
-        self.file = file
         self.name = 'battery'
         self.type = 'p'
         self.width = 4

Modified: trunk/tools/dstat/plugins/dstat_dbus.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_dbus.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_dbus.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -7,11 +7,11 @@
 
     def __init__(self):
         self.name = 'dbus'
+        self.nick = ('sys', 'ses')
+        self.vars = ('system', 'session')
         self.type = 'd'
         self.width = 3
         self.scale = 100
-        self.nick = ('sys', 'ses')
-        self.vars = ('system', 'session')
 
     def check(self):
 #       dstat.info(1, 'The dbus module is an EXPERIMENTAL module.')

Modified: trunk/tools/dstat/plugins/dstat_disk_util.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_disk_util.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_disk_util.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -10,12 +10,12 @@
     &quot;&quot;&quot;
 
     def __init__(self):
+        self.nick = ('util', )
         self.type = 'f'
         self.width = 4
         self.scale = 34
         self.diskfilter = re.compile('^(dm-[0-9]+|md[0-9]+|[hs]d[a-z]+[0-9]+)$')
         self.open('/proc/diskstats')
-        self.nick = ('util', )
         self.cols = 1
 
     def discover(self, *objlist):

Modified: trunk/tools/dstat/plugins/dstat_freespace.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_freespace.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_freespace.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -9,8 +9,8 @@
     &quot;&quot;&quot;
 
     def __init__(self):
+        self.nick = ('used', 'free')
         self.open('/etc/mtab')
-        self.nick = ('used', 'free')
         self.cols = 2
 
     def vars(self):

Modified: trunk/tools/dstat/plugins/dstat_gpfs.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_gpfs.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_gpfs.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -7,8 +7,8 @@
 
     def __init__(self):
         self.name = 'gpfs i/o'
+        self.nick = ('read', 'write')
         self.vars = ('_br_', '_bw_')
-        self.nick = ('read', 'write')
 
     def check(self): 
         if os.access('/usr/lpp/mmfs/bin/mmpmon', os.X_OK):

Modified: trunk/tools/dstat/plugins/dstat_gpfs_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_gpfs_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_gpfs_ops.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -7,11 +7,11 @@
 
     def __init__(self):
         self.name = 'gpfs file operations'
+        self.nick = ('open', 'clos', 'read', 'writ', 'rdir', 'inod')
+        self.vars = ('_oc_', '_cc_', '_rdc_', '_wc_', '_dir_', '_iu_')
         self.type = 'd'
         self.width = 5
         self.scale = 1000
-        self.vars = ('_oc_', '_cc_', '_rdc_', '_wc_', '_dir_', '_iu_')
-        self.nick = ('open', 'clos', 'read', 'writ', 'rdir', 'inod')
 
     def check(self): 
         if os.access('/usr/lpp/mmfs/bin/mmpmon', os.X_OK):

Modified: trunk/tools/dstat/plugins/dstat_helloworld.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_helloworld.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_helloworld.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -6,12 +6,12 @@
     &quot;&quot;&quot;
 
     def __init__(self):
+        self.name = 'plugin title'
+        self.nick = ('counter',)
+        self.vars = ('text',)
         self.type = 's'
         self.width = 12
         self.scale = 0
-        self.name = 'plugin title'
-        self.nick = ('counter',)
-        self.vars = ('text',)
 
     def extract(self):
         self.val['text'] = 'Hello world!'

Modified: trunk/tools/dstat/plugins/dstat_innodb_buffer.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_innodb_buffer.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_innodb_buffer.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -6,11 +6,11 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'innodb pool'
+        self.nick = ('crt', 'rea', 'wri')
+        self.vars = ('created', 'read', 'written')
         self.type = 'f'
         self.width = 3
         self.scale = 1000
-        self.vars = ('created', 'read', 'written')
-        self.nick = ('crt', 'rea', 'wri')
 
     def check(self): 
         if not os.access('/usr/bin/mysql', os.X_OK):

Modified: trunk/tools/dstat/plugins/dstat_innodb_io.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_innodb_io.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_innodb_io.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -6,11 +6,11 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'innodb io ops '
+        self.nick = ('rea', 'wri', 'syn')
+        self.vars = ('read', 'write', 'sync')
         self.type = 'f'
         self.width = 3
         self.scale = 1000
-        self.vars = ('read', 'write', 'sync')
-        self.nick = ('rea', 'wri', 'syn')
 
     def check(self): 
         if os.access('/usr/bin/mysql', os.X_OK):

Modified: trunk/tools/dstat/plugins/dstat_innodb_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_innodb_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_innodb_ops.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -6,11 +6,11 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'innodb ops'
+        self.nick = ('ins', 'upd', 'del', 'rea')
+        self.vars = ('inserted', 'updated', 'deleted', 'read')
         self.type = 'f'
         self.width = 3
         self.scale = 1000
-        self.vars = ('inserted', 'updated', 'deleted', 'read')
-        self.nick = ('ins', 'upd', 'del', 'rea')
 
     def check(self): 
         if os.access('/usr/bin/mysql', os.X_OK):

Modified: trunk/tools/dstat/plugins/dstat_memcache_hits.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_memcache_hits.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_memcache_hits.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -8,11 +8,11 @@
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'Memcache Hits'
+        self.nick = ('Hit', 'Miss')
+        self.vars = ('get_hits', 'get_misses')
         self.type = 'd'
         self.width = 6
         self.scale = 50
-        self.nick = ('Hit', 'Miss')
-        self.vars = ('get_hits', 'get_misses')
 
     def check(self):
         try:

Modified: trunk/tools/dstat/plugins/dstat_mysql5_cmds.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_cmds.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_mysql5_cmds.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -2,6 +2,7 @@
 
 global mysql_user
 mysql_user = os.getenv('DSTAT_MYSQL_USER') or os.getenv('USER')
+
 global mysql_pwd
 mysql_pwd = os.getenv('DSTAT_MYSQL_PWD')
 
@@ -11,11 +12,11 @@
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'mysql5 cmds'
-        self.type = 'i'
+        self.nick = ('sel', 'ins','upd','del')
+        self.vars = ('Com_select', 'Com_insert','Com_update','Com_delete')
+        self.type = 'd'
         self.width = 5
         self.scale = 1
-        self.nick = ('sel', 'ins','upd','del')
-        self.vars = ('Com_select', 'Com_insert','Com_update','Com_delete')
 
     def check(self): 
         global MySQLdb

Modified: trunk/tools/dstat/plugins/dstat_mysql5_conn.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_conn.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_mysql5_conn.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -13,11 +13,11 @@
 
     def __init__(self):
         self.name = 'mysql5 conn'
+        self.nick = ('ThCon', '%Con')
+        self.vars = ('Threads_connected', 'Threads')
         self.type = 'f'
         self.width = 4
         self.scale = 1
-        self.nick = ('ThCon', '%Con')
-        self.vars = ('Threads_connected', 'Threads')
 
     def check(self): 
         global MySQLdb

Modified: trunk/tools/dstat/plugins/dstat_mysql5_keys.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql5_keys.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_mysql5_keys.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -13,11 +13,11 @@
 
     def __init__(self):
         self.name = 'mysql5 key status'
+        self.nick = ('used', 'read', 'writ', 'rreq', 'wreq')
+        self.vars = ('Key_blocks_used', 'Key_reads', 'Key_writes', 'Key_read_requests', 'Key_write_requests')
         self.type = 'f'
         self.width = 4
         self.scale = 1000
-        self.nick = ('used', 'read', 'writ', 'rreq', 'wreq')
-        self.vars = ('Key_blocks_used', 'Key_reads', 'Key_writes', 'Key_read_requests', 'Key_write_requests')
 
     def check(self): 
         global MySQLdb

Modified: trunk/tools/dstat/plugins/dstat_mysql_keys.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_mysql_keys.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_mysql_keys.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -4,11 +4,11 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'mysql key status'
+        self.nick = ('used', 'read', 'writ', 'rreq', 'wreq')
+        self.vars = ('Key_blocks_used', 'Key_reads', 'Key_writes', 'Key_read_requests', 'Key_write_requests')
         self.type = 'f'
         self.width = 4
         self.scale = 1000
-        self.vars = ('Key_blocks_used', 'Key_reads', 'Key_writes', 'Key_read_requests', 'Key_write_requests')
-        self.nick = ('used', 'read', 'writ', 'rreq', 'wreq')
 
     def check(self): 
         if not os.access('/usr/bin/mysql', os.X_OK):

Modified: trunk/tools/dstat/plugins/dstat_net_packets.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_net_packets.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_net_packets.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -6,12 +6,12 @@
     &quot;&quot;&quot;
 
     def __init__(self):
+        self.nick = ('#recv', '#send')
         self.type = 'f'
         self.width = 5
         self.scale = 1000
+        self.totalfilter = re.compile('^(lo|bond[0-9]+|face|.+\.[0-9]+)$')
         self.open('/proc/net/dev')
-        self.nick = ('#recv', '#send')
-        self.totalfilter = re.compile('^(lo|bond[0-9]+|face|.+\.[0-9]+)$')
         self.cols = 2
 
     def discover(self, *objlist):

Modified: trunk/tools/dstat/plugins/dstat_nfs3.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfs3.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_nfs3.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -3,12 +3,12 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'nfs3 client'
+        self.nick = ('read', 'writ', 'rdir', 'inod', 'fs', 'cmmt')
+        self.vars = ('read', 'write', 'readdir', 'inode', 'filesystem', 'commit')
         self.type = 'd'
         self.width = 5
         self.scale = 1000
         self.open('/proc/net/rpc/nfs')
-        self.vars = ('read', 'write', 'readdir', 'inode', 'filesystem', 'commit')
-        self.nick = ('read', 'writ', 'rdir', 'inod', 'fs', 'cmmt')
 
     def check(self):
         info(1, 'Module %s is still experimental.' % self.filename)

Modified: trunk/tools/dstat/plugins/dstat_nfs3_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfs3_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_nfs3_ops.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -3,12 +3,12 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'extended nfs3 client operations'
+        self.nick = ('null', 'gatr', 'satr', 'look', 'aces', 'rdln', 'read', 'writ', 'crea', 'mkdr', 'syml', 'mknd', 'rm', 'rmdr', 'ren', 'link', 'rdir', 'rdr+', 'fstt', 'fsnf', 'path', 'cmmt')
+        self.vars = ('null', 'getattr', 'setattr', 'lookup', 'access', 'readlink', 'read', 'write', 'create', 'mkdir', 'symlink', 'mknod', 'remove', 'rmdir', 'rename', 'link', 'readdir', 'readdirplus', 'fsstat', 'fsinfo', 'pathconf', 'commit')
         self.type = 'd'
         self.width = 5
         self.scale = 1000
         self.open('/proc/net/rpc/nfs')
-        self.vars = ('null', 'getattr', 'setattr', 'lookup', 'access', 'readlink', 'read', 'write', 'create', 'mkdir', 'symlink', 'mknod', 'remove', 'rmdir', 'rename', 'link', 'readdir', 'readdirplus', 'fsstat', 'fsinfo', 'pathconf', 'commit')
-        self.nick = ('null', 'gatr', 'satr', 'look', 'aces', 'rdln', 'read', 'writ', 'crea', 'mkdr', 'syml', 'mknd', 'rm', 'rmdr', 'ren', 'link', 'rdir', 'rdr+', 'fstt', 'fsnf', 'path', 'cmmt')
 
     def check(self):
         info(1, 'Module %s is still experimental.') % self.filename

Modified: trunk/tools/dstat/plugins/dstat_nfsd3.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfsd3.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_nfsd3.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -3,12 +3,12 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'nfs3 server'
+        self.nick = ('read', 'writ', 'rdir', 'inod', 'fs', 'cmmt')
+        self.vars = ('read', 'write', 'readdir', 'inode', 'filesystem', 'commit')
         self.type = 'd'
         self.width = 5
         self.scale = 1000
         self.open('/proc/net/rpc/nfsd')
-        self.vars = ('read', 'write', 'readdir', 'inode', 'filesystem', 'commit')
-        self.nick = ('read', 'writ', 'rdir', 'inod', 'fs', 'cmmt')
 
     def check(self):
         info(1, 'Module %s is still experimental.' % self.filename)

Modified: trunk/tools/dstat/plugins/dstat_nfsd3_ops.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_nfsd3_ops.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_nfsd3_ops.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -3,12 +3,12 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'extended nfs3 server operations'
+        self.nick = ('null', 'gatr', 'satr', 'look', 'aces', 'rdln', 'read', 'writ', 'crea', 'mkdr', 'syml', 'mknd', 'rm', 'rmdr', 'ren', 'link', 'rdir', 'rdr+', 'fstt', 'fsnf', 'path', 'cmmt')
+        self.vars = ('null', 'getattr', 'setattr', 'lookup', 'access', 'readlink', 'read', 'write', 'create', 'mkdir', 'symlink', 'mknod', 'remove', 'rmdir', 'rename', 'link', 'readdir', 'readdirplus', 'fsstat', 'fsinfo', 'pathconf', 'commit')
         self.type = 'd'
         self.width = 5
         self.scale = 1000
         self.open('/proc/net/rpc/nfsd')
-        self.vars = ('null', 'getattr', 'setattr', 'lookup', 'access', 'readlink', 'read', 'write', 'create', 'mkdir', 'symlink', 'mknod', 'remove', 'rmdir', 'rename', 'link', 'readdir', 'readdirplus', 'fsstat', 'fsinfo', 'pathconf', 'commit')
-        self.nick = ('null', 'gatr', 'satr', 'look', 'aces', 'rdln', 'read', 'writ', 'crea', 'mkdr', 'syml', 'mknd', 'rm', 'rmdr', 'ren', 'link', 'rdir', 'rdr+', 'fstt', 'fsnf', 'path', 'cmmt')
 
     def check(self):
         info(1, 'Module %s is still experimental.') % self.filename

Modified: trunk/tools/dstat/plugins/dstat_ntp.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_ntp.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_ntp.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -21,13 +21,13 @@
 
     def __init__(self):
         self.name = 'ntp'
+        self.nick = ('date/time',)
+        self.vars = ('time',)
         self.timefmt = os.getenv('DSTAT_TIMEFMT') or '%d-%m %H:%M:%S'
         self.ntpserver = os.getenv('DSTAT_NTPSERVER') or '0.fedora.pool.ntp.org'
         self.type = 's'
         self.width = len(time.strftime(self.timefmt, time.localtime()))
         self.scale = 0
-        self.nick = ('date/time',)
-        self.vars = ('time',)
         self.epoch = 2208988800L
 #        socket.setdefaulttimeout(0.25)
         self.socket = socket.socket( socket.AF_INET, socket.SOCK_DGRAM )

Modified: trunk/tools/dstat/plugins/dstat_postfix.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_postfix.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_postfix.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -3,11 +3,11 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'postfix'
+        self.nick = ('inco', 'actv', 'dfrd', 'bnce', 'defr')
+        self.vars = ('incoming', 'active', 'deferred', 'bounce', 'defer')
         self.type = 'd'
         self.width = 4
         self.scale = 100
-        self.vars = ('incoming', 'active', 'deferred', 'bounce', 'defer')
-        self.nick = ('inco', 'actv', 'dfrd', 'bnce', 'defr')
 
     def check(self):
         if not os.access('/var/spool/postfix/active', os.R_OK):

Modified: trunk/tools/dstat/plugins/dstat_power.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_power.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_power.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -11,11 +11,11 @@
 
     def __init__(self):
         self.name = 'power'
+        self.nick = ( 'usage', )
+        self.vars = ( 'rate', )
         self.type = 'f'
         self.width = 5
         self.scale = 1
-        self.vars = ( 'rate', )
-        self.nick = ( 'usage', )
         self.rate = 0
         self.batteries = []
         for battery in os.listdir('/proc/acpi/battery/'):

Modified: trunk/tools/dstat/plugins/dstat_proc_count.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_proc_count.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_proc_count.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -5,11 +5,11 @@
     Total Number of processes on this system.
     &quot;&quot;&quot;
     def __init__(self):
-        self.name   = 'procs'
+        self.name = 'procs'
+        self.vars = ('total',)
         self.type = 'd'
         self.width = 4
         self.scale = 10
-        self.vars   = ('total',)
 
     def extract(self):
         self.val['total'] = len(glob.glob('/proc/[0-9]*'))

Modified: trunk/tools/dstat/plugins/dstat_rpc.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_rpc.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_rpc.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -3,12 +3,12 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'rpc client'
+        self.nick = ('call', 'retr', 'refr')
+        self.vars = ('calls', 'retransmits', 'autorefreshes')
         self.type = 'd'
         self.width = 5
         self.scale = 1000
         self.open('/proc/net/rpc/nfs')
-        self.vars = ('calls', 'retransmits', 'autorefreshes')
-        self.nick = ('call', 'retr', 'refr')
 
     def extract(self):
         for l in self.splitlines():

Modified: trunk/tools/dstat/plugins/dstat_rpcd.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_rpcd.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_rpcd.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -3,12 +3,12 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'rpc server'
+        self.nick = ('call', 'erca', 'erau', 'ercl', 'xdrc')
+        self.vars = ('calls', 'badcalls', 'badauth', 'badclnt', 'xdrcall')
         self.type = 'd'
         self.width = 5
         self.scale = 1000
         self.open('/proc/net/rpc/nfsd')
-        self.vars = ('calls', 'badcalls', 'badauth', 'badclnt', 'xdrcall')
-        self.nick = ('call', 'erca', 'erau', 'ercl', 'xdrc')
 
     def extract(self):
         for l in self.splitlines():

Modified: trunk/tools/dstat/plugins/dstat_sendmail.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_sendmail.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_sendmail.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -5,11 +5,10 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'sendmail'
+        self.vars = ('queue',)
         self.type = 'd'
         self.width = 4
         self.scale = 100
-        self.vars = ('queue',)
-        self.nick = ('queu',)
 
     def check(self):
         if not os.access('/var/spool/mqueue', os.R_OK):

Modified: trunk/tools/dstat/plugins/dstat_snooze.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_snooze.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_snooze.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,10 +1,10 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'snooze'
+        self.vars = ('snooze',)
         self.type = 's'
         self.width = 6
         self.scale = 0
-        self.vars = ('snooze',)
         self.before = time.time()
 
     def extract(self):

Modified: trunk/tools/dstat/plugins/dstat_top_bio.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_bio.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_bio.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -8,10 +8,10 @@
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'most expensive'
+        self.vars = ('block i/o process',)
         self.type = 's'
         self.width = 22
         self.scale = 0
-        self.vars = ('block i/o process',)
         self.pid = str(os.getpid())
         self.pidset1 = {}; self.pidset2 = {}
 

Modified: trunk/tools/dstat/plugins/dstat_top_cpu.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_cpu.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_cpu.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -10,10 +10,10 @@
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'most expensive'
+        self.vars = ('cpu process',)
         self.type = 's'
         self.width = 16
         self.scale = 0
-        self.vars = ('cpu process',)
         self.pid = str(os.getpid())
         self.pidset1 = {}; self.pidset2 = {}
 

Modified: trunk/tools/dstat/plugins/dstat_top_cputime.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_cputime.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_cputime.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -11,10 +11,10 @@
 
     def __init__(self):
         self.name = 'highest total'
+        self.vars = ('cputime process',)
         self.type = 's'
         self.width = 17
         self.scale = 0
-        self.vars = ('cputime process',)
         self.pid = str(os.getpid())
         self.pidset1 = {}; self.pidset2 = {}
 

Modified: trunk/tools/dstat/plugins/dstat_top_cputime_avg.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_cputime_avg.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_cputime_avg.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -9,10 +9,10 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'highest average'
+        self.vars = ('cputime process',)
         self.type = 's'
         self.width = 17
         self.scale = 0
-        self.vars = ('cputime process',)
         self.pid = str(os.getpid())
         self.pidset1 = {}; self.pidset2 = {}
 

Modified: trunk/tools/dstat/plugins/dstat_top_io.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_io.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_io.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -6,10 +6,10 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'most expensive'
+        self.vars = ('i/o process',)
         self.type = 's'
         self.width = 22
         self.scale = 0
-        self.vars = ('i/o process',)
         self.pid = str(os.getpid())
         self.pidset1 = {}; self.pidset2 = {}
 

Modified: trunk/tools/dstat/plugins/dstat_top_latency.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_latency.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_latency.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -15,10 +15,10 @@
 
     def __init__(self):
         self.name = 'highest total'
+        self.vars = ('latency process',)
         self.type = 's'
         self.width = 17
         self.scale = 0
-        self.vars = ('latency process',)
         self.pid = str(os.getpid())
         self.pidset1 = {}; self.pidset2 = {}
 

Modified: trunk/tools/dstat/plugins/dstat_top_latency_avg.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_latency_avg.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_latency_avg.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -9,10 +9,10 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'highest average'
+        self.vars = ('latency process',)
         self.type = 's'
         self.width = 17
         self.scale = 0
-        self.vars = ('latency process',)
         self.pid = str(os.getpid())
         self.pidset1 = {}; self.pidset2 = {}
 

Modified: trunk/tools/dstat/plugins/dstat_top_mem.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_mem.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_mem.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -10,10 +10,10 @@
     &quot;&quot;&quot;
     def __init__(self):
         self.name = 'most expensive'
+        self.vars = ('memory process',)
         self.type = 's'
         self.width = 17
         self.scale = 0
-        self.vars = ('memory process',)
         self.pid = str(os.getpid())
 
     def extract(self):

Modified: trunk/tools/dstat/plugins/dstat_top_oom.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_top_oom.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_top_oom.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,7 +1,7 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 ### Dstat most expensive process plugin
 ### Displays the name of the most expensive process
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>
 
 ### More information:
 ###    <A HREF="http://lwn.net/Articles/317814/">http://lwn.net/Articles/317814/</A>
@@ -9,10 +9,10 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'out of memory'
+        self.vars = ('kill score',)
         self.type = 's'
         self.width = 18
         self.scale = 0
-        self.vars = ('kill score',)
         self.pid = str(os.getpid())
 
     def check(self):

Modified: trunk/tools/dstat/plugins/dstat_utmp.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_utmp.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_utmp.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,11 +1,13 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'utmp'
+        self.nick = ('ses', 'usr', 'adm' )
+        self.vars = ('sessions', 'users', 'root')
         self.type = 'd'
         self.width = 3
         self.scale = 10
-        self.nick = ('ses', 'usr', 'adm' )
-        self.vars = ('sessions', 'users', 'root')
 
     def check(self): 
         try:

Modified: trunk/tools/dstat/plugins/dstat_vm_memctl.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_vm_memctl.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_vm_memctl.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,21 +1,21 @@
+### Author: Bert de Bruijn &lt;bert+dstat$debruijn,be&gt;
+
 ### VMware vmmemctl stats
-### Displays ballooning status inside VMware VMs. 
+### Displays ballooning status inside VMware VMs.
 ### The vmmemctl from the VMware Tools needs to be loaded.
 ### This plugin has been tested on a VM running CentOS5 with the open-vm-tools, on ESX3.5
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">bert+dstat at debruijn.be</A>
 
 # NB Data comes from /proc/vmmemctl
 
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'memctl'
+        self.nick = ('size',)
+        self.vars = ('balloon',)
         self.type = 'f'
         self.width = 6
         self.scale = 1024
         self.open('/proc/vmmemctl')
-        self.nick = ('size',)
-        self.vars = ('balloon',)
 
     def check(self): 
         try:

Modified: trunk/tools/dstat/plugins/dstat_vmk_hba.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_vmk_hba.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_vmk_hba.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,7 +1,7 @@
+### Author: Bert de Bruijn &lt;bert+dstat$debruijn,be&gt;
+
 ### VMware ESX kernel vmhba stats
 ### Displays kernel vmhba statistics on VMware ESX servers
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">bert+dstat at debruijn.be</A>
 
 # NOTE TO USERS: command-line plugin configuration is not yet possible, so I've
 # &quot;borrowed&quot; the -D argument. 
@@ -15,7 +15,6 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'vmkhba'
-        self.discover = self.discover()
         self.nick = ('read', 'writ')
         self.cols = 2
 

Modified: trunk/tools/dstat/plugins/dstat_vmk_int.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_vmk_int.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_vmk_int.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,7 +1,7 @@
+### Author: Bert de Bruijn &lt;bert+dstat$debruijn,be&gt;
+
 ### VMware ESX kernel interrupt stats
 ### Displays kernel interrupt statistics on VMware ESX servers
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">bert+dstat at debruijn.be</A>
 
 # NOTE TO USERS: command-line plugin configuration is not yet possible, so I've
 # &quot;borrowed&quot; the -I argument. 
@@ -14,11 +14,10 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'vmkint'
-        self.open('/proc/vmware/interrupts')
-        self.discover = self.discover()
         self.type = 'd'
         self.width = 4
         self.scale = 1000
+        self.open('/proc/vmware/interrupts')
 #       self.intmap = self.intmap()
 
 #   def intmap(self):

Modified: trunk/tools/dstat/plugins/dstat_vmk_nic.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_vmk_nic.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_vmk_nic.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,7 +1,7 @@
+### Author: Bert de Bruijn &lt;bert+dstat$debruijn,be&gt;
+
 ### VMware ESX kernel vmknic stats
 ### Displays VMkernel port statistics on VMware ESX servers
-###
-### Authority: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">bert+dstat at debruijn.be</A>
 
 # NOTE TO USERS: command-line plugin configuration is not yet possible, so I've
 # &quot;borrowed&quot; the -N argument.
@@ -14,8 +14,8 @@
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'vmknic'
+        self.nick = ('recv', 'send')
         self.open('/proc/vmware/net/tcpip/ifconfig')
-        self.nick = ('recv', 'send')
         self.cols = 2
 
     def check(self):

Modified: trunk/tools/dstat/plugins/dstat_vz_cpu.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_vz_cpu.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_vz_cpu.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,3 +1,4 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
 #Version: 2.2
 #VEID   user    nice    system   uptime     idle             strv   uptime          used           maxlat  totlat  numsched
@@ -6,11 +7,11 @@
 
 class dstat_plugin(dstat):
     def __init__(self):
+        self.nick = ('usr', 'sys', 'idl', 'nic')
         self.type = 'p'
         self.width = 3
         self.scale = 34
         self.open('/proc/vz/vestat')
-        self.nick = ('usr', 'sys', 'idl', 'nic')
         self.cols = 4
 
     def check(self):

Modified: trunk/tools/dstat/plugins/dstat_vz_io.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_vz_io.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_vz_io.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,3 +1,5 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 ### Example content for /proc/bc/&lt;veid&gt;/ioacct
 #       read                         2773011640320
 #       write                        2095707136000

Modified: trunk/tools/dstat/plugins/dstat_vz_ubc.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_vz_ubc.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_vz_ubc.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,10 +1,12 @@
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
+
 class dstat_plugin(dstat):
     def __init__(self):
+        self.nick = ('fcnt', )
         self.type = 'd'
         self.width = 5
         self.scale = 1000
         self.open('/proc/user_beancounters')
-        self.nick = ('fcnt', )
         self.cols = 1 ### Is this correct ?
 
     def check(self):

Modified: trunk/tools/dstat/plugins/dstat_wifi.py
===================================================================
--- trunk/tools/dstat/plugins/dstat_wifi.py	2009-11-25 11:34:35 UTC (rev 8040)
+++ trunk/tools/dstat/plugins/dstat_wifi.py	2009-11-26 02:39:00 UTC (rev 8041)
@@ -1,15 +1,13 @@
-global iwlibs
-from pythonwifi import iwlibs
+### Author: Dag Wieers &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">dag at wieers.com</A>&gt;
 
 class dstat_plugin(dstat):
     def __init__(self):
         self.name = 'wifi'
+        self.nick = ('lnk', 's/n')
+        self.vars = iwlibs.getNICnames()
         self.type = 'd'
         self.width = 3
         self.scale = 33
-        self.check()
-        self.vars = iwlibs.getNICnames()
-        self.nick = ('lnk', 's/n')
         self.cols = 2
 
     def check(self): 


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006835.html">[svn] r8040 - in trunk/tools/dstat: . docs plugins
</A></li>
	<LI>Next message: <A HREF="006837.html">[svn] r8042 - trunk/tools/dstat/docs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6836">[ date ]</a>
              <a href="thread.html#6836">[ thread ]</a>
              <a href="subject.html#6836">[ subject ]</a>
              <a href="author.html#6836">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
