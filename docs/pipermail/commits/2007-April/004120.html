<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5321 - trunk/tools/dstat
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5321%20-%20trunk/tools/dstat&In-Reply-To=%3C20070428124742.7CD28944AC7%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004119.html">
   <LINK REL="Next"  HREF="004121.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5321 - trunk/tools/dstat</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5321%20-%20trunk/tools/dstat&In-Reply-To=%3C20070428124742.7CD28944AC7%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5321 - trunk/tools/dstat">packagers at lists.rpmforge.net
       </A><BR>
    <I>Sat Apr 28 14:47:42 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004119.html">[svn] r5320 - in trunk/rpms: . clamav dstat libxclass linkloop	multitail rfb rtorrent trac xine
</A></li>
        <LI>Next message: <A HREF="004121.html">[svn] r5322 - in trunk/rpms: perl-Algorithm-C3 perl-Archive-Extract	perl-Astro-SpaceTrack perl-Business-ISBN-Data perl-CGI-Ajax	perl-Callback perl-Carp-Clan perl-Chart-Strip	perl-Class-Factory perl-Class-Factory-Util perl-Class-Trigger	perl-Config-General perl-Convert-ASN1 perl-DBIx-DBSchema	perl-Data-Compare perl-Devel-SmallProf perl-Devel-Symdump	perl-Email-Abstract perl-Email-Address perl-Email-Date	perl-Email-Simple perl-ExtUtils-FakeConfig perl-File-Iterator	perl-Games-Maze perl-Graph perl-Graph-Easy-As_svg	perl-HTML-SBC perl-HTML-Table perl-HTML-Template perl-IO-All	perl-IO-Multiplex perl-IO-Socket-SSL perl-IO-Zlib	perl-IPC-Locker perl-IPC-Run3 perl-Image-Info perl-JSON	perl-Log-Detect perl-MP3-Info perl-Mail-Mbox-MessageParser	perl-MailTools perl-Module-Depends	perl-Module-Load-Conditional perl-Module-Refresh	perl-Net-Delicious perl-Net-Server perl-POE-Component-Client-SMTP	perl-POE-Component-Server-Chargen perl-POE-Component-Server-Daytime	perl-POE-Component-Server-Discard perl-POE-Component-Server-Ident	perl-POE-Component-Server-Qotd perl-POE-Component-Server-Time	perl-POE-Filter-CSV perl-Paper-Specs perl-Params-Check	perl-Pod-Simple perl-Set-IntSpan perl-Sys-Manage	perl-Term-Clui perl-Test-ClassAPI perl-Test-Data	perl-Test-Exception perl-Test-ISBN perl-Test-Manifest	perl-Tie-CPHash perl-Tk-FontDialog perl-Tree-Trie	perl-WWW-Mechanize perl-WWW-Search	perl-WebService-Validator-Feed-W3C perl-XML-XPathEngine	perl-mixin scribus
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4120">[ date ]</a>
              <a href="thread.html#4120">[ thread ]</a>
              <a href="subject.html#4120">[ subject ]</a>
              <a href="author.html#4120">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2007-04-28 14:47:41 +0200 (Sat, 28 Apr 2007)
New Revision: 5321

Modified:
   trunk/tools/dstat/ChangeLog
   trunk/tools/dstat/TODO
   trunk/tools/dstat/dstat
Log:
Only rewrite xterm title when XTERM_SHELL is set to bash

Modified: trunk/tools/dstat/ChangeLog
===================================================================
--- trunk/tools/dstat/ChangeLog	2007-04-28 11:10:41 UTC (rev 5320)
+++ trunk/tools/dstat/ChangeLog	2007-04-28 12:47:41 UTC (rev 5321)
@@ -1,10 +1,14 @@
+* 0.6.6svn - ... - released 28/04/2007
+- Only rewrite xterm title when XTERM_SHELL is set to bash
+- Added more Dbt (Debian bug tracker) ids in the ChangeLog and TODO
+
 * 0.6.6 - Unemployed - released 28/04/2007
-- Removed SwapCached from the Cached counter. (Peter Rabbitson)
-- Fixed a file descriptor problem on kernel 2.4. (Liviu Daia)
-- Install manpage as part of the make install phase. (Scott Baker)
-- Use SIG_IGN instead of SIG_DFL to disable alarm signal.
-- Improved dev() for kernel 2.4 device names. (Filippo Giunchedi)
-- If stdout is not a TTY, don't limit the line length. (Jason)
+- Removed SwapCached from the Cached counter (Dbt 418326, Peter Rabbitson)
+- Fixed a file descriptor problem on kernel 2.4 (Liviu Daia)
+- Install manpage as part of the make install phase (Scott Baker)
+- Use SIG_IGN instead of SIG_DFL to disable alarm signal
+- Improved dev() for kernel 2.4 device names (Dbt 377199, Filippo Giunchedi)
+- If stdout is not a TTY, don't limit the line length (Jason)
 
 * 0.6.5 - Torrox - released 17/04/2007
 - Added VMware ESX plugins (Bert de Bruijn)
@@ -35,7 +39,7 @@
 - Added individual swap monitoring (-s with -S)
 - Small performance improvements
 - Raise module exceptions when --debug is invoked
-- Removed the memory-leaking curses implementation (<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">supastuff at freenode</A>)
+- Removed the memory-leaking curses implementation (Dbt 336380, <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">supastuff at freenode</A>)
 - Added dist, rpm and srpm targets to Makefile
 - Moved documentation to asciidoc at last
 
@@ -52,7 +56,7 @@
 - Fixed a bug in dpopen causing gpfs/gpfsop to fail after a while
 - Change terminal title (if terminal supports it)
 - Don't trim the cpulist to 2 items when -f (S&#233;bastien Prud'homme)
-- Exclude md-devices from total (Peter Cordes)
+- Exclude md-devices from total (Dbt 318950, Peter Cordes)
 - Now accept 'total' keyword with -C (like -D and -N)
 - Rewrote the path-inserting code
 - Added asciidoc based manual page

Modified: trunk/tools/dstat/TODO
===================================================================
--- trunk/tools/dstat/TODO	2007-04-28 11:10:41 UTC (rev 5320)
+++ trunk/tools/dstat/TODO	2007-04-28 12:47:41 UTC (rev 5321)
@@ -48,7 +48,7 @@
 + Python 1.5 prints 'L' for long, crashes when int()
 + Implement better (?) protection against counter rollovers (see mail from Sebastien Prud'homme)
 + Plugins currently have to be written in python 1.5 to work for dstat15 (lowest common denominator)
-+ When stdout is suspend (Ctrl-S) you get: IOError: [Errno 4] Interrupted system call
++ When stdout is suspend (Ctrl-S) you get: IOError: [Errno 4] Interrupted system call (Dbt 309953, Marc Lehmann, <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">supastuff at freenode</A>)
 
 ### Plugin issues
 + app plugin: reasonably slow

Modified: trunk/tools/dstat/dstat
===================================================================
--- trunk/tools/dstat/dstat	2007-04-28 11:10:41 UTC (rev 5320)
+++ trunk/tools/dstat/dstat	2007-04-28 12:47:41 UTC (rev 5321)
@@ -1743,8 +1743,9 @@
 
 	### Write term-title
 	if op.isatty:
+		shell = os.getenv('XTERM_SHELL')
 		term = os.getenv('TERM')
-		if term and re.compile('(screen*|xterm*)').match(term):
+		if shell == '/bin/bash' and term and re.compile('(screen*|xterm*)').match(term):
 			sys.stdout.write('\033]0;(%s@%s) %s %s\007' % (user, hostname, os.path.basename(sys.argv[0]), ' '.join(op.args)))
 
 	### Check background color (rxvt)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004119.html">[svn] r5320 - in trunk/rpms: . clamav dstat libxclass linkloop	multitail rfb rtorrent trac xine
</A></li>
	<LI>Next message: <A HREF="004121.html">[svn] r5322 - in trunk/rpms: perl-Algorithm-C3 perl-Archive-Extract	perl-Astro-SpaceTrack perl-Business-ISBN-Data perl-CGI-Ajax	perl-Callback perl-Carp-Clan perl-Chart-Strip	perl-Class-Factory perl-Class-Factory-Util perl-Class-Trigger	perl-Config-General perl-Convert-ASN1 perl-DBIx-DBSchema	perl-Data-Compare perl-Devel-SmallProf perl-Devel-Symdump	perl-Email-Abstract perl-Email-Address perl-Email-Date	perl-Email-Simple perl-ExtUtils-FakeConfig perl-File-Iterator	perl-Games-Maze perl-Graph perl-Graph-Easy-As_svg	perl-HTML-SBC perl-HTML-Table perl-HTML-Template perl-IO-All	perl-IO-Multiplex perl-IO-Socket-SSL perl-IO-Zlib	perl-IPC-Locker perl-IPC-Run3 perl-Image-Info perl-JSON	perl-Log-Detect perl-MP3-Info perl-Mail-Mbox-MessageParser	perl-MailTools perl-Module-Depends	perl-Module-Load-Conditional perl-Module-Refresh	perl-Net-Delicious perl-Net-Server perl-POE-Component-Client-SMTP	perl-POE-Component-Server-Chargen perl-POE-Component-Server-Daytime	perl-POE-Component-Server-Discard perl-POE-Component-Server-Ident	perl-POE-Component-Server-Qotd perl-POE-Component-Server-Time	perl-POE-Filter-CSV perl-Paper-Specs perl-Params-Check	perl-Pod-Simple perl-Set-IntSpan perl-Sys-Manage	perl-Term-Clui perl-Test-ClassAPI perl-Test-Data	perl-Test-Exception perl-Test-ISBN perl-Test-Manifest	perl-Tie-CPHash perl-Tk-FontDialog perl-Tree-Trie	perl-WWW-Mechanize perl-WWW-Search	perl-WebService-Validator-Feed-W3C perl-XML-XPathEngine	perl-mixin scribus
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4120">[ date ]</a>
              <a href="thread.html#4120">[ thread ]</a>
              <a href="subject.html#4120">[ subject ]</a>
              <a href="author.html#4120">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
