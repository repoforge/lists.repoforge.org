<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r4422 - in trunk/tools/yam: . docs
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r4422%20-%20in%20trunk/tools/yam%3A%20.%20docs&In-Reply-To=%3C20060528110036.417F6944DA6%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003221.html">
   <LINK REL="Next"  HREF="003223.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r4422 - in trunk/tools/yam: . docs</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r4422%20-%20in%20trunk/tools/yam%3A%20.%20docs&In-Reply-To=%3C20060528110036.417F6944DA6%40pooch.vmhosting.org%3E"
       TITLE="[svn] r4422 - in trunk/tools/yam: . docs">packagers at lists.rpmforge.net
       </A><BR>
    <I>Sun May 28 13:00:36 CEST 2006</I>
    <P><UL>
        <LI>Previous message: <A HREF="003221.html">[svn] r4421 - trunk/tools/dstat/plugins
</A></li>
        <LI>Next message: <A HREF="003223.html">[svn] r4423 - in trunk/rpms: aalib revelation twin xpenguins-applet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3222">[ date ]</a>
              <a href="thread.html#3222">[ thread ]</a>
              <a href="subject.html#3222">[ subject ]</a>
              <a href="author.html#3222">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: dag
Date: 2006-05-28 13:00:35 +0200 (Sun, 28 May 2006)
New Revision: 4422

Added:
   trunk/tools/yam/README-rhn
   trunk/tools/yam/docs/
   trunk/tools/yam/docs/directories.txt
   trunk/tools/yam/docs/dnsmasq-configuration.txt
   trunk/tools/yam/docs/loop-devices.txt
   trunk/tools/yam/docs/proxy-configuration.txt
   trunk/tools/yam/docs/quickstart.txt
   trunk/tools/yam/docs/selinux.txt
   trunk/tools/yam/docs/suse-support.txt
   trunk/tools/yam/docs/usage.txt
   trunk/tools/yam/docs/verbosity.txt
   trunk/tools/yam/docs/webserver-configuration.txt
Removed:
   trunk/tools/yam/README.dirs
   trunk/tools/yam/README.dnsmasq
   trunk/tools/yam/README.loop
   trunk/tools/yam/README.proxy
   trunk/tools/yam/README.quickstart
   trunk/tools/yam/README.rhn
   trunk/tools/yam/README.selinux
   trunk/tools/yam/README.suse
   trunk/tools/yam/README.usage
   trunk/tools/yam/README.verbose
   trunk/tools/yam/README.web
Modified:
   trunk/tools/yam/Makefile
   trunk/tools/yam/TODO
Log:
Documentation reorganisation

Modified: trunk/tools/yam/Makefile
===================================================================
--- trunk/tools/yam/Makefile	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/Makefile	2006-05-28 11:00:35 UTC (rev 4422)
@@ -43,4 +43,8 @@
 		$(sbindir)/chkconfig --add yam; \
 	fi
 
-tar:
+docs:
+	make -C docs
+
+clean:
+	rm -f README*.html

Copied: trunk/tools/yam/README-rhn (from rev 4391, trunk/tools/yam/README.rhn)
===================================================================
--- trunk/tools/yam/README.rhn	2006-05-20 16:01:28 UTC (rev 4391)
+++ trunk/tools/yam/README-rhn	2006-05-28 11:00:35 UTC (rev 4422)
@@ -0,0 +1,296 @@
+Using RHN support in Yam
+========================
+
+Requirements
+------------
+For RHN support to work, you need to install the up2date package
+that comes with your RHEL distribution. It may not work with
+another up2date package (eg. Fedora Core).
+
+
+RHN systemid creation
+---------------------
+For each distribution you want to add to Yam, you need to have a valid
+RHN systemid. You can create a systemid (provided you have the correct
+entitlements to do so) by using the gensystemid tool that comes with
+yam, eg.
+
+	gensystemid -r 4AS -a x86_64 /var/yam/rhel4as-x86_64
+
+The tool will create a new system called &lt;hostname&gt;-4AS-x86_64-yam,
+register this system on RHN and create a systemid file in 
+/var/yam/rhel4as-x86_64
+
+
+RHN configuration
+-----------------
+Having done that, you can enable multiple channels for this systemid
+on the RHN website. And then configure yam to use these channels, eg.
+
+	[rhel4as]
+	name = Red Hat Advanced Server $release U2 ($arch)
+	release = 4
+	arch = i386
+	iso = RHEL4-U2-i386-AS-disc?.iso
+	updates = <A HREF="rhns:///rhel-i386-as-4">rhns:///rhel-i386-as-4</A>
+	extras = <A HREF="rhns:///rhel-i386-as-4-extras">rhns:///rhel-i386-as-4-extras</A>
+	hwcert = <A HREF="rhns:///rhel-i386-as-4-hwcert">rhns:///rhel-i386-as-4-hwcert</A>
+	sdk = <A HREF="rhns:///rhel-i386-as-4-sdk">rhns:///rhel-i386-as-4-sdk</A>
+	rhaps = <A HREF="rhns:///rhel-4-as-i386-rhaps-2">rhns:///rhel-4-as-i386-rhaps-2</A>
+	rhds = <A HREF="rhns:///rhel-4-as-i386-rhds-2.1">rhns:///rhel-4-as-i386-rhds-2.1</A>
+
+After that, yam should be able to successfully log on and download
+all packages for the configured channels.
+
+
+Creating systemids for different dists/archs
+--------------------------------------------
+Previously it was not possible to generate a new systemid for a
+dist/arch without installing a system, connecting it to the Internet
+and then register on RHN.
+
+A lot of companies simply do not allow servers to have internet access
+and I have personally been several times in the situation that I needed
+to download x86_64 or ppc packages for a system that I have entitlements
+for but is simply not allowed to connect to the Internet.
+
+The gensystemid tool that comes with Yam will help you with creating
+valid systemids for Yam, eg.
+
+	gensystemid -r 4AS -a x86_64 /var/yam/rhel4as-x86_64
+
+You can manage your systems on the RHN website afterwards.
+
+(For yet unknown reasons, you have to be root to run gensystemid)
+
+
+Downloading from unsubscribed channels
+--------------------------------------
+You can let Yam subscribe to the necessary channels, unfortunately this
+requires your RHN username and password. You can provide these in
+the main section, like:
+
+	[main]
+	rhnlogin = username:password
+
+Of course this requires you to protect your Yam config-file. You may want
+to do:
+
+	chmod og= /etc/yam.conf
+	chown root.root /etc/yam.conf
+
+Since you only need the username/password to subscribe to new channels
+(only the very first time you access them) you may wish to remove the
+login information from yam.conf after that.
+
+Of course, you can always log on manually to the RHN website to subscribe
+your system to the channels you require.
+
+
+List of RHN channels
+--------------------
+For a complete and up-to-date list of available channels, check the RHN
+website. This list has been compiled with only EL2.1, EL3, EL4 and
+i386, x86_64 archs.
+
+	RHEL4
+		rhel-$arch-XX-4
+		rhel-$arch-XX-4-beta
+		rhel-$arch-XX-4-extras
+		rhel-$arch-XX-4-extras-beta
+		rhel-$arch-as-4-hwcert			(only for as)
+		rhel-$arch-XX-4-sdk
+		rhel-4-XX-$arch-rhaps-2
+		rhel-4-XX-$arch-rhaps-2-beta
+		rhel-4-XX-$arch-rhds-2.1
+		rhel-4-XX-$arch-rhds-2.1-beta
+
+
+	RHEL3
+		rhel-$arch-XX-3
+		rhel-$arch-XX-3-beta
+		rhel-$arch-XX-3-devsuite
+		rhel-$arch-XX-3-devsuite-beta
+		rhel-$arch-XX-3-extras
+		rhel-$arch-XX-3-extras-beta
+		rhel-$arch-as-3-hwcert			(only for as)
+		rhel-3-XX-i386-rhaps-1			(only for i386)
+		rhel-3-XX-$arch-rhaps-beta
+		rhel-3-XX-i386-rhds-2			(only for i386)
+
+	RHEL2.1
+		redhat-advanced-server-i386		(only for as)
+		redhat-ent-linux-i386-es-2.1		(only for es)
+		rhel-i386-XX-2.1-beta
+
+Where XX = as or es
+
+Please send updates on these.
+
+
+Ignore packages you already have elsewhere
+------------------------------------------
+This is possible, although hard to implement currently. I could check
+whether the file exists on one of the ISOs (or in the RPMS/ directory),
+but I prefer to implement this after a redesign.
+
+You can simply get the same effect with the following script, clean.sh:
+
+----
+#!/bin/bash
+
+dists=$*
+srcdir=/var/yam
+wwwdir=/var/www/yam
+
+if [ -z &quot;$dists&quot; ]; then
+        cd $srcdir
+        dists=rhel[2-4][aew]s-*
+        cd -
+fi
+
+for dist in $dists; do
+        echo &quot;Cleaning up $dist&quot;
+
+	### Remove dangling links
+	for link in $(find &quot;$srcdir/$dist/updates&quot; -type l); do
+		if [ ! -r &quot;$(readlink $link)&quot; ]; then
+			rm -f $link
+		fi
+	done
+
+	### Relink existing files
+        for rpm in $wwwdir/$dist/disc?/RedHat/RPMS/*.rpm; do
+                file=&quot;$(basename $rpm)&quot;
+                dstfile=&quot;$srcdir/$dist/updates/$file&quot;
+                ln -sf &quot;$rpm&quot; &quot;$dstfile&quot;
+        done
+done
+----
+
+Run this script when you download new RHEL ISO files and make these available
+in Yam, but before downloading any updates from RHN.
+
+	yam --umount
+	### Download new ISO files
+	### Change /etc/yam.conf to change the iso=
+	yam -v
+	./clean.sh
+	yam -uxvg
+
+This will free up some space by symlinking duplicate RPM packages from the ISO
+files on top of the RPM packages on disk. As a side-effect it will also prevent
+the new updates from being downloaded.  You can also remove _all_ packages from
+the updates repository prior to doing this.
+
+
+<A HREF="rhn://">rhn://</A> and <A HREF="rhns://">rhns://</A> URL schemes
+------------------------------
+The default scheme for RHN is <A HREF="rhns://">rhns://</A> (HTTPS), but it was reported that
+in some cases (related to proxies or firewalls) the HTTPS connections
+fail, so there is a need to allow for HTTP connections. You can specify
+this by using the <A HREF="rhn://">rhn://</A> scheme instead of <A HREF="rhns://">rhns://</A>
+
+In this case, the authentication is not done using SSL either !
+
+
+Using Red Hat satellite servers
+-------------------------------
+You can override the hardcoded RHN server by specifying it in the URL.
+If it is not specified, Yam will assume a default value of
+xmlrpc.rhn.redhat.com
+
+So the following two lines are identical:
+
+	updates = <A HREF="rhns:///rhel-i386-as-4">rhns:///rhel-i386-as-4</A>
+	updates = <A HREF="rhns://xmlrpc.rhn.redhat.com/rhel-i386-as-4">rhns://xmlrpc.rhn.redhat.com/rhel-i386-as-4</A>
+
+And you can use a satellite server by doing:
+
+	updates = <A HREF="rhns://your.own.satellite/rhel-i386-as-4">rhns://your.own.satellite/rhel-i386-as-4</A>
+
+(Please let me know if this works or not !)
+
+
+Using a single systemid
+-----------------------
+You can experiment with using a single systemid for multiple dists
+using the rhnrelease option:
+ 
+	[rhel3as]
+	rhnrelease = 3AS
+
+This way you override the OS release that is in the systemid file.
+
+This works across the same entitlement. Eg. when you have an Advanced
+Server entitlement, you can download from 2.1AS, 3AS and 4AS channels.
+But not from the ES or WS channels and not from different architectures.
+
+
+Known problems
+--------------
+(Uninvestigated fully yet)
+
+I have seen the following problems:
+
+	'yam: Error subscribing %s to channel %s, skipping.'
+or
+	  File &quot;/usr/share/rhn/up2date_client/repoDirector.py&quot;, line 36, in getPackage
+	    return self.handlers[channel['type']].getPackage(pkg, msgCallback, progressCallback)
+	TypeError: unsubscriptable object
+or
+	yam: Error listing packages from channel rhel-i386-as-3-devsuite. Skipping.
+	Error communicating with server. The message was:
+	Authorization Required
+
+And when using a single systemid file, also:
+
+	'yam: Failed to subscribe RHN id %s to channel %s, skipping.'
+or
+	'Server already subscribed to ...'
+
+
+Somehow there is loginInfo polution (subscribed channels from a previous
+distribution login polutes a subsequent login, ie. a previous EL2 run
+polutes the next EL3 channel subscription list in the same execute phase).
+
+A workaround in this case is instead of doing:
+
+	yam -uxqg
+or	yam -uxqg rhel2as rhel3as rhel4as-i386 rhel4as-x86_64
+
+to do:
+
+	for dist in rhel2as rhel3as rhel4as-i386 rhel4as-x86_64; do
+		yam -uxqg $dist
+	done
+
+I still need to investigate and file a bugreport with Red Hat (seems to be
+a problem with the implementation of the python classes and the use of
+global variables in up2date). Although I clean the global variables used by
+the up2date classes, somehow some data is persistent.
+
+
+RHN documentation and references
+--------------------------------
+A useful list of RHN references:
+
+	Red Hat: RHN XMLRPC API
+	<A HREF="https://rhn.redhat.com/rpc/api/errata/">https://rhn.redhat.com/rpc/api/errata/</A>
+
+	kickstart-list: RHN XMLRPC API
+	<A HREF="https://www.redhat.com/archives/kickstart-list/2005-December/msg00021.html">https://www.redhat.com/archives/kickstart-list/2005-December/msg00021.html</A>
+
+	RHbz 162210: [RFE] New up2date command-line options
+	<A HREF="https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=162210">https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=162210</A>
+
+	RHbz 179721: [RFE] No documentation for (RHN) up2date XMLRPC API methods
+	<A HREF="https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=179721">https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=179721</A>
+
+And how to configure Yam for RHN access:
+
+	Installing YAM 0.8.0 on Red Hat Enterprise Linux 4
+	<A HREF="http://wiki.garylaw.net/doku.php?id=technical:unix:linux:yam">http://wiki.garylaw.net/doku.php?id=technical:unix:linux:yam</A>
+
+---
+Please send me improvements to this document.

Deleted: trunk/tools/yam/README.dirs
===================================================================
--- trunk/tools/yam/README.dirs	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.dirs	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,31 +0,0 @@
-Short explanation of directory structure
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-
-srcdir = /var/yam
-
-	/all		-	- Global directory
-		/local		- Directory for custom packages
-
-	/$dist		-	- Per distribution directory (put ISOs here)
-		/local		- Directory for custom packages
-		/$repo		- Per repository directory
-
-wwwdir = /var/www/yam
-
-	/$dist
-		/disc?		- Loop-mounted ISO images
-		/iso		- Contains a symlink to the ISO files
-		/RPMS		- Contains all existing RPM files
-		/RPMS.$repo	- Contains repo RPM files
-		
-
-	eg.
-		/el3-x86_64	- Enterprise Linux 3 / x86_64
-		/fc3-i386	- Fedora Core 3 / i386
-
-	per dist-arch one directory, autogenerated
-	you can remove everything from here and regenerated with Yam
-	please don't add packages here, see /var/yam/all !
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.dnsmasq
===================================================================
--- trunk/tools/yam/README.dnsmasq	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.dnsmasq	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,31 +0,0 @@
-To set up yam with dnsmasq, put the following lines in /etc/dnsmasq.conf:
-
-	### Red Hat Enterprise 3 for x86
-	dhcp-boot=/yam/rhes3-i386/pxelinux.0,emyn,10.0.0.1
-
-	### Fedora Core 2 for x86
-	#dhcp-boot=/yam/fc2-i386/pxelinux.0,emyn,10.0.0.1
-
-The syntax is:
-
-	dhcp-boot=&lt;path-to-pxelinux.0&gt;,&lt;hostname-of-tftp-server&gt;,&lt;ip-address-of-tftp-server&gt;
-
-For DNS to work, add all systems to /etc/hosts. To map a host to a fixed
-IP address with DHCP, add the MAC-address and hostname/ip-address to
-/etc/ethers. eg.
-
-	/etc/hosts:
-	127.0.0.1	localhost
-	10.0.0.1	yam
-	10.0.0.10	host1
-	10.0.0.11	host2
-
-
-	/etc/ethers:
-	00:0B:1C:2D:3E:4F	host1
-	00:0B:1A:29:38:47	host2
-
-Then restart dnsmasq and make sure your systems boot using PXE.
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.loop
===================================================================
--- trunk/tools/yam/README.loop	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.loop	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,54 +0,0 @@
-----------  Forwarded Message  ----------
-
-Subject: Tip: Yam and Loop Devices
-Date: Thursday 05 August 2004 10:33
-From: Jeff Pitman &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">symbiont at berlios.de</A>&gt;
-To: <A HREF="http://lists.repoforge.org/mailman/listinfo/commits">tools-list at lists.egwn.net</A>
-
-Yam is neat.
-
-You might want to add a segment in README that talks about increasing
-the number of loop devices by editing /etc/modules.conf:
-
-options loop max_loop=64
-
-$ rmmod loop            # activate changes by removing driver
-
-This will prevent: &quot;mount: could not find any free loop device&quot;.
-
-take care,
---
--jeff
-
------------------------------------------
-If you have a 2.6 kernel, make sure you use /etc/modprobe.conf
-instead of /etc/modules.conf
-
-You can verify the new maximum number of loopdevices by doing:
-
-	dmesg | grep loop:
-
-You should see something similar to:
-
-	Aug  9 16:36:20 emyn kernel: loop: loaded (max 256 devices)
-
-Also make sure you have enough devices available. You can
-check how many you have by doing:
-
-	ls -d /dev/loop*
-
-An easy way to create more, is by doing:
-
-	for i in $(seq 0 255); do
-		mknod -m0660 /dev/loop$i b 7 $i
-		chown root.disk /dev/loop$i
-	done
-
-You can have up to 256 loop devices mounted.
-
-PS Unfortunately SLES9 has compiled the loop module inside the kernel,
-therefor you have to add 'max_loop=64' to the kernel parameters directly
-and requires a reboot.
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.proxy
===================================================================
--- trunk/tools/yam/README.proxy	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.proxy	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,26 +0,0 @@
-Using Yam behind a proxy server
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-If you're using Yam behind a proxy-server, you're out of luck for rsync
-support. Rsync has it's own protocol that is not allowed through a normal
-proxy.
-
-FTP(S), HTTP(S) and RHN(S) network support however will work fine, if you
-configure the following environment variables:
-
-	http_proxy=&quot;proxy:8080&quot;
-	ftp_proxy=&quot;proxy:8080&quot;
-
-Lftp will understand these options and use them. However you can always
-override the lftp-options yourself and provide your own configuration, as
-well as, make a custom configuration in /etc/lftp.conf or ~/.lftprc
-
-Beware however that when you set up yam so it works from a cron job, the
-environment as set in /etc/profile or /etc/profile.d/ will not work !!
-Therefor your cron-job should set the proxy itself beforehand.
-
-If you have specific requirements or can't make Yam work under certain
-circumstances, let me know. We can look at the use-case and see if it is
-worthwhile to make an exception (or bugfix) for your scenario.
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.quickstart
===================================================================
--- trunk/tools/yam/README.quickstart	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.quickstart	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,123 +0,0 @@
-Quickstart for the impatient
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-
-Requisites:
-
-  Depending on what repositories you want to generate, you can install
-  a combination of these packages:
-
-	tool		package		provides
-	&quot;&quot;&quot;&quot;		&quot;&quot;&quot;&quot;&quot;&quot;&quot;		&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-	genbasedir	apt		provides apt support
-	yum-arch	yum		provides yum support
-	createrepo	createrepo	provides repomd support (new yum, new apt)
-
-  Depending on what kind of sources you want to mirror, you can install
-  a combination of these packages:
-
-	tool		provides
-	&quot;&quot;&quot;&quot;		&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-	rsync		provides <A HREF="rsync://">rsync://</A> access
-	mirrordir	provides <A HREF="ftp://">ftp://</A> and <A HREF="mc://">mc://</A> access
-	lftp		provides <A HREF="ftp://,">ftp://,</A> <A HREF="http://,">http://,</A> <A HREF="sftp://">sftp://</A> <A HREF="fish://">fish://</A>
-	up2date		provides <A HREF="rhn://">rhn://</A> access
-
-  If you want to hardlink duplicate (downloaded) packages to save on
-  diskspace, you need to install:
-
-	hardlink++	(separate 'hardlink++' package)
-	hardlink	(part of the kernel-utils package)
-
-
-Do the following steps to get started (real) fast.
-
-  1. Start with collecting the existing ISO files you have of the
-     different distributions you want to put into a repository.
-     Put these into eg:
-
-		/var/yam/fc3-i386/
-	or eg.
-		/var/yam/iso/
-
-
-  2. Edit /etc/yam.conf and add for each distribution a new section
-     like the examples given in the default yam.conf, yam-complex.conf
-     or yam-example.conf
-
-
-  3. If you want to add your own custom packages to one or all of
-     the repositories, you have 2 options.
-
-     a. Add them to /var/yam/&lt;distro&gt;-&lt;arch&gt;/local/
-
-		eg. /var/yam/fc3-i386/local/
-
-	or add them to /var/yam/all/local/ to add them to all.
-
-     b. Specify the directory of your choice in a new repository,
-	eg. called 'myrepo'
-
-		[fc3]
-		arch = i386
-		.
-		.
-		myrepo = <A HREF="file:///var/ftp/pub/my-rpms/fc3/i386/">file:///var/ftp/pub/my-rpms/fc3/i386/</A>
-
-	eg. you can rewrite this as:
-
-		myrepo = <A HREF="file:///var/ftp/pub/my-rpms/$dist/$arch/">file:///var/ftp/pub/my-rpms/$dist/$arch/</A>
-
-        This way you can specify an unlimited number of custom
-        repositories.
-
-
-  4. Now run Yam with no actions to see if the ISO files are mounted
-     and all your configuration options have been used:
-
-	yam -vv
-
-     Then run Yam to update the OS packages and updates:
-
-	yam -uvv
-
-     Then run Yam to update the other repositories:
-
-	yam -xvv
-
-     Then generate the Yam repositories by doing:
-
-	yam -gvv
-
-     Now look in /var/www/yam (or surf to <A HREF="http://localhost/yam/">http://localhost/yam/</A>) to
-     see if everything is the way you wanted.
-
-
-  5. Next time you can do directly
-
-	yam -uxg
-     or
-	yam -uxgv
-
-     and all steps will be performed in one phase.
-
-
-  6. If you're removing distributions from the yam.conf file and
-     you want to remove the ISOs to gain diskspace. Remember that
-     Linux will not release diskspace for files that are still
-     accessed (like a loop-mounted ISO file). You're best bet is
-     to first unmount the ISOs:
-
-	yam -vv --umount
-
-     then remove or comment the distributions and mount again:
-
-	yam -vv
-
-  7. When you're adding new distributions, it's sufficient to just
-     run Yam again. It will automatically mount everything that is
-     not already mounted. You can always remount/reset by doing:
-
-	yam -vv --remount
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.rhn
===================================================================
--- trunk/tools/yam/README.rhn	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.rhn	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,283 +0,0 @@
-Using RHN support in Yam
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-For each distribution you want to add to Yam, you need to have a valid
-RHN systemid. You can create a systemid (provided you have the correct
-entitlements to do so) by using the gensystemid tool that comes with
-yam, eg.
-
-	gensystemid -r 4AS -a x86_64 /var/yam/rhel4as-x86_64
-
-The tool will create a new system called &lt;hostname&gt;-4AS-x86_64-yam,
-register this system on RHN and create a systemid file in 
-/var/yam/rhel4as-x86_64
-
-Having done that, you can enable multiple channels for this systemid
-on the RHN website. And then configure yam to use these channels, eg.
-
-	[rhel4as]
-	name = Red Hat Advanced Server $release U2 ($arch)
-	release = 4
-	arch = i386
-	iso = RHEL4-U2-i386-AS-disc?.iso
-	updates = <A HREF="rhns:///rhel-i386-as-4">rhns:///rhel-i386-as-4</A>
-	extras = <A HREF="rhns:///rhel-i386-as-4-extras">rhns:///rhel-i386-as-4-extras</A>
-	hwcert = <A HREF="rhns:///rhel-i386-as-4-hwcert">rhns:///rhel-i386-as-4-hwcert</A>
-	sdk = <A HREF="rhns:///rhel-i386-as-4-sdk">rhns:///rhel-i386-as-4-sdk</A>
-	rhaps = <A HREF="rhns:///rhel-4-as-i386-rhaps-2">rhns:///rhel-4-as-i386-rhaps-2</A>
-	rhds = <A HREF="rhns:///rhel-4-as-i386-rhds-2.1">rhns:///rhel-4-as-i386-rhds-2.1</A>
-
-After that, yam should be able to successfully log on and download
-all packages for the configured channels.
-
-
-Creating systemids for different dists/archs
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-Previously it was not possible to generate a new systemid for a
-dist/arch without installing a system, connecting it to the Internet
-and then register on RHN.
-
-A lot of companies simply do not allow servers to have internet access
-and I have personally been several times in the situation that I needed
-to download x86_64 or ppc packages for a system that I have entitlements
-for but is simply not allowed to connect to the Internet.
-
-The gensystemid tool that comes with Yam will help you with creating
-valid systemids for Yam, eg.
-
-	gensystemid -r 4AS -a x86_64 /var/yam/rhel4as-x86_64
-
-You can manage your systems on the RHN website afterwards.
-
-(For yet unknown reasons, you have to be root to run gensystemid)
-
-
-Downloading from unsubscribed channels
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-You can let Yam subscribe to the necessary channels, unfortunately this
-requires your RHN username and password. You can provide these in
-the main section, like:
-
-	[main]
-	rhnlogin = username:password
-
-Of course this requires you to protect your Yam config-file. You may want
-to do:
-
-	chmod og= /etc/yam.conf
-	chown root.root /etc/yam.conf
-
-Since you only need the username/password to subscribe to new channels
-(only the very first time you access them) you may wish to remove the
-login information from yam.conf after that.
-
-Of course, you can always log on manually to the RHN website to subscribe
-your system to the channels you require.
-
-
-List of RHN channels
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-For a complete and up-to-date list of available channels, check the RHN
-website. This list has been compiled with only EL2.1, EL3, EL4 and
-i386, x86_64 archs.
-
-	RHEL4
-		rhel-$arch-XX-4
-		rhel-$arch-XX-4-beta
-		rhel-$arch-XX-4-extras
-		rhel-$arch-XX-4-extras-beta
-		rhel-$arch-as-4-hwcert			(only for as)
-		rhel-$arch-XX-4-sdk
-		rhel-4-XX-$arch-rhaps-2
-		rhel-4-XX-$arch-rhaps-2-beta
-		rhel-4-XX-$arch-rhds-2.1
-		rhel-4-XX-$arch-rhds-2.1-beta
-
-
-	RHEL3
-		rhel-$arch-XX-3
-		rhel-$arch-XX-3-beta
-		rhel-$arch-XX-3-devsuite
-		rhel-$arch-XX-3-devsuite-beta
-		rhel-$arch-XX-3-extras
-		rhel-$arch-XX-3-extras-beta
-		rhel-$arch-as-3-hwcert			(only for as)
-		rhel-3-XX-i386-rhaps-1			(only for i386)
-		rhel-3-XX-$arch-rhaps-beta
-		rhel-3-XX-i386-rhds-2			(only for i386)
-
-	RHEL2.1
-		redhat-advanced-server-i386		(only for as)
-		redhat-ent-linux-i386-es-2.1		(only for es)
-		rhel-i386-XX-2.1-beta
-
-Where XX = as or es
-
-Please send updates on these.
-
-
-Ignore packages you already have elsewhere
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-This is possible, although hard to implement currently. I could check
-whether the file exists on one of the ISOs (or in the RPMS/ directory),
-but I prefer to implement this after a redesign.
-
-You can simply get the same effect with the following script, clean.sh:
-
-=====
-#!/bin/bash
-
-dists=$*
-srcdir=/var/yam
-wwwdir=/var/www/yam
-
-if [ -z &quot;$dists&quot; ]; then
-        cd $srcdir
-        dists=rhel[2-4][aew]s-*
-        cd -
-fi
-
-for dist in $dists; do
-        echo &quot;Cleaning up $dist&quot;
-
-	### Remove dangling links
-	for link in $(find &quot;$srcdir/$dist/updates&quot; -type l); do
-		if [ ! -r &quot;$(readlink $link)&quot; ]; then
-			rm -f $link
-		fi
-	done
-
-	### Relink existing files
-        for rpm in $wwwdir/$dist/disc?/RedHat/RPMS/*.rpm; do
-                file=&quot;$(basename $rpm)&quot;
-                dstfile=&quot;$srcdir/$dist/updates/$file&quot;
-                ln -sf &quot;$rpm&quot; &quot;$dstfile&quot;
-        done
-done
-=====
-
-Run this script when you download new RHEL ISO files and make these available
-in Yam, but before downloading any updates from RHN.
-
-	yam --umount
-	### Download new ISO files
-	### Change /etc/yam.conf to change the iso=
-	yam -v
-	./clean.sh
-	yam -uxvg
-
-This will free up some space by symlinking duplicate RPM packages from the ISO
-files on top of the RPM packages on disk. As a side-effect it will also prevent
-the new updates from being downloaded.  You can also remove _all_ packages from
-the updates repository prior to doing this.
-
-
-<A HREF="rhn://">rhn://</A> and <A HREF="rhns://">rhns://</A> URL schemes
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-The default scheme for RHN is <A HREF="rhns://">rhns://</A> (HTTPS), but it was reported that
-in some cases (related to proxies or firewalls) the HTTPS connections
-fail, so there is a need to allow for HTTP connections. You can specify
-this by using the <A HREF="rhn://">rhn://</A> scheme instead of <A HREF="rhns://">rhns://</A>
-
-In this case, the authentication is not done using SSL either !
-
-
-Using Red Hat satellite servers
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-You can override the hardcoded RHN server by specifying it in the URL.
-If it is not specified, Yam will assume a default value of
-xmlrpc.rhn.redhat.com
-
-So the following two lines are identical:
-
-	updates = <A HREF="rhns:///rhel-i386-as-4">rhns:///rhel-i386-as-4</A>
-	updates = <A HREF="rhns://xmlrpc.rhn.redhat.com/rhel-i386-as-4">rhns://xmlrpc.rhn.redhat.com/rhel-i386-as-4</A>
-
-And you can use a satellite server by doing:
-
-	updates = <A HREF="rhns://your.own.satellite/rhel-i386-as-4">rhns://your.own.satellite/rhel-i386-as-4</A>
-
-(Please let me know if this works or not !)
-
-
-Using a single systemid
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-You can experiment with using a single systemid for multiple dists
-using the rhnrelease option:
- 
-	[rhel3as]
-	rhnrelease = 3AS
-
-This way you override the OS release that is in the systemid file.
-
-This works across the same entitlement. Eg. when you have an Advanced
-Server entitlement, you can download from 2.1AS, 3AS and 4AS channels.
-But not from the ES or WS channels and not from different architectures.
-
-
-Known problems
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-(Uninvestigated fully yet)
-
-I have seen the following problems:
-
-	'yam: Error subscribing %s to channel %s, skipping.'
-or
-	  File &quot;/usr/share/rhn/up2date_client/repoDirector.py&quot;, line 36, in getPackage
-	    return self.handlers[channel['type']].getPackage(pkg, msgCallback, progressCallback)
-	TypeError: unsubscriptable object
-or
-	yam: Error listing packages from channel rhel-i386-as-3-devsuite. Skipping.
-	Error communicating with server. The message was:
-	Authorization Required
-
-And when using a single systemid file, also:
-
-	'yam: Failed to subscribe RHN id %s to channel %s, skipping.'
-or
-	'Server already subscribed to ...'
-
-
-Somehow there is loginInfo polution (subscribed channels from a previous
-distribution login polutes a subsequent login, ie. a previous EL2 run
-polutes the next EL3 channel subscription list in the same execute phase).
-
-A workaround in this case is instead of doing:
-
-	yam -uxqg
-or	yam -uxqg rhel2as rhel3as rhel4as-i386 rhel4as-x86_64
-
-to do:
-
-	for dist in rhel2as rhel3as rhel4as-i386 rhel4as-x86_64; do
-		yam -uxqg $dist
-	done
-
-I still need to investigate and file a bugreport with Red Hat (seems to be
-a problem with the implementation of the python classes and the use of
-global variables in up2date). Although I clean the global variables used by
-the up2date classes, somehow some data is persistent.
-
-
-RHN documentation and references
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-A useful list of RHN references:
-
-	Red Hat: RHN XMLRPC API
-	<A HREF="https://rhn.redhat.com/rpc/api/errata/">https://rhn.redhat.com/rpc/api/errata/</A>
-
-	kickstart-list: RHN XMLRPC API
-	<A HREF="https://www.redhat.com/archives/kickstart-list/2005-December/msg00021.html">https://www.redhat.com/archives/kickstart-list/2005-December/msg00021.html</A>
-
-	RHbz 162210: [RFE] New up2date command-line options
-	<A HREF="https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=162210">https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=162210</A>
-
-	RHbz 179721: [RFE] No documentation for (RHN) up2date XMLRPC API methods
-	<A HREF="https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=179721">https://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=179721</A>
-
-And how to configure Yam for RHN access:
-
-	Installing YAM 0.8.0 on Red Hat Enterprise Linux 4
-	<A HREF="http://wiki.garylaw.net/doku.php?id=technical:unix:linux:yam">http://wiki.garylaw.net/doku.php?id=technical:unix:linux:yam</A>
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.selinux
===================================================================
--- trunk/tools/yam/README.selinux	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.selinux	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,32 +0,0 @@
-Configuring Yam for selinux
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-The most simple way to make Yam work on selinux is to map the Yam
-documentroot to the httpd context.
-
-Create the file /etc/selinux/targeted/src/policy/file_contexts/misc/local.fc,
-with the following content:
-
-	/var/yam(/.*)? system_u:object_r:httpd_sys_content_t
-
-Afterwards recompile the policy by doing:
-
-	make -C /etc/selinux/targeted/src load
-
-And apply the context by doing:
-
-	restorecon -R /var/yam
-
-I'd like this to be done by default, either from the RPM package or by the
-system itself. Yam could be told to do this as well but I'm not sure if
-this is the proper way to handle selinux.
-
-
-Slightly more complicated contribution
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-David Hampton contributed a slightly more complicated selinux configuration
-that defines its own Yam objects and context, you can find those files in
-the patches/ directory. SElinux improvements are welcome (as well as
-information on how to standardize 
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.suse
===================================================================
--- trunk/tools/yam/README.suse	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.suse	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,78 +0,0 @@
-How SuSE works and why I will not support it
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-The main problem with SuSE is that they changed the way the filesystem
-had to be laid out too many times. SLES8 had its own way of doing things,
-the different other SuSE releases did it slightly different and now
-SLES9 has its own way of working.
-
-Let me explain how it should look like with SLES9 and SP1:
-
-        SUSE-CORE-Version-9/
-                CD1/
-        SUSE-SLES-9-Service-Pack-Version-1/
-                CD1/
-                CD2/
-                CD3/
-        SUSE-SLES-Version-9/
-                CD1/
-                CD2/
-                CD3/
-                CD4/
-                CD5/
-        boot -&gt; SUSE-SLES-Version-9/CD1/boot
-        content -&gt; SUSE-SLES-Version-9/CD1/content
-        control.xml -&gt; SUSE-SLES-Version-9/CD1/control.xml
-        driverupdate -&gt; SUSE-SLES-9-Service-Pack-Version-1/CD1/driverupdate
-        linux -&gt; SUSE-SLES-9-Service-Pack-Version-1/CD1/linux
-        media.1 -&gt; SUSE-SLES-Version-9/CD1/media.1
-        yast/
-                instorder
-                order
-
-The main problem is that the ISO itself does not provide the location
-where it is expected to be mounted. So this has to be hard-coded and
-one has to map these hardcoded paths with something that uniquely
-defines the ISO file.
-
-Then you also need to provide symlinks to certain files on different CDs.
-And you have to create the yast/instorder and yast/order files with the
-following content:
-
-        yast/instorder:
-                /SUSE-SLES-9-Service-Pack-Version-1/CD1
-                /SUSE-SLES-Version-9/CD1
-                /SUSE-CORE-Version-9/CD1
-
-        yast/order:
-                /SUSE-SLES-9-Service-Pack-Version-1/CD1 /SUSE-SLES-9-Service-Pack-Version-1/CD1
-                /SUSE-SLES-Version-9/CD1        /SUSE-SLES-Version-9/CD1
-                /SUSE-CORE-Version-9/CD1        /SUSE-CORE-Version-9/CD1
-
-The yast/instorder and yast/order files are leftovers from the
-UnitedLinux era.
-
-Since this was unknown when SP1 was not released, it is uncertain what
-is required when SP2 will be released. Additionally, with the 6 base
-CDs and the 3 SP1 CDs, you already need 9 CDs. When SP2 comes out, this
-might be 12 CDs, so we can expect SuSE to revise and redo the filesystem
-layout and creation of CDs at least once more. We can only hope they get
-it right the next time.
-
-Yast2 has its own logic to create these directories and if you have to
-install SLES8 or SLES9, it's better to make use of the Yast2 functionality.
-(Yes, this means you're once again locked into something SuSE specific)
-
-Yam will not support SLES until they clean up their act or someone sends me
-an acceptable patch for Yam. The current SLES support stays unfinished like
-it is.
-
-Based on the above information, you are of course free to perform the
-necessary tasks manually.
-
-More information about the SuSE Installation Server and Autoyast can be found
-at:
-
-	<A HREF="http://yast.suse.com/autoinstall/docs.html">http://yast.suse.com/autoinstall/docs.html</A>
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.usage
===================================================================
--- trunk/tools/yam/README.usage	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.usage	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,198 +0,0 @@
-Usage information for yam and a description of the options and config file
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-yam is used to create a repository on your server from multiple sources.
-
-
-Finding help on the command line
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-yam -h
-usage: yam [-g] [-q] [-u] [-v] [-x] [-c config] dist1 dist2-arch
-Set up a distribution server from ISO files
-
-Yam options:
-  -c, --config=file     specify alternative configfile
-  -g, --generate        generate Yam repositories
-  -q, --quiet           minimal output
-  -u, --update          fetch OS updates
-  -v, --verbose         increase verbosity (only Yam info)
-  -vv, -vvv             increase verbosity more
-  -x, --extras          fetch extra repos
-      --unmount         unmount distributions
-
-
-When you first run yam, do:
-
-	yam -v
-
-This will show you what it is doing. You may add extra -v at any time
-to see more of Yam's internals.
-
-	yam -vvv
-
-Now, you may want to change the default yam.conf to your needs and
-add or remove distributions and/or repositories. If you have ISO
-images of any of the distributions you want to mirror, mention them
-too like in the examples, and copy them over to /var/yam/iso
-(You can also decide to put them per distribution/arch)
-
-The default directory structure that Yam uses is explained in
-README.dirs
-
-Yam by default will mount as many ISO files as possible. If you
-have problems with the maximum number of loop devices, please read
-README.loop
-
-Yam can also download the distribution RPM packages if you want to,
-if you did not specify any ISO images it will download any os or core
-repositories that you have specified. To do that, do
-
-	yam -u
-or
-	yam -uv
-
-If this worked out fine, you can have Yam update all the non-os
-(3rd party) repositories by doing:
-
-	yam -x
-or
-	yam -xv
-
-Yam considers all repositories not named 'os', 'core' or 'updates' to
-by non-os repositories.
-
-To finally generate a complete working repository based on the
-repositories, you need to issues:
-
-	yam -g
-or
-	yam -gv
-
-This will look for all the necessary packages in /var/yam (srcdir) and
-symlink them to /var/www/yam (wwwdir). /var/www/yam can also be removed
-at any time and should not contain any files you have put there yourself.
-
-To start off from scratch, first unmount the ISO images by doing:
-
-	yam --unmount
-
-and then remove /var/www/yam completely. This should never be needed,
-but can be done after you played around or when removing components.
-
-If you want to update only a part of your repository, you can select
-the distributions by doing:
-
-	yam -uxgv fc2
-or
-	yam -uxgv fc2-i386
-or even
-	yam -uxgv fc2-i386 fc1-x86_64
-
-If you want to have multiple setups of Yam running on a single system
-(say one of your users wants its own setup), you can specify an
-alternative config file, by doing:
-
-	yam -c /home/dag/yam.conf
-
-In that case the user may want to use another srcdir and wwwdir.
-
-Finally, you can see if everything worked, by looking at /var/www/yam
-(wwwdir) or by surfing to <A HREF="http://localhost/yam/.">http://localhost/yam/.</A> For more information
-about web-access and configuration, see README.web
-
-
-The yam.conf file
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-yam.conf file holds all the information yam uses to find the repos such
-as distribution information and URLs to the repos.  yam.conf is essentially
-divided into three areas.  main, repos, and dist.
-
-The main area is your main configuration for yam.
-Example from default yam.conf:
-
-	[main]
-	srcdir=/var/yam
-	wwwdir=/var/www/yam
-	metadata=apt repomd
-	arch=i386
-
-The srcdir is where yam will download and store the files for your repo
-
-The wwwdir is the location as to where your users for your repo will actually
-get the files from. These are symbolic links to the srcdir.
-
-The metadata is a list of metadata repositories you want to create. This
-defined the default used if nothing is specified per distribution.
-
-arch is a list of the default architectures, i.e.  i386, x86_64.
-This will set it globally but can be configured per distro.
-
-The distro area of yam.conf is the heart of yam.conf it is where you can
-specify the exact distribution and URLs to download from. Let me demonstrate
-with a little example:
-
-	[fc3]
-	name=Fedora Core $release ($arch)
-	release=3
-	arch=i386 x86_64
-	iso=FC$release-$arch-disc?.iso
-	core=<A HREF="rsync://ayo.freshrpms.net/pub/freshrpms/pub/freshrpms/ayo/fedora/linux/$release/$arch/RPMS.$repo/">rsync://ayo.freshrpms.net/pub/freshrpms/pub/freshrpms/ayo/fedora/linux/$release/$arch/RPMS.$repo/</A>
-	updates=<A HREF="rsync://ayo.freshrpms.net/pub/freshrpms/pub/freshrpms/ayo/fedora/linux/$release/$arch/RPMS.$repo/">rsync://ayo.freshrpms.net/pub/freshrpms/pub/freshrpms/ayo/fedora/linux/$release/$arch/RPMS.$repo/</A>
-	dag=<A HREF="rsync://apt.sw.be/pub/freshrpms/pub/dag/fedora/$release/en/$arch/RPMS.$repo/">rsync://apt.sw.be/pub/freshrpms/pub/dag/fedora/$release/en/$arch/RPMS.$repo/</A>
-	dries=<A HREF="rsync://apt.sw.be/pub/freshrpms/pub/dag/dries/fedora/linux/$release/$arch/RPMS.$repo/">rsync://apt.sw.be/pub/freshrpms/pub/dag/dries/fedora/linux/$release/$arch/RPMS.$repo/</A>
-	freshrpms=<A HREF="rsync://ayo.freshrpms.net/pub/freshrpms/pub/freshrpms/ayo/fedora/linux/$release/$arch/RPMS.$repo/">rsync://ayo.freshrpms.net/pub/freshrpms/pub/freshrpms/ayo/fedora/linux/$release/$arch/RPMS.$repo/</A>
-	newrpms=<A HREF="rsync://newrpms.sunsite.dk/projects/newrpms/www/htdocs/apt/redhat/en/$arch/fc$release/RPMS.$repo/">rsync://newrpms.sunsite.dk/projects/newrpms/www/htdocs/apt/redhat/en/$arch/fc$release/RPMS.$repo/</A>
-
-The section name [fc3] is your dist tag and you can change it to fit your needs.  
-Other tags you can include per section are:
-
-	name= is a description for this distribution ($name)
-	release= is the release version of your distribution ($release)
-	metadata= is a list of metadata you want for this repo
-	arch= is set to one or more architectures available for this distribution ($arch)
-	iso= is set to one or more globs matching the distributions ISO images
-
-Any other entries are considered to be repositories. Yam will assume that
-repositories called 'os', 'core' and 'updates' are base system repositories
-and these will be updated with Yam option -u . os and core repositories will
-be ignored when ISO images are available.
-
-Other entries are considered extra (3rd party) repositories. Yam will create
-a separate directory for each of these in /var/yam/$dist-$arch/$repo
-The LHS part can also be used in the RHS as variable $repo
-
-Other special variables include:
-
-	$srcdir	is set to the srcdir variable from yam.conf
-	$dist 	is set to the distribution section name (eg. fc2)
-	$arch	is set to the architecture within this section context
-	$nick 	is set to $dist-$arch within this section context
-	$repo 	is set to the current repo-name within this repo context
-
-Yam can use several types of protocols or URL identifiers:
-
-	&lt;empty&gt;		- use the directory in $srcdir/$dist-$arch/$repo
-	<A HREF="file://">file://</A>		- handled by yam, symlink to other directory containing RPMS
-	<A HREF="fish://">fish://</A>		- handled by lftp
-	<A HREF="ftp://">ftp://</A>		- handled by mirrordir or lftp
-	<A HREF="http://">http://</A>		- handled by lftp
-	<A HREF="https://">https://</A>	- handled by lftp
-	<A HREF="mc://">mc://</A>		- handled by mirrordir
-	<A HREF="rhn://">rhn://</A>		- handled by up2date python classes
-	<A HREF="rhns://">rhns://</A>		- handled by up2date python classes
-	<A HREF="rsync://">rsync://</A>	- handled by rsync
-	<A HREF="sftp://">sftp://</A>		- handled by lftp
-	<A HREF="yam://">yam://</A>		- handled by yam, equivalent to <A HREF="file://$srcdir/">file://$srcdir/</A>
-
-
-Metadata for repositories
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-Depending on what repositories you want to generate, you can install
-a combination of these packages:
-
-	Apt             - you need 'genbasedir', part of 'apt' package
-	old-style Yum   - you need 'yum-arch', part of 'yum' package
-	new-style Yum   - separate 'createrepo' package
-
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.verbose
===================================================================
--- trunk/tools/yam/README.verbose	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.verbose	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,36 +0,0 @@
-How to make Yam more (or less) verbose
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-Yam has 2 options to influence what it prints.
-
-  -q, --quiet           minimal output
-  -v, --verbose         increase verbosity
-  -vv, -vvv, -vvvv..    increase verbosity more
-
-To make Yam only print essential messages (but be quiet when everything
-is ok), use -q/--quiet
-
-To make Yam report more about what it is doing, you can provide -v multiple
-times. Here's what it means:
-
-	options		level	description
-	&quot;&quot;&quot;&quot;&quot;&quot;&quot;		&quot;&quot;&quot;&quot;&quot;	&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-	-q		0	be quiet if no problems
-	(no options)	1	print yam progress (normal)
-	-v		2	print yam progress (detailed)
-	-vv		3	print yam progress (detailed) + print helper-program output (normal)
-	-vvv		4	print yam progress (detailed) + print helper-program output (detailed)
-	-vvvv		5	print yam progress (debug)    + print helper-program output (detailed)
-	-vvvvv		6	print yam progress (debug)    + print helper-program output (debug)
-
-Not all helper-programs have options to increase verbosity or enable debugging.
-
-Currently it is not possible to have Yam (or its tools) print out what files
-are new and what files have been deleted. It's hard to do this tool-independent,
-though there are other implementations that are possible (inotify,
-directory-listing).
-
-Rsync has specific options for allowing this, check the rsync manual and use
-the rsync-options directive to add options.
-
----
-Please send me improvements to this document.

Deleted: trunk/tools/yam/README.web
===================================================================
--- trunk/tools/yam/README.web	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/README.web	2006-05-28 11:00:35 UTC (rev 4422)
@@ -1,41 +0,0 @@
-How to configure you Web server for Yam
-&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;
-If you have apache, this package should already have done a
-good job by installing the default Yam configuration file as:
-
-	/etc/httpd/conf.d/yam.conf
-
-Now, you probably want to change the default to prevent people
-from accessing your Yam website, or because you have another
-domain-name or simply because you don't want the generic
-/yam/-Alias.
-
-The config file provided is just a default that helps to set
-up your initial environment and it is there to be adapted.
-It uses by default the hostname 'yam' and if you define 'yam'
-as a name on your local network, it may work without change.
-
-For browsing and remote network installations via HTTP the
-webserver can be accessed at:
-
-	<A HREF="http://localhost/yam/">http://localhost/yam/</A>
-or
-	<A HREF="http://yam/">http://yam/</A>
-
-If you want to enable HTTP authentication to prevent people
-accessing your Yam repository, look at
-
-	/etc/httpd/conf.d/yam.conf
-
-And adapt to your needs. More information about HTTP
-authentication and Apache can be found at:
-
-	<A HREF="http://httpd.apache.org/docs-2.0/howto/auth.html">http://httpd.apache.org/docs-2.0/howto/auth.html</A>
-
-Of course, to make it work you need to start Apache
-by doing eg:
-
-	service httpd start
-
----
-Please send me improvements to this document.

Modified: trunk/tools/yam/TODO
===================================================================
--- trunk/tools/yam/TODO	2006-05-28 10:56:47 UTC (rev 4421)
+++ trunk/tools/yam/TODO	2006-05-28 11:00:35 UTC (rev 4422)
@@ -20,6 +20,8 @@
 + Use mirrorlist option from .repo files as a source (for http)
 + Autocreate yum .repo files and apt .list files to be used by local clients
 + Add support for other remote synchronising tools (sitecopy, wget)
++ Add curl support and (optionally?) make it the default 
++ NFS support (enable by default, using autofs)
 
 ### RHN support
 + Re-authenticate after X-RHN-Auth-Expire-Offset (3600sec) to prevent SSL handshake failures after timeout
@@ -70,6 +72,7 @@
 + Add a yam and yam.conf manpage
 + Comment the code more (pydoc strings)
 + ZeroConf support (or documentation)
++ Convert existing documentation to asciidoc
 
 ### Internal python
 + Improve the copy/symlink/rename functions, using exceptions
@@ -113,3 +116,30 @@
 
 ### Yamusb tool
 + Create a bootable USB stick and allow for 3rd party boot-images
+
+### Error
+Fetch packages from <A HREF="rhns:///rhel-i386-as-3-hwcert">rhns:///rhel-i386-as-3-hwcert</A> to /var/yam/rhel3as-i386/hwcert
+Traceback (most recent call last):
+  File &quot;/usr/bin/yam&quot;, line 1195, in ?
+    main()
+  File &quot;/usr/bin/yam&quot;, line 1076, in main
+    mirror(dist.repos[repo], srcdir, dist)
+  File &quot;/usr/bin/yam&quot;, line 703, in mirror
+    mirrorrhn(url, path, dist)
+  File &quot;/usr/bin/yam&quot;, line 952, in mirrorrhn
+    repos = repoDirector.initRepoDirector()
+  File &quot;/usr/share/rhn/up2date_client/repoDirector.py&quot;, line 62, in initRepoDirector
+    rd = RepoDirector()
+  File &quot;/usr/share/rhn/up2date_client/repoDirector.py&quot;, line 18, in __init__
+    self.channels = rhnChannel.getChannels()
+  File &quot;/usr/share/rhn/up2date_client/rhnChannel.py&quot;, line 166, in getChannels
+    li = up2dateAuth.getLoginInfo()
+  File &quot;/usr/share/rhn/up2date_client/up2dateAuth.py&quot;, line 161, in getLoginInfo
+    login()
+  File &quot;/usr/share/rhn/up2date_client/up2dateAuth.py&quot;, line 120, in login
+    caps.validate()
+  File &quot;/usr/share/rhn/up2date_client/capabilities.py&quot;, line 106, in validate
+    self.workaroundMissingCaps()
+  File &quot;/usr/share/rhn/up2date_client/capabilities.py&quot;, line 175, in workaroundMissingCaps
+    raise up2dateErrors.ServerCapabilityError(errString, errorList)
+up2date_client.up2dateErrors.ServerCapabilityError: Needs registration.extendedPackageProfile but server does not support that capabilitie

Copied: trunk/tools/yam/docs/directories.txt (from rev 4391, trunk/tools/yam/README.dirs)

Copied: trunk/tools/yam/docs/dnsmasq-configuration.txt (from rev 4391, trunk/tools/yam/README.dnsmasq)

Copied: trunk/tools/yam/docs/loop-devices.txt (from rev 4391, trunk/tools/yam/README.loop)

Copied: trunk/tools/yam/docs/proxy-configuration.txt (from rev 4391, trunk/tools/yam/README.proxy)

Copied: trunk/tools/yam/docs/quickstart.txt (from rev 4391, trunk/tools/yam/README.quickstart)

Copied: trunk/tools/yam/docs/selinux.txt (from rev 4391, trunk/tools/yam/README.selinux)

Copied: trunk/tools/yam/docs/suse-support.txt (from rev 4391, trunk/tools/yam/README.suse)

Copied: trunk/tools/yam/docs/usage.txt (from rev 4391, trunk/tools/yam/README.usage)

Copied: trunk/tools/yam/docs/verbosity.txt (from rev 4391, trunk/tools/yam/README.verbose)

Copied: trunk/tools/yam/docs/webserver-configuration.txt (from rev 4391, trunk/tools/yam/README.web)


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003221.html">[svn] r4421 - trunk/tools/dstat/plugins
</A></li>
	<LI>Next message: <A HREF="003223.html">[svn] r4423 - in trunk/rpms: aalib revelation twin xpenguins-applet
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3222">[ date ]</a>
              <a href="thread.html#3222">[ thread ]</a>
              <a href="subject.html#3222">[ subject ]</a>
              <a href="author.html#3222">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
