<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<HTML>
 <HEAD>
   <TITLE> [svn] r5715 - in trunk/rpms: . synce
   </TITLE>
   <LINK REL="Index" HREF="index.html" >
   <LINK REL="made" HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5715%20-%20in%20trunk/rpms%3A%20.%20synce&In-Reply-To=%3C20070812132652.444CA944B57%40pooch.vmhosting.org%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004513.html">
   <LINK REL="Next"  HREF="004515.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[svn] r5715 - in trunk/rpms: . synce</H1>
    <B>packagers at lists.rpmforge.net</B> 
    <A HREF="mailto:commits%40lists.repoforge.org?Subject=Re:%20Re%3A%20%5Bsvn%5D%20r5715%20-%20in%20trunk/rpms%3A%20.%20synce&In-Reply-To=%3C20070812132652.444CA944B57%40pooch.vmhosting.org%3E"
       TITLE="[svn] r5715 - in trunk/rpms: . synce">packagers at lists.rpmforge.net
       </A><BR>
    <I>Sun Aug 12 15:26:52 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="004513.html">[svn] r5714 - in trunk/rpms: . claws-mail-plugins
</A></li>
        <LI>Next message: <A HREF="004515.html">[svn] r5716 - trunk/rpms/claws-mail-plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4514">[ date ]</a>
              <a href="thread.html#4514">[ thread ]</a>
              <a href="subject.html#4514">[ subject ]</a>
              <a href="author.html#4514">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Author: hadams
Date: 2007-08-12 15:26:51 +0200 (Sun, 12 Aug 2007)
New Revision: 5715

Added:
   trunk/rpms/synce/
   trunk/rpms/synce/synce-README.Fedora
   trunk/rpms/synce/synce-rra-Makefile.patch
   trunk/rpms/synce/synce-rra-devel.patch
   trunk/rpms/synce/synce.dev
   trunk/rpms/synce/synce.spec
Log:
Added synce for claws-mail-plugins

Added: trunk/rpms/synce/synce-README.Fedora
===================================================================
--- trunk/rpms/synce/synce-README.Fedora	                        (rev 0)
+++ trunk/rpms/synce/synce-README.Fedora	2007-08-12 13:26:51 UTC (rev 5715)
@@ -0,0 +1,5 @@
+To configure the connection of your handheld through SynCE,
+plug it in, run &quot;dccm&quot; as your desktop user, and the run
+&quot;synce-serial-config ipaq&quot; as root.
+Unplug the device, and plug it back. It should connect
+automatically from now on.

Added: trunk/rpms/synce/synce-rra-Makefile.patch
===================================================================
--- trunk/rpms/synce/synce-rra-Makefile.patch	                        (rev 0)
+++ trunk/rpms/synce/synce-rra-Makefile.patch	2007-08-12 13:26:51 UTC (rev 5715)
@@ -0,0 +1,40 @@
+--- synce-rra-0.9.1/lib/Makefile.in.orig	2005-08-20 15:08:17.000000000 +0200
++++ synce-rra-0.9.1/lib/Makefile.in	2005-08-20 15:08:44.000000000 +0200
+@@ -132,7 +132,7 @@
+ sharedstatedir = @sharedstatedir@
+ sysconfdir = @sysconfdir@
+ target_alias = @target_alias@
+-AM_CFLAGS = -g -Wall -Wsign-compare -Wno-long-long -Werror -ansi @CFLAGS@ -I..
++AM_CFLAGS = -ansi @CFLAGS@ -I..
+ 
+ include_HEADERS = \
+ 	appointment.h \
+--- synce-rra-0.9.1/lib/Makefile.am.orig	2005-08-20 15:08:51.000000000 +0200
++++ synce-rra-0.9.1/lib/Makefile.am	2005-08-20 15:09:04.000000000 +0200
+@@ -1,5 +1,5 @@
+ ## useful flags
+-AM_CFLAGS = -g -Wall -Wsign-compare -Wno-long-long -Werror -ansi @CFLAGS@ -I..
++AM_CFLAGS = -ansi @CFLAGS@ -I..
+ ## @APPLE_CFLAGS@
+ 
+ includedir = @includedir@/rra
+--- synce-rra-0.9.1/src/Makefile.in.orig	2005-08-20 15:14:21.000000000 +0200
++++ synce-rra-0.9.1/src/Makefile.in	2005-08-20 15:14:38.000000000 +0200
+@@ -131,7 +131,7 @@
+ sharedstatedir = @sharedstatedir@
+ sysconfdir = @sysconfdir@
+ target_alias = @target_alias@
+-AM_CFLAGS = -g -Wall -Wsign-compare -Wno-long-long -Werror -ansi @CFLAGS@ -I../lib
++AM_CFLAGS = -ansi @CFLAGS@ -I../lib
+ LDADD = -L../lib ../lib/librra.la
+ 
+ bin_PROGRAMS = synce-matchmaker
+--- synce-rra-0.9.1/src/Makefile.am.orig	2005-08-20 15:14:12.000000000 +0200
++++ synce-rra-0.9.1/src/Makefile.am	2005-08-20 15:14:55.000000000 +0200
+@@ -1,5 +1,5 @@
+ ## useful flags
+-AM_CFLAGS = -g -Wall -Wsign-compare -Wno-long-long -Werror -ansi @CFLAGS@ -I../lib
++AM_CFLAGS = -ansi @CFLAGS@ -I../lib
+ LDADD = -L../lib ../lib/librra.la
+ 
+ bin_PROGRAMS = synce-matchmaker

Added: trunk/rpms/synce/synce-rra-devel.patch
===================================================================
--- trunk/rpms/synce/synce-rra-devel.patch	                        (rev 0)
+++ trunk/rpms/synce/synce-rra-devel.patch	2007-08-12 13:26:51 UTC (rev 5715)
@@ -0,0 +1,26 @@
+--- synce-rra-0.9.1/configure.ac.in.orig	2005-09-27 23:40:16.000000000 +0200
++++ synce-rra-0.9.1/configure.ac.in	2005-09-27 23:40:34.000000000 +0200
+@@ -48,13 +48,6 @@
+     )
+ 
+ 
+-	AC_CHECK_LIB(mimedir,mdir_parse,,[
+-		AC_MSG_ERROR([Can't find libmimedir (<A HREF="http://sourceforge.net/projects/libmimedir/">http://sourceforge.net/projects/libmimedir/</A>)])
+-		])
+-	AC_CHECK_HEADERS(libmimedir.h,,[
+-		AC_MSG_ERROR([Can't find libmimedir.h (<A HREF="http://sourceforge.net/projects/libmimedir/">http://sourceforge.net/projects/libmimedir/</A>)])
+-		])
+-
+   enable_recurrence=1
+   AC_ARG_ENABLE(recurrence,
+     AC_HELP_STRING(
+--- synce-rra-0.9.1/src/Makefile.am.orig	2005-09-27 23:40:45.000000000 +0200
++++ synce-rra-0.9.1/src/Makefile.am	2005-09-27 23:41:46.000000000 +0200
+@@ -1,6 +1,6 @@
+ ## useful flags
+ AM_CFLAGS = -ansi @CFLAGS@ -I../lib
+-LDADD = -L../lib ../lib/librra.la
++LDADD = -L../lib ../lib/librra.la -L../../libmimedir-0.4 -lmimedir
+ 
+ bin_PROGRAMS = synce-matchmaker
+ 

Added: trunk/rpms/synce/synce.dev
===================================================================
--- trunk/rpms/synce/synce.dev	                        (rev 0)
+++ trunk/rpms/synce/synce.dev	2007-08-12 13:26:51 UTC (rev 5715)
@@ -0,0 +1,9 @@
+#!/bin/sh
+
+if [ &quot;$ACTION&quot; = &quot;add&quot; ] ; then
+    /usr/bin/logger -p kern.info -t synce &quot;iPAQ plugged, starting connection...&quot;
+    # start the connection, and remove empty lines from output (to keep the log clean)
+    synce-serial-start | grep -v &quot;^$&quot; | /usr/bin/logger -p kern.info -t synce
+elif [ &quot;$ACTION&quot; = &quot;remove&quot; ] ; then
+    /usr/bin/logger -p kern.info -t synce &quot;iPAQ removed&quot;
+fi

Added: trunk/rpms/synce/synce.spec
===================================================================
--- trunk/rpms/synce/synce.spec	                        (rev 0)
+++ trunk/rpms/synce/synce.spec	2007-08-12 13:26:51 UTC (rev 5715)
@@ -0,0 +1,255 @@
+# $Id:$
+# Authority: hadams
+
+Name:           synce
+Version:        0.9.1
+Release:        10
+Summary:        Serial connection support for Pocket PC devices
+
+Group:          Applications/Communications
+License:        MIT
+URL:            <A HREF="http://synce.sourceforge.net/">http://synce.sourceforge.net/</A>
+Source0:        <A HREF="http://dl.sf.net/synce/synce-libsynce-%{version">http://dl.sf.net/synce/synce-libsynce-%{version</A>}.tar.gz
+Source1:        <A HREF="http://dl.sf.net/synce/synce-dccm-%{version">http://dl.sf.net/synce/synce-dccm-%{version</A>}.tar.gz
+Source2:        <A HREF="http://dl.sf.net/synce/synce-serial-%{version">http://dl.sf.net/synce/synce-serial-%{version</A>}.tar.gz
+Source3:        <A HREF="http://dl.sf.net/synce/synce-rra-%{version">http://dl.sf.net/synce/synce-rra-%{version</A>}.tar.gz
+Source4:        <A HREF="http://dl.sf.net/synce/synce-librapi2-%{version">http://dl.sf.net/synce/synce-librapi2-%{version</A>}.tar.gz
+Source5:        <A HREF="http://dl.sf.net/synce/libmimedir-0.4.tar.gz">http://dl.sf.net/synce/libmimedir-0.4.tar.gz</A>
+Source6:        synce.dev
+Source7:        synce-README.Fedora
+Patch0:         synce-rra-Makefile.patch
+Patch1:         synce-rra-devel.patch
+BuildRoot:      %{_tmppath}/%{name}-%{version}-%{release}-root-%(%{__id_u} -n)
+
+BuildRequires:  automake
+BuildRequires:  libtool
+
+Requires: ppp
+
+%description
+The purpose of the SynCE project is to provide a means of
+communication with a Windows CE device from a computer running Linux,
+FreeBSD or a similar operating system. The SynCE project homepage is
+available here: <A HREF="http://synce.sourceforge.net/">http://synce.sourceforge.net/</A>
+
+%package devel
+Summary: Development libraries and header files for SynCE
+Group: Development
+Requires: %{name} = %{version}-%{release}
+
+%description devel
+This package contains the header files and link libraries for SynCE
+application development. SynCE provides support for communication
+between a Windows CE device (PDA, smart phone) and a Linux machine.
+
+For more details on the SynCE project, please refer to the project's
+homepage at <A HREF="http://synce.sourceforge.net/">http://synce.sourceforge.net/</A>
+
+%prep
+%setup -q -c -a 1 -a 2 -a 3 -a 4 -a 5
+%patch0
+%patch1
+
+%build
+# build libsynce
+cd synce-libsynce-%{version}
+%configure --disable-static --disable-rpath
+make
+SYNCEINC=&quot;$(pwd)/lib&quot;
+SYNCELIB=&quot;$(pwd)/lib/.libs&quot;
+cd ..
+# build dccm
+cd synce-dccm-%{version}
+%configure \
+    --with-libsynce-include=&quot;${SYNCEINC}&quot; \
+    --with-libsynce-lib=&quot;${SYNCELIB}&quot; \
+    --disable-static
+make LDFLAGS=&quot;-L${SYNCEINC}&quot;
+cd ..
+# build librapi2
+cd synce-librapi2-%{version}
+%configure \
+    --with-libsynce-include=&quot;${SYNCEINC}&quot; \
+    --with-libsynce-lib=&quot;${SYNCELIB}&quot; \
+    --disable-static \
+    --disable-rpath
+make LDFLAGS=&quot;-L${SYNCEINC}&quot;
+RAPI2INC=&quot;$(pwd)/src&quot;
+RAPI2LIB=&quot;$(pwd)/src/.libs&quot;
+cd ..
+# build libmimedir
+cd libmimedir-0.4
+CFLAGS=&quot;$RPM_OPT_FLAGS -fPIC&quot; %configure 
+make
+# build shared libmimedir to work around x86_64 build error
+ld --shared --whole-archive libmimedir.a -o libmimedir.so
+rm libmimedir.a
+MIMEDIRINC=&quot;$(pwd)&quot;
+MIMEDIRLIB=&quot;$(pwd)&quot;
+cd ..
+# build rra
+cd synce-rra-%{version}
+./bootstrap
+%configure \
+    --with-libsynce-include=&quot;${SYNCEINC}&quot; \
+    --with-libsynce-lib=&quot;${SYNCELIB}&quot; \
+    --with-librapi2-include=&quot;${RAPI2INC}&quot; \
+    --with-librapi2-lib=&quot;${RAPI2LIB}&quot; \
+    --with-libmimedir-include=&quot;${MIMEDIRINC}&quot; \
+    --with-libmimedir-lib=&quot;${MIMEDIRLIB}&quot; \
+    --disable-static \
+    --disable-rpath
+
+make LDFLAGS=&quot;-L${SYNCEINC} -L${RAPI2INC} -L${MIMEDIRLIB} --shared&quot;
+cd ..
+# build the serial support
+cd synce-serial-%{version}
+%configure
+make
+cd ..
+
+%install
+rm -rf $RPM_BUILD_ROOT
+for module in libsynce dccm librapi2 rra serial ; do
+    cd synce-${module}-%{version}
+    %makeinstall
+    cd ..
+done
+
+install -m 775 libmimedir-0.4/libmimedir.so $RPM_BUILD_ROOT/%{_libdir}/libmimedir.so
+
+find $RPM_BUILD_ROOT -type f -name &quot;*.la&quot; -exec rm -f {} ';'
+
+# Enable autoconnect
+install -p -m 755 -D %{SOURCE6} $RPM_BUILD_ROOT/%{_sysconfdir}/udev/scripts/synce.dev
+mkdir -p $RPM_BUILD_ROOT/%{_sysconfdir}/dev.d/ipaq/
+ln -s ../../udev/scripts/synce.dev $RPM_BUILD_ROOT/%{_sysconfdir}/dev.d/ipaq/synce.dev
+mkdir -p $RPM_BUILD_ROOT/%{_sysconfdir}/udev/rules.d/
+echo 'DRIVER==&quot;ipaq&quot;, NAME=&quot;ipaq&quot;, SYMLINK+=&quot;ttyUSB%%n&quot;' &gt; \
+    $RPM_BUILD_ROOT/%{_sysconfdir}/udev/rules.d/50-ipaq.rules
+cp %{SOURCE7} README.Fedora
+
+%clean
+rm -rf $RPM_BUILD_ROOT
+
+%post -p /sbin/ldconfig
+
+%postun -p /sbin/ldconfig
+
+%files
+%defattr(-,root,root,0755)
+%doc README.Fedora
+
+#libsynce
+%{_libdir}/libsynce.so.0*
+%{_mandir}/man1/synce.*
+#librapi2
+%{_bindir}/pcp
+%{_bindir}/pls
+%{_bindir}/pmkdir
+%{_bindir}/pmv
+%{_bindir}/prm
+%{_bindir}/prmdir
+%{_bindir}/prun
+%{_bindir}/pstatus
+%{_bindir}/rapiconfig
+%{_bindir}/synce-install-cab
+%{_bindir}/synce-list-programs
+%{_bindir}/synce-registry
+%{_bindir}/synce-remove-program
+%{_libdir}/librapi.so.2*
+%{_mandir}/man1/pcp.*
+%{_mandir}/man1/pls.*
+%{_mandir}/man1/pmkdir.*
+%{_mandir}/man1/pmv.*
+%{_mandir}/man1/prm.*
+%{_mandir}/man1/prmdir.*
+%{_mandir}/man1/prun.*
+%{_mandir}/man1/pstatus.*
+%{_mandir}/man1/synce-install-cab.*
+%{_mandir}/man1/rapiconfig.*
+%{_mandir}/man1/synce-list-programs.*
+%{_mandir}/man1/synce-remove-program.*
+#rra
+%{_bindir}/synce-matchmaker
+%{_libdir}/librra.so.0*
+%{_mandir}/man1/synce-matchmaker.*
+#dccm
+%{_bindir}/dccm
+%{_bindir}/synce-sound
+%{_mandir}/man1/dccm.*
+%{_mandir}/man1/synce-sound.*
+#serial
+%{_bindir}/synce-serial-*
+%{_datadir}/synce
+%{_mandir}/man8/synce-serial-*
+#libmimedir
+%{_libdir}/libmimedir.so
+
+#autoconnect
+%{_sysconfdir}/udev/rules.d/50-ipaq.rules
+%{_sysconfdir}/udev/scripts/synce.dev
+%{_sysconfdir}/dev.d/ipaq/
+
+%files devel
+%defattr(-,root,root,-)
+%{_includedir}/*.h
+%{_libdir}/lib*.so
+%{_datadir}/aclocal/*.m4
+
+%changelog
+* Sun Aug 12 2007 Heiko Adams &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">info at fedora-blog.de</A>&gt;
+0.9.1-10
+- rebuild for rpmforge
+
+* Sat Nov 11 2006 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-9
+- fix udev script (#215129, #208517)
+
+* Fri Sep 15 2006 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-8
+- FE6 rebuild
+
+* Thu Feb 16 2006 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-7
+- Rebuild for Fedora Extras 5
+- Fix cflags and build on i386
+
+* Mon Nov 28 2005 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-6
+- move fedora readme to external file
+
+* Mon Nov 28 2005 Aurelien Bompard &lt;gauret[AT]free.fr&gt; 0.9.1-5
+- enable automatic connection of the device
+
+* Tue Sep 27 2005 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-4
+- workaround for libmimedir problem an devel
+
+* Sun Aug 21 2005 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-3
+- fix dep problem
+- add missing ldconfig
+
+* Sun Aug 21 2005 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-2
+- reenable x86_64 (#148003)
+- disable static libs
+
+* Sat Aug 20 2005 Andreas Bierfert &lt;andreas.bierfert[AT]lowlatency.de&gt;
+0.9.1-1
+- beautify specfile
+- upgrade to new version
+
+* Fri Apr  1 2005 Warren Togami &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">wtogami at redhat.com</A>&gt; 0.9.0-3
+- ownership/perms fix (#150016 jpo)
+- libmimedir-0.4
+
+* Thu Mar 24 2005 Thorsten Leemhuis &lt;fedora[at]leemhuis[dot]info&gt; 0.9.0-2
+- ExcludeArch: x86_64; see #148003
+
+* Thu Aug 19 2004 Cristian Gafton &lt;<A HREF="http://lists.repoforge.org/mailman/listinfo/commits">gafton at redhat.com</A>&gt; 0.9.0-1
+- build new spec file from scratch that groups all the little modules
+  together to avoid the proliferation of another half dozen single
+  purpose packages...
+


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004513.html">[svn] r5714 - in trunk/rpms: . claws-mail-plugins
</A></li>
	<LI>Next message: <A HREF="004515.html">[svn] r5716 - trunk/rpms/claws-mail-plugins
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4514">[ date ]</a>
              <a href="thread.html#4514">[ thread ]</a>
              <a href="subject.html#4514">[ subject ]</a>
              <a href="author.html#4514">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="http://lists.repoforge.org/mailman/listinfo/commits">More information about the commits
mailing list</a><br>
</body></html>
